{
    "id": "SOLR-2017",
    "title": "extractingUpdateRequestHandler waits indefinitely, while simultaneous commit never finishes",
    "details": {
        "affect_versions": "4.0-ALPHA",
        "status": "Closed",
        "fix_versions": [],
        "components": [
            "update"
        ],
        "type": "Bug",
        "priority": "Major",
        "labels": "",
        "resolution": "Cannot Reproduce"
    },
    "description": "While trying to index data using extractingUpdateRequestHandler on a trunk build I made last night, I managed to trigger what appears to be a merge problem twice.  Symptom is that updates are blocked, while the commit never finishes.  CPU is utilized 100%.  I cannot give a complete, single thread dump, but I managed to get two, which are overlapping, which are attached.  If there's a quick response to this ticket I can generate more.\n\nFirst thread dump:\n\n...\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x29642f00> (a java.util.TaskQueue)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n\tlocked <0x29642f00> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\n\n\"25615188@qtp-20051738-9 - Acceptor0 SocketConnector@0.0.0.0:8983\" prio=6 tid=0x 03076800 nid=0x19ac runnable [0x034df000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)\n\n\tlocked <0x29770448> (a java.net.SocksSocketImpl)\n        at java.net.ServerSocket.implAccept(ServerSocket.java:453)\n        at java.net.ServerSocket.accept(ServerSocket.java:421)\n        at org.mortbay.jetty.bio.SocketConnector.accept(SocketConnector.java:99)\n\n\n\n        at org.mortbay.jetty.AbstractConnector$Acceptor.run(AbstractConnector.ja\nva:707)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:582)\n\n\"11245030@qtp-20051738-8\" prio=6 tid=0x03075000 nid=0x10b4 waiting on condition [0x0348e000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n\n\tparking to wait for  <0x2970bad8> (a java.util.concurrent.locks.Reentr\nantReadWriteLock$NonfairSync)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInt\nerrupt(AbstractQueuedSynchronizer.java:747)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireShared\n(AbstractQueuedSynchronizer.java:877)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireShared(A\nbstractQueuedSynchronizer.java:1197)\n        at java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock.lock(Reent\nrantReadWriteLock.java:594)\n        at org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandle\nr2.java:211)\n        at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpd\nateProcessorFactory.java:61)\n        at org.apache.solr.handler.extraction.ExtractingDocumentLoader.doAdd(Ext\nractingDocumentLoader.java:120)\n        at org.apache.solr.handler.extraction.ExtractingDocumentLoader.addDoc(Ex\ntractingDocumentLoader.java:125)\n        at org.apache.solr.handler.extraction.ExtractingDocumentLoader.load(Extr\nactingDocumentLoader.java:195)\n        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(Co\nntentStreamHandlerBase.java:54)\n        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandl\nerBase.java:131)\n        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handle\nRequest(RequestHandlers.java:237)\n        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1323)\n        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter\n.java:337)\n        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilte\nr.java:240)\n        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(Servlet\nHandler.java:1157)\n        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:3\n88)\n        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.jav\na:216)\n        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:1\n82)\n        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:7\n65)\n        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\n\n\n\n        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHand\nlerCollection.java:230)\n        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.\njava:114)\n        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:1\n52)\n        at org.mortbay.jetty.Server.handle(Server.java:326)\n        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:54\n2)\n        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpCo\nnnection.java:923)\n        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)\n        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)\n        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)\n        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.\njava:228)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:582)\n\n\"25377109@qtp-20051738-7\" prio=6 tid=0x03073800 nid=0x11c0 in Object.wait() [0x0 343e000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x2c802ee0> (a org.apache.solr.update.SolrIndexWriter)\n        at org.apache.lucene.index.IndexWriter.doWait(IndexWriter.java:4270)\n\tlocked <0x2c802ee0> (a org.apache.solr.update.SolrIndexWriter)\n        at org.apache.lucene.index.IndexWriter.waitForMerges(IndexWriter.java:27\n81)\n\tlocked <0x2c802ee0> (a org.apache.solr.update.SolrIndexWriter)\n        at org.apache.lucene.index.IndexWriter.finishMerges(IndexWriter.java:276\n9)\n\tlocked <0x2c802ee0> (a org.apache.solr.update.SolrIndexWriter)\n        at org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:17\n42)\n        at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1695)\n        at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1659)\n        at org.apache.solr.update.SolrIndexWriter.close(SolrIndexWriter.java:231\n)\n        at org.apache.solr.update.DirectUpdateHandler2.closeWriter(DirectUpdateH\nandler2.java:181)\n        at org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandle\nr2.java:409)\n        at org.apache.solr.update.processor.RunUpdateProcessor.processCommit(Run\nUpdateProcessorFactory.java:85)\n        at org.apache.solr.handler.RequestHandlerUtils.handleCommit(RequestHandl\nerUtils.java:107)\n        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(Co\nntentStreamHandlerBase.java:48)\n        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandl\nerBase.java:131)\n        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handle\nRequest(RequestHandlers.java:237)\n        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1323)\n        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter\n.java:337)\n        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilte\nr.java:240)\n        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(Servlet\nHandler.java:1157)\n        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:3\n88)\n        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.jav\na:216)\n        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:1\n82)\n        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:7\n65)\n        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\n\n\n\n        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHand\nlerCollection.java:230)\n        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.\njava:114)\n        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:1\n52)\n        at org.mortbay.jetty.Server.handle(Server.java:326)\n        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:54\n2)\n        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpCo\nnnection.java:923)\n        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)\n        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)\n        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)\n        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.\njava:228)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:582)\n\n\"15232416@qtp-20051738-6\" prio=6 tid=0x0309ac00 nid=0x1458 in Object.wait() [0x0 33ef000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295ece00> (a org.mortbay.thread.QueuedThreadPool$PoolThr\nead)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:625)\n\tlocked <0x295ece00> (a org.mortbay.thread.QueuedThreadPool$PoolThread)\n\n\n\n\n\"381299@qtp-20051738-5\" prio=6 tid=0x03099800 nid=0x19ec in Object.wait() [0x033 9f000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295ece70> (a org.mortbay.thread.QueuedThreadPool$PoolThr\nead)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:625)\n\tlocked <0x295ece70> (a org.mortbay.thread.QueuedThreadPool$PoolThread)\n\n\n\n\n\"2583282@qtp-20051738-4\" prio=6 tid=0x03095800 nid=0x18dc in Object.wait() [0x03 34f000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295ecee0> (a org.mortbay.thread.QueuedThreadPool$PoolThr\nead)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:625)\n\tlocked <0x295ecee0> (a org.mortbay.thread.QueuedThreadPool$PoolThread)\n\n\n\n\n\"31289430@qtp-20051738-3\" prio=6 tid=0x030a2800 nid=0x10c4 in Object.wait() [0x0 32ff000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295ecf50> (a org.mortbay.thread.QueuedThreadPool$PoolThr\nead)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:625)\n\tlocked <0x295ecf50> (a org.mortbay.thread.QueuedThreadPool$PoolThread)\n\n\n\n\n\"9004539@qtp-20051738-2\" prio=6 tid=0x03077400 nid=0x1a38 in Object.wait() [0x03 2af000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295ecfc0> (a org.mortbay.thread.QueuedThreadPool$PoolThr\nead)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:625)\n\tlocked <0x295ecfc0> (a org.mortbay.thread.QueuedThreadPool$PoolThread)\n\n\n\n\n\"30971263@qtp-20051738-1\" prio=6 tid=0x0308f800 nid=0x1ae0 in Object.wait() [0x0 325f000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295ed030> (a org.mortbay.thread.QueuedThreadPool$PoolThr\nead)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:625)\n\tlocked <0x295ed030> (a org.mortbay.thread.QueuedThreadPool$PoolThread)\n\n\n\n\n\"17758476@qtp-20051738-0\" prio=6 tid=0x03094800 nid=0x1d58 in Object.wait() [0x0 320f000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295ed0a0> (a org.mortbay.thread.QueuedThreadPool$PoolThr\nead)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:625)\n\tlocked <0x295ed0a0> (a org.mortbay.thread.QueuedThreadPool$PoolThread)\n\n\n\n\n\"Timer-0\" daemon prio=6 tid=0x0308a400 nid=0x1d68 in Object.wait() [0x031bf000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295ed180> (a java.util.TaskQueue)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n\tlocked <0x295ed180> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\n\n\"Low Memory Detector\" daemon prio=6 tid=0x02c1d400 nid=0x122c runnable [0x000000 00]\n   java.lang.Thread.State: RUNNABLE\n\n\"CompilerThread0\" daemon prio=10 tid=0x02c17400 nid=0x1f94 waiting on condition [0x00000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"Attach Listener\" daemon prio=10 tid=0x02c15c00 nid=0x11b8 runnable [0x00000000]\n\n   java.lang.Thread.State: RUNNABLE\n\n\"Signal Dispatcher\" daemon prio=10 tid=0x02c14800 nid=0xf38 waiting on condition  [0x00000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"Finalizer\" daemon prio=8 tid=0x02c0cc00 nid=0x1408 in Object.wait() [0x02ddf000 ]\n   java.lang.Thread.State: WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x29590468> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)\n\tlocked <0x29590468> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)\n        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\n\n\"Reference Handler\" daemon prio=10 tid=0x02c0b400 nid=0x1614 in Object.wait() [0 x02d8f000]\n   java.lang.Thread.State: WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x295904f0> (a java.lang.ref.Reference$Lock)\n        at java.lang.Object.wait(Object.java:485)\n        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)\n\tlocked <0x295904f0> (a java.lang.ref.Reference$Lock)\n\n\n\n\"VM Thread\" prio=10 tid=0x02c09c00 nid=0x1cc8 runnable\n\n\"VM Periodic Task Thread\" prio=10 tid=0x02c20000 nid=0x90c waiting on condition\n\n\nJNI global references: 1236\n\nHeap\n def new generation   total 44992K, used 20928K [0x24040000, 0x27110000, 0x29590\n000)\n  eden space 40000K,  52% used [0x24040000, 0x254b0278, 0x26750000)\n  from space 4992K,   0% used [0x26c30000, 0x26c30038, 0x27110000)\n  to   space 4992K,   0% used [0x26750000, 0x26750000, 0x26c30000)\n tenured generation   total 99780K, used 74989K [0x29590000, 0x2f701000, 0x34040\n000)\n   the space 99780K,  75% used [0x29590000, 0x2decb7a8, 0x2decb800, 0x2f701000)  compacting perm gen  total 12288K, used 8833K [0x34040000, 0x34c40000, 0x380400\n00)\n   the space 12288K,  71% used [0x34040000, 0x348e0758, 0x348e0800, 0x34c40000)\n    ro space 10240K,  54% used [0x38040000, 0x385bb760, 0x385bb800, 0x38a40000)\n    rw space 12288K,  55% used [0x38a40000, 0x390df798, 0x390df800, 0x39640000)\n\n\n\nHere's the top part of a second thread dump (it doesn't all fit in one screen buffer, unfortunately):\n\n\n2010-07-27 11:55:19\nFull thread dump Java HotSpot(TM) Client VM (16.2-b04 mixed mode, sharing):\n\n\"Lucene Merge Thread #0\" daemon prio=6 tid=0x02ffc400 nid=0xba0 runnable [0x042e f000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.FileChannelImpl.size0(Native Method)\n        at sun.nio.ch.FileChannelImpl.size(FileChannelImpl.java:309)\n\n\tlocked <0x2de616d8> (a java.lang.Object)\n        at sun.nio.ch.FileChannelImpl.transferFrom(FileChannelImpl.java:597)\n        at org.apache.lucene.store.FSDirectory.copy(FSDirectory.java:476)\n        at org.apache.lucene.store.FSDirectory$FSIndexOutput.copyBytes(FSDirecto\nry.java:513)\n        at org.apache.lucene.index.FieldsWriter.addRawDocuments(FieldsWriter.jav\na:210)\n        at org.apache.lucene.index.SegmentMerger.copyFieldsWithDeletions(Segment\nMerger.java:392)\n        at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:\n329)\n        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:153)\n        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4024\n)\n        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3618)\n        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMe\nrgeScheduler.java:339)\n        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Conc\nurrentMergeScheduler.java:407)\n\n\n\n\"DestroyJavaVM\" prio=6 tid=0x003b6800 nid=0x1e34 waiting on condition [0x0000000 0]\n   java.lang.Thread.State: RUNNABLE\n\n\"Timer-2\" daemon prio=6 tid=0x0363b400 nid=0x1e2c in Object.wait() [0x03a9f000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x297703f0> (a java.util.TaskQueue)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n\tlocked <0x297703f0> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\n\n\"pool-1-thread-1\" prio=6 tid=0x02cb1400 nid=0x1760 waiting on condition [0x03a3f 000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n\n\tparking to wait for  <0x296acc88> (a java.util.concurrent.locks.Abstra\nctQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject\n.await(AbstractQueuedSynchronizer.java:1925)\n        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.jav\na:399)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.ja\nva:947)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor\n.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\n\n\"Timer-1\" daemon prio=6 tid=0x036de000 nid=0x1130 in Object.wait() [0x039df000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n\n\twaiting on <0x29642f00> (a java.util.TaskQueue)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n\tlocked <0x29642f00> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\n\n\"25615188@qtp-20051738-9 - Acceptor0 SocketConnector@0.0.0.0:8983\" prio=6 tid=0x 03076800 nid=0x19ac runnable [0x034df000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)\n\n\tlocked <0x29770448> (a java.net.SocksSocketImpl)\n        at java.net.ServerSocket.implAccept(ServerSocket.java:453)\n        at java.net.ServerSocket.accept(ServerSocket.java:421)\n        at org.mortbay.jetty.bio.SocketConnector.accept(SocketConnector.java:99)\n\n\n\n        at org.mortbay.jetty.AbstractConnector$Acceptor.run(AbstractConnector.ja\nva:707)\n        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j\nava:582)\n\n\"11245030@qtp-20051738-8\" prio=6 tid=0x03075000 nid=0x10b4 waiting on condition [0x0348e000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n\n\tparking to wait for  <0x2970bad8> (a java.util.concurrent.locks.Reentr\nantReadWriteLock$NonfairSync)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInt\nerrupt(AbstractQueuedSynchronizer.java:747)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireShared\n(AbstractQueuedSynchronizer.java:877)\n...",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "author": "Karl Wright",
            "id": "comment-12892834",
            "date": "2010-07-27T16:20:37+0000",
            "content": "My fingers are apparently autonomous beings.  "
        },
        {
            "author": "Karl Wright",
            "id": "comment-12892856",
            "date": "2010-07-27T17:00:48+0000",
            "content": "For those who think the merge is just taking a long time, a followup thread dump yields:\n\n\"Lucene Merge Thread #0\" daemon prio=6 tid=0x02ffc400 nid=0xba0 runnable [0x042e\nf000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.FileChannelImpl.size0(Native Method)\n        at sun.nio.ch.FileChannelImpl.size(FileChannelImpl.java:309)\n\n\tlocked <0x2de616d8> (a java.lang.Object)\n        at sun.nio.ch.FileChannelImpl.transferFrom(FileChannelImpl.java:597)\n        at org.apache.lucene.store.FSDirectory.copy(FSDirectory.java:476)\n        at org.apache.lucene.store.FSDirectory$FSIndexOutput.copyBytes(FSDirecto\nry.java:513)\n        at org.apache.lucene.index.FieldsWriter.addRawDocuments(FieldsWriter.jav\na:210)\n        at org.apache.lucene.index.SegmentMerger.copyFieldsWithDeletions(Segment\nMerger.java:392)\n        at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:\n329)\n        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:153)\n        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4024\n)\n        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3618)\n        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMe\nrgeScheduler.java:339)\n        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Conc\nurrentMergeScheduler.java:407)\n\n\n\n\n... which is basically the same as before.\n "
        },
        {
            "author": "Mark Miller",
            "id": "comment-12894273",
            "date": "2010-07-31T13:06:09+0000",
            "content": "Interesting thing is that code was recently changed "
        },
        {
            "author": "Michael McCandless",
            "id": "comment-12894276",
            "date": "2010-07-31T13:42:06+0000",
            "content": "Yes this code has been in flux very recently \u2013 Karl which exact Solr/Lucene rev are you using? "
        },
        {
            "author": "Karl Wright",
            "id": "comment-12894497",
            "date": "2010-08-02T08:50:58+0000",
            "content": "I'm using a version of trunk from (roughly) July 26. "
        },
        {
            "author": "Alexandre Rafalovitch",
            "id": "comment-15539604",
            "date": "2016-10-02T02:55:40+0000",
            "content": "Alpha code issues from several releases ago. If this happens again against master or even stable version of Solr, a new case can be created. "
        }
    ]
}