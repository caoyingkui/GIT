{
    "id": "SOLR-5036",
    "title": "Solr Ref Guide updates for Solr 4.4",
    "details": {
        "affect_versions": "None",
        "status": "Resolved",
        "fix_versions": [],
        "components": [
            "documentation"
        ],
        "type": "Improvement",
        "priority": "Major",
        "labels": "",
        "resolution": "Fixed"
    },
    "description": "In response to Hoss' email about updating the Solr Ref Guide, I thought it would be helpful if I went through the CHANGES.txt file and noted what I think might need an update (or a new page) and what pages should be reviewed for each change. I hope this helps those who aren't yet fully versed with the way it's organized.\n\nI commented on every item in CHANGES.txt, so I'll post my suggestions in a couple of comments. Many items (like bug fixes) don't really need updates, but more eyes on that would be helpful.",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "author": "Cassandra Targett",
            "id": "comment-13706362",
            "date": "2013-07-11T22:37:23+0000",
            "content": "I went through a CHANGES.txt from 7/10/13. My suggestions prefaced with \"CT:\"\n\nNew Features\n----------------------\n\n\n\tSOLR-3251: Dynamically add fields to schema. (Steve Rowe, Robert Muir, yonik)\nCT: Add to https://cwiki.apache.org/confluence/display/solr/Schema+API\n\n\n\n\n\tSOLR-4761, SOLR-4976: Add option to plugin a merged segment warmer into solrconfig.xml.\n  Info about segments warmed in the background is available via infostream.\n  (Mark Miller, Ryan Ernst, Mike McCandless, Robert Muir)\nCT: Add to https://cwiki.apache.org/confluence/display/solr/IndexConfig+in+SolrConfig\n\n\n\n\n\tSOLR-3240: Add \"spellcheck.collateMaxCollectDocs\" option so that when testing\n  potential Collations against the index, SpellCheckComponent will only collect\n  n documents, thereby estimating the hit-count.  This is a performance optimization\n  in cases where exact hit-counts are unnecessary.  Also, when \"collateExtendedResults\"\n  is false, this optimization is always made (James Dyer).\nCT: Add to https://cwiki.apache.org/confluence/display/solr/Spell+Checking\n\n\n\n\n\tSOLR-4785: New MaxScoreQParserPlugin returning max() instead of sum() of terms (janhoy)\nCT: Add to https://cwiki.apache.org/confluence/display/solr/Other+Parsers\n\n\n\n\n\tSOLR-4234: Add support for binary files in ZooKeeper. (Eric Pugh via Mark Miller)\nCT: not needed probably\n\n\n\n\n\tSOLR-4048: Add findRecursive method to NamedList. (Shawn Heisey)\nCT: not needed probably\n\n\n\n\n\tSOLR-4228: SolrJ's SolrPing object has new methods for ping, enable, and\n  disable. (Shawn Heisey, hossman, Steve Rowe)\nCT: probably does not need to be mentioned only because the Ref Guide has poor coverage of SolrJ generally and this would be an odd detail to add. A review of https://cwiki.apache.org/confluence/display/solr/Using+SolrJ.\n\n\n\n\n\tSOLR-4893: Extend FieldMutatingUpdateProcessor.ConfigurableFieldNameSelector\n  to enable checking whether a field matches any schema field.  To select field\n  names that don't match any fields or dynamic fields in the schema, add\n  <bool name=\"fieldNameMatchesSchemaField\">false</bool> to an update\n  processor's configuration in solrconfig.xml.  (Steve Rowe, hossman)\nCT: UpdateRequestProcessors are also not covered very deeply in the Solr Ref Guide, so this also probably doesn't need to be mentioned until more detail is added.\n\n\n\n\n\tSOLR-4921: Admin UI now supports adding documents to Solr (gsingers, steffkes)\nCT: Add a new page under https://cwiki.apache.org/confluence/display/solr/Core-Specific+Tools\n\n\n\n\n\tSOLR-4916: Add support to write and read Solr index files and transaction log\n  files to and from HDFS. (phunt, Mark Miller, Greg Chanan)\nCT: Without studying this more, it's hard to know where this should go. It's not really SolrCloud, and it's not really a client, but depending on why it's being done it could overlap with either...If someone writes up what you'd tell someone about using it, I could give a better idea of where it fits in the existing page organization (if it does).\n\n\n\n\n\tSOLR-4892: Add FieldMutatingUpdateProcessorFactory subclasses\n  Parse\n{Date,Integer,Long,Float,Double,Boolean}\nUpdateProcessorFactory. These\n  factories have a default selector that matches all fields that either don\u2019t\n  match any schema field, or are in the schema with the corresponding\n  typeClass. If they see a value that is not a CharSequence, or can't parse\n  the value, they leave it as is. For multi-valued fields, these processors\n  will not convert any values unless all are first successfully parsed, or \n  already are instances of the target class. Ordering the processors, e.g.\n  [Boolean, Long, Double, Date] will allow e.g. values [\"2\", \"5\", \"8.6\"] to\n  be left alone by the Boolean and Long processors, but then converted by the\n  Double processor.  (Steve Rowe, hossman)\nCT: Again, UpdateRequestProcessors are not really covered in the Solr Ref Guide, so this also probably doesn't need to be mentioned until more detail is added.\n\n\n\n\n\tSOLR-4972: Add PUT command to ZkCli tool. (Roman Shaposhnik via Mark Miller)\nCT: Add to https://cwiki.apache.org/confluence/display/solr/Command+Line+Utilities\n\n\n\n\n\tSOLR-4973: Adding getter method for defaultCollection on CloudSolrServer.\n  (Furkan KAMACI via Mark Miller)\nCT: Not sure this needs to be added.\n\n\n\n\n\tSOLR-4897: Add solr/example/example-schemaless/, an example config set\n  for schemaless mode. (Steve Rowe)\nCT: Schemaless in general needs to be added. The most likely place today is a new page under https://cwiki.apache.org/confluence/display/solr/Documents%2C+Fields%2C+and+Schema+Design\n\n\n\n\n\tSOLR-4655: Add option to have Overseer assign generic node names so that\n  new addresses can host shards without naming confusion. (Mark Miller, Anshum Gupta)\nCT: I think this only needs to be added to any new content for solr.xml at https://cwiki.apache.org/confluence/display/solr/Core+Admin+and+Configuring+solr.xml\n\n\n\n\n\tSOLR-4977: Add option to send IndexWriter's infostream to the logging system.\n  (Ryan Ernst via Robert Muir)\nCT: Add to https://cwiki.apache.org/confluence/display/solr/IndexConfig+in+SolrConfig\n\n\n\n\n\tSOLR-4693: A \"deleteshard\" collections API that unloads all replicas of a given\n  shard and then removes it from the cluster state. It will remove only those shards\n  which are INACTIVE or have no range (created for custom sharding).\n  (Anshum Gupta, shalin)\nCT: Add to https://cwiki.apache.org/confluence/display/solr/Collections+API\n\n\n\n\n\tSOLR-5003: CSV Update Handler supports optionally adding the line number/row id to\n  a document (gsingers)\nCT: https://cwiki.apache.org/confluence/display/solr/Uploading+Data+with+Index+Handlers (appears already done)\n\n\n\n\n\tSOLR-5010: Add support for creating copy fields to the Fields REST API (gsingers)\nCT: Add to https://cwiki.apache.org/confluence/display/solr/Schema+API\n\n "
        },
        {
            "author": "Cassandra Targett",
            "id": "comment-13706364",
            "date": "2013-07-11T22:38:20+0000",
            "content": "The section Upgrading from Solr 4.3.0\n----------------------\n\n\n\tTieredMergePolicy and the various subtypes of LogMergePolicy no longer have\n  an explicit \"setUseCompoundFile\" method.  Instead the behavior of new \n  segments is determined by the IndexWriter configuration, and the MergePolicy \n  is only consulted to determine if merge segements should use the compound \n  file format (based on the value of \"setNoCFSRatio\").  If you have explicitly \n  configured one of these classes using <mergePolicy> and include an init arg \n  like this...\n     <bool name=\"useCompoundFile\">true</bool>\n  ...this will now be treated as if you specified...\n     <useCompoundFile>true</useCompoundFile> \n  ...directly on the <indexConfig> (overriding any value already set using that\n  syntax) and a warning will be logged to updated your configuration.  Users \n  with an explicitly declared <mergePolicy> are encouraged to review the \n  current javadocs for their MergePolicy subclass and review their configured \n  options carefully.  See SOLR-4941, SOLR-4934 and LUCENE-5038 for more \n  information.\nCT: Add to any upgrade notes and update https://cwiki.apache.org/confluence/display/solr/IndexConfig+in+SolrConfig\n\n\n\n\n\tSOLR-4778: The signature of LogWatcher.registerListener has changed, from\n  (ListenerConfig, CoreContainer) to (ListenerConfig).  Users implementing their\n  own LogWatcher classes will need to change their code accordingly.\nCT: Add to any upgrade notes.\n\n\n\n\n\tLUCENE-5063: ByteField and ShortField have been deprecated and will be removed\n  in 5.0. If you are still using these field types, you should migrate your\n  fields to TrieIntField.\nCT: Update https://cwiki.apache.org/confluence/display/solr/Field+Types+Included+with+Solr\n\n "
        },
        {
            "author": "Cassandra Targett",
            "id": "comment-13706367",
            "date": "2013-07-11T22:39:07+0000",
            "content": "Two sections here:\n\n\nOptimizations\n----------------------\n\n\n\tSOLR-4923: Commit to all nodes in a collection in parallel rather than locally and\n  then to all other nodes. (hossman, Ricardo Merizalde, Mark Miller)\nCT: no update needed\n\n\n\n\n\tSOLR-3838: Admin UI - Multiple filter queries are not supported in Query UI (steffkes)\nCT: Update https://cwiki.apache.org/confluence/display/solr/Query+Screen to mention multiple possible fq; update screenshot (minor)\n\n\n\n\n\tSOLR-4719 : Admin UI - Default to wt=json on Query-Screen (steffkes)\nCT: Update default for wt at https://cwiki.apache.org/confluence/display/solr/Query+Screen. Also, all pages under https://cwiki.apache.org/confluence/display/solr/Core-Specific+Tools should be re-ordered to parallel the order of the screens in the Solr Admin.\n\n\n\n\n\tSOLR-4611: Admin UI - Analysis-Urls with empty parameters create empty result table\n  (steffkes)\nCT: no update needed\n\n\n\n\n\tSOLR-4955: Admin UI - Show address bar on top for Schema + Config (steffkes)\nCT: (very minor) update screenshots\n\n\n\n\n\tSOLR-4412: New parameter langid.lcmap to map detected language code to be placed\n  in \"language\" field (janhoy)\nCT: Update https://cwiki.apache.org/confluence/display/solr/Detecting+Languages+During+Indexing\n\n\n\n\n\tSOLR-4815: Admin-UI - DIH: Let \"commit\" be checked by default (steffkes)\nCT: the DIH screen doesn't really describe default parameters, so no update needed.\n\n\n\n\n\tSOLR-5002: optimize numDocs(Query,DocSet) when filterCache is null (Robert Muir)\nCT: no update needed\n\n\n\n\n\tSOLR-5012: optimize search with filter when filterCache is null (Robert Muir)\nCT: no update needed\n\n\n\nOther Changes\n----------------------\n\n\n\tSOLR-4737: Update Guava to 14.0.1 (Mark Miller)\nCT: no update needed\n\n\n\n\n\tSOLR-2079: Add option to pass HttpServletRequest in the SolrQueryRequest context map.\n  (Tom\u00e1s Fern\u00e1ndez L\u00f6bbe via Robert Muir)\nCT: Update https://cwiki.apache.org/confluence/display/solr/RequestDispatcher+in+SolrConfig\n\n\n\n\n\tSOLR-4738: Update Jetty to 8.1.10.v20130312 (Mark Miller, Robert Muir)\nCT: no update needed\n\n\n\n\n\tSOLR-4749: Clean up and refactor CoreContainer code around solr.xml and SolrCore\n  management. (Mark Miller)\nCT: no update needed\n\n\n\n\n\tSOLR-4547: Move logging of filenames on commit from INFO to DEBUG.\n  (Shawn Heisey, hossman)\nCT: no update needed\n\n\n\n\n\tSOLR-4757: Change the example to use the new solr.xml format and core\n  discovery by directory structure. (Mark Miller)\nCT: There is a page on solr.xml: https://cwiki.apache.org/confluence/display/solr/Core+Admin+and+Configuring+solr.xml. This should be updated to show the new format and still include information on the old format for anyone with the old format who uses this guide for reference.\n\n\n\n\n\tSOLR-4759: Velocity (/browse) template cosmetic cleanup.\n  (Mark Bennett, ehatcher)\nCT: Update https://cwiki.apache.org/confluence/display/solr/Overview+of+Searching+in+Solr not for this information (maybe update screenshot), but the info about it being enabled out of the box in Solr is incorrect. That page should also probably be moved to its own page instead of buried on that page.\n\n\n\n\n\tSOLR-4778: LogWatcher init code moved out of CoreContainer (Alan Woodward)\nCT: no update needed\n\n\n\n\n\tSOLR-4784: Make class LuceneQParser public (janhoy)\nCT: no update needed\n\n\n\n\n\tSOLR-4448: Allow the solr internal load balancer to be more easily pluggable.\n  (Philip Hoy via Robert Muir)\n  CT: no update needed\n\n\n\n\n\tSOLR-4224: Refactor JavaBinCodec input stream definition to enhance reuse.\n  (phunt via Mark Miller)\nCT: no update needed\n\n\n\n\n\tSOLR-4931: SolrDeletionPolicy onInit and onCommit methods changed to override\n  exact signatures (with generics) from IndexDeletionPolicy (shalin)\nCT: no update needed\n\n\n\n\n\tSOLR-4942: test improvements to randomize use of compound files (hosman)\nCT: no update needed\n\n\n\n\n\tSOLR-4966: CSS, JS and other files in webapp without license (uschindler,\n  steffkes)\nCT: no update needed\n\n\n\n\n\tSOLR-4986: Upgrade to Tika 1.4 (Markus Jelsma via janhoy)\nCT: Update Tika version at https://cwiki.apache.org/confluence/display/solr/Uploading+Data+with+Solr+Cell+using+Apache+Tika\n\n\n\n\n\tSOLR-4948, SOLR-5009: Tidied up CoreContainer construction logic.\n  (Alan Woodward, Uwe Schindler, Steve Rowe)\nCT: no update needed\n\n "
        },
        {
            "author": "Cassandra Targett",
            "id": "comment-13706368",
            "date": "2013-07-11T22:40:33+0000",
            "content": "I didn't see anything in the Bug Fixes section of CHANGES.txt that needed to be updated. "
        },
        {
            "author": "Hoss Man",
            "id": "comment-13707563",
            "date": "2013-07-12T23:58:38+0000",
            "content": "I've updated some low hanging fruit from Cassandra's list...\n\n\n\ttika 1.4 note: https://cwiki.apache.org/confluence/display/solr/Uploading+Data+with+Solr+Cell+using+Apache+Tika\n\tnew section about Velocity and new page about /browse\n\t\n\t\thttps://cwiki.apache.org/confluence/display/solr/Response+Writers#ResponseWriters-VelocityResponseWriter\n\t\thttps://cwiki.apache.org/confluence/display/solr/Velocity+Search+UI\n\t\n\t\n\tmarked ByteField and ShortField deprecated: https://cwiki.apache.org/confluence/display/solr/Field+Types+Included+with+Solr\n\tinfostream: https://cwiki.apache.org/confluence/display/solr/IndexConfig+in+SolrConfig\n\n "
        },
        {
            "author": "Hoss Man",
            "id": "comment-13710096",
            "date": "2013-07-16T19:08:44+0000",
            "content": "I made some more progress on Cassandra's list...\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/RequestDispatcher+in+SolrConfig\n\t\n\t\tSOLR-2079 - addHttpRequestToContext verbage\n\t\n\t\n\thttps://cwiki.apache.org/confluence/display/solr/Query+Screen\n\t\n\t\tSOLR-3838 - fq verbage and updated creenshot\n\t\tSOLR-4719 - json default verbage & updated screenshot\n\t\n\t\n\thttps://cwiki.apache.org/confluence/display/solr/Core-Specific+Tools\n\t\n\t\tupdate order of links to children and actual order of children in navigation\n\t\n\t\n\thttps://cwiki.apache.org/confluence/display/solr/IndexConfig+in+SolrConfig\n\t\n\t\tSOLR-4941, SOLR-4934 and LUCENE-5038 - already ok, page doesn't go into depth about mergePolicy, example alreayd used correct compound file syntax\n\t\tSOLR-4761: added section on mergedSegmentWarmer\n\t\n\t\n\thttps://cwiki.apache.org/confluence/display/solr/Command+Line+Utilities\n\t\n\t\tSOLR-4972: Add PUT command to ZkCli tool\n\t\n\t\n\thttps://cwiki.apache.org/confluence/display/solr/Other+Parsers\n\t\n\t\tSOLR-4785: MaxScoreQParser\n\t\n\t\n\thttps://cwiki.apache.org/confluence/display/solr/Upgrading+to+Solr+4.4\n\t\n\t\tNew page on upgrading to 4.4\n\t\tchild of https://cwiki.apache.org/confluence/display/solr/Major+Changes+from+Solr+3+to+Solr+4\n\t\tclone of https://cwiki.apache.org/confluence/display/solr/Upgrading+to+Solr+4.3\n\t\tmention SOLR-4941, SOLR-4934 and LUCENE-5038\n\t\tmention SOLR-4778 and new LogWatcher API\n\t\n\t\n\n\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/Detecting+Languages+During+Indexing\n\t\n\t\tSOLR-4412: New parameter langid.lcmap\n\t\n\t\n\n\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/Spell+Checking\n\t\n\t\tSOLR-3240: Add \"spellcheck.collateMaxCollectDocs\"\n\t\n\t\n\n\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/Documents+Screen\n\t\n\t\tAdded a basic stub page with a screenshoot\n\t\tlinked from parent page\n\t\tensured the page order was correct in navigation\n\t\n\t\n\n\n\n\n\nBut there is still a lot more that needs written \u2013 stuff below i either don't understand the new feature enough to document myself, or didn't have the energy to try to tackle because it needs a lot written about it and i don't know it well enough to have a good sense of how to go about it...\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/Core-Specific+Tools\n\t\n\t\tSOLR-4921: Admin UI now supports adding documents to Solr (gsingers, steffkes)\n\t\tstub page with screenshot exists, but it needs verbage\n\t\n\t\n\n\n\n\n\tCompletley new docs about the HDFS SolrCloud support ... somewhere....\n\t\n\t\tSOLR-4916: Add support to write and read Solr index files and transaction log files to and from HDFS. (phunt, Mark Miller, Greg Chanan)\n\t\t\n\t\t\tCT: Without studying this more, it's hard to know where this should go. It's not really SolrCloud, and it's not really a client, but depending on why it's being done it could overlap with either...If someone writes up what you'd tell someone about using it, I could give a better idea of where it fits in the existing page organization (if it does).\n\t\t\n\t\t\n\t\n\t\n\n\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/Documents%2C+Fields%2C+and+Schema+Design\n\t\n\t\tSOLR-4897: Add solr/example/example-schemaless/, an example config set for schemaless mode. (Steve Rowe)\n\t\t\n\t\t\tCT: Schemaless in general needs to be added. The most likely place today is a new page under https://cwiki.apache.org/confluence/display/solr/Documents%2C+Fields%2C+and+Schema+Design\n\t\t\n\t\t\n\t\n\t\n\n\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/Core+Admin+and+Configuring+solr.xml\n\t\n\t\tSOLR-4757: Change the example to use the new solr.xml format and core discovery by directory structure. (Mark Miller)\n\t\t\n\t\t\tCT: There is a page on solr.xml: https://cwiki.apache.org/confluence/display/solr/Core+Admin+and+Configuring+solr.xml. This should be updated to show the new format and still include information on the old format for anyone with the old format who uses this guide for reference.\n\t\t\n\t\t\n\t\tSOLR-4655: Add option to have Overseer assign generic node names so that new addresses can host shards without naming confusion. (Mark Miller, Anshum Gupta)\n\t\t\n\t\t\tCT: I think this only needs to be added to any new content for solr.xml at https://cwiki.apache.org/confluence/display/solr/Core+Admin+and+Configuring+solr.xml\n\t\t\n\t\t\n\t\n\t\n\n\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/Collections+API\n\t\n\t\tSOLR-4693: A \"deleteshard\" collections API that unloads all replicas of a given shard and then removes it from the cluster state. It will remove only those shards which are INACTIVE or have no range (created for custom sharding). (Anshum Gupta, shalin)\n\t\t\n\t\t\tCT: Add to https://cwiki.apache.org/confluence/display/solr/Collections+API\n\t\t\n\t\t\n\t\n\t\n\n\n\n\n\thttps://cwiki.apache.org/confluence/display/solr/Schema+API\n\t\n\t\tSOLR-3251: Dynamically add fields to schema. (Steve Rowe, Robert Muir, yonik)\n\t\t\n\t\t\tCT: Add to https://cwiki.apache.org/confluence/display/solr/Schema+API\n\t\t\n\t\t\n\t\tSOLR-5010: Add support for creating copy fields to the Fields REST API (gsingers)\n\t\t\n\t\t\tCT: Add to https://cwiki.apache.org/confluence/display/solr/Schema+API\n\t\t\n\t\t\n\t\n\t\n\n\n\n\n...we REALLY need other folks to jump in here and help document the features they've been working on in this release.\n\n "
        },
        {
            "author": "Shalin Shekhar Mangar",
            "id": "comment-13710106",
            "date": "2013-07-16T19:13:50+0000",
            "content": "I'll document the deleteshard changes in https://cwiki.apache.org/confluence/display/solr/Collections+API "
        },
        {
            "author": "Hoss Man",
            "id": "comment-13715580",
            "date": "2013-07-22T20:04:58+0000",
            "content": "FYI: I've taken the list of the remaining edits that need to be made, and split them all out into sub-tasks assigned to the individuals who have at one point or another told me they were working on (or planed to work on) these edits. "
        },
        {
            "author": "Steve Rowe",
            "id": "comment-13717448",
            "date": "2013-07-23T18:48:16+0000",
            "content": "Bulk move 4.4 issues to 4.5 and 5.0 "
        }
    ]
}