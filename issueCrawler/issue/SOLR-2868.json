{
    "id": "SOLR-2868",
    "title": "DistributedTermsComponentTest.testDistribSearch test failure",
    "details": {
        "affect_versions": "None",
        "status": "Closed",
        "fix_versions": [],
        "components": [],
        "type": "Bug",
        "priority": "Major",
        "labels": "",
        "resolution": "Information Provided"
    },
    "description": "with trunk r1195315, can't seem to reproduce tho\n\n    [junit] Testsuite: org.apache.solr.handler.component.DistributedTermsComponentTest\n    [junit] Testcase: testDistribSearch(org.apache.solr.handler.component.DistributedTermsComponentTest):       FAILED\n    [junit] .terms.b_t.shark!=seal (unordered or missing)\n    [junit] junit.framework.AssertionFailedError: .terms.b_t.shark!=seal (unordered or missing)\n    [junit]     at org.apache.solr.BaseDistributedSearchTestCase.compareResponses(BaseDistributedSearchTestCase.java:584)\n    [junit]     at org.apache.solr.BaseDistributedSearchTestCase.query(BaseDistributedSearchTestCase.java:337)\n    [junit]     at org.apache.solr.handler.component.DistributedTermsComponentTest.doTest(DistributedTermsComponentTest.java:50)\n    [junit]     at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:599)\n    [junit]     at org.apache.lucene.util.LuceneTestCase$2$1.evaluate(LuceneTestCase.java:615)\n    [junit]     at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:149)\n    [junit]     at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:51)\n    [junit] \n    [junit] \n    [junit] Testcase: testDistribSearch(org.apache.solr.handler.component.DistributedTermsComponentTest):       Caused an ERROR\n    [junit] java.lang.AssertionError: Some threads threw uncaught exceptions!\n    [junit] java.lang.RuntimeException: java.lang.AssertionError: Some threads threw uncaught exceptions!\n    [junit]     at org.apache.lucene.util.LuceneTestCase.tearDown(LuceneTestCase.java:744)\n    [junit]     at org.apache.solr.SolrTestCaseJ4.tearDown(SolrTestCaseJ4.java:89)\n    [junit]     at org.apache.solr.BaseDistributedSearchTestCase.tearDown(BaseDistributedSearchTestCase.java:174)\n    [junit]     at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:149)\n    [junit]     at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:51)\n    [junit] Caused by: java.lang.AssertionError: Some threads threw uncaught exceptions!\n    [junit]     at org.apache.lucene.util.LuceneTestCase.checkUncaughtExceptionsAfter(LuceneTestCase.java:772)\n    [junit]     at org.apache.lucene.util.LuceneTestCase.tearDown(LuceneTestCase.java:716)\n    [junit] \n    [junit] \n    [junit] Tests run: 1, Failures: 1, Errors: 1, Time elapsed: 24.024 sec\n    [junit] \n    [junit] ------------- Standard Error -----------------\n    [junit] NOTE: reproduce with: ant test -Dtestcase=DistributedTermsComponentTest -Dtestmethod=testDistribSearch -Dtests.seed=-2fae3bdefcfc15e0:209f37d06090a0dc:-283258d1420ef22c\n    [junit] The following exceptions were thrown by threads:\n    [junit] *** Thread: Thread-684 ***\n    [junit] junit.framework.AssertionFailedError: .terms.b_t.spider:6!=5\n    [junit]     at junit.framework.Assert.fail(Assert.java:47)\n    [junit]     at org.apache.solr.BaseDistributedSearchTestCase.compareResponses(BaseDistributedSearchTestCase.java:584)\n    [junit]     at org.apache.solr.BaseDistributedSearchTestCase$5.run(BaseDistributedSearchTestCase.java:352)\n    [junit] *** Thread: Thread-685 ***\n    [junit] junit.framework.AssertionFailedError: .terms.b_t.spider:6!=5\n    [junit]     at junit.framework.Assert.fail(Assert.java:47)\n    [junit]     at org.apache.solr.BaseDistributedSearchTestCase.compareResponses(BaseDistributedSearchTestCase.java:584)\n    [junit]     at org.apache.solr.BaseDistributedSearchTestCase$5.run(BaseDistributedSearchTestCase.java:352)\n    [junit] NOTE: reproduce with: ant test -Dtestcase=DistributedTermsComponentTest -Dtestmethod=testDistribSearch -Dtests.seed=-2fae3bdefcfc15e0:209f37d06090a0dc:-283258d1420ef22c\n    [junit] WARNING: test class left thread running: Thread[pool-192-thread-1,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-213-thread-1,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-213-thread-2,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-213-thread-3,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-213-thread-4,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-213-thread-5,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-213-thread-6,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-225-thread-1,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-225-thread-2,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-225-thread-3,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-225-thread-4,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-225-thread-5,5,main]\n    [junit] WARNING: test class left thread running: Thread[pool-225-thread-6,5,main]\n    [junit] RESOURCE LEAK: test class left 13 thread(s) running\n    [junit] NOTE: test params are: codec=RandomCodecProvider: {timestamp=MockVariableIntBlock(baseBlockSize=26), range_facet_l=Memory, id=Standard(minBlockSize=100 maxBlockSize=206), range_facet_sl=MockRandom, text=MockRandom, range_facet_si=Pulsing(freqCutoff=11 minBlockSize=67 maxBlockSize=205), multiDefault=Pulsing(freqCutoff=11 minBlockSize=67 maxBlockSize=205), b_t=MockFixedIntBlock(blockSize=1655), intDefault=MockVariableIntBlock(baseBlockSize=26)}, sim=RandomSimilarityProvider(queryNorm=true,coord=false): {}, locale=lv_LV, timezone=America/Mazatlan\n    [junit] NOTE: all tests run in this JVM:\n    [junit] [TestDistributedSearch, TestJoin, LengthFilterTest, TestBrazilianStemFilterFactory, TestCJKTokenizerFactory, TestChineseTokenizerFactory, TestFinnishLightStemFilterFactory, TestGermanStemFilterFactory, TestHindiFilters, TestLatvianStemFilterFactory, TestStemmerOverrideFilterFactory, TestCodecProviderSupport, TestJmxIntegration, TestJmxMonitoredMap, XsltUpdateRequestHandlerTest, SystemInfoHandlerTest, DistributedTermsComponentTest]\n    [junit] NOTE: Linux 3.0.6-gentoo amd64/Sun Microsystems Inc. 1.6.0_27 (64-bit)/cpus=8,threads=15,free=80766496,total=135856128",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "author": "Christine Poerschke",
            "id": "comment-16003155",
            "date": "2017-05-09T17:46:38+0000",
            "content": "Closing out very old specific test failure in favour of recent more general test related efforts e.g. SOLR-10032. "
        }
    ]
}