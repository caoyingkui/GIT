{
    "id": "LUCENE-6052",
    "title": "\"ant regenerate\" causes compilation errors",
    "details": {
        "resolution": "Fixed",
        "affect_versions": "None",
        "components": [
            "general/build"
        ],
        "labels": "",
        "fix_versions": [],
        "priority": "Major",
        "status": "Resolved",
        "type": "Bug"
    },
    "description": "The following is the output of ant -diagnostics followed by ant regenerate on a clean checkout of trunk.\n\n\n------- Ant diagnostics report -------\nApache Ant(TM) version 1.9.3 compiled on April 8 2014\n\n-------------------------------------------\n Implementation Version\n-------------------------------------------\ncore tasks     : 1.9.3 in file:/usr/share/ant/lib/ant.jar\n\n-------------------------------------------\n ANT PROPERTIES\n-------------------------------------------\nant.version: Apache Ant(TM) version 1.9.3 compiled on April 8 2014\nant.java.version: 1.7\nIs this the Apache Harmony VM? no\nIs this the Kaffe VM? no\nIs this gij/gcj? no\nant.core.lib: /usr/share/ant/lib/ant.jar\nant.home: /usr/share/ant\n\n-------------------------------------------\n ANT_HOME/lib jar listing\n-------------------------------------------\nant.home: /usr/share/ant\nant-apache-oro.jar (9750 bytes)\njunit.jar (108762 bytes)\nant-jdepend.jar (13865 bytes)\nant-launcher.jar (18382 bytes)\nant-apache-bsf.jar (9786 bytes)\nant-swing.jar (13285 bytes)\nant-antlr.jar (11605 bytes)\nant.jar (2008109 bytes)\nant-apache-log4j.jar (8634 bytes)\nant-testutil.jar (21042 bytes)\nant-junit4.jar (13104 bytes)\nant-apache-resolver.jar (9681 bytes)\nant-junit.jar (114902 bytes)\nant-commons-logging.jar (9758 bytes)\nant-apache-bcel.jar (15114 bytes)\nant-javamail.jar (13847 bytes)\nant-jmf.jar (12317 bytes)\nant-jsch.jar (46562 bytes)\nant-commons-net.jar (91319 bytes)\nant-apache-regexp.jar (9610 bytes)\nant-apache-xalan2.jar (8141 bytes)\n\n-------------------------------------------\n USER_HOME/.ant/lib jar listing\n-------------------------------------------\nuser.home: /home/mdrob\nivy.jar (1222059 bytes)\n\n-------------------------------------------\n Tasks availability\n-------------------------------------------\nimage : Not Available (the implementation class is not present)\nsshexec : Missing dependency com.jcraft.jsch.Logger\nscp : Missing dependency com.jcraft.jsch.Logger\nsshsession : Missing dependency com.jcraft.jsch.Logger\nnetrexxc : Not Available (the implementation class is not present)\njdepend : Missing dependency jdepend.xmlui.JDepend\ngjdoc : Not Available (the implementation class is not present)\nA task being missing/unavailable should only matter if you are trying to use it\n\n-------------------------------------------\n org.apache.env.Which diagnostics\n-------------------------------------------\nNot available.\nDownload it at http://xml.apache.org/commons/\n\n-------------------------------------------\n XML Parser information\n-------------------------------------------\nXML Parser : org.apache.xerces.jaxp.SAXParserImpl\nXML Parser Location: file:/usr/share/java/xercesImpl-2.11.0.jar\nNamespace-aware parser : org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser\nNamespace-aware parser Location: file:/usr/share/java/xercesImpl-2.11.0.jar\n\n-------------------------------------------\n XSLT Processor information\n-------------------------------------------\nXSLT Processor : com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl\nXSLT Processor Location: unknown\n\n-------------------------------------------\n System properties\n-------------------------------------------\njava.runtime.name : Java(TM) SE Runtime Environment\nsun.boot.library.path : /usr/lib/jvm/java-7-oracle/jre/lib/amd64\njava.vm.version : 24.72-b04\nant.library.dir : /usr/share/ant/lib\njava.vm.vendor : Oracle Corporation\njava.vendor.url : http://java.oracle.com/\npath.separator : :\njava.vm.name : Java HotSpot(TM) 64-Bit Server VM\nfile.encoding.pkg : sun.io\nuser.country : US\nsun.java.launcher : SUN_STANDARD\nsun.os.patch.level : unknown\njava.vm.specification.name : Java Virtual Machine Specification\nuser.dir : /home/mdrob/workspace/lucene-solr\njava.runtime.version : 1.7.0_72-b14\njava.awt.graphicsenv : sun.awt.X11GraphicsEnvironment\njava.endorsed.dirs : /usr/lib/jvm/java-7-oracle/jre/lib/endorsed\nos.arch : amd64\njava.io.tmpdir : /tmp\nline.separator : \n\njava.vm.specification.vendor : Oracle Corporation\nos.name : Linux\nant.home : /usr/share/ant\nsun.jnu.encoding : UTF-8\njava.library.path : /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\njava.specification.name : Java Platform API Specification\njava.class.version : 51.0\nsun.management.compiler : HotSpot 64-Bit Tiered Compilers\nos.version : 3.13.0-39-generic\nuser.home : /home/mdrob\nuser.timezone : America/Chicago\njava.awt.printerjob : sun.print.PSPrinterJob\nfile.encoding : UTF-8\njava.specification.version : 1.7\nuser.name : mdrob\njava.class.path : /usr/share/ant/lib/ant-launcher.jar:/usr/share/java/xmlParserAPIs.jar:/usr/share/java/xercesImpl.jar:/home/mdrob/.ant/lib/ivy.jar:/usr/share/ant/lib/ant-apache-oro.jar:/usr/share/ant/lib/junit.jar:/usr/share/ant/lib/ant-jdepend.jar:/usr/share/ant/lib/ant-launcher.jar:/usr/share/ant/lib/ant-apache-bsf.jar:/usr/share/ant/lib/ant-swing.jar:/usr/share/ant/lib/ant-antlr.jar:/usr/share/ant/lib/ant.jar:/usr/share/ant/lib/ant-apache-log4j.jar:/usr/share/ant/lib/ant-testutil.jar:/usr/share/ant/lib/ant-junit4.jar:/usr/share/ant/lib/ant-apache-resolver.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-commons-logging.jar:/usr/share/ant/lib/ant-apache-bcel.jar:/usr/share/ant/lib/ant-javamail.jar:/usr/share/ant/lib/ant-jmf.jar:/usr/share/ant/lib/ant-jsch.jar:/usr/share/ant/lib/ant-commons-net.jar:/usr/share/ant/lib/ant-apache-regexp.jar:/usr/share/ant/lib/ant-apache-xalan2.jar:/usr/lib/jvm/java-7-oracle/lib/tools.jar\njava.vm.specification.version : 1.7\nsun.arch.data.model : 64\njava.home : /usr/lib/jvm/java-7-oracle/jre\nsun.java.command : org.apache.tools.ant.launch.Launcher -cp  regenerate -diagnostics\njava.specification.vendor : Oracle Corporation\nuser.language : en\nawt.toolkit : sun.awt.X11.XToolkit\njava.vm.info : mixed mode\njava.version : 1.7.0_72\njava.ext.dirs : /usr/lib/jvm/java-7-oracle/jre/lib/ext:/usr/java/packages/lib/ext\nsun.boot.class.path : /usr/lib/jvm/java-7-oracle/jre/lib/resources.jar:/usr/lib/jvm/java-7-oracle/jre/lib/rt.jar:/usr/lib/jvm/java-7-oracle/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-7-oracle/jre/lib/jsse.jar:/usr/lib/jvm/java-7-oracle/jre/lib/jce.jar:/usr/lib/jvm/java-7-oracle/jre/lib/charsets.jar:/usr/lib/jvm/java-7-oracle/jre/lib/jfr.jar:/usr/lib/jvm/java-7-oracle/jre/classes\njava.vendor : Oracle Corporation\nfile.separator : /\njava.vendor.url.bug : http://bugreport.sun.com/bugreport/\nsun.cpu.endian : little\nsun.io.unicode.encoding : UnicodeLittle\nsun.desktop : gnome\nsun.cpu.isalist : \n\n-------------------------------------------\n Temp dir\n-------------------------------------------\nTemp dir is /tmp\nTemp dir is writeable\nTemp dir alignment with system clock is -897 ms\n\n-------------------------------------------\n Locale information\n-------------------------------------------\nTimezone Central Standard Time offset=-21600000\n\n-------------------------------------------\n Proxy information\n-------------------------------------------\nJava1.5+ proxy settings:\nDirect connection\n\n\nBuildfile: /home/mdrob/workspace/lucene-solr/build.xml\n\nregenerate:\n\nregenerate:\n\ncheck-moman:\n\ndownload-moman:\n\ncreateLevAutomata:\n     [exec] Wrote Lev1TParametricDescription.java [104 lines; 3.8 KB]\n     [exec] Wrote Lev1ParametricDescription.java [102 lines; 3.7 KB]\n     [exec] Wrote Lev2TParametricDescription.java [163 lines; 13.1 KB]\n     [exec] Wrote Lev2ParametricDescription.java [147 lines; 9.6 KB]\n\ncreatePackedIntSources:\n\nregenerate:\n\nregenerate:\n\nregenerate:\n\nivy-availability-check:\n\nivy-fail:\n\nivy-configure:\n[ivy:configure] :: Apache Ivy 2.3.0 - 20130110142753 :: http://ant.apache.org/ivy/ ::\n[ivy:configure] :: loading settings :: file = /home/mdrob/workspace/lucene-solr/lucene/ivy-settings.xml\n\n-install-jflex:\n[ivy:cachepath] :: resolving dependencies :: de.jflex#jflex-caller;working\n[ivy:cachepath]         confs: [default]\n[ivy:cachepath]         found de.jflex#jflex;1.6.0 in public\n[ivy:cachepath]         found org.apache.ant#ant;1.7.0 in public\n[ivy:cachepath]         found org.apache.ant#ant-launcher;1.7.0 in public\n[ivy:cachepath] :: resolution report :: resolve 195ms :: artifacts dl 4ms\n        ---------------------------------------------------------------------\n        |                  |            modules            ||   artifacts   |\n        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|\n        ---------------------------------------------------------------------\n        |      default     |   3   |   0   |   0   |   0   ||   3   |   0   |\n        ---------------------------------------------------------------------\n\nclean-jflex:\n\nresolve:\n\ncommon.init:\n\ncompile-lucene-core:\n\nivy-availability-check:\n\nivy-fail:\n\nivy-configure:\n[ivy:configure] :: loading settings :: file = /home/mdrob/workspace/lucene-solr/lucene/ivy-settings.xml\n\nresolve:\n\ninit:\n\n-clover.disable:\n\n-clover.load:\n\n-clover.classpath:\n\n-clover.setup:\n\nclover:\n\ncompile-core:\n    [javac] Compiling 50 source files to /home/mdrob/workspace/lucene-solr/lucene/build/core/classes/java\n    [javac] /home/mdrob/workspace/lucene-solr/lucene/core/src/java/org/apache/lucene/util/packed/Direct16.java:76: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /home/mdrob/workspace/lucene-solr/lucene/core/src/java/org/apache/lucene/util/packed/Direct16.java:81: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /home/mdrob/workspace/lucene-solr/lucene/core/src/java/org/apache/lucene/util/packed/Direct32.java:76: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /home/mdrob/workspace/lucene-solr/lucene/core/src/java/org/apache/lucene/util/packed/Direct32.java:81: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /home/mdrob/workspace/lucene-solr/lucene/core/src/java/org/apache/lucene/util/packed/Direct64.java:71: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /home/mdrob/workspace/lucene-solr/lucene/core/src/java/org/apache/lucene/util/packed/Direct64.java:76: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /home/mdrob/workspace/lucene-solr/lucene/core/src/java/org/apache/lucene/util/packed/Direct8.java:74: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /home/mdrob/workspace/lucene-solr/lucene/core/src/java/org/apache/lucene/util/packed/Direct8.java:79: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] 8 errors\n   [subant] Failure for target 'regenerate' of: /home/mdrob/workspace/lucene-solr/lucene/build.xml\n   [subant] The following error occurred while executing this line:\n   [subant] /home/mdrob/workspace/lucene-solr/lucene/build.xml:521: The following error occurred while executing this line:\n   [subant] /home/mdrob/workspace/lucene-solr/lucene/common-build.xml:2140: The following error occurred while executing this line:\n   [subant] /home/mdrob/workspace/lucene-solr/lucene/analysis/build.xml:143: The following error occurred while executing this line:\n   [subant] /home/mdrob/workspace/lucene-solr/lucene/analysis/build.xml:38: The following error occurred while executing this line:\n   [subant] /home/mdrob/workspace/lucene-solr/lucene/common-build.xml:720: The following error occurred while executing this line:\n   [subant] /home/mdrob/workspace/lucene-solr/lucene/common-build.xml:510: The following error occurred while executing this line:\n   [subant] /home/mdrob/workspace/lucene-solr/lucene/common-build.xml:1865: Compile failed; see the compiler error output for details.\n\nBUILD SUCCESSFUL\nTotal time: 3 seconds\n\n\n\nThere are two concerns that I see:\n\n\tThe build result is shown as \"successful\" despite the compilation errors. Future invocations of ant compile fail as expected.\n\tThe build failure itself.",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "id": "comment-14238854",
            "author": "Steve Rowe",
            "date": "2014-12-09T02:08:21+0000",
            "content": "Note that since this issue was created, trunk moved to require Java 8+: LUCENE-5950.\n\nThe ant regenerate problem was fixed by Robert Muir in r1642304.\n\nWhen I svn up -r1642303, the build fails for me - see below; I use Ant 1.8.2 with Oracle JDK 1.8.0_20 on OS X 10.10.1.\n\n\nPROMPT$ ant regenerate\nBuildfile: /Users/sarowe/svn/lucene/dev/trunk2/lucene/build.xml\n\nregenerate:\n\ncheck-moman:\n\ndownload-moman:\n\ncreateLevAutomata:\n     [exec] Wrote Lev1TParametricDescription.java [104 lines; 3.8 KB]\n     [exec] Wrote Lev1ParametricDescription.java [102 lines; 3.7 KB]\n     [exec] Wrote Lev2TParametricDescription.java [163 lines; 13.1 KB]\n     [exec] Wrote Lev2ParametricDescription.java [147 lines; 9.6 KB]\n\ncreatePackedIntSources:\n\nregenerate:\n\nregenerate:\n\nregenerate:\n\nivy-availability-check:\n\nivy-fail:\n\nivy-configure:\n[ivy:configure] :: Apache Ivy 2.3.0 - 20130110142753 :: http://ant.apache.org/ivy/ ::\n[ivy:configure] :: loading settings :: file = /Users/sarowe/svn/lucene/dev/trunk2/lucene/ivy-settings.xml\n\n-install-jflex:\n[ivy:cachepath] :: resolving dependencies :: de.jflex#jflex-caller;working\n[ivy:cachepath] \tconfs: [default]\n[ivy:cachepath] \tfound de.jflex#jflex;1.6.0 in public\n[ivy:cachepath] \tfound org.apache.ant#ant;1.7.0 in public\n[ivy:cachepath] \tfound org.apache.ant#ant-launcher;1.7.0 in public\n[ivy:cachepath] :: resolution report :: resolve 166ms :: artifacts dl 5ms\n\t---------------------------------------------------------------------\n\t|                  |            modules            ||   artifacts   |\n\t|       conf       | number| search|dwnlded|evicted|| number|dwnlded|\n\t---------------------------------------------------------------------\n\t|      default     |   3   |   0   |   0   |   0   ||   3   |   0   |\n\t---------------------------------------------------------------------\n\nclean-jflex:\n\nresolve:\n\ncommon.init:\n\ncompile-lucene-core:\n\nivy-availability-check:\n\nivy-fail:\n\nivy-configure:\n[ivy:configure] :: loading settings :: file = /Users/sarowe/svn/lucene/dev/trunk2/lucene/ivy-settings.xml\n\nresolve:\n\ninit:\n\n-clover.disable:\n\n-clover.load:\n\n-clover.classpath:\n\n-clover.setup:\n\nclover:\n\ncompile-core:\n    [javac] Compiling 50 source files to /Users/sarowe/svn/lucene/dev/trunk2/lucene/build/core/classes/java\n    [javac] /Users/sarowe/svn/lucene/dev/trunk2/lucene/core/src/java/org/apache/lucene/util/packed/Direct16.java:76: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /Users/sarowe/svn/lucene/dev/trunk2/lucene/core/src/java/org/apache/lucene/util/packed/Direct16.java:81: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /Users/sarowe/svn/lucene/dev/trunk2/lucene/core/src/java/org/apache/lucene/util/packed/Direct32.java:76: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /Users/sarowe/svn/lucene/dev/trunk2/lucene/core/src/java/org/apache/lucene/util/packed/Direct32.java:81: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /Users/sarowe/svn/lucene/dev/trunk2/lucene/core/src/java/org/apache/lucene/util/packed/Direct64.java:71: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /Users/sarowe/svn/lucene/dev/trunk2/lucene/core/src/java/org/apache/lucene/util/packed/Direct64.java:76: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /Users/sarowe/svn/lucene/dev/trunk2/lucene/core/src/java/org/apache/lucene/util/packed/Direct8.java:74: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] /Users/sarowe/svn/lucene/dev/trunk2/lucene/core/src/java/org/apache/lucene/util/packed/Direct8.java:79: error: method does not override or implement a method from a supertype\n    [javac]   @Override\n    [javac]   ^\n    [javac] 8 errors\n\nBUILD FAILED\n/Users/sarowe/svn/lucene/dev/trunk2/lucene/build.xml:521: The following error occurred while executing this line:\n/Users/sarowe/svn/lucene/dev/trunk2/lucene/common-build.xml:2065: The following error occurred while executing this line:\n/Users/sarowe/svn/lucene/dev/trunk2/lucene/analysis/build.xml:143: The following error occurred while executing this line:\n/Users/sarowe/svn/lucene/dev/trunk2/lucene/analysis/build.xml:38: The following error occurred while executing this line:\n/Users/sarowe/svn/lucene/dev/trunk2/lucene/common-build.xml:711: The following error occurred while executing this line:\n/Users/sarowe/svn/lucene/dev/trunk2/lucene/common-build.xml:501: The following error occurred while executing this line:\n/Users/sarowe/svn/lucene/dev/trunk2/lucene/common-build.xml:1856: Compile failed; see the compiler error output for details.\n\nTotal time: 7 seconds\n\n "
        },
        {
            "id": "comment-14238894",
            "author": "ASF subversion and git services",
            "date": "2014-12-09T02:43:56+0000",
            "content": "Commit 1643977 from Use account \"steve_rowe\" instead in branch 'dev/branches/lucene_solr_4_10'\n[ https://svn.apache.org/r1643977 ]\n\nLUCENE-6052: fix ant regenerate (applied patch from trunk r1642304) "
        }
    ]
}