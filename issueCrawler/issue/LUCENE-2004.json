{
    "id": "LUCENE-2004",
    "title": "Constants.LUCENE_MAIN_VERSION is inlined in code compiled against Lucene JAR, so version detection is incorrect",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [],
        "type": "Bug",
        "fix_versions": [
            "2.9.1",
            "3.0"
        ],
        "affect_versions": "2.9",
        "resolution": "Fixed",
        "status": "Closed"
    },
    "description": "When you compile your own code against the Lucene 2.9 version of the JARs and use the LUCENE_MAIN_VERSION constant and then run the code against the 3.0 JAR, the constant still contains 2.9, because javac inlines primitives and Strings into the class files if they are public static final and are generated by a constant (not method).\n\nThe attached fix will fix this by using a ident(String) functions that return the String itsself to prevent this inlining.\n\nWill apply to 2.9, trunk and 2.9 BW branch. No I can also reenable one test I removed because of this.",
    "attachments": {
        "LUCENE-2004.patch": "https://issues.apache.org/jira/secure/attachment/12422875/LUCENE-2004.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "date": "2009-10-22T06:24:44+0000",
            "content": "See also: http://www.javaworld.com/community/node/3400 ",
            "author": "Uwe Schindler",
            "id": "comment-12768582"
        },
        {
            "date": "2009-10-22T07:55:28+0000",
            "content": "Fixed. ",
            "author": "Uwe Schindler",
            "id": "comment-12768599"
        },
        {
            "date": "2009-11-07T14:57:30+0000",
            "content": "Bulk close all 2.9.1 issues. ",
            "author": "Michael McCandless",
            "id": "comment-12774624"
        }
    ]
}