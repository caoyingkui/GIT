{
    "id": "SOLR-6325",
    "title": "Expose per-collection and per-shard aggregate statistics",
    "details": {
        "affect_versions": "None",
        "status": "Resolved",
        "fix_versions": [
            "7.0"
        ],
        "components": [
            "SolrCloud"
        ],
        "type": "Sub-task",
        "priority": "Major",
        "labels": "",
        "resolution": "Fixed"
    },
    "description": "SolrCloud doesn't provide any aggregate stats about the cluster or a collection. Very common questions such as document counts per shard, index sizes, request rates etc cannot be answered easily without figuring out the cluster state, invoking multiple core admin APIs and aggregating them manually.\n\nI propose that we expose an API which returns each of the following on a per-collection and per-shard basis:\n\n\tDocument counts\n\tIndex size on disk\n\tQuery request rate\n\tIndexing request rate\n\tReal time get request rate\n\n\n\nI am not yet sure if this should be a distributed search component or a collection API.",
    "attachments": {
        "SOLR-6325.patch": "https://issues.apache.org/jira/secure/attachment/12660265/SOLR-6325.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "author": "Shalin Shekhar Mangar",
            "id": "comment-14088459",
            "date": "2014-08-06T23:23:32+0000",
            "content": "Here's a rough patch which returns per-shard statistics:\n\n\ncurl 'http://localhost:8983/solr/admin/collections?action=clusterstatus&stats=true&name=collection1&shard=shard1&wt=json&indent=on'\n\n\n\n\n{\n  \"responseHeader\":{\n    \"status\":0,\n    \"QTime\":2023},\n  \"cluster\":{\n    \"collections\":{\n      \"collection1\":{\n        \"shards\":{\"shard1\":{\n            \"range\":\"80000000-ffffffff\",\n            \"state\":\"active\",\n            \"replicas\":{\"core_node1\":{\n                \"state\":\"active\",\n                \"base_url\":\"http://127.0.1.1:8983/solr\",\n                \"core\":\"collection1\",\n                \"node_name\":\"127.0.1.1:8983_solr\",\n                \"leader\":\"true\"}},\n            \"/update\":{\n              \"75thPcRequestTime\":0.0,\n              \"15minRateReqsPerSecond\":0.0,\n              \"999thPcRequestTime\":0.0,\n              \"99thPcRequestTime\":0.0,\n              \"95thPcRequestTime\":0.0,\n              \"5minRateReqsPerSecond\":0.0,\n              \"timeouts\":0,\n              \"requests\":0,\n              \"avgRequestsPerSecond\":0.0,\n              \"errors\":0,\n              \"avgTimePerRequest\":0.0,\n              \"medianRequestTime\":0.0,\n              \"handlerStart\":1407367247133,\n              \"totalTime\":0.0},\n            \"/select\":{\n              \"75thPcRequestTime\":26.804607,\n              \"15minRateReqsPerSecond\":0.19779007785878447,\n              \"999thPcRequestTime\":26.804607,\n              \"99thPcRequestTime\":26.804607,\n              \"95thPcRequestTime\":26.804607,\n              \"5minRateReqsPerSecond\":0.1934432200964012,\n              \"timeouts\":0,\n              \"requests\":1,\n              \"avgRequestsPerSecond\":0.05091259561701815,\n              \"errors\":0,\n              \"avgTimePerRequest\":26.804607,\n              \"medianRequestTime\":26.804607,\n              \"handlerStart\":1407367247129,\n              \"totalTime\":26.804607},\n            \"/get\":{\n              \"75thPcRequestTime\":0.0,\n              \"15minRateReqsPerSecond\":0.0,\n              \"999thPcRequestTime\":0.0,\n              \"99thPcRequestTime\":0.0,\n              \"95thPcRequestTime\":0.0,\n              \"5minRateReqsPerSecond\":0.0,\n              \"timeouts\":0,\n              \"requests\":0,\n              \"avgRequestsPerSecond\":0.0,\n              \"errors\":0,\n              \"avgTimePerRequest\":0.0,\n              \"medianRequestTime\":0.0,\n              \"handlerStart\":1407367247131,\n              \"totalTime\":0.0},\n            \"/replication\":{\n              \"15minRateReqsPerSecond\":0.0,\n              \"75thPcRequestTime\":0.0,\n              \"999thPcRequestTime\":0.0,\n              \"isSlave\":\"false\",\n              \"99thPcRequestTime\":0.0,\n              \"95thPcRequestTime\":0.0,\n              \"replicateAfter\":[\"commit\"],\n              \"5minRateReqsPerSecond\":0.0,\n              \"indexPath\":\"/home/shalin/work/oss/shalin-lusolr/solr/example1/solr/collection1/data/index/\",\n              \"replicationEnabled\":\"true\",\n              \"timeouts\":0,\n              \"requests\":0,\n              \"avgRequestsPerSecond\":0.0,\n              \"errors\":0,\n              \"avgTimePerRequest\":0.0,\n              \"indexSize\":\"89 bytes\",\n              \"indexVersion\":0,\n              \"isMaster\":\"true\",\n              \"medianRequestTime\":0.0,\n              \"handlerStart\":1407367247142,\n              \"generation\":1,\n              \"totalTime\":0.0}}},\n        \"maxShardsPerNode\":\"1\",\n        \"router\":{\"name\":\"compositeId\"},\n        \"replicationFactor\":\"1\",\n        \"autoCreated\":\"true\"}},\n    \"live_nodes\":[\"127.0.1.1:7574_solr\",\n      \"127.0.1.1:8983_solr\"]}}\n\n\n\nThe handler names are hard-coded right now but I'm hoping that the work being done in SOLR-6191 will help introspect the capabilities of a node and let us read the names of the interesting handlers. "
        },
        {
            "author": "Shalin Shekhar Mangar",
            "id": "comment-14088897",
            "date": "2014-08-07T06:27:27+0000",
            "content": "All these stats are not necessary. I will create a white list of stats that should be copied over. I will also use the API added SOLR-6332 to find out the relevant handlers. There will be a whitelist of handlers for which stats will be collected. Extra ones can be specified via request parameters to this API. "
        },
        {
            "author": "Shalin Shekhar Mangar",
            "id": "comment-14090481",
            "date": "2014-08-08T08:39:02+0000",
            "content": "\n\tSince we are collecting stats from each node, it makes sense to expose them directly within the node's properties.\n\tThere's no shard level aggregation yet\n\tSome stat names are whitelisted and only those are returned\n\n\n\n\nhttp://localhost:8983/solr/admin/collections?action=clusterstatus&name=collection1&wt=json&stats=true&indent=on\n\n\n\n\n{\n  \"responseHeader\":{\n    \"status\":0,\n    \"QTime\":2018},\n  \"cluster\":{\n    \"collections\":{\n      \"collection1\":{\n        \"shards\":{\n          \"shard1\":{\n            \"range\":\"80000000-ffffffff\",\n            \"state\":\"active\",\n            \"replicas\":{\"core_node1\":{\n                \"state\":\"active\",\n                \"base_url\":\"http://127.0.1.1:8983/solr\",\n                \"core\":\"collection1\",\n                \"node_name\":\"127.0.1.1:8983_solr\",\n                \"leader\":\"true\",\n                \"/update\":{\n                  \"15minRateReqsPerSecond\":0.0037831194086604806,\n                  \"75thPcRequestTime\":44.78251475,\n                  \"999thPcRequestTime\":49.482589,\n                  \"requests\":4,\n                  \"avgRequestsPerSecond\":0.002800747737056084,\n                  \"99thPcRequestTime\":49.482589,\n                  \"95thPcRequestTime\":49.482589,\n                  \"avgTimePerRequest\":22.42671725,\n                  \"5minRateReqsPerSecond\":0.008223370224169085,\n                  \"medianRequestTime\":18.976197,\n                  \"totalTime\":89.706869},\n                \"/select\":{\n                  \"15minRateReqsPerSecond\":0.043895542803021756,\n                  \"75thPcRequestTime\":26.88668575,\n                  \"999thPcRequestTime\":29.510082,\n                  \"requests\":4,\n                  \"avgRequestsPerSecond\":0.002800729027765367,\n                  \"99thPcRequestTime\":29.510082,\n                  \"95thPcRequestTime\":29.510082,\n                  \"avgTimePerRequest\":14.49905,\n                  \"5minRateReqsPerSecond\":0.005877835107354825,\n                  \"medianRequestTime\":13.986818500000002,\n                  \"totalTime\":57.9962},\n                \"/get\":{\n                  \"15minRateReqsPerSecond\":0.0,\n                  \"75thPcRequestTime\":0.0,\n                  \"999thPcRequestTime\":0.0,\n                  \"requests\":0,\n                  \"avgRequestsPerSecond\":0.0,\n                  \"99thPcRequestTime\":0.0,\n                  \"95thPcRequestTime\":0.0,\n                  \"avgTimePerRequest\":0.0,\n                  \"5minRateReqsPerSecond\":0.0,\n                  \"medianRequestTime\":0.0,\n                  \"totalTime\":0.0},\n                \"/replication\":{\n                  \"15minRateReqsPerSecond\":0.001209650641611822,\n                  \"75thPcRequestTime\":0.822187,\n                  \"999thPcRequestTime\":0.822187,\n                  \"requests\":2,\n                  \"avgRequestsPerSecond\":0.0014003832223972693,\n                  \"99thPcRequestTime\":0.822187,\n                  \"95thPcRequestTime\":0.822187,\n                  \"avgTimePerRequest\":0.6147625,\n                  \"5minRateReqsPerSecond\":0.0020537656834826467,\n                  \"medianRequestTime\":0.6147625,\n                  \"indexSizeBytes\":3456,\n                  \"totalTime\":1.229525}}}},\n          \"shard2\":{\n            \"range\":\"0-7fffffff\",\n            \"state\":\"active\",\n            \"replicas\":{\"core_node2\":{\n                \"state\":\"active\",\n                \"base_url\":\"http://127.0.1.1:7574/solr\",\n                \"core\":\"collection1\",\n                \"node_name\":\"127.0.1.1:7574_solr\",\n                \"leader\":\"true\",\n                \"/update\":{\n                  \"15minRateReqsPerSecond\":0.0018863053853323986,\n                  \"75thPcRequestTime\":32.011629,\n                  \"999thPcRequestTime\":32.011629,\n                  \"requests\":2,\n                  \"avgRequestsPerSecond\":0.0014018173571424294,\n                  \"99thPcRequestTime\":32.011629,\n                  \"95thPcRequestTime\":32.011629,\n                  \"avgTimePerRequest\":17.2436445,\n                  \"5minRateReqsPerSecond\":0.004077421862610938,\n                  \"medianRequestTime\":17.2436445,\n                  \"totalTime\":34.487289},\n                \"/select\":{\n                  \"15minRateReqsPerSecond\":0.0424546020916075,\n                  \"75thPcRequestTime\":50.072351,\n                  \"999thPcRequestTime\":50.072351,\n                  \"requests\":2,\n                  \"avgRequestsPerSecond\":0.0014018115220090666,\n                  \"99thPcRequestTime\":50.072351,\n                  \"95thPcRequestTime\":50.072351,\n                  \"avgTimePerRequest\":29.4618105,\n                  \"5minRateReqsPerSecond\":0.0037940030823560658,\n                  \"medianRequestTime\":29.4618105,\n                  \"totalTime\":58.923621},\n                \"/get\":{\n                  \"15minRateReqsPerSecond\":0.0,\n                  \"75thPcRequestTime\":0.0,\n                  \"999thPcRequestTime\":0.0,\n                  \"requests\":0,\n                  \"avgRequestsPerSecond\":0.0,\n                  \"99thPcRequestTime\":0.0,\n                  \"95thPcRequestTime\":0.0,\n                  \"avgTimePerRequest\":0.0,\n                  \"5minRateReqsPerSecond\":0.0,\n                  \"medianRequestTime\":0.0,\n                  \"totalTime\":0.0},\n                \"/replication\":{\n                  \"15minRateReqsPerSecond\":0.0,\n                  \"75thPcRequestTime\":0.0,\n                  \"999thPcRequestTime\":0.0,\n                  \"requests\":0,\n                  \"avgRequestsPerSecond\":0.0,\n                  \"99thPcRequestTime\":0.0,\n                  \"95thPcRequestTime\":0.0,\n                  \"avgTimePerRequest\":0.0,\n                  \"5minRateReqsPerSecond\":0.0,\n                  \"medianRequestTime\":0.0,\n                  \"indexSizeBytes\":3456,\n                  \"totalTime\":0.0}}}}},\n        \"maxShardsPerNode\":\"1\",\n        \"router\":{\"name\":\"compositeId\"},\n        \"replicationFactor\":\"1\",\n        \"autoCreated\":\"true\"}},\n    \"live_nodes\":[\"127.0.1.1:7574_solr\",\n      \"127.0.1.1:8983_solr\"]}}\n\n\n\nFurther work:\n\n\tIndex size is to be aggregated across shards\n\tMake it possible to request additional handler paths\n\tUse the API exposed in SOLR-6332 to find the correct handlers\n\n "
        },
        {
            "author": "Shalin Shekhar Mangar",
            "id": "comment-14090738",
            "date": "2014-08-08T13:06:45+0000",
            "content": "Changes:\n\n\tStats such as requests, totalTime, indexSizeBytes are aggregated per-shard and per-collection. Using these avgTimePerRequest is calculated.\n\tAggregation for /replication and /update is done only for leader nodes\n\tRefactored and reduced code\n\n\n\nWe do have request time percentiles per node but averaging them to get per-shard and per-collection values will give incorrect values. But perhaps that'd be a good enough approximation?\n\n\n{\n  \"responseHeader\":{\n    \"status\":0,\n    \"QTime\":2022},\n  \"cluster\":{\n    \"collections\":{\n      \"collection1\":{\n        \"shards\":{\n          \"shard1\":{\n            \"range\":\"80000000-ffffffff\",\n            \"state\":\"active\",\n            \"replicas\":{\"core_node1\":{\n                \"state\":\"active\",\n                \"base_url\":\"http://127.0.1.1:8902/solr\",\n                \"core\":\"collection1\",\n                \"node_name\":\"127.0.1.1:8902_solr\",\n                \"leader\":\"true\",\n                \"/get\":{\n                  \"15minRateReqsPerSecond\":0.0,\n                  \"75thPcRequestTime\":0.0,\n                  \"999thPcRequestTime\":0.0,\n                  \"requests\":0,\n                  \"avgRequestsPerSecond\":0.0,\n                  \"99thPcRequestTime\":0.0,\n                  \"95thPcRequestTime\":0.0,\n                  \"avgTimePerRequest\":0.0,\n                  \"5minRateReqsPerSecond\":0.0,\n                  \"medianRequestTime\":0.0,\n                  \"totalTime\":0.0},\n                \"/replication\":{\n                  \"15minRateReqsPerSecond\":0.0,\n                  \"75thPcRequestTime\":0.0,\n                  \"999thPcRequestTime\":0.0,\n                  \"99thPcRequestTime\":0.0,\n                  \"95thPcRequestTime\":0.0,\n                  \"5minRateReqsPerSecond\":0.0,\n                  \"indexSizeBytes\":3428,\n                  \"requests\":0,\n                  \"avgRequestsPerSecond\":0.0,\n                  \"avgTimePerRequest\":0.0,\n                  \"indexSize\":\"3.35 KB\",\n                  \"medianRequestTime\":0.0,\n                  \"totalTime\":0.0},\n                \"/select\":{\n                  \"15minRateReqsPerSecond\":0.18003956820463016,\n                  \"75thPcRequestTime\":48.589593,\n                  \"999thPcRequestTime\":48.589593,\n                  \"requests\":2,\n                  \"avgRequestsPerSecond\":0.017125745096008536,\n                  \"99thPcRequestTime\":48.589593,\n                  \"95thPcRequestTime\":48.589593,\n                  \"avgTimePerRequest\":26.820881,\n                  \"5minRateReqsPerSecond\":0.14629739152434504,\n                  \"medianRequestTime\":26.820881,\n                  \"totalTime\":53.641762},\n                \"/update\":{\n                  \"15minRateReqsPerSecond\":0.0021613544005189404,\n                  \"75thPcRequestTime\":31.588281,\n                  \"999thPcRequestTime\":31.588281,\n                  \"requests\":2,\n                  \"avgRequestsPerSecond\":0.017126831486872777,\n                  \"99thPcRequestTime\":31.588281,\n                  \"95thPcRequestTime\":31.588281,\n                  \"avgTimePerRequest\":17.0758355,\n                  \"5minRateReqsPerSecond\":0.006133913399131633,\n                  \"medianRequestTime\":17.075835499999997,\n                  \"totalTime\":34.151671}}},\n            \"/get\":{\n              \"avgTimePerRequest\":0.0,\n              \"requests\":0,\n              \"totalTime\":0.0},\n            \"/replication\":{\n              \"avgTimePerRequest\":0.0,\n              \"requests\":0,\n              \"indexSize\":\"3.35 KB\",\n              \"indexSizeBytes\":3428,\n              \"totalTime\":0.0},\n            \"/select\":{\n              \"avgTimePerRequest\":26.820881,\n              \"requests\":2,\n              \"totalTime\":53.641762},\n            \"/update\":{\n              \"avgTimePerRequest\":17.0758355,\n              \"requests\":2,\n              \"totalTime\":34.151671}},\n          \"shard2\":{\n            \"range\":\"0-7fffffff\",\n            \"state\":\"active\",\n            \"replicas\":{\"core_node2\":{\n                \"state\":\"active\",\n                \"base_url\":\"http://127.0.1.1:8901/solr\",\n                \"core\":\"collection1\",\n                \"node_name\":\"127.0.1.1:8901_solr\",\n                \"leader\":\"true\",\n                \"/get\":{\n                  \"15minRateReqsPerSecond\":0.0,\n                  \"75thPcRequestTime\":0.0,\n                  \"999thPcRequestTime\":0.0,\n                  \"requests\":0,\n                  \"avgRequestsPerSecond\":0.0,\n                  \"99thPcRequestTime\":0.0,\n                  \"95thPcRequestTime\":0.0,\n                  \"avgTimePerRequest\":0.0,\n                  \"5minRateReqsPerSecond\":0.0,\n                  \"medianRequestTime\":0.0,\n                  \"totalTime\":0.0},\n                \"/replication\":{\n                  \"15minRateReqsPerSecond\":0.0,\n                  \"75thPcRequestTime\":0.0,\n                  \"999thPcRequestTime\":0.0,\n                  \"99thPcRequestTime\":0.0,\n                  \"95thPcRequestTime\":0.0,\n                  \"5minRateReqsPerSecond\":0.0,\n                  \"indexSizeBytes\":6738,\n                  \"requests\":0,\n                  \"avgRequestsPerSecond\":0.0,\n                  \"avgTimePerRequest\":0.0,\n                  \"indexSize\":\"6.58 KB\",\n                  \"medianRequestTime\":0.0,\n                  \"totalTime\":0.0},\n                \"/select\":{\n                  \"15minRateReqsPerSecond\":0.18111127304638647,\n                  \"75thPcRequestTime\":107.022171,\n                  \"999thPcRequestTime\":107.022171,\n                  \"requests\":3,\n                  \"avgRequestsPerSecond\":0.02570162723571108,\n                  \"99thPcRequestTime\":107.022171,\n                  \"95thPcRequestTime\":107.022171,\n                  \"avgTimePerRequest\":54.505850333333335,\n                  \"5minRateReqsPerSecond\":0.14928852093393213,\n                  \"medianRequestTime\":51.432893,\n                  \"totalTime\":163.517551},\n                \"/update\":{\n                  \"15minRateReqsPerSecond\":0.006490100395309772,\n                  \"75thPcRequestTime\":34.3730335,\n                  \"999thPcRequestTime\":58.041226,\n                  \"requests\":6,\n                  \"avgRequestsPerSecond\":0.05140730311056109,\n                  \"99thPcRequestTime\":58.041226,\n                  \"95thPcRequestTime\":58.041226,\n                  \"avgTimePerRequest\":16.466008,\n                  \"5minRateReqsPerSecond\":0.018453714010755254,\n                  \"medianRequestTime\":5.2320905,\n                  \"totalTime\":98.796048}}},\n            \"/get\":{\n              \"avgTimePerRequest\":0.0,\n              \"requests\":0,\n              \"totalTime\":0.0},\n            \"/replication\":{\n              \"avgTimePerRequest\":0.0,\n              \"requests\":0,\n              \"indexSize\":\"6.58 KB\",\n              \"indexSizeBytes\":6738,\n              \"totalTime\":0.0},\n            \"/select\":{\n              \"avgTimePerRequest\":54.505850333333335,\n              \"requests\":3,\n              \"totalTime\":163.517551},\n            \"/update\":{\n              \"avgTimePerRequest\":16.466008,\n              \"requests\":6,\n              \"totalTime\":98.796048}}},\n        \"maxShardsPerNode\":\"1\",\n        \"router\":{\"name\":\"compositeId\"},\n        \"replicationFactor\":\"1\",\n        \"autoCreated\":\"true\",\n        \"standard\":{}}},\n    \"live_nodes\":[\"127.0.1.1:8901_solr\",\n      \"127.0.1.1:8902_solr\"]}}\n\n\n\nTodo:\n\n\tMake it possible to request additional handler paths\n\tUse SOLR-6332 instead of hard coding interesting handlers\n\n "
        },
        {
            "author": "Shalin Shekhar Mangar",
            "id": "comment-14091272",
            "date": "2014-08-08T20:43:52+0000",
            "content": "\n\tMore refactoring\n\tExposed cache statistics too\n\tMoved the statistics to its own \"stats\" section in the response\n\n\n\n\n{\n  \"responseHeader\":{\n    \"status\":0,\n    \"QTime\":2399},\n  \"cluster\":{\n    \"collections\":{\n      \"collection1\":{\n        \"shards\":{\"shard1\":{\n            \"range\":\"80000000-7fffffff\",\n            \"state\":\"active\",\n            \"replicas\":{\"core_node1\":{\n                \"state\":\"active\",\n                \"base_url\":\"http://127.0.1.1:8983/solr\",\n                \"core\":\"collection1\",\n                \"node_name\":\"127.0.1.1:8983_solr\",\n                \"leader\":\"true\",\n                \"stats\":{\n                  \"/select\":{\n                    \"15minRateReqsPerSecond\":0.020777404380269187,\n                    \"75thPcRequestTime\":16.5131245,\n                    \"999thPcRequestTime\":23.885722,\n                    \"requests\":6,\n                    \"avgRequestsPerSecond\":0.002879798788323655,\n                    \"99thPcRequestTime\":23.885722,\n                    \"95thPcRequestTime\":23.885722,\n                    \"avgTimePerRequest\":8.255495666666667,\n                    \"5minRateReqsPerSecond\":2.2744935458792422E-4,\n                    \"medianRequestTime\":4.984649,\n                    \"totalTime\":49.532974},\n                  \"documentCache\":{\n                    \"cumulative_hits\":14,\n                    \"cumulative_inserts\":7,\n                    \"cumulative_evictions\":0,\n                    \"cumulative_lookups\":21},\n                  \"filterCache\":{\n                    \"cumulative_hits\":0,\n                    \"cumulative_inserts\":0,\n                    \"cumulative_evictions\":0,\n                    \"cumulative_lookups\":0},\n                  \"/get\":{\n                    \"15minRateReqsPerSecond\":0.0,\n                    \"75thPcRequestTime\":0.0,\n                    \"999thPcRequestTime\":0.0,\n                    \"requests\":0,\n                    \"avgRequestsPerSecond\":0.0,\n                    \"99thPcRequestTime\":0.0,\n                    \"95thPcRequestTime\":0.0,\n                    \"avgTimePerRequest\":0.0,\n                    \"5minRateReqsPerSecond\":0.0,\n                    \"medianRequestTime\":0.0,\n                    \"totalTime\":0.0},\n                  \"queryResultCache\":{\n                    \"cumulative_hits\":1,\n                    \"cumulative_inserts\":4,\n                    \"cumulative_evictions\":0,\n                    \"cumulative_lookups\":5},\n                  \"/replication\":{\n                    \"15minRateReqsPerSecond\":1.2007506401163562E-4,\n                    \"75thPcRequestTime\":1.150843,\n                    \"999thPcRequestTime\":1.150843,\n                    \"99thPcRequestTime\":1.150843,\n                    \"95thPcRequestTime\":1.150843,\n                    \"5minRateReqsPerSecond\":4.206957310723102E-6,\n                    \"indexSizeBytes\":11801,\n                    \"requests\":1,\n                    \"avgRequestsPerSecond\":4.7997019618170594E-4,\n                    \"avgTimePerRequest\":1.150843,\n                    \"indexSize\":\"11.52 KB\",\n                    \"medianRequestTime\":1.150843,\n                    \"totalTime\":1.150843},\n                  \"/update\":{\n                    \"15minRateReqsPerSecond\":8.553393156539473E-4,\n                    \"75thPcRequestTime\":3.793427,\n                    \"999thPcRequestTime\":29.892342,\n                    \"requests\":7,\n                    \"avgRequestsPerSecond\":0.0033597832110602117,\n                    \"99thPcRequestTime\":29.892342,\n                    \"95thPcRequestTime\":29.892342,\n                    \"avgTimePerRequest\":6.517293,\n                    \"5minRateReqsPerSecond\":3.103535401845922E-5,\n                    \"medianRequestTime\":2.425348,\n                    \"totalTime\":45.621051},\n                  \"searcher\":{\n                    \"maxDoc\":7,\n                    \"deletedDocs\":0,\n                    \"numDocs\":7},\n                  \"fieldValueCache\":{\n                    \"cumulative_hits\":0,\n                    \"cumulative_inserts\":0,\n                    \"cumulative_evictions\":0,\n                    \"cumulative_lookups\":0},\n                  \"perSegFilter\":{\n                    \"cumulative_hits\":0,\n                    \"cumulative_inserts\":0,\n                    \"cumulative_evictions\":0,\n                    \"cumulative_lookups\":0}}}},\n            \"stats\":{\n              \"/select\":{\n                \"avgTimePerRequest\":8.255495666666667,\n                \"requests\":6,\n                \"totalTime\":49.532974},\n              \"documentCache\":{\n                \"cumulative_hits\":14,\n                \"cumulative_inserts\":7,\n                \"cumulative_evictions\":0,\n                \"cumulative_lookups\":21},\n              \"filterCache\":{\n                \"cumulative_hits\":0,\n                \"cumulative_inserts\":0,\n                \"cumulative_evictions\":0,\n                \"cumulative_lookups\":0},\n              \"/get\":{\n                \"avgTimePerRequest\":0.0,\n                \"requests\":0,\n                \"totalTime\":0.0},\n              \"queryResultCache\":{\n                \"cumulative_hits\":1,\n                \"cumulative_inserts\":4,\n                \"cumulative_evictions\":0,\n                \"cumulative_lookups\":5},\n              \"/replication\":{\n                \"avgTimePerRequest\":1.150843,\n                \"requests\":1,\n                \"indexSize\":\"11.52 KB\",\n                \"indexSizeBytes\":11801,\n                \"totalTime\":1.150843},\n              \"/update\":{\n                \"avgTimePerRequest\":6.5172930000000004,\n                \"requests\":7,\n                \"totalTime\":45.621051},\n              \"fieldValueCache\":{\n                \"cumulative_hits\":0,\n                \"cumulative_inserts\":0,\n                \"cumulative_evictions\":0,\n                \"cumulative_lookups\":0},\n              \"searcher\":{\n                \"maxDoc\":7,\n                \"deletedDocs\":0,\n                \"numDocs\":7},\n              \"perSegFilter\":{\n                \"cumulative_hits\":0,\n                \"cumulative_inserts\":0,\n                \"cumulative_evictions\":0,\n                \"cumulative_lookups\":0}}}},\n        \"maxShardsPerNode\":\"1\",\n        \"router\":{\"name\":\"compositeId\"},\n        \"replicationFactor\":\"1\",\n        \"autoCreated\":\"true\",\n        \"stats\":{\n          \"/select\":{\n            \"avgTimePerRequest\":8.255495666666667,\n            \"requests\":6,\n            \"totalTime\":49.532974},\n          \"documentCache\":{\n            \"cumulative_hits\":14,\n            \"cumulative_inserts\":7,\n            \"cumulative_evictions\":0,\n            \"cumulative_lookups\":21},\n          \"filterCache\":{\n            \"cumulative_hits\":0,\n            \"cumulative_inserts\":0,\n            \"cumulative_evictions\":0,\n            \"cumulative_lookups\":0},\n          \"/get\":{\n            \"avgTimePerRequest\":0.0,\n            \"requests\":0,\n            \"totalTime\":0.0},\n          \"queryResultCache\":{\n            \"cumulative_hits\":1,\n            \"cumulative_inserts\":4,\n            \"cumulative_evictions\":0,\n            \"cumulative_lookups\":5},\n          \"/replication\":{\n            \"avgTimePerRequest\":1.150843,\n            \"requests\":1,\n            \"indexSize\":\"11.52 KB\",\n            \"indexSizeBytes\":11801,\n            \"totalTime\":1.150843},\n          \"/update\":{\n            \"avgTimePerRequest\":6.5172930000000004,\n            \"requests\":7,\n            \"totalTime\":45.621051},\n          \"fieldValueCache\":{\n            \"cumulative_hits\":0,\n            \"cumulative_inserts\":0,\n            \"cumulative_evictions\":0,\n            \"cumulative_lookups\":0},\n          \"searcher\":{\n            \"maxDoc\":7,\n            \"deletedDocs\":0,\n            \"numDocs\":7},\n          \"perSegFilter\":{\n            \"cumulative_hits\":0,\n            \"cumulative_inserts\":0,\n            \"cumulative_evictions\":0,\n            \"cumulative_lookups\":0}}}},\n    \"live_nodes\":[\"127.0.1.1:8983_solr\"]}}\n\n "
        },
        {
            "author": "Shawn Heisey",
            "id": "comment-14094029",
            "date": "2014-08-12T12:50:43+0000",
            "content": "Since this gets the index size, you may want to be aware of SOLR-3990. "
        },
        {
            "author": "Shalin Shekhar Mangar",
            "id": "comment-14111113",
            "date": "2014-08-26T18:36:03+0000",
            "content": "Thanks Shawn but the ReplicationHandler is always available in cloud mode (or at least it should be otherwise recovery won't work). "
        },
        {
            "author": "Shawn Heisey",
            "id": "comment-14111327",
            "date": "2014-08-26T20:59:38+0000",
            "content": "I don't think that the replication handler is the right place to actually calculate the index size, and the code that gets the size is currently duplicated in two places that I know about (the eplication handler and CoreAdminHandler).  The current patch on SOLR-3990 consolidates the calculation to a method on the SolrCore object.\n\nCurrently, if you remove the replication handler, there is currently no other way to get the index size from the admin UI.  Right now, that's the only reason I have the replication handler enabled.  I am not in cloud mode.\n\nExposing the index size in the replication handler (and the replication section of the admin UI) does not seem like a bad thing to me, though for comparison purposes I think it should show the bytes, not the human readable translation. "
        },
        {
            "author": "Shalin Shekhar Mangar",
            "id": "comment-14111338",
            "date": "2014-08-26T21:05:41+0000",
            "content": "Yeah, you're right. I think the right place to expose index size is probably inside the core. We should also expose the transaction log size. The patch that I have attached here adds a \"indexSizeBytes\" to ReplicationHandler. "
        },
        {
            "author": "Upayavira",
            "id": "comment-14604276",
            "date": "2015-06-27T17:45:13+0000",
            "content": "Shalin Shekhar Mangar please do push this patch through. I'll love to make the results visible via the UI. "
        },
        {
            "author": "Cassandra Targett",
            "id": "comment-15877231",
            "date": "2017-02-22T01:38:58+0000",
            "content": "Shalin Shekhar Mangar or Andrzej Bialecki , is this issue essentially a duplicate of SOLR-9858 or SOLR-9857? Even if not a duplicate, perhaps it is superceded by those issues? "
        },
        {
            "author": "Andrzej Bialecki",
            "id": "comment-15877988",
            "date": "2017-02-22T10:53:00+0000",
            "content": "SOLR-9858 implements a more general mechanism for reporting and aggregation of stats between replicas, leaders and nodes. There are probably some missing pieces there that we could take from this issue (e.g. index size reporting). "
        },
        {
            "author": "Andrzej Bialecki",
            "id": "comment-16181476",
            "date": "2017-09-26T20:09:41+0000",
            "content": "Fixed by SOLR-9857 and SOLR-9858. "
        }
    ]
}