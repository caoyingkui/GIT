{
    "id": "LUCENE-647",
    "title": "Error when tried to index with IndexWriter on Luncene 2.0",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "2.0.0",
        "resolution": "Duplicate",
        "status": "Closed"
    },
    "description": "Dear Sir, \n\nI am getting the following runtime exception when I tried to integrate Lucene 2.0 with my java application. \n\n500 Internal Server Error\njava.lang.ExceptionInInitializerError: java.lang.NullPointerException\nat org.apache.lucene.analysis.standard.StandardAnalyzer.tokenStream(StandardAnalyzer.java:72)\nat org.apache.lucene.index.DocumentWriter.invertDocument(DocumentWriter.java:162)\nat org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:93)\nat org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:476)\nat com.kms.utils.IndexFiles.addToIndex(IndexFiles.java:84)\nat com.kms.document.action.DocumentUploadSubmitAction.execute(DocumentUploadSubmitAction.java:180)\nat org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)\nat org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)\nat org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)\nat org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\nat com.evermind[Oracle Application Server Containers for J2EE 10g (9.0.4.0.0)].server.http.ResourceFilterChain.doFilter(ResourceFilterChain.java:65)\nat oracle.security.jazn.oc4j.JAZNFilter.doFilter(Unknown Source)\nat com.evermind[Oracle Application Server Containers for J2EE 10g (9.0.4.0.0)].server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:604)\nat com.evermind[Oracle Application Server Containers for J2EE 10g (9.0.4.0.0)].server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:317)\nat com.evermind[Oracle Application Server Containers for J2EE 10g (9.0.4.0.0)].server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:790)\nat com.evermind[Oracle Application Server Containers for J2EE 10g (9.0.4.0.0)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:270)\nat com.evermind[Oracle Application Server Containers for J2EE 10g (9.0.4.0.0)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:112)\nat com.evermind[Oracle Application Server Containers for J2EE 10g (9.0.4.0.0)].util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:192)\nat java.lang.Thread.run(Thread.java:536)\nCaused by: java.lang.NullPointerException\nat org.apache.lucene.analysis.standard.StandardFilter.<clinit>(StandardFilter.java:32)\n ... 21 more\n\n\n\n\nI have identified that the exception occurs at execution of the following line of code which indexes a document. \n\n\npackage com.kms.utils;\nimport com.kms.parser.Parser;\nimport com.kms.parser.ParserFactory;\nimport com.kms.reuse.Constants;\nimport org.apache.lucene.search.Hits;\nimport org.apache.lucene.search.Query;\nimport org.apache.lucene.queryParser.QueryParser;\nimport org.apache.lucene.analysis.standard.StandardAnalyzer;\nimport org.apache.lucene.document.Document;\nimport org.apache.lucene.document.Field;\nimport org.apache.lucene.index.IndexWriter;\nimport org.apache.lucene.store.FSDirectory;\nimport org.apache.lucene.search.IndexSearcher;\nimport org.apache.lucene.analysis.Analyzer;\nimport org.apache.lucene.store.Directory;\nimport org.apache.lucene.demo.FileDocument;\nimport java.io.*;\npublic class IndexFiles\n{\n  public static void addToIndex(String fileName) \n  {\n   try\n   {\n Analyzer analyzer = new StandardAnalyzer();\nString filePath=\"D:\\docs\"; //Folder to files are save\n    String filePathName=filePath+\"/\"+fileName;\n    Directory directory = FSDirectory.getDirectory(\"D: \\index\",true); \"; \n//Folder to which index files are saved\n Document doc = new Document();\n File file = new File(filePathName);\n Parser parser = ParserFactory.getParser(file);\n StringBuffer content = null;\n String name = \"\";\n String author = \"\";\nString sourceDate = \"\";\n  String keywords = \"\";\nif (parser != null) \n  {\n   content = parser.getContent();\n   name = parser.getTitle();\n   author = parser.getAuthor();\n   sourceDate = parser.getSourceDate();\n   keywords = parser.getKeywords();\n   }\n   doc.add(new Field(\"path\",filePathName, Field.Store.YES,Field.Index.TOKENIZED));\n    doc.add(new Field(\"name\",fileName,Field.Store.YES,Field.Index.TOKENIZED));\n   doc.add(new Field(\"contents\",content.toString(),Field.Store.YES,Field.Index.TOKENIZED));\n   boolean flag=true;\n   File indexFiles=new File(\"D: \\index\");\n   String[] fileList=indexFiles.list();\n       if(fileList.length>1)\n {\nflag=false;\n}\nelse\n{\n flag=true;\n }\nIndexWriter iwriter = new IndexWriter(directory,analyzer,flag);\n iwriter.setMaxFieldLength(25000);\niwriter.addDocument(doc,analyzer);\n iwriter.close();\n}\ncatch(Exception e)\n{\nSystem.out.println(e);\n}\n}\n}\n\n\nI have checked all objects like directory,doc and analayzer for null conditions but they all have specific values. I have even tried to execute the sample code provided with the javadoc API documentation but in vain. \n\nAny kind of solutions (including pseudo codes) are welcome \n\nThanks in advance, \nSherin George",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2006-08-04T09:16:07+0000",
            "content": "Hi Sherin,\n\nYour exception is thrown to indicate that an exception occurred during evaluation of a static initializer or the initializer for a static variable.\nSo the cause of the exception would be much more interesting than the top stack trace.\n\nCaused by: java.lang.NullPointerException\nat org.apache.lucene.analysis.standard.StandardFilter.<clinit>(StandardFilter.java:32)\n ... 21 more\n\nCould you provide the rest of the stacktrace from the stdout of your server?!\n\nDid you build your lucene distr. on your own, or did you use the binary dist?\n\nregards simon ",
            "author": "Simon Willnauer",
            "id": "comment-12425707"
        },
        {
            "date": "2007-05-27T04:47:14+0000",
            "content": "This is a dup of LUCENE-643. ",
            "author": "Michael Busch",
            "id": "comment-12499385"
        }
    ]
}