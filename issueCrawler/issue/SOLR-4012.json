{
    "id": "SOLR-4012",
    "title": "LeaderIntegrationTest sometimes hangs",
    "details": {
        "affect_versions": "None",
        "status": "Open",
        "fix_versions": [],
        "components": [
            "Tests"
        ],
        "type": "Test",
        "priority": "Major",
        "labels": "",
        "resolution": "Unresolved"
    },
    "description": "I was unable to get a stacktrace before. This time I succeeded.",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "author": "Robert Muir",
            "id": "comment-13486004",
            "date": "2012-10-29T13:20:21+0000",
            "content": "\n2012-10-29 09:17:20\nFull thread dump Java HotSpot(TM) Client VM (19.0-b09 mixed mode, sharing):\n\n\"searcherExecutor-92-thread-1\" prio=6 tid=0x05259800 nid=0x1b54 waiting on condition [0x06bff000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1fd50c20> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-EventThread\" daemon prio=6 tid=0x05259400 nid=0x1e5c waiting on condition [0x06b6f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1fc08aa8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-SendThread(127.0.0.1:59207)\" daemon prio=6 tid=0x05258c00 nid=0x1a00 runnable [0x06adf000]\n   java.lang.Thread.State: RUNNABLE\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:273)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:255)\n\tat sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:136)\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n\t- locked <0x1fc0bc98> (a sun.nio.ch.Util$2)\n\t- locked <0x1fc0bca8> (a java.util.Collections$UnmodifiableSet)\n\t- locked <0x1fc0bc20> (a sun.nio.ch.WindowsSelectorImpl)\n\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1131)\n\n\"searcherExecutor-84-thread-1\" prio=6 tid=0x05258800 nid=0x1f88 waiting on condition [0x06a4f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1fbb2c18> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-EventThread\" daemon prio=6 tid=0x05226c00 nid=0x1a70 waiting on condition [0x069bf000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1faa0c20> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-SendThread(127.0.0.1:59207)\" daemon prio=6 tid=0x05226400 nid=0x1f08 runnable [0x0692f000]\n   java.lang.Thread.State: RUNNABLE\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:273)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:255)\n\tat sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:136)\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n\t- locked <0x1faa3e10> (a sun.nio.ch.Util$2)\n\t- locked <0x1faa3e20> (a java.util.Collections$UnmodifiableSet)\n\t- locked <0x1faa3d98> (a sun.nio.ch.WindowsSelectorImpl)\n\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1131)\n\n\"searcherExecutor-76-thread-1\" prio=6 tid=0x05225000 nid=0x1588 waiting on condition [0x0689f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1fa3ba68> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-EventThread\" daemon prio=6 tid=0x05227c00 nid=0x1094 waiting on condition [0x0680f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f9127d0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-SendThread(127.0.0.1:59207)\" daemon prio=6 tid=0x05225c00 nid=0x1e80 runnable [0x0677f000]\n   java.lang.Thread.State: RUNNABLE\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:273)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:255)\n\tat sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:136)\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n\t- locked <0x1f9159c0> (a sun.nio.ch.Util$2)\n\t- locked <0x1f9159d0> (a java.util.Collections$UnmodifiableSet)\n\t- locked <0x1f915948> (a sun.nio.ch.WindowsSelectorImpl)\n\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1131)\n\n\"searcherExecutor-68-thread-1\" prio=6 tid=0x05225800 nid=0x1d68 waiting on condition [0x066ef000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f8cc6f8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-EventThread\" daemon prio=6 tid=0x05229000 nid=0x1fc4 waiting on condition [0x0665f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f75c8c8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-SendThread(127.0.0.1:59207)\" daemon prio=6 tid=0x05227800 nid=0x1d88 runnable [0x065cf000]\n   java.lang.Thread.State: RUNNABLE\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:273)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:255)\n\tat sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:136)\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n\t- locked <0x1f75fab8> (a sun.nio.ch.Util$2)\n\t- locked <0x1f75fac8> (a java.util.Collections$UnmodifiableSet)\n\t- locked <0x1f75fa40> (a sun.nio.ch.WindowsSelectorImpl)\n\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1131)\n\n\"searcherExecutor-60-thread-1\" prio=6 tid=0x0522a000 nid=0x1860 waiting on condition [0x0653f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f744978> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-EventThread\" daemon prio=6 tid=0x05229400 nid=0x1d9c waiting on condition [0x064af000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f6cc3a8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-SendThread(127.0.0.1:59207)\" daemon prio=6 tid=0x05228800 nid=0x1c64 runnable [0x0641f000]\n   java.lang.Thread.State: RUNNABLE\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:273)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:255)\n\tat sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:136)\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n\t- locked <0x1f6cf578> (a sun.nio.ch.Util$2)\n\t- locked <0x1f6cf588> (a java.util.Collections$UnmodifiableSet)\n\t- locked <0x1f6cf500> (a sun.nio.ch.WindowsSelectorImpl)\n\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1131)\n\n\"searcherExecutor-52-thread-1\" prio=6 tid=0x05229c00 nid=0x6a0 waiting on condition [0x0638f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f670f90> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"Overseer-88572709385666562-127.0.0.1:7000_solr-n_0000000000\" daemon prio=6 tid=0x0522b400 nid=0x1c08 waiting on condition [0x05aff000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f61f038> (a java.util.concurrent.CountDownLatch$Sync)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:969)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1281)\n\tat java.util.concurrent.CountDownLatch.await(CountDownLatch.java:207)\n\tat org.apache.solr.cloud.DistributedQueue$LatchChildWatcher.await(DistributedQueue.java:179)\n\tat org.apache.solr.cloud.DistributedQueue.peek(DistributedQueue.java:277)\n\tat org.apache.solr.cloud.OverseerCollectionProcessor.run(OverseerCollectionProcessor.java:86)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"Thread-8\" daemon prio=6 tid=0x05228400 nid=0x1850 waiting on condition [0x0594f000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n\tat java.lang.Thread.sleep(Native Method)\n\tat org.apache.solr.cloud.Overseer$ClusterStateUpdater.run(Overseer.java:156)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-EventThread\" daemon prio=6 tid=0x0522c400 nid=0xba4 waiting on condition [0x05a6f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f61f258> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]-SendThread(127.0.0.1:59207)\" daemon prio=6 tid=0x05227000 nid=0x16a8 runnable [0x058bf000]\n   java.lang.Thread.State: RUNNABLE\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:273)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:255)\n\tat sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:136)\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n\t- locked <0x1f622428> (a sun.nio.ch.Util$2)\n\t- locked <0x1f622438> (a java.util.Collections$UnmodifiableSet)\n\t- locked <0x1f6223b0> (a sun.nio.ch.WindowsSelectorImpl)\n\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1131)\n\n\"ProcessThread:-1\" daemon prio=6 tid=0x0522cc00 nid=0xcf0 waiting on condition [0x0582f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f5b0ff8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat org.apache.zookeeper.server.PrepRequestProcessor.run(PrepRequestProcessor.java:105)\n\n\"SyncThread:0\" daemon prio=6 tid=0x0522a800 nid=0xfcc waiting on condition [0x0579f000]\n   java.lang.Thread.State: WAITING (parking)\n\tat sun.misc.Unsafe.park(Native Method)\n\t- parking to wait for  <0x1f5b10e0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)\n\tat org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:94)\n\n\"SessionTracker\" daemon prio=6 tid=0x0522b800 nid=0x1314 in Object.wait() [0x0570f000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\tat org.apache.zookeeper.server.SessionTrackerImpl.run(SessionTrackerImpl.java:145)\n\t- locked <0x1f5b1140> (a org.apache.zookeeper.server.SessionTrackerImpl)\n\n\"NIOServerCxn.Factory:0.0.0.0/0.0.0.0:0\" daemon prio=6 tid=0x0522c000 nid=0x1798 runnable [0x0567f000]\n   java.lang.Thread.State: RUNNABLE\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:273)\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:255)\n\tat sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:136)\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n\t- locked <0x1f5b4338> (a sun.nio.ch.Util$2)\n\t- locked <0x1f5b4348> (a java.util.Collections$UnmodifiableSet)\n\t- locked <0x1f5b42c0> (a sun.nio.ch.WindowsSelectorImpl)\n\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n\tat org.apache.zookeeper.server.NIOServerCnxn$Factory.run(NIOServerCnxn.java:232)\n\n\"Thread-7\" daemon prio=6 tid=0x0522ac00 nid=0x1790 in Object.wait() [0x0545f000]\n   java.lang.Thread.State: WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x1f5b11e0> (a org.apache.zookeeper.server.NIOServerCnxn$Factory)\n\tat java.lang.Thread.join(Thread.java:1186)\n\t- locked <0x1f5b11e0> (a org.apache.zookeeper.server.NIOServerCnxn$Factory)\n\tat java.lang.Thread.join(Thread.java:1239)\n\tat org.apache.solr.cloud.ZkTestServer$ZKServerMain.runFromConfig(ZkTestServer.java:103)\n\tat org.apache.solr.cloud.ZkTestServer$2.run(ZkTestServer.java:214)\n\n\"TEST-LeaderElectionIntegrationTest.testLeaderElectionAfterClientTimeout-seed#[A66B1B5824E9744C]\" prio=6 tid=0x0513a000 nid=0x1b64 waiting on condition [0x053ce000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n\tat java.lang.Thread.sleep(Native Method)\n\tat org.apache.solr.cloud.ShardLeaderElectionContext.waitForReplicasToComeUp(ElectionContext.java:317)\n\tat org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:150)\n\tat org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:155)\n\tat org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:99)\n\tat org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:265)\n\tat org.apache.solr.cloud.ZkController.joinElection(ZkController.java:733)\n\tat org.apache.solr.cloud.ZkController.register(ZkController.java:566)\n\tat org.apache.solr.cloud.ZkController.register(ZkController.java:532)\n\tat org.apache.solr.core.CoreContainer.registerInZk(CoreContainer.java:704)\n\tat org.apache.solr.core.CoreContainer.register(CoreContainer.java:688)\n\tat org.apache.solr.core.CoreContainer.load(CoreContainer.java:530)\n\tat org.apache.solr.core.CoreContainer.load(CoreContainer.java:351)\n\tat org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:303)\n\tat org.apache.solr.cloud.LeaderElectionIntegrationTest.setupContainer(LeaderElectionIntegrationTest.java:152)\n\tat org.apache.solr.cloud.LeaderElectionIntegrationTest.setUp(LeaderElectionIntegrationTest.java:107)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1559)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:79)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:771)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:787)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)\n\tat org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:50)\n\tat org.apache.lucene.util.TestRuleFieldCacheSanity$1.evaluate(TestRuleFieldCacheSanity.java:51)\n\tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)\n\tat org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\n\tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:70)\n\tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:358)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:782)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:442)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:746)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:648)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:682)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:693)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)\n\tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n\tat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:42)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)\n\tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\n\tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:43)\n\tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\n\tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:70)\n\tat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:55)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:358)\n\tat java.lang.Thread.run(Thread.java:662)\n\n\"SUITE-LeaderElectionIntegrationTest-seed#[A66B1B5824E9744C]\" prio=6 tid=0x0515d400 nid=0x1a40 in Object.wait() [0x0533f000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x1f09f070> (a java.lang.Thread)\n\tat java.lang.Thread.join(Thread.java:1194)\n\t- locked <0x1f09f070> (a java.lang.Thread)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:787)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$2.evaluate(ThreadLeakControl.java:385)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:556)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$200(RandomizedRunner.java:79)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$1.run(RandomizedRunner.java:492)\n\n\"Low Memory Detector\" daemon prio=6 tid=0x00cc3400 nid=0x1098 runnable [0x00000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"CompilerThread0\" daemon prio=10 tid=0x00cc2000 nid=0x1b88 waiting on condition [0x00000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"Attach Listener\" daemon prio=10 tid=0x00cc1000 nid=0x1c44 waiting on condition [0x00000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"Signal Dispatcher\" daemon prio=10 tid=0x00cc0000 nid=0x13a0 runnable [0x00000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"Finalizer\" daemon prio=8 tid=0x00c76400 nid=0x189c in Object.wait() [0x0489f000]\n   java.lang.Thread.State: WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)\n\t- locked <0x1efe02b0> (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio=10 tid=0x00c74c00 nid=0x15e0 in Object.wait() [0x0480f000]\n   java.lang.Thread.State: WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\tat java.lang.Object.wait(Object.java:485)\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)\n\t- locked <0x1efe0340> (a java.lang.ref.Reference$Lock)\n\n\"main\" prio=6 tid=0x002fec00 nid=0x18ec in Object.wait() [0x003af000]\n   java.lang.Thread.State: WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x1f0888b8> (a com.carrotsearch.randomizedtesting.RandomizedRunner$1)\n\tat java.lang.Thread.join(Thread.java:1186)\n\t- locked <0x1f0888b8> (a com.carrotsearch.randomizedtesting.RandomizedRunner$1)\n\tat java.lang.Thread.join(Thread.java:1239)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:502)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.run(RandomizedRunner.java:399)\n\tat com.carrotsearch.ant.tasks.junit4.slave.SlaveMain.execute(SlaveMain.java:161)\n\tat com.carrotsearch.ant.tasks.junit4.slave.SlaveMain.main(SlaveMain.java:255)\n\tat com.carrotsearch.ant.tasks.junit4.slave.SlaveMainSafe.main(SlaveMainSafe.java:12)\n\n\"VM Thread\" prio=10 tid=0x00c73400 nid=0x1d50 runnable \n\n\"VM Periodic Task Thread\" prio=10 tid=0x00cc5800 nid=0xfdc waiting on condition \n\nJNI global references: 1462\n\n\n "
        },
        {
            "author": "Dawid Weiss",
            "id": "comment-13486011",
            "date": "2012-10-29T13:34:47+0000",
            "content": "It didn't time out yet (the runner) so I guess you're not talking about the runner issue? "
        },
        {
            "author": "Robert Muir",
            "id": "comment-13486016",
            "date": "2012-10-29T13:47:35+0000",
            "content": "This is just a \"normal\" test hang I think. "
        },
        {
            "author": "Dawid Weiss",
            "id": "comment-13486018",
            "date": "2012-10-29T13:48:53+0000",
            "content": "Yup, sorry, thought it's the hung runner issue. "
        },
        {
            "author": "Mark Miller",
            "id": "comment-13486072",
            "date": "2012-10-29T15:12:23+0000",
            "content": "It's waiting to see other replicas come up - which is odd, because it should be the first time the nodes are coming up in setup - seems like perhaps pollution between the two tests...I'm adding a timestamp to the zk dir so it's sure to be different for each test in this class. "
        },
        {
            "author": "Commit Tag Bot",
            "id": "comment-13610623",
            "date": "2013-03-22T16:22:12+0000",
            "content": "[branch_4x commit] Mark Robert Miller\nhttp://svn.apache.org/viewvc?view=revision&revision=1403372\n\nSOLR-4012 LeaderIntegrationTest sometimes hangs - ensure unique zk data dir\n "
        }
    ]
}