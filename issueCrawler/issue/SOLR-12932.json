{
    "id": "SOLR-12932",
    "title": "ant test (without badapples=false) should pass easily for developers.",
    "details": {
        "type": "Sub-task",
        "status": "Open",
        "labels": "",
        "fix_versions": [],
        "components": [
            "Tests"
        ],
        "priority": "Major",
        "resolution": "Unresolved",
        "affect_versions": "None"
    },
    "description": "If we fix the tests we will end up here anyway, but we can shortcut this.\n\nOnce I get my first patch in, anyone who mentions a test that fails locally for them at any time (not jenkins), I will fix it.",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "id": "comment-16669293",
            "content": "Test Fail: HttpPartitionTest.test\nFail message:\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=HttpPartitionTest -Dtests.method=test -Dtests.seed=3C00D32E6729C090 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ar-OM -Dtests.timezone=Australia/Melbourne -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 42.1s J1 | HttpPartitionTest.test <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: max version bucket seed not updated after recovery!\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([3C00D32E6729C090:B454ECF4C9D5AD68]:0)\n   [junit4]    >  at org.apache.solr.cloud.HttpPartitionTest.testRf2(HttpPartitionTest.java:364)\n   [junit4]    >  at org.apache.solr.cloud.HttpPartitionTest.test(HttpPartitionTest.java:148) ",
            "author": "Mark Miller",
            "date": "2018-10-30T20:36:16+0000"
        },
        {
            "id": "comment-16669294",
            "content": "Test: OverseerTest\nFail message:\nUnknown. ",
            "author": "Mark Miller",
            "date": "2018-10-30T20:36:44+0000"
        },
        {
            "id": "comment-16669562",
            "content": "Below did not reproduce the the reproduce line. Saved logs off in case more details needed.\n\nTest:\u00a0TestCollectionsAPIViaSolrCloudCluster#testCollectionCreateSearchDelete\n Fail message:\n\ntestCollectionCreateSearchDelete\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestCollectionsAPIViaSolrCloudCluster -Dtests.method=testCollectionCreateSearchDelete -Dtests.seed=69334EE3FF38A1CC -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=it-IT -Dtests.timezone=Africa/Tunis -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] ERROR   13.3s J7 | TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete <<<\n   [junit4]    > Throwable #1: org.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at http://127.0.0.1:33783/solr/testcollection_shard1_replica_n2: Expected mime type application/octet-stream but got text/html. <html>\n   [junit4]    > <head>\n   [junit4]    > <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n   [junit4]    > <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n2/update</title>\n   [junit4]    > </head>\n   [junit4]    > <body><h2>HTTP ERROR 404</h2>\n   [junit4]    > <p>Problem accessing /solr/testcollection_shard1_replica_n2/update. Reason:\n   [junit4]    > <pre>    Can not find: /solr/testcollection_shard1_replica_n2/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n   [junit4]    > </body>\n   [junit4]    > </html>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([69334EE3FF38A1CC:CAC9E04678D04B69]:0)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:551)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1016)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n   [junit4]    > \tat org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:237)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete(TestCollectionsAPIViaSolrCloudCluster.java:181)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]    > Caused by: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http://127.0.0.1:33783/solr/testcollection_shard1_replica_n2: Expected mime type application/octet-stream but got text/html. <html>\n   [junit4]    > <head>\n   [junit4]    > <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n   [junit4]    > <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n2/update</title>\n   [junit4]    > </head>\n   [junit4]    > <body><h2>HTTP ERROR 404</h2>\n   [junit4]    > <p>Problem accessing /solr/testcollection_shard1_replica_n2/update. Reason:\n   [junit4]    > <pre>    Can not find: /solr/testcollection_shard1_replica_n2/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n   [junit4]    > </body>\n   [junit4]    > </html>\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:607)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:484)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:414)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.lambda$directUpdate$0(CloudSolrClient.java:528)\n   [junit4]    > \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n   [junit4]    > \tat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    > \t... 1 more\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T03:34:57+0000"
        },
        {
            "id": "comment-16669568",
            "content": "Separate test run. Seed does not reproduce.\n\nTest: OverseerTest#testBadQueueItem\nFail message:\n\n23:37:34\u00a0 \u00a0 [junit4] \u00a0 2> NOTE: reproduce with: ant test\u00a0 -Dtestcase=OverseerTest -Dtests.method=testBadQueueItem -Dtests.seed=34970C10FE2A115D -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=fr -Dtests.timezone=Canada/Yukon -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n23:37:34\u00a0 \u00a0 [junit4] FAILURE 0.88s J6 | OverseerTest.testBadQueueItem <<<\n23:37:34\u00a0 \u00a0 [junit4]\u00a0 \u00a0 > Throwable #1: java.lang.AssertionError: expected:<1> but was:<0>\n23:37:34\u00a0 \u00a0 [junit4]\u00a0 \u00a0 > at __randomizedtesting.SeedInfo.seed([34970C10FE2A115D:843AC65BA75F47C5]:0)\n23:37:34\u00a0 \u00a0 [junit4]\u00a0 \u00a0 > at org.apache.solr.cloud.OverseerTest.testBadQueueItem(OverseerTest.java:424)\n23:37:34\u00a0 \u00a0 [junit4]\u00a0 \u00a0 > at java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T03:45:17+0000"
        },
        {
            "id": "comment-16669571",
            "content": "Thanks! No log necessary, really just the test, but also the message lets me know for sure if I got that specific issue.\n\nI've actually seen testCollectionCreateSearchDelete and have been trying to correct it. I'll move to awaits fix and keep working on it.\n\nI've also seen the Overseer test failure. I had beasted that pretty well on a slightly older different checkout, but a lot of changes since then. I'll just try and fix that one directly.\n ",
            "author": "Mark Miller",
            "date": "2018-10-31T03:55:16+0000"
        },
        {
            "id": "comment-16670004",
            "content": "I ran the tests overnight about ever 45min and have some more failures to share. I'll collect the test cases and error messages. ",
            "author": "Kevin Risden",
            "date": "2018-10-31T12:07:14+0000"
        },
        {
            "id": "comment-16670037",
            "content": "Test: TestExternalValueFeatures\n\n   [junit4]   2> SEVERE: 1 thread leaked from SUITE scope at org.apache.solr.ltr.feature.TestExternalValueFeatures: \n   [junit4]   2>    1) Thread[id=112, name=qtp970227545-112, state=TIMED_WAITING, group=TGRP-TestExternalValueFeatures]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]   2>         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\n   [junit4]   2>         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.reservedWait(ReservedThreadExecutor.java:292)\n   [junit4]   2>         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:357)\n   [junit4]   2>         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)\n   [junit4]   2>         at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:745)\n   [junit4]   2> Oct 31, 2018 7:44:18 AM com.carrotsearch.randomizedtesting.ThreadLeakControl tryToInterruptAll\n   [junit4]   2> INFO: Starting to interrupt leaked threads:\n   [junit4]   2>    1) Thread[id=112, name=qtp970227545-112, state=TIMED_WAITING, group=TGRP-TestExternalValueFeatures]\n   [junit4]   2> Oct 31, 2018 7:44:21 AM com.carrotsearch.randomizedtesting.ThreadLeakControl tryToInterruptAll\n   [junit4]   2> SEVERE: There are still zombie threads that couldn't be terminated:\n   [junit4]   2>    1) Thread[id=112, name=qtp970227545-112, state=TIMED_WAITING, group=TGRP-TestExternalValueFeatures]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]   2>         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\n   [junit4]   2>         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.reservedWait(ReservedThreadExecutor.java:292)\n   [junit4]   2>         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:357)\n   [junit4]   2>         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)\n   [junit4]   2>         at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:745)\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene70): {_version_=FST50, popularity=PostingsFormat(name=Asserting), description=PostingsFormat(name=LuceneVarGapFixedInterval), id=PostingsFormat(name=Asserting), text=PostingsFormat(name=MockRandom), title=PostingsFormat(name=LuceneVarGapFixedInterval)}, docValues:{_version_=DocValuesFormat(name=Direct), popularity=DocValuesFormat(name=Lucene70)}, maxPointsInLeafNode=956, maxMBSortInHeap=7.014047826661978, sim=RandomSimilarity(queryNorm=true): {}, locale=ar-EG, timezone=Africa/El_Aaiun\n   [junit4]   2> NOTE: Mac OS X 10.13.6 x86_64/Oracle Corporation 1.8.0_121 (64-bit)/cpus=4,threads=2,free=198059320,total=277872640\n   [junit4]   2> NOTE: All tests run in this JVM: [TestValueFeature, TestDefaultWrapperModel, TestExternalValueFeatures]\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestExternalValueFeatures -Dtests.seed=CA847E592B26E1E8 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ar-EG -Dtests.timezone=Africa/El_Aaiun -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] ERROR   0.00s J0 | TestExternalValueFeatures (suite) <<<\n   [junit4]    > Throwable #1: com.carrotsearch.randomizedtesting.ThreadLeakError: 1 thread leaked from SUITE scope at org.apache.solr.ltr.feature.TestExternalValueFeatures: \n   [junit4]    >    1) Thread[id=112, name=qtp970227545-112, state=TIMED_WAITING, group=TGRP-TestExternalValueFeatures]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\n   [junit4]    >         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.reservedWait(ReservedThreadExecutor.java:292)\n   [junit4]    >         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:357)\n   [junit4]    >         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)\n   [junit4]    >         at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:745)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([CA847E592B26E1E8]:0)Throwable #2: com.carrotsearch.randomizedtesting.ThreadLeakError: There are still zombie threads that couldn't be terminated:\n   [junit4]    >    1) Thread[id=112, name=qtp970227545-112, state=TIMED_WAITING, group=TGRP-TestExternalValueFeatures]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\n   [junit4]    >         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.reservedWait(ReservedThreadExecutor.java:292)\n   [junit4]    >         at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:357)\n   [junit4]    >         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)\n   [junit4]    >         at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:745)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([CA847E592B26E1E8]:0)\n   [junit4] Completed [34/37 (1!)] on J0 in 40.69s, 2 tests, 2 errors <<< FAILURES!\n\n ",
            "author": "Elizabeth Haubert",
            "date": "2018-10-31T12:38:31+0000"
        },
        {
            "id": "comment-16670058",
            "content": "\u00a0Test:\u00a0DistribCursorPagingTest\n\nreproduce with: ant test  -Dtestcase=DistribCursorPagingTest -Dtests.method=test -Dtests.seed=87B400F0180614A3 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=sq-AL -Dtests.timezone=Etc/GMT+9 -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n23:47:46    [junit4] FAILURE 19.4s J7 | DistribCursorPagingTest.test <<<\n23:47:46    [junit4]    > Throwable #1: junit.framework.AssertionFailedError: .facet_counts.facet_fields.str.x:0!=null\n23:47:46    [junit4]    > \tat __randomizedtesting.SeedInfo.seed([87B400F0180614A3:FE03F2AB6FA795B]:0)\n23:47:46    [junit4]    > \tat junit.framework.Assert.fail(Assert.java:50)\n23:47:46    [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase.compareSolrResponses(BaseDistributedSearchTestCase.java:985)\n23:47:46    [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase.compareResponses(BaseDistributedSearchTestCase.java:1012)\n23:47:46    [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase.query(BaseDistributedSearchTestCase.java:666)\n23:47:46    [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase.query(BaseDistributedSearchTestCase.java:629)\n23:47:46    [junit4]    > \tat org.apache.solr.cloud.DistribCursorPagingTest.doSimpleTest(DistribCursorPagingTest.java:258)\n23:47:46    [junit4]    > \tat org.apache.solr.cloud.DistribCursorPagingTest.test(DistribCursorPagingTest.java:90)\n23:47:46    [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:1066)\n23:47:46    [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:1040)\n23:47:46    [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T12:56:51+0000"
        },
        {
            "id": "comment-16670059",
            "content": "Test: TestPKIAuthenticationPlugin#test\n\nreproduce with: ant test -Dtestcase=TestPKIAuthenticationPlugin -Dtests.method=test -Dtests.seed=4FE78DD4E91611D9 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ar-BH -Dtests.timezone=Asia/Kabul -Dtests.asserts=true -Dtests.file.encoding=UTF-8 [junit4] ERROR 10.7s J0 | TestPKIAuthenticationPlugin.test <<< [junit4] > Throwable #1: java.lang.NullPointerException [junit4] > at __randomizedtesting.SeedInfo.seed([4FE78DD4E91611D9:C7B3B20E47EA7C21]:0) [junit4] > at org.apache.solr.security.TestPKIAuthenticationPlugin.test(TestPKIAuthenticationPlugin.java:105) [junit4] > at java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T12:57:21+0000"
        },
        {
            "id": "comment-16670060",
            "content": "Test: AutoAddReplicasPlanActionTest#testSimple\n\nreproduce with: ant test  -Dtestcase=AutoAddReplicasPlanActionTest -Dtests.method=testSimple -Dtests.seed=76A7FA053BF740C5 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=fr -Dtests.timezone=Asia/Baku -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n00:46:11    [junit4] ERROR   37.4s J5 | AutoAddReplicasPlanActionTest.testSimple <<<\n00:46:11    [junit4]    > Throwable #1: java.util.concurrent.TimeoutException\n00:46:11    [junit4]    > \tat __randomizedtesting.SeedInfo.seed([76A7FA053BF740C5:4E14DEFB1C049414]:0)\n00:46:11    [junit4]    > \tat org.apache.solr.common.cloud.ZkStateReader.waitForState(ZkStateReader.java:1512)\n00:46:11    [junit4]    > \tat org.apache.solr.cloud.autoscaling.AutoAddReplicasPlanActionTest.waitForNodeLeave(AutoAddReplicasPlanActionTest.java:188)\n00:46:11    [junit4]    > \tat org.apache.solr.cloud.autoscaling.AutoAddReplicasPlanActionTest.testSimple(AutoAddReplicasPlanActionTest.java:114)\n00:46:11    [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T12:58:34+0000"
        },
        {
            "id": "comment-16670065",
            "content": "Test: TestCollectionsAPIViaSolrCloudCluster#testCollectionCreateSearchDelete\n\nreproduce with: ant test  -Dtestcase=TestCollectionsAPIViaSolrCloudCluster -Dtests.method=testCollectionCreateSearchDelete -Dtests.seed=879612B1BD020602 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=fr-LU -Dtests.timezone=Canada/Yukon -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n01:16:51    [junit4] ERROR   8.48s J7 | TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete <<<\n01:16:51    [junit4]    > Throwable #1: org.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at https://127.0.0.1:35461/solr/testcollection_shard1_replica_n2: Expected mime type application/octet-stream but got text/html. <html>\n01:16:51    [junit4]    > <head>\n01:16:51    [junit4]    > <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n01:16:51    [junit4]    > <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n2/update</title>\n01:16:51    [junit4]    > </head>\n01:16:51    [junit4]    > <body><h2>HTTP ERROR 404</h2>\n01:16:51    [junit4]    > <p>Problem accessing /solr/testcollection_shard1_replica_n2/update. Reason:\n01:16:51    [junit4]    > <pre>    Can not find: /solr/testcollection_shard1_replica_n2/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n01:16:51    [junit4]    > </body>\n01:16:51    [junit4]    > </html>\n01:16:51    [junit4]    > \tat __randomizedtesting.SeedInfo.seed([879612B1BD020602:246CBC143AEAECA7]:0)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:551)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1016)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:237)\n01:16:51    [junit4]    > \tat org.apache.solr.cloud.api.collections.TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete(TestCollectionsAPIViaSolrCloudCluster.java:181)\n01:16:51    [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n01:16:51    [junit4]    > Caused by: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at https://127.0.0.1:35461/solr/testcollection_shard1_replica_n2: Expected mime type application/octet-stream but got text/html. <html>\n01:16:51    [junit4]    > <head>\n01:16:51    [junit4]    > <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n01:16:51    [junit4]    > <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n2/update</title>\n01:16:51    [junit4]    > </head>\n01:16:51    [junit4]    > <body><h2>HTTP ERROR 404</h2>\n01:16:51    [junit4]    > <p>Problem accessing /solr/testcollection_shard1_replica_n2/update. Reason:\n01:16:51    [junit4]    > <pre>    Can not find: /solr/testcollection_shard1_replica_n2/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n01:16:51    [junit4]    > </body>\n01:16:51    [junit4]    > </html>\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:607)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:484)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:414)\n01:16:51    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.lambda$directUpdate$0(CloudSolrClient.java:528)\n01:16:51    [junit4]    > \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n01:16:51    [junit4]    > \tat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\n01:16:51    [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n01:16:51    [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n01:16:51    [junit4]    > \t... 1 more\n\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T12:59:57+0000"
        },
        {
            "id": "comment-16670075",
            "content": "Test: ExecutePlanActionTest#testIntegration\n\nNOTE: reproduce with: ant test  -Dtestcase=ExecutePlanActionTest -Dtests.method=testIntegration -Dtests.seed=C96AD1F563B86BE2 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=es-VE -Dtests.timezone=America/Ensenada -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 2.56s J0 | ExecutePlanActionTest.testIntegration <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<2> but was:<1>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([C96AD1F563B86BE2:790BDFD94687CAC7]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.ExecutePlanActionTest.testIntegration(ExecutePlanActionTest.java:224)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T13:04:49+0000"
        },
        {
            "id": "comment-16670078",
            "content": "Test: SolrCoreTest#testReloadLeak\n\nNOTE: reproduce with: ant test  -Dtestcase=SolrCoreTest -Dtests.method=testReloadLeak -Dtests.seed=153A4F27CDF7F30F -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=vi-VN -Dtests.timezone=America/Denver -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   0.81s J3 | SolrCoreTest.testReloadLeak <<<\n   [junit4]    > Throwable #1: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=18166, name=testReloadLeak-7844-thread-1, state=RUNNABLE, group=TGRP-SolrCoreTest]\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([153A4F27CDF7F30F:9792FAE9140ECF29]:0)\n   [junit4]    > Caused by: org.apache.solr.update.SolrCoreState$CoreIsClosedException\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([153A4F27CDF7F30F]:0)\n   [junit4]    > \tat org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:2003)\n   [junit4]    > \tat org.apache.solr.core.SolrCoreTest$NewSearcherRunnable.run(SolrCoreTest.java:311)\n   [junit4]    > \tat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T13:05:47+0000"
        },
        {
            "id": "comment-16670086",
            "content": "All of the ones I posted above are single failures in a test run. Here is a run with 3 failures:\n\nTest: TestCloudSearcherWarming#testRepFactor1LeaderStartup\n\nreproduce with: ant test  -Dtestcase=TestCloudSearcherWarming -Dtests.method=testRepFactor1LeaderStartup -Dtests.seed=E30A144FF13D52E7 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ar-SA -Dtests.timezone=NZ-CHAT -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   33.4s J0 | TestCloudSearcherWarming.testRepFactor1LeaderStartup <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: jetty count:0\n   [junit4]    > null\n   [junit4]    > Live Nodes: [127.0.0.1:44315_solr]\n   [junit4]    > Last available state: DocCollection(testRepFactor1LeaderStartup//collections/testRepFactor1LeaderStartup/state.json/4)={\n   [junit4]    >   \"pullReplicas\":\"0\",\n   [junit4]    >   \"replicationFactor\":\"1\",\n   [junit4]    >   \"shards\":{\"shard1\":{\n   [junit4]    >       \"range\":\"80000000-7fffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\"core_node2\":{\n   [junit4]    >           \"core\":\"testRepFactor1LeaderStartup_shard1_replica_n1\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:44315/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:44315_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"}}}},\n   [junit4]    >   \"router\":{\"name\":\"compositeId\"},\n   [junit4]    >   \"maxShardsPerNode\":\"1\",\n   [junit4]    >   \"autoAddReplicas\":\"false\",\n   [junit4]    >   \"nrtReplicas\":\"1\",\n   [junit4]    >   \"tlogReplicas\":\"0\"}\n   [junit4]    > \tat org.apache.solr.cloud.SolrCloudTestCase.waitForState(SolrCloudTestCase.java:283)\n   [junit4]    > \tat org.apache.solr.cloud.SolrCloudTestCase.waitForState(SolrCloudTestCase.java:261)\n   [junit4]    > \tat org.apache.solr.cloud.TestCloudSearcherWarming.testRepFactor1LeaderStartup(TestCloudSearcherWarming.java:117)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)Throwable #2: org.apache.solr.client.solrj.SolrServerException: No live SolrServers available to handle this request\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:461)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1107)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:211)\n   [junit4]    > \tat org.apache.solr.cloud.MiniSolrCloudCluster.deleteAllCollections(MiniSolrCloudCluster.java:508)\n   [junit4]    > \tat org.apache.solr.cloud.TestCloudSearcherWarming.tearDown(TestCloudSearcherWarming.java:78)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\nTest: NodeLostTriggerTest#testListenerAcceptance\n\nNOTE: reproduce with: ant test  -Dtestcase=NodeLostTriggerTest -Dtests.method=testListenerAcceptance -Dtests.seed=E30A144FF13D52E7 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=fr-CH -Dtests.timezone=ART -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 0.20s J0 | NodeLostTriggerTest.testListenerAcceptance <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<1> but was:<0>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([E30A144FF13D52E7:F2BE4EA848B44611]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.NodeLostTriggerTest.testListenerAcceptance(NodeLostTriggerTest.java:265)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\nTest: NodeLostTriggerTest#testTrigger\n\nreproduce with: ant test  -Dtestcase=NodeLostTriggerTest -Dtests.method=testTrigger -Dtests.seed=E30A144FF13D52E7 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=fr-CH -Dtests.timezone=ART -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 2.04s J0 | NodeLostTriggerTest.testTrigger <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: [127.0.0.1:40385_solr] doesn't contain 127.0.0.1:45145_solr\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([E30A144FF13D52E7:80C122CD68F221CA]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.NodeLostTriggerTest.testTrigger(NodeLostTriggerTest.java:117)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T13:11:23+0000"
        },
        {
            "id": "comment-16670159",
            "content": "Test:TestAuthenticationFramework#testBasics\n\nreproduce with: ant test  -Dtestcase=TestAuthenticationFramework -Dtests.method=testBasics -Dtests.seed=D3D81D8F48AFF8C -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=de-LU -Dtests.timezone=PRT -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n09:52:10    [junit4] ERROR   7.23s J0 | TestAuthenticationFramework.testBasics <<<\n09:52:10    [junit4]    > Throwable #1: org.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at https://127.0.0.1:39937/solr/testcollection_shard1_replica_n3: Expected mime type application/octet-stream but got text/html. <html>\n09:52:10    [junit4]    > <head>\n09:52:10    [junit4]    > <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n09:52:10    [junit4]    > <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n3/update</title>\n09:52:10    [junit4]    > </head>\n09:52:10    [junit4]    > <body><h2>HTTP ERROR 404</h2>\n09:52:10    [junit4]    > <p>Problem accessing /solr/testcollection_shard1_replica_n3/update. Reason:\n09:52:10    [junit4]    > <pre>    Can not find: /solr/testcollection_shard1_replica_n3/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n09:52:10    [junit4]    > </body>\n09:52:10    [junit4]    > </html>\n09:52:10    [junit4]    > \tat __randomizedtesting.SeedInfo.seed([D3D81D8F48AFF8C:30E52FF4CC64A1FC]:0)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:551)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1016)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:237)\n09:52:10    [junit4]    > \tat org.apache.solr.cloud.TestAuthenticationFramework.collectionCreateSearchDeleteTwice(TestAuthenticationFramework.java:128)\n09:52:10    [junit4]    > \tat org.apache.solr.cloud.TestAuthenticationFramework.testBasics(TestAuthenticationFramework.java:75)\n09:52:10    [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n09:52:10    [junit4]    > Caused by: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at https://127.0.0.1:39937/solr/testcollection_shard1_replica_n3: Expected mime type application/octet-stream but got text/html. <html>\n09:52:10    [junit4]    > <head>\n09:52:10    [junit4]    > <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n09:52:10    [junit4]    > <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n3/update</title>\n09:52:10    [junit4]    > </head>\n09:52:10    [junit4]    > <body><h2>HTTP ERROR 404</h2>\n09:52:10    [junit4]    > <p>Problem accessing /solr/testcollection_shard1_replica_n3/update. Reason:\n09:52:10    [junit4]    > <pre>    Can not find: /solr/testcollection_shard1_replica_n3/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n09:52:10    [junit4]    > </body>\n09:52:10    [junit4]    > </html>\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:607)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:484)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:414)\n09:52:10    [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.lambda$directUpdate$0(CloudSolrClient.java:528)\n09:52:10    [junit4]    > \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n09:52:10    [junit4]    > \tat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\n09:52:10    [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n09:52:10    [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n09:52:10    [junit4]    > \t... 1 more\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T14:15:49+0000"
        },
        {
            "id": "comment-16670180",
            "content": "I checked all the reproduce with lines and was not able to reproduce the failures for the failures I posted. For the record I've run 20 runs and 5 have succeeded. I didn't post all the failures since many were the same. I'll keep running the tests to see if anything else falls out. ",
            "author": "Kevin Risden",
            "date": "2018-10-31T14:36:03+0000"
        },
        {
            "id": "comment-16670190",
            "content": "I had two clean runs, starting again with ten. ",
            "author": "Erick Erickson",
            "date": "2018-10-31T14:45:33+0000"
        },
        {
            "id": "comment-16670314",
            "content": "Tests are taking about 60m each, with almost every other run succeeding.\n\nFailure: testSqlStream\n\njunit4]   2> NOTE: reproduce with: ant test  -Dtestcase=StreamExpressionTest -Dtests.method=testSqlStream -Dtests.seed=88A53CC5725063FF -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=de-LU -Dtests.timezone=Atlantic/South_Georgia -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   30.1s J2 | StreamExpressionTest.testSqlStream <<<\n   [junit4]    > Throwable #1: java.io.IOException: params qt=/stream&expr=sql(collection1,+stmt%3D\"select+id+from+collection1+order+by+a_i+asc\")\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([88A53CC5725063FF:87631551033B6329]:0)\n   [junit4]    > \tat org.apache.solr.client.solrj.io.stream.SolrStream.open(SolrStream.java:111)\n   [junit4]    > \tat org.apache.solr.client.solrj.io.stream.StreamExpressionTest.getTuples(StreamExpressionTest.java:2475)\n   [junit4]    > \tat org.apache.solr.client.solrj.io.stream.StreamExpressionTest.testSqlStream(StreamExpressionTest.java:254)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:745)\n   [junit4]    > Caused by: org.apache.solr.client.solrj.SolrServerException: Timeout occured while waiting response from server at: http://127.0.0.1:55522/solr/collection1_collection_shard2_replica_n2\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:654)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrClient.request(SolrClient.java:1260)\n   [junit4]    > \tat org.apache.solr.client.solrj.io.stream.SolrStream.constructParser(SolrStream.java:263)\n   [junit4]    > \tat org.apache.solr.client.solrj.io.stream.SolrStream.open(SolrStream.java:109)\n   [junit4]    > \t... 41 more\n   [junit4]    > Caused by: java.net.SocketTimeoutException: Read timed out\n   [junit4]    > \tat java.net.SocketInputStream.socketRead0(Native Method)\n   [junit4]    > \tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\n   [junit4]    > \tat java.net.SocketInputStream.read(SocketInputStream.java:171)\n   [junit4]    > \tat java.net.SocketInputStream.read(SocketInputStream.java:141)\n   [junit4]    > \tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\n   [junit4]    > \tat org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)\n   [junit4]    > \tat org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282)\n   [junit4]    > \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)\n   [junit4]    > \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)\n   [junit4]    > \tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\n   [junit4]    > \tat org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)\n   [junit4]    > \tat org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:165)\n   [junit4]    > \tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\n   [junit4]    > \tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\n   [junit4]    > \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)\n   [junit4]    > \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\n   [junit4]    > \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n   [junit4]    > \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\n   [junit4]    > \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n   [junit4]    > \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n   [junit4]    > \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:542)\n   [junit4]    > \t... 46 more\n   [junit4]   1> 09:38:15.960 [qtp1722635893-3497] ERROR org.apache.solr.client.solrj.io.stream.ExceptionStream - java.io.IOException: org.apache.solr.common.SolrException: Collection not found: myCollection\n   [junit4]   1> \tat org.apache.solr.client.solrj.io.stream.StatsStream.open(StatsStream.java:217)\n   [junit4]   1> \tat org.apache.solr.client.solrj.io.stream.ExceptionStream.open(ExceptionStream.java:54)\n   [junit4]   1> \tat org.apache.solr.handler.StreamHandler$TimerStream.open(StreamHandler.java:394)\n   [junit4]   1> \tat org.apache.solr.client.solrj.io.stream.TupleStream.writeMap(TupleStream.java:78)\n   [junit4]   1> \tat org.apache.solr.common.util.JsonTextWriter.writeMap(JsonTextWriter.java:164)\n   [junit4]   1> \tat org.apache.solr.common.util.TextWriter.writeVal(TextWriter.java:69)\n   [junit4]   1> \tat org.apache.solr.response.TextResponseWriter.writeVal(TextResponseWriter.java:152)\n   [junit4]   1> \tat org.apache.solr.common.util.JsonTextWriter.writeNamedListAsMapWithDups(JsonTextWriter.java:386)\n   [junit4]   1> \tat org.apache.solr.common.util.JsonTextWriter.writeNamedList(JsonTextWriter.java:292)\n   [junit4]   1> \tat org.apache.solr.response.JSONWriter.writeResponse(JSONWriter.java:73)\n   [junit4]   1> \tat org.apache.solr.response.JSONResponseWriter.write(JSONResponseWriter.java:66)\n   [junit4]   1> \tat org.apache.solr.response.QueryResponseWriterUtil.writeQueryResponse(QueryResponseWriterUtil.java:65)\n   [junit4]   1> \tat org.apache.solr.servlet.HttpSolrCall.writeResponse(HttpSolrCall.java:787)\n   [junit4]   1> \tat org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:524)\n   [junit4]   1> \tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:395)\n   [junit4]   1> \tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:341)\n   [junit4]   1> \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1642)\n   [junit4]   1> \tat org.apache.solr.client.solrj.embedded.JettySolrRunner$DebugFilter.doFilter(JettySolrRunner.java:143)\n   [junit4]   1> \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1642)\n   [junit4]   1> \tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:533)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)\n   [junit4]   1> \tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1317)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)\n   [junit4]   1> \tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473)\n   [junit4]   1> \tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1219)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:674)\n   [junit4]   1> \tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n   [junit4]   1> \tat org.eclipse.jetty.server.Server.handle(Server.java:531)\n   [junit4]   1> \tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352)\n   [junit4]   1> \tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)\n   [junit4]   1> \tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281)\n   [junit4]   1> \tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)\n   [junit4]   1> \tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\n   [junit4]   1> \tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)\n   [junit4]   1> \tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)\n   [junit4]   1> \tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\n   [junit4]   1> \tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)\n   [junit4]   1> \tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)\n   [junit4]   1> \tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)\n   [junit4]   1> \tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)\n   [junit4]   1> \tat java.lang.Thread.run(Thread.java:745)\n   [junit4]   1> Caused by: org.apache.solr.common.SolrException: Collection not found: myCollection\n   [junit4]   1> \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:851)\n   [junit4]   1> \tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n   [junit4]   1> \tat org.apache.solr.client.solrj.io.stream.StatsStream.open(StatsStream.java:214)\n   [junit4]   1> \t... 45 more\n   [junit4]   1> \n   [junit4]   1> 09:38:16.357 [SUITE-StreamExpressionTest-seed#[88A53CC5725063FF]-worker] ERROR org.apache.zookeeper.server.ZooKeeperServer - ZKShutdownHandler is not registered, so ZooKeeper server won't take any action on ERROR or SHUTDOWN server state changes\n   [junit4]   2> NOTE: leaving temporary files on disk at: /Users/elizabethhaubert/Solr/badapples-fix/lucene-solr/solr/build/solr-solrj/test/J2/temp/solr.client.solrj.io.stream.StreamExpressionTest_88A53CC5725063FF-001\n   [junit4]   2> Oct 31, 2018 9:38:16 AM com.carrotsearch.randomizedtesting.ThreadLeakControl checkThreadLeaks\n   [junit4]   2> WARNING: Will linger awaiting termination of 1 leaked thread(s).\n   [junit4]   2> NOTE: test params are: codec=Lucene70, sim=RandomSimilarity(queryNorm=true): {}, locale=de-LU, timezone=Atlantic/South_Georgia\n   [junit4]   2> NOTE: Mac OS X 10.13.6 x86_64/Oracle Corporation 1.8.0_121 (64-bit)/cpus=4,threads=1,free=126676528,total=410517504\n   [junit4]   2> NOTE: All tests run in this JVM: [UniformDistributionEvaluatorTest, TestBatchUpdate, ArcSineEvaluatorTest, TestRetryUtil, SolrExampleStreamingTest, TestHash, MathExpressionTest, TestCollectionStateWatchers, LengthEvaluatorTest, TestLBHttpSolrClient, TermsResponseTest, PowerEvaluatorTest, GreaterThanEqualToEvaluatorTest, StreamingTest, ConcurrentUpdateSolrClientTest, LargeVolumeBinaryJettyTest, CommonAdminParamsTest, JdbcDriverTest, TestToleratedUpdateError, TestValidatingJsonMap, HttpSolrClientBadInputTest, GetByIdTest, NotEvaluatorTest, ConcurrentUpdateSolrClientBadInputTest, CloudSolrClientBuilderTest, TestSolrJsonWriter, StreamExpressionTest]\n\n ",
            "author": "Elizabeth Haubert",
            "date": "2018-10-31T16:02:21+0000"
        },
        {
            "id": "comment-16670386",
            "content": "Hoss Man, I've seen the DistribCursorPagingTest failure above too FYI.  Correct me if I'm wrong, but I remember you as the authority on that feature. ",
            "author": "Mark Miller",
            "date": "2018-10-31T16:56:41+0000"
        },
        {
            "id": "comment-16670441",
            "content": "Test: DistribCursorPagingTest\n\n...i can't reproduce and there is no obvious indicationg that it is a problem with the cursor or the test (it's failing when comparing he distributed facet counts with the single node facet counts) i've spun off into SOLR-12946 .. logs there would be helpful. ",
            "author": "Hoss Man",
            "date": "2018-10-31T17:42:20+0000"
        },
        {
            "id": "comment-16670542",
            "content": "Adding the commit hash since I know you are updating the PR. First failure out of 3 builds on the new commit so far \n\nCommit:\u00a088c37601f01c6fe5e508073f57dd2508ebed9a4b\nTest:\u00a0AutoAddReplicasPlanActionTest#testSimple\n\nreproduce with: ant test  -Dtestcase=AutoAddReplicasPlanActionTest -Dtests.method=testSimple -Dtests.seed=ED45ACA1F83399DB -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ga -Dtests.timezone=Canada/Pacific -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] ERROR   57.2s J5 | AutoAddReplicasPlanActionTest.testSimple <<<\n   [junit4]    > Throwable #1: java.util.concurrent.TimeoutException\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([ED45ACA1F83399DB:D5F6885FDFC04D0A]:0)\n   [junit4]    > \tat org.apache.solr.common.cloud.ZkStateReader.waitForState(ZkStateReader.java:1512)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.AutoAddReplicasPlanActionTest.waitForNodeLeave(AutoAddReplicasPlanActionTest.java:188)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.AutoAddReplicasPlanActionTest.testSimple(AutoAddReplicasPlanActionTest.java:181)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T18:40:49+0000"
        },
        {
            "id": "comment-16670597",
            "content": "Commit:\u00a088c37601f01c6fe5e508073f57dd2508ebed9a4b\nTest: OverseerTest#testDoubleAssignment\n\nreproduce with: ant test  -Dtestcase=OverseerTest -Dtests.method=testDoubleAssignment -Dtests.seed=9E1068EDAF5AF7A5 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=es-PA -Dtests.timezone=Pacific/Ponape -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   17.7s J3 | OverseerTest.testDoubleAssignment <<<\n   [junit4]    > Throwable #1: java.util.concurrent.TimeoutException\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([9E1068EDAF5AF7A5:DE553B06E407E2F3]:0)\n   [junit4]    > \tat org.apache.solr.common.cloud.ZkStateReader.waitForState(ZkStateReader.java:1512)\n   [junit4]    > \tat org.apache.solr.cloud.OverseerTest.testDoubleAssignment(OverseerTest.java:987)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T19:16:47+0000"
        },
        {
            "id": "comment-16670640",
            "content": "Commit: 88c37601f01c6fe5e508073f57dd2508ebed9a4b\nTest:TestCollectionsAPIViaSolrCloudCluster#testCollectionCreateSearchDelete\n\nreproduce with: ant test  -Dtestcase=TestCollectionsAPIViaSolrCloudCluster -Dtests.method=testCollectionCreateSearchDelete -Dtests.seed=91B211642503876A -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ga -Dtests.timezone=Africa/Kinshasa -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] ERROR   9.16s J3 | TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete <<<\n   [junit4]    > Throwable #1: org.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at http://127.0.0.1:42289/solr/testcollection_shard1_replica_n3: Expected mime type application/octet-stream but got text/html. <html>\n   [junit4]    > <head>\n   [junit4]    > <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n   [junit4]    > <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n3/update</title>\n   [junit4]    > </head>\n   [junit4]    > <body><h2>HTTP ERROR 404</h2>\n   [junit4]    > <p>Problem accessing /solr/testcollection_shard1_replica_n3/update. Reason:\n   [junit4]    > <pre>    Can not find: /solr/testcollection_shard1_replica_n3/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n   [junit4]    > </body>\n   [junit4]    > </html>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([91B211642503876A:3248BFC1A2EB6DCF]:0)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:551)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1016)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n   [junit4]    > \tat org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:237)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete(TestCollectionsAPIViaSolrCloudCluster.java:181)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]    > Caused by: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http://127.0.0.1:42289/solr/testcollection_shard1_replica_n3: Expected mime type application/octet-stream but got text/html. <html>\n   [junit4]    > <head>\n   [junit4]    > <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n   [junit4]    > <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n3/update</title>\n   [junit4]    > </head>\n   [junit4]    > <body><h2>HTTP ERROR 404</h2>\n   [junit4]    > <p>Problem accessing /solr/testcollection_shard1_replica_n3/update. Reason:\n   [junit4]    > <pre>    Can not find: /solr/testcollection_shard1_replica_n3/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n   [junit4]    > </body>\n   [junit4]    > </html>\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:607)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:484)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:414)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.lambda$directUpdate$0(CloudSolrClient.java:528)\n   [junit4]    > \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n   [junit4]    > \tat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    > \t... 1 more\n ",
            "author": "Kevin Risden",
            "date": "2018-10-31T19:43:11+0000"
        },
        {
            "id": "comment-16670922",
            "content": "Different kind of failure since there was a stall.\n\nCommit:\u00a088c37601f01c6fe5e508073f57dd2508ebed9a4b\n\nTest:\u00a0TestSimTriggerIntegration#testListeners\n\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:38:04, stalled for 1327s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:39:04, stalled for 1387s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:40:04, stalled for 1447s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:41:04, stalled for 1507s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:42:04, stalled for 1567s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:43:04, stalled for 1627s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:44:04, stalled for 1687s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:45:04, stalled for 1747s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:46:04, stalled for 1807s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:47:04, stalled for 1867s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:48:04, stalled for 1927s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:49:04, stalled for 1987s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:50:04, stalled for 2047s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:51:04, stalled for 2107s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:52:04, stalled for 2167s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:53:04, stalled for 2227s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:54:04, stalled for 2287s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:55:04, stalled for 2347s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:56:04, stalled for 2407s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:57:04, stalled for 2467s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:58:04, stalled for 2527s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T22:59:04, stalled for 2587s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T23:00:04, stalled for 2647s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T23:01:04, stalled for 2707s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T23:02:04, stalled for 2767s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T23:03:04, stalled for 2827s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T23:04:04, stalled for 2887s at: TestSimTriggerIntegration.testListeners\n   [junit4] HEARTBEAT J2 PID(480@f7bc5a140d51): 2018-10-31T23:05:04, stalled for 2947s at: TestSimTriggerIntegration.testListeners\nBuild timed out (after 55 minutes). Marking the build as failed.\n\n ",
            "author": "Kevin Risden",
            "date": "2018-11-01T00:12:59+0000"
        },
        {
            "id": "comment-16670981",
            "content": "New commit hash failure but looks like there is already a commit to handle this that wasn't in this run. New commit should get picked up in next test run.\n\nCommit:\u00a07fcd15843fed53ba7ce7ba8c2f1bf0d030d272f8\n\nTest:\u00a0NodeMarkersRegistrationTest#testNodeMarkersRegistration\n\nreproduce with: ant test  -Dtestcase=NodeMarkersRegistrationTest -Dtests.method=testNodeMarkersRegistration -Dtests.seed=E9977750024DB50B -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=es-MX -Dtests.timezone=Pacific/Ponape -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 0.25s J2 | NodeMarkersRegistrationTest.testNodeMarkersRegistration <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<1> but was:<0>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([E9977750024DB50B:F12DFF5C0C7878E4]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.NodeMarkersRegistrationTest.testNodeMarkersRegistration(NodeMarkersRegistrationTest.java:113)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n ",
            "author": "Kevin Risden",
            "date": "2018-11-01T01:03:17+0000"
        },
        {
            "id": "comment-16670982",
            "content": "I saw a stall a week or so ago running locally. Don't recall if it was the same test however. ",
            "author": "Gus Heck",
            "date": "2018-11-01T01:03:31+0000"
        },
        {
            "id": "comment-16671056",
            "content": "ant -Dtests.jvms=28 clean test on\n\ne8503da7c43b8ff3eb968c631ca2ac718a2c736b (branch_7x) with\u00a0https://github.com/apache/lucene-solr/pull/486\n\n[junit4] Tests with failures [seed: 6E4D8DC6298FB62F]:\n [junit4] - org.apache.solr.cloud.TestAuthenticationFramework.testBasics\n [junit4] - org.apache.solr.cloud.api.collections.CollectionsAPIDistributedZkTest.testCollectionsAPI\n\n\u00a0\n\ntestBasics (similar to Kevin Risden's above):\n\nError from server at http://127.0.0.1:35483/solr/testcollection_shard1_replica_n2: Expected mime type application/octet-stream but got text/html. <html> <head> <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/> <title>Error 404 Can not find: /solr/testcollection_shard1_replica_n2/update</title> </head> <body><h2>HTTP ERROR 404</h2> <p>Problem accessing /solr/testcollection_shard1_replica_n2/update. Reason: <pre> Can not find: /solr/testcollection_shard1_replica_n2/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/> </body> </html>\n\norg.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at http://127.0.0.1:35483/solr/testcollection_shard1_replica_n2: Expected mime type application/octet-stream but got text/html. <html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n<title>Error 404 Can not find: /solr/testcollection_shard1_replica_n2/update</title>\n</head>\n<body><h2>HTTP ERROR 404</h2>\n<p>Problem accessing /solr/testcollection_shard1_replica_n2/update. Reason:\n<pre> Can not find: /solr/testcollection_shard1_replica_n2/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n\n</body>\n</html>\n\nat __randomizedtesting.SeedInfo.seed([6E4D8DC6298FB62F:539523EA1161E85F]:0)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:551)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1016)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\nat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\nat org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:237)\nat org.apache.solr.cloud.TestAuthenticationFramework.collectionCreateSearchDeleteTwice(TestAuthenticationFramework.java:128)\nat org.apache.solr.cloud.TestAuthenticationFramework.testBasics(TestAuthenticationFramework.java:75)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1742)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:935)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:971)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:985)\nat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\nat org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49)\nat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\nat org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\nat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\nat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\nat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817)\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468)\nat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:944)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:830)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:880)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:891)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\nat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41)\nat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\nat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\nat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\nat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\nat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\nat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http://127.0.0.1:35483/solr/testcollection_shard1_replica_n2: Expected mime type application/octet-stream but got text/html. <html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n<title>Error 404 Can not find: /solr/testcollection_shard1_replica_n2/update</title>\n</head>\n<body><h2>HTTP ERROR 404</h2>\n<p>Problem accessing /solr/testcollection_shard1_replica_n2/update. Reason:\n<pre> Can not find: /solr/testcollection_shard1_replica_n2/update</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.11.v20180605</a><hr/>\n\n</body>\n</html>\n\nat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:607)\nat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\nat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\nat org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:484)\nat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:414)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.lambda$directUpdate$0(CloudSolrClient.java:528)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n... 1 more\n\n\ntestCollectionsApi:\n\nError from server at http://127.0.0.1:36137/solr/awhollynewcollection_0_shard1_replica_n1: ClusterState says we are the leader (http://127.0.0.1:36137/solr/awhollynewcollection_0_shard1_replica_n1), but locally we don't think so. Request came from null\n\norg.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at http://127.0.0.1:36137/solr/awhollynewcollection_0_shard1_replica_n1: ClusterState says we are the leader (http://127.0.0.1:36137/solr/awhollynewcollection_0_shard1_replica_n1), but locally we don't think so. Request came from null\nat __randomizedtesting.SeedInfo.seed([6E4D8DC6298FB62F:2638F9722FBC99BA]:0)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:551)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1016)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:949)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\nat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\nat org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:237)\nat org.apache.solr.cloud.api.collections.CollectionsAPIDistributedZkTest.testCollectionsAPI(CollectionsAPIDistributedZkTest.java:469)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1742)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:935)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:971)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:985)\nat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\nat org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49)\nat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\nat org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\nat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\nat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\nat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817)\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468)\nat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:944)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:830)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:880)\nat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:891)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\nat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41)\nat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\nat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\nat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\nat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\nat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54)\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\nat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http://127.0.0.1:36137/solr/awhollynewcollection_0_shard1_replica_n1: ClusterState says we are the leader (http://127.0.0.1:36137/solr/awhollynewcollection_0_shard1_replica_n1), but locally we don't think so. Request came from null\nat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:643)\nat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\nat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\nat org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:484)\nat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:414)\nat org.apache.solr.client.solrj.impl.CloudSolrClient.lambda$directUpdate$0(CloudSolrClient.java:528)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n... 1 more\n\t3.718\n\n ",
            "author": "Gus Heck",
            "date": "2018-11-01T03:11:52+0000"
        },
        {
            "id": "comment-16671581",
            "content": "Only 3 failures in the last 10 runs on commit\u00a08e0733bc99544da01e9e115c1b28a2a7b9c380d4. Two failures are the same type. ",
            "author": "Kevin Risden",
            "date": "2018-11-01T12:56:26+0000"
        },
        {
            "id": "comment-16671584",
            "content": "Two related failures on this run\n\nCommit:\u00a08e0733bc99544da01e9e115c1b28a2a7b9c380d4\n\nTest:\u00a0ChaosMonkeyNothingIsSafeTest#test\n\nreproduce with: ant test -Dtestcase=ChaosMonkeyNothingIsSafeTest -Dtests.method=test -Dtests.seed=8A09DAB62DBF4345 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=es-MX -Dtests.timezone=Europe/London -Dtests.asserts=true -Dtests.file.encoding=UTF-8 [junit4] FAILURE 34.7s J0 | ChaosMonkeyNothingIsSafeTest.test <<< [junit4] > Throwable #1: java.lang.AssertionError: document count mismatch. control=1560 sum(shards)=750 cloudClient=750 [junit4] > at __randomizedtesting.SeedInfo.seed([8A09DAB62DBF4345:25DE56C83432EBD]:0) [junit4] > at org.apache.solr.cloud.AbstractFullDistribZkTestBase.checkShardConsistency(AbstractFullDistribZkTestBase.java:1396) [junit4] > at org.apache.solr.cloud.ChaosMonkeyNothingIsSafeTest.test(ChaosMonkeyNothingIsSafeTest.java:240) [junit4] > at org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:1065) [junit4] > at org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:1039) [junit4] > at java.lang.Thread.run(Thread.java:748)\n\n\n\n reproduce with: ant test  -Dtestcase=ChaosMonkeyNothingIsSafeTest -Dtests.seed=8A09DAB62DBF4345 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=es-MX -Dtests.timezone=Europe/London -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   0.00s J0 | ChaosMonkeyNothingIsSafeTest (suite) <<<\n   [junit4]    > Throwable #1: com.carrotsearch.randomizedtesting.ThreadLeakError: 8 threads leaked from SUITE scope at org.apache.solr.cloud.ChaosMonkeyNothingIsSafeTest: \n   [junit4]    >    1) Thread[id=6981, name=zkCallback-1984-thread-4, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    2) Thread[id=6885, name=zkCallback-1984-thread-2, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    3) Thread[id=6792, name=zkConnectionManagerCallback-1985-thread-1, state=WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    4) Thread[id=6878, name=watches-1982-thread-1, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    5) Thread[id=6817, name=zkCallback-1984-thread-1, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    6) Thread[id=6960, name=zkCallback-1984-thread-3, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    7) Thread[id=6790, name=TEST-ChaosMonkeyNothingIsSafeTest.test-seed#[8A09DAB62DBF4345]-SendThread(127.0.0.1:34569), state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at java.lang.Thread.sleep(Native Method)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1054)\n   [junit4]    >    8) Thread[id=6791, name=TEST-ChaosMonkeyNothingIsSafeTest.test-seed#[8A09DAB62DBF4345]-EventThread, state=WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:502)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([8A09DAB62DBF4345]:0)Throwable #2: com.carrotsearch.randomizedtesting.ThreadLeakError: There are still zombie threads that couldn't be terminated:\n   [junit4]    >    1) Thread[id=6981, name=zkCallback-1984-thread-4, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    2) Thread[id=6885, name=zkCallback-1984-thread-2, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    3) Thread[id=6792, name=zkConnectionManagerCallback-1985-thread-1, state=WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    4) Thread[id=6878, name=watches-1982-thread-1, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    5) Thread[id=6817, name=zkCallback-1984-thread-1, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    6) Thread[id=6960, name=zkCallback-1984-thread-3, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    7) Thread[id=6790, name=TEST-ChaosMonkeyNothingIsSafeTest.test-seed#[8A09DAB62DBF4345]-SendThread(127.0.0.1:34569), state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at java.lang.Thread.sleep(Native Method)\n   [junit4]    >         at org.apache.zookeeper.client.StaticHostProvider.next(StaticHostProvider.java:105)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.startConnect(ClientCnxn.java:1000)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1063)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([8A09DAB62DBF4345]:0)\n\nReference: risdenk/nuc#56 ",
            "author": "Kevin Risden",
            "date": "2018-11-01T12:58:59+0000"
        },
        {
            "id": "comment-16671586",
            "content": "Commit:\u00a08e0733bc99544da01e9e115c1b28a2a7b9c380d4\n\nTest: AutoAddReplicasIntegrationTest#testSimple\n\nNOTE: reproduce with: ant test  -Dtestcase=AutoAddReplicasIntegrationTest -Dtests.method=testSimple -Dtests.seed=E73476C72BD62F1 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=zh-HK -Dtests.timezone=Australia/Hobart -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 68.1s J3 | AutoAddReplicasIntegrationTest.testSimple <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: Waiting for collection testSimple2\n   [junit4]    > null\n   [junit4]    > Live Nodes: [127.0.0.1:35447_solr, 127.0.0.1:43523_solr]\n   [junit4]    > Last available state: DocCollection(testSimple2//collections/testSimple2/state.json/29)={\n   [junit4]    >   \"pullReplicas\":\"0\",\n   [junit4]    >   \"replicationFactor\":\"2\",\n   [junit4]    >   \"shards\":{\n   [junit4]    >     \"shard1\":{\n   [junit4]    >       \"range\":\"80000000-ffffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\n   [junit4]    >         \"core_node3\":{\n   [junit4]    >           \"core\":\"testSimple2_shard1_replica_n1\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:43235/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:43235_solr\",\n   [junit4]    >           \"state\":\"down\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\"},\n   [junit4]    >         \"core_node5\":{\n   [junit4]    >           \"core\":\"testSimple2_shard1_replica_n2\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:35447/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:35447_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"},\n   [junit4]    >         \"core_node12\":{\n   [junit4]    >           \"core\":\"testSimple2_shard1_replica_n11\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:35447/solr\",\n   [junit4]    >           \"state\":\"down\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:35447_solr\",\n   [junit4]    >           \"type\":\"NRT\"}}},\n   [junit4]    >     \"shard2\":{\n   [junit4]    >       \"range\":\"0-7fffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\n   [junit4]    >         \"core_node8\":{\n   [junit4]    >           \"core\":\"testSimple2_shard2_replica_n6\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:35447/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:35447_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"},\n   [junit4]    >         \"core_node10\":{\n   [junit4]    >           \"core\":\"testSimple2_shard2_replica_n9\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:35447/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:35447_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\"}}}},\n   [junit4]    >   \"router\":{\"name\":\"compositeId\"},\n   [junit4]    >   \"maxShardsPerNode\":\"2\",\n   [junit4]    >   \"autoAddReplicas\":\"true\",\n   [junit4]    >   \"nrtReplicas\":\"2\",\n   [junit4]    >   \"tlogReplicas\":\"0\"}\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([E73476C72BD62F1:36C06392554EB620]:0)\n   [junit4]    > \tat org.apache.solr.cloud.SolrCloudTestCase.waitForState(SolrCloudTestCase.java:283)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.AutoAddReplicasIntegrationTest.testSimple(AutoAddReplicasIntegrationTest.java:136)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\n\nReference: risdenk/nuc#57 ",
            "author": "Kevin Risden",
            "date": "2018-11-01T13:00:01+0000"
        },
        {
            "id": "comment-16671588",
            "content": "Two failures related again.\n\nCommit:\u00a08e0733bc99544da01e9e115c1b28a2a7b9c380d4\n\nTest: ChaosMonkeyNothingIsSafeTest#test\n\nreproduce with: ant test  -Dtestcase=ChaosMonkeyNothingIsSafeTest -Dtests.method=test -Dtests.seed=CD85E598152C3D2F -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ar-BH -Dtests.timezone=US/Aleutian -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 26.9s J0 | ChaosMonkeyNothingIsSafeTest.test <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: document count mismatch.  control=1886 sum(shards)=943 cloudClient=943\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([CD85E598152C3D2F:45D1DA42BBD050D7]:0)\n   [junit4]    > \tat org.apache.solr.cloud.AbstractFullDistribZkTestBase.checkShardConsistency(AbstractFullDistribZkTestBase.java:1396)\n   [junit4]    > \tat org.apache.solr.cloud.ChaosMonkeyNothingIsSafeTest.test(ChaosMonkeyNothingIsSafeTest.java:240)\n   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:1065)\n   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:1039)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\n\n\nreproduce with: ant test  -Dtestcase=ChaosMonkeyNothingIsSafeTest -Dtests.seed=CD85E598152C3D2F -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ar-BH -Dtests.timezone=US/Aleutian -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] ERROR   0.00s J0 | ChaosMonkeyNothingIsSafeTest (suite) <<<\n   [junit4]    > Throwable #1: com.carrotsearch.randomizedtesting.ThreadLeakError: 9 threads leaked from SUITE scope at org.apache.solr.cloud.ChaosMonkeyNothingIsSafeTest: \n   [junit4]    >    1) Thread[id=10235, name=zkCallback-2682-thread-4, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    2) Thread[id=10230, name=zkCallback-2682-thread-3, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    3) Thread[id=10066, name=TEST-ChaosMonkeyNothingIsSafeTest.test-seed#[CD85E598152C3D2F]-EventThread, state=WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:502)\n   [junit4]    >    4) Thread[id=10065, name=TEST-ChaosMonkeyNothingIsSafeTest.test-seed#[CD85E598152C3D2F]-SendThread(127.0.0.1:45103), state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at java.lang.Thread.sleep(Native Method)\n   [junit4]    >         at org.apache.zookeeper.client.StaticHostProvider.next(StaticHostProvider.java:105)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.startConnect(ClientCnxn.java:1000)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1063)\n   [junit4]    >    5) Thread[id=10192, name=watches-2680-thread-1, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    6) Thread[id=10287, name=zkCallback-2682-thread-5, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    7) Thread[id=10069, name=zkCallback-2682-thread-1, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    8) Thread[id=10067, name=zkConnectionManagerCallback-2683-thread-1, state=WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    9) Thread[id=10222, name=zkCallback-2682-thread-2, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([CD85E598152C3D2F]:0)Throwable #2: com.carrotsearch.randomizedtesting.ThreadLeakError: There are still zombie threads that couldn't be terminated:\n   [junit4]    >    1) Thread[id=10235, name=zkCallback-2682-thread-4, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    2) Thread[id=10230, name=zkCallback-2682-thread-3, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    3) Thread[id=10065, name=TEST-ChaosMonkeyNothingIsSafeTest.test-seed#[CD85E598152C3D2F]-SendThread(127.0.0.1:45103), state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at java.lang.Thread.sleep(Native Method)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1054)\n   [junit4]    >    4) Thread[id=10192, name=watches-2680-thread-1, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    5) Thread[id=10287, name=zkCallback-2682-thread-5, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    6) Thread[id=10069, name=zkCallback-2682-thread-1, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    7) Thread[id=10067, name=zkConnectionManagerCallback-2683-thread-1, state=WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    8) Thread[id=10222, name=zkCallback-2682-thread-2, state=TIMED_WAITING, group=TGRP-ChaosMonkeyNothingIsSafeTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([CD85E598152C3D2F]:0)\n\nReference: risdenk/nuc#59 ",
            "author": "Kevin Risden",
            "date": "2018-11-01T13:01:46+0000"
        },
        {
            "id": "comment-16671663",
            "content": "Am I running it right? I'm surprised that we aren't seeing some of the recurring errors, e.g. IndexSizeTriggerTest, but here are three from my runs anyway:\n\n [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSimLargeCluster -Dtests.method=testBasic -Dtests.seed=D06F4E22358339D2 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=sl-SI -Dtests.timezone=Pacific/Tongatapu -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 7.43s J3 | TestSimLargeCluster.testBasic <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: there should be less than flakyReplicas=10 MOVEREPLICA ops\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([D06F4E22358339D2:7B955337EA5FBFFC]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.sim.TestSimLargeCluster.testBasic(TestSimLargeCluster.java:280)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]   2> 1261841 INFO  (TEST-TestSimLargeCluster.testNodeLost-seed#[D06F4E22358339D2]) [    ] o.a.s.SolrTestCaseJ4 ###Starting testNodeLost\n   [junit4\n\n\n\nNOTE: reproduce with: ant test  -Dtestcase=IndexSizeTriggerTest -Dtests.method=testMixedBounds -Dtests.seed=D06F4E22358339D2 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=sr-BA -Dtests.timezone=America/Indiana/Winamac -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 54.1s J2 | IndexSizeTriggerTest.testMixedBounds <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<MERGESHARDS> but was:<SPLITSHARD>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([D06F4E22358339D2:DAECF18F78383288]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.IndexSizeTriggerTest.testMixedBounds(IndexSizeTriggerTest.java:673)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\n\n\n 2> NOTE: reproduce with: ant test  -Dtestcase=HttpPartitionTest -Dtests.method=test -Dtests.seed=719484666306ADC1 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ga-IE -Dtests.timezone=Asia/Dili -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 55.0s J1 | HttpPartitionTest.test <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: Doc with id=2 not found in http://127.0.0.1:60505/c8n_1x2_leader_session_loss due to: Path not found: /id; rsp={doc=null}\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([719484666306ADC1:F9C0BBBCCDFAC039]:0)\n   [junit4]    > \tat org.apache.solr.cloud.HttpPartitionTest.assertDocExists(HttpPartitionTest.java:622)\n   [junit4]    > \tat org.apache.solr.cloud.HttpPartitionTest.assertDocsExistInAllReplicas(HttpPartitionTest.java:567)\n   [junit4]    > \tat org.apache.solr.cloud.HttpPartitionTest.testLeaderZkSessionLoss(HttpPartitionTest.java:522)\n   [junit4]    > \tat org.apache.solr.cloud.HttpPartitionTest.test(HttpPartitionTest.java:159)\n   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:1066)\n   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:1040)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\n ",
            "author": "Erick Erickson",
            "date": "2018-11-01T14:19:46+0000"
        },
        {
            "id": "comment-16671673",
            "content": "Erick Erickson this is how I setup my local jenkins to run it. Workspace is cleared since this is executed on transient docker containers. ivysettings.xml is just to use my local maven cache.\n\ngit init /home/jenkins/agent/workspace/apache-solr-markmiller-test\ngit config remote.origin.url https://github.com/apache/lucene-solr\ngit fetch --no-tags origin pull/486/head:pr-486\ngit checkout pr-486\ngit rev-parse HEAD\nant ivy-bootstrap -Divysettings.xml=/home/jenkins/.ivy2/ivysettings.xml\ncd solr\nant test -Divysettings.xml=/home/jenkins/.ivy2/ivysettings.xml\n\n\nThis sets up git in a folder, fetches the pr branch, checks it out, prints the hash (so I can see which commit it was against later), run ivy-bootstrap, cd solr, and run ant test. ",
            "author": "Kevin Risden",
            "date": "2018-11-01T14:23:58+0000"
        },
        {
            "id": "comment-16671724",
            "content": "Erick Erickson, make sure you update to the latest as well - I'm pushing to that pull request. ",
            "author": "Mark Miller",
            "date": "2018-11-01T15:11:25+0000"
        },
        {
            "id": "comment-16671726",
            "content": "ChaosMonkeyNothingIsSafeTest\n\nI've seen that too - not very common, but look like possible data loss bug, so I have not disabled it and probably won't. ",
            "author": "Mark Miller",
            "date": "2018-11-01T15:12:52+0000"
        },
        {
            "id": "comment-16671772",
            "content": "Kevin Risden My question is more whether we should just be running plain \"ant test\". I'd expect to see things like the IndexSizeTriggerTest fail for others. I know that test, for instance, is getting active attention.\u00a0It seems to be a bear to figure out how to fix though. Don't want to flood Mark with extraneous junk.\n\nThanks for the steps though, I was a little nervous about the fact that I had a compilation error when I applied the patch, so I'll give your process a shot. So far the compile step didn't fail.\n\n\u00a0\n\nMark Miller This brings the problems I reported this morning into question, probably should ignore them and/or delete the comment,\n\n\u00a0 ",
            "author": "Erick Erickson",
            "date": "2018-11-01T15:39:20+0000"
        },
        {
            "id": "comment-16672279",
            "content": "So there have been two failures in the last 15 runs. I know there have been commits to the PR so posting the two failures with commits that they were run against. ",
            "author": "Kevin Risden",
            "date": "2018-11-01T21:57:45+0000"
        },
        {
            "id": "comment-16672282",
            "content": "Two failures associated with this run.\n\nCommit: a092f1a79edbf0092f96155414215b443363c2fb\n\nTest: ExecutePlanActionTest#testIntegration\n\nNOTE: reproduce with: ant test  -Dtestcase=ExecutePlanActionTest -Dtests.method=testIntegration -Dtests.seed=DBF7318E39CB980F -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=he-IL -Dtests.timezone=Africa/Juba -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 2.92s J3 | ExecutePlanActionTest.testIntegration <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<2> but was:<1>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([DBF7318E39CB980F:6B963FA21CF4392A]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.ExecutePlanActionTest.testIntegration(ExecutePlanActionTest.java:224)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\u00a0\n\n\nreproduce with: ant test  -Dtestcase=NodeLostTriggerTest -Dtests.method=testListenerAcceptance -Dtests.seed=DBF7318E39CB980F -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=sr-Latn-ME -Dtests.timezone=America/Iqaluit -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 0.31s J1 | NodeLostTriggerTest.testListenerAcceptance <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<1> but was:<0>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([DBF7318E39CB980F:CA436B6980428CF9]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.NodeLostTriggerTest.testListenerAcceptance(NodeLostTriggerTest.java:265)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\nReference: risdenk/nuc#65 ",
            "author": "Kevin Risden",
            "date": "2018-11-01T22:00:45+0000"
        },
        {
            "id": "comment-16672283",
            "content": "Commit:\u00a0af0d46ac4c7f2c3975a539b69de011c02538f361\n\nTest:\u00a0TestSystemCollAutoCreate#testAutoCreate\n\nreproduce with: ant test  -Dtestcase=TestSystemCollAutoCreate -Dtests.method=testAutoCreate -Dtests.seed=FEB73B4EC4B46883 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=sl-SI -Dtests.timezone=America/Tortola -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 32.7s J1 | TestSystemCollAutoCreate.testAutoCreate <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: Could not successfully add blob after 150 attempts. Expecting 2 items. time elapsed 15,499  output  for url is {\n   [junit4]    >   \"responseHeader\":{\n   [junit4]    >     \"zkConnected\":true,\n   [junit4]    >     \"status\":0,\n   [junit4]    >     \"QTime\":0},\n   [junit4]    >   \"response\":{\n   [junit4]    >     \"numFound\":1,\n   [junit4]    >     \"start\":0,\n   [junit4]    >     \"docs\":[{\n   [junit4]    >         \"id\":\"test/1\",\n   [junit4]    >         \"md5\":\"710177b50a8305661e0d0918ebf14e0a\",\n   [junit4]    >         \"blobName\":\"test\",\n   [junit4]    >         \"version\":1,\n   [junit4]    >         \"timestamp\":\"2018-11-01T21:07:34.341Z\",\n   [junit4]    >         \"size\":2048}]}}\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([FEB73B4EC4B46883:C1EC8F9F72CAA1EE]:0)\n   [junit4]    > \tat org.apache.solr.handler.TestBlobHandler.postAndCheck(TestBlobHandler.java:140)\n   [junit4]    > \tat org.apache.solr.handler.TestBlobHandler.checkBlobPost(TestBlobHandler.java:102)\n   [junit4]    > \tat org.apache.solr.handler.TestSystemCollAutoCreate.testAutoCreate(TestSystemCollAutoCreate.java:26)\n   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:1065)\n   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:1039)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\n\nReference: risdenk/nuc#72 ",
            "author": "Kevin Risden",
            "date": "2018-11-01T22:02:10+0000"
        },
        {
            "id": "comment-16672301",
            "content": "Tests are taking about 60m each,\n\nKeep in mind that speed will vary greatly depending on how many cores you have and what number of jmvs you execute the tests with. By default, the built system makes a conservative guess based on number of cores detected.\n\nFor example though, on my 2018 Macbook Pro with 4 cores and 4 test jvms, the tests take 32 minutes. On my 2012 6 core Linux machine, they take 22 minutes with 8 jvms. On my 2018 16 core Linux machine, they take 11 minutes with 16 jvms.\n\nIf you can only run 1 or 2 jvms at a time, tests will be very long because of the number of tests we have that take around a minute or more.\n\nAlso, tests run fastest when you can use more jvm's (each needs 512 MB heap) and have run the tests a few times so that test timings are cached and the longest tests can be launched first. ",
            "author": "Mark Miller",
            "date": "2018-11-01T22:33:06+0000"
        },
        {
            "id": "comment-16672523",
            "content": "Running with a fresh pull rather than applying a patch I get this one failure in 10 runs:\n\n\n[junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestCollectionStateWatchers -Dtests.method=testSimpleCollectionWatch -Dtests.seed=F61CC9E5F0069834 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ms -Dtests.timezone=SystemV/HST10 -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   45.3s J2 | TestCollectionStateWatchers.testSimpleCollectionWatch <<<\n   [junit4]    > Throwable #1: java.lang.RuntimeException: org.apache.solr.common.SolrException: java.util.concurrent.TimeoutException: Could not connect to ZooKeeper 127.0.0.1:60124 within 30000 ms\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([F61CC9E5F0069834:AB270695B70B070A]:0)\n   [junit4]    > \tat org.apache.solr.cloud.ZkTestServer.run(ZkTestServer.java:588)\n   [junit4]    > \tat org.apache.solr.cloud.ZkTestServer.run(ZkTestServer.java:514)\n   [junit4]    > \tat org.apache.solr.cloud.MiniSolrCloudCluster.<init>(MiniSolrCloudCluster.java:245)\n   [junit4]    > \tat org.apache.solr.cloud.SolrCloudTestCase$Builder.build(SolrCloudTestCase.java:200)\n   [junit4]    > \tat org.apache.solr.cloud.SolrCloudTestCase$Builder.configure(SolrCloudTestCase.java:192)\n   [junit4]    > \tat org.apache.solr.common.cloud.TestCollectionStateWatchers.prepareCluster(TestCollectionStateWatchers.java:66)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]    > Caused by: org.apache.solr.common.SolrException: java.util.concurrent.TimeoutException: Could not connect to ZooKeeper 127.0.0.1:60124 within 30000 ms\n   [junit4]    > \tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:201)\n   [junit4]    > \tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:126)\n   [junit4]    > \tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:121)\n   [junit4]    > \tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:108)\n   [junit4]    > \tat org.apache.solr.cloud.ZkTestServer.init(ZkTestServer.java:439)\n   [junit4]    > \tat org.apache.solr.cloud.ZkTestServer.run(ZkTestServer.java:585)\n   [junit4]    > \t... 43 more\n   [junit4]    > Caused by: java.util.concurrent.TimeoutException: Could not connect to ZooKeeper 127.0.0.1:60124 within 30000 ms\n   [junit4]    > \tat org.apache.solr.common.cloud.ConnectionManager.waitForConnected(ConnectionManager.java:250)\n   [junit4]    > \tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:193)\n   [junit4]    > \t... 48 more\n   [junit4]   1> 14:12:06.626 [ZkTestServer Run Thread] ERROR org.apache.zookeeper.server.ZooKeeperServer - ZKShutdownHandler is not registered, so ZooKeeper server won't take any action on ERROR or SHUTDOWN server state changes\n   [junit4]   1\n\n ",
            "author": "Erick Erickson",
            "date": "2018-11-02T03:01:37+0000"
        },
        {
            "id": "comment-16673409",
            "content": "Last few builds have been clean. This most recent one had a new failure.\n\nCommit:\u00a091b202bad89a94d40021251e026c582f695aad69\n\nTest: MathExpressionTest#testDistributions\n\nreproduce with: ant test  -Dtestcase=MathExpressionTest -Dtests.method=testDistributions -Dtests.seed=F7286DC596D3A9BA -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=es-VE -Dtests.timezone=Pacific/Pago_Pago -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 0.09s J1 | MathExpressionTest.testDistributions <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([F7286DC596D3A9BA:48D72C6F48294926]:0)\n   [junit4]    > \tat org.apache.solr.client.solrj.io.stream.MathExpressionTest.testDistributions(MathExpressionTest.java:1704)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\n\u00a0Reference: risdenk/nuc#108 ",
            "author": "Kevin Risden",
            "date": "2018-11-02T16:56:43+0000"
        },
        {
            "id": "comment-16673581",
            "content": "Three more failures last night:\n\n\nNOTE: reproduce with: ant test  -Dtestcase=TestPolicyCloud -Dtests.seed=750391CDBFDBBA5B -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=id -Dtests.timezone=US/Arizona -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] ERROR   0.00s J2 | TestPolicyCloud (suite) <<<\n   [junit4]    > Throwable #1: java.lang.RuntimeException: org.apache.solr.common.SolrException: java.util.concurrent.TimeoutException: Could not connect to ZooKeeper 127.0.0.1:59936 within 30000 ms\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([750391CDBFDBBA5B]:0)\n   [junit4]    > \tat org.apache.solr.cloud.ZkTestServer.run(ZkTestServer.java:588)\n   [junit4]    > \tat org.apache.solr.cloud.ZkTestServer.run(ZkTestServer.java:514)\n   [junit4]    > \tat org.apache.solr.cloud.MiniSolrCloudCluster.<init>(MiniSolrCloudCluster.java:245)\n   [junit4]    > \tat org.apache.solr.cloud.SolrCloudTestCase$Builder.build(SolrCloudTestCase.java:200)\n   [junit4]    > \tat org.apache.solr.cloud.SolrCloudTestCase$Builder.configure(SolrCloudTestCase.java:192)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.TestPolicyCloud.setupCluster(TestPolicyCloud.java:82)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]    > Caused by: org.apache.solr.common.SolrException: java.util.concurrent.TimeoutException: Could not connect to ZooKeeper 127.0.0.1:59936 within 30000 ms\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSimLargeCluster -Dtests.method=testBasic -Dtests.seed=AEE99A00F166E955 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=es-HN -Dtests.timezone=America/Cancun -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 7.44s J5 | TestSimLargeCluster.testBasic <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: there should be less than flakyReplicas=9 MOVEREPLICA ops\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([AEE99A00F166E955:51387152EBA6F7B]:0)\n   [junit4]    > \tat org.apache.solr.cloud.autoscaling.sim.TestSimLargeCluster.testBasic(TestSimLargeCluster.java:280)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]   2> 851915 INFO  (TEST-TestSimLargeCluster.testSearchRate-seed#[AEE99A00F166E955]) [    ] o.a.s.SolrTestCaseJ4 ###Starting testSearchRate\n   [junit4]   2> 851915 DEBUG (TEST-TestSimLargeCluster.testSearchRate-seed#[AEE99A00F166E955]) [    ] o.a.s.c.a.OverseerTriggerThread Refreshing /autoscaling.json with znode version 1\n   [junit4]   2> 851915 DEBUG (Simulated OverseerAutoScalingTriggerThread) [    ] o.a.s.c.a.OverseerTriggerThread Processed trigger updates upto znodeVersion 1\n   [junit4]   2> 851916 DEBUG (Simulated OverseerAutoScalingTriggerThread) [    ] o.a.s.c.a.OverseerTriggerThread -- clean old nodeLost markers\n   [junit4]   2> 851916 INFO  (TEST-TestSimLargeCluster.testSearchRate-seed#[AEE99A00F166E955]) [    ] o.a.s.c.a.s.SimCloudManager === Restarting OverseerTriggerThread and clearing object cache...\n   [junit4]   2> 851916 DEBUG (Simulated OverseerAutoScalingTriggerThread) [    ] o.a.s.c.a.OverseerTriggerThread -- clean old nodeAdded markers\n   \n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=MathExpressionTest -Dtests.method=testGammaDistribution -Dtests.seed=6EF35F29F8FCC0A1 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=mk-MK -Dtests.timezone=Africa/Porto-Novo -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 0.76s J5 | MathExpressionTest.testGammaDistribution <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([6EF35F29F8FCC0A1:53897487DB846AB6]:0)\n   [junit4]    > \tat org.apache.solr.client.solrj.io.stream.MathExpressionTest.testGammaDistribution(MathExpressionTest.java:4287)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]   1> 02:37:47.293 [SUITE-MathExpressionTest-seed#[6EF35F29F8FCC0A1]-worker] ERROR org.apache.zookeeper.server.ZooKeeperServer - ZKShutdownHandler is not registered, so ZooKeeper server won't take any action on ERROR or SHUTDOWN server state changes\n   [junit4]   2> NOTE: leaving temporary files on disk at: /Users/Erick/apache/solrJiras/markmiller-test/solr/build/solr-solrj/test/J5/temp/solr.client.solrj.io.stream.MathExpressionTest_6EF35F29F8FCC0A1-001\n   [junit4]   2> Nov 02, 2018 2:37:47 AM com.carrotsearch.randomizedtesting.ThreadLeakControl checkThreadLeaks\n\n\n\n ",
            "author": "Erick Erickson",
            "date": "2018-11-02T19:20:59+0000"
        },
        {
            "id": "comment-16673717",
            "content": "ZookeeperStatusHandlerTest hang for me. I have a full thread dump, but this is the only interesting thread:\n\n\"SUITE-ZookeeperStatusHandlerTest-seed#[DC3BEA1CE6C3BFE0]-worker\" #874 prio=5 os_prio=31 tid=0x00007f8d2ba09800 nid=0x19217 runnable [0x000070000c894000]\n   java.lang.Thread.State: RUNNABLE\n\tat java.net.SocketInputStream.socketRead0(Native Method)\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\n\tat java.net.SocketInputStream.read(SocketInputStream.java:170)\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\n\tat sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)\n\tat sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)\n\tat sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)\n\t- locked <0x00000007a3c76a08> (a java.io.InputStreamReader)\n\tat java.io.InputStreamReader.read(InputStreamReader.java:184)\n\tat java.io.BufferedReader.fill(BufferedReader.java:161)\n\tat java.io.BufferedReader.readLine(BufferedReader.java:324)\n\t- locked <0x00000007a3c76a08> (a java.io.InputStreamReader)\n\tat java.io.BufferedReader.readLine(BufferedReader.java:389)\n\tat org.apache.solr.cloud.ZkTestServer.send4LetterWord(ZkTestServer.java:703)\n\tat org.apache.solr.cloud.ZkTestServer.waitForServerUp(ZkTestServer.java:650)\n\tat org.apache.solr.cloud.ZkTestServer.run(ZkTestServer.java:584)\n\tat org.apache.solr.cloud.ZkTestServer.run(ZkTestServer.java:514)\n\tat org.apache.solr.cloud.MiniSolrCloudCluster.<init>(MiniSolrCloudCluster.java:245)\n\tat org.apache.solr.cloud.SolrCloudTestCase$Builder.build(SolrCloudTestCase.java:201)\n\tat org.apache.solr.cloud.SolrCloudTestCase$Builder.configure(SolrCloudTestCase.java:193)\n\tat org.apache.solr.handler.admin.ZookeeperStatusHandlerTest.setupCluster(ZookeeperStatusHandlerTest.java:46)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:497)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1742)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:875)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:891)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\n\tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41)\n\tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n\tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\n\tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\n\tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\n\tat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\n\tat java.lang.Thread.run(Thread.java:745)\n\n ",
            "author": "Tom\u00e1s Fern\u00e1ndez L\u00f6bbe",
            "date": "2018-11-02T21:50:08+0000"
        },
        {
            "id": "comment-16675226",
            "content": "Mark Miller running with the Nov. 5 patch (34500a1262f2a7a6602e43904facc7da958e0cd1),  getting more clean runs but still getting errors from the autoscaling tests.   Is it helpful to post those failures to  12923?  ",
            "author": "Elizabeth Haubert",
            "date": "2018-11-05T14:24:27+0000"
        },
        {
            "id": "comment-16675354",
            "content": "I had stopped the runs for the weekend but this morning 5/5 failed with the same test failure.\n\nCommit:34500a1262f2a7a6602e43904facc7da958e0cd1\n\nTest:AutoscalingHistoryHandlerTest\n\nreproduce with: ant test  -Dtestcase=AutoscalingHistoryHandlerTest -Dtests.seed=8F97179111B556A4 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=sr-BA -Dtests.timezone=Cuba -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] ERROR   0.00s J1 | AutoscalingHistoryHandlerTest (suite) <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: ObjectTracker found 2 object(s) that were not released!!! [ZkStateReader, SolrZkClient]\n   [junit4]    > org.apache.solr.common.util.ObjectReleaseTracker$ObjectTrackerException: org.apache.solr.common.cloud.ZkStateReader\n   [junit4]    > \tat org.apache.solr.common.util.ObjectReleaseTracker.track(ObjectReleaseTracker.java:42)\n   [junit4]    > \tat org.apache.solr.common.cloud.ZkStateReader.<init>(ZkStateReader.java:328)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.ZkClientClusterStateProvider.connect(ZkClientClusterStateProvider.java:160)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.connect(CloudSolrClient.java:399)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:827)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrClient.deleteByQuery(SolrClient.java:936)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrClient.deleteByQuery(SolrClient.java:899)\n   [junit4]    > \tat org.apache.solr.metrics.rrd.SolrRrdBackendFactory.remove(SolrRrdBackendFactory.java:320)\n   [junit4]    > \tat org.apache.solr.handler.admin.MetricsHistoryHandler.removeHistory(MetricsHistoryHandler.java:302)\n   [junit4]    > \tat org.apache.solr.handler.admin.CoreAdminOperation.lambda$static$1(CoreAdminOperation.java:121)\n   [junit4]    > \tat org.apache.solr.handler.admin.CoreAdminOperation.execute(CoreAdminOperation.java:360)\n   [junit4]    > \tat org.apache.solr.handler.admin.CoreAdminHandler$CallInfo.call(CoreAdminHandler.java:395)\n   [junit4]    > \tat org.apache.solr.handler.admin.CoreAdminHandler.lambda$handleRequestBody$0(CoreAdminHandler.java:188)\n   [junit4]    > \tat com.codahale.metrics.InstrumentedExecutorService$InstrumentedRunnable.run(InstrumentedExecutorService.java:176)\n   [junit4]    > \tat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]    > org.apache.solr.common.util.ObjectReleaseTracker$ObjectTrackerException: org.apache.solr.common.cloud.SolrZkClient\n   [junit4]    > \tat org.apache.solr.common.util.ObjectReleaseTracker.track(ObjectReleaseTracker.java:42)\n   [junit4]    > \tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:203)\n   [junit4]    > \tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:126)\n   [junit4]    > \tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:116)\n   [junit4]    > \tat org.apache.solr.common.cloud.ZkStateReader.<init>(ZkStateReader.java:306)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.ZkClientClusterStateProvider.connect(ZkClientClusterStateProvider.java:160)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.connect(CloudSolrClient.java:399)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:827)\n   [junit4]    > \tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrClient.deleteByQuery(SolrClient.java:936)\n   [junit4]    > \tat org.apache.solr.client.solrj.SolrClient.deleteByQuery(SolrClient.java:899)\n   [junit4]    > \tat org.apache.solr.metrics.rrd.SolrRrdBackendFactory.remove(SolrRrdBackendFactory.java:320)\n   [junit4]    > \tat org.apache.solr.handler.admin.MetricsHistoryHandler.removeHistory(MetricsHistoryHandler.java:302)\n   [junit4]    > \tat org.apache.solr.handler.admin.CoreAdminOperation.lambda$static$1(CoreAdminOperation.java:121)\n   [junit4]    > \tat org.apache.solr.handler.admin.CoreAdminOperation.execute(CoreAdminOperation.java:360)\n   [junit4]    > \tat org.apache.solr.handler.admin.CoreAdminHandler$CallInfo.call(CoreAdminHandler.java:395)\n   [junit4]    > \tat org.apache.solr.handler.admin.CoreAdminHandler.lambda$handleRequestBody$0(CoreAdminHandler.java:188)\n   [junit4]    > \tat com.codahale.metrics.InstrumentedExecutorService$InstrumentedRunnable.run(InstrumentedExecutorService.java:176)\n   [junit4]    > \tat org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n   [junit4]    > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([8F97179111B556A4]:0)\n   [junit4]    > \tat org.apache.solr.SolrTestCaseJ4.teardownTestCases(SolrTestCaseJ4.java:317)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)Throwable #2: com.carrotsearch.randomizedtesting.ThreadLeakError: 6 threads leaked from SUITE scope at org.apache.solr.handler.admin.AutoscalingHistoryHandlerTest: \n   [junit4]    >    1) Thread[id=23113, name=zkCallback-5763-thread-1, state=TIMED_WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    2) Thread[id=23071, name=parallelCoreAdminExecutor-6574-thread-1-processing-n:127.0.0.1:46027_solr x:AutoscalingHistoryHandlerTest_collection_shard1_replica_n1 AutoscalingHistoryHandlerTest_node_added_trigger//354f56a1a5c62T97h2je8841fj16tp15d7ws8zi//0937839259663825 UNLOAD-EventThread, state=WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:502)\n   [junit4]    >    3) Thread[id=23070, name=parallelCoreAdminExecutor-6574-thread-1-processing-n:127.0.0.1:46027_solr x:AutoscalingHistoryHandlerTest_collection_shard1_replica_n1 AutoscalingHistoryHandlerTest_node_added_trigger//354f56a1a5c62T97h2je8841fj16tp15d7ws8zi//0937839259663825 UNLOAD-SendThread(127.0.0.1:40291), state=TIMED_WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at java.lang.Thread.sleep(Native Method)\n   [junit4]    >         at org.apache.zookeeper.client.StaticHostProvider.next(StaticHostProvider.java:105)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.startConnect(ClientCnxn.java:1000)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1063)\n   [junit4]    >    4) Thread[id=23174, name=zkCallback-5763-thread-2, state=TIMED_WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    5) Thread[id=23175, name=zkCallback-5763-thread-3, state=TIMED_WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    6) Thread[id=23072, name=zkConnectionManagerCallback-5764-thread-1, state=WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([8F97179111B556A4]:0)Throwable #3: com.carrotsearch.randomizedtesting.ThreadLeakError: There are still zombie threads that couldn't be terminated:\n   [junit4]    >    1) Thread[id=23113, name=zkCallback-5763-thread-1, state=TIMED_WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    2) Thread[id=23070, name=parallelCoreAdminExecutor-6574-thread-1-processing-n:127.0.0.1:46027_solr x:AutoscalingHistoryHandlerTest_collection_shard1_replica_n1 AutoscalingHistoryHandlerTest_node_added_trigger//354f56a1a5c62T97h2je8841fj16tp15d7ws8zi//0937839259663825 UNLOAD-SendThread(127.0.0.1:40291), state=TIMED_WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at java.lang.Thread.sleep(Native Method)\n   [junit4]    >         at org.apache.zookeeper.client.StaticHostProvider.next(StaticHostProvider.java:105)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.startConnect(ClientCnxn.java:1000)\n   [junit4]    >         at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1063)\n   [junit4]    >    3) Thread[id=23174, name=zkCallback-5763-thread-2, state=TIMED_WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    4) Thread[id=23175, name=zkCallback-5763-thread-3, state=TIMED_WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    >    5) Thread[id=23072, name=zkConnectionManagerCallback-5764-thread-1, state=WAITING, group=TGRP-AutoscalingHistoryHandlerTest]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   [junit4]    >         at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n   [junit4]    >         at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:748)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([8F97179111B556A4]:0)\n\n\nReference: risdenk/nuc#182-186 ",
            "author": "Kevin Risden",
            "date": "2018-11-05T15:58:27+0000"
        },
        {
            "id": "comment-16676707",
            "content": "Looks like there have been new commits and that last 5 tests have passed successfully. ",
            "author": "Kevin Risden",
            "date": "2018-11-06T12:44:28+0000"
        },
        {
            "id": "comment-16703613",
            "content": "Commit 75b183196798232aa6f2dcaaaab117f309119053 in lucene-solr's branch refs/heads/master from markrmiller\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=75b1831 ]\n\nSOLR-12801: Make massive improvements to the tests.\n\nSOLR-12804: Remove static modifier from Overseer queue access.\n\nSOLR-12896: Introduce more checks for shutdown and closed to improve clean close and shutdown. (Partial)\n\nSOLR-12897: Introduce AlreadyClosedException to clean up silly close / shutdown logging. (Partial)\n\nSOLR-12898: Replace cluster state polling with ZkStateReader#waitFor. (Partial)\n\nSOLR-12923: The new AutoScaling tests are way too flaky and need special attention. (Partial)\n\nSOLR-12932: ant test (without badapples=false) should pass easily for developers. (Partial)\n\nSOLR-12933: Fix SolrCloud distributed commit. ",
            "author": "ASF subversion and git services",
            "date": "2018-11-29T18:19:21+0000"
        },
        {
            "id": "comment-16705105",
            "content": "Commit eb652b84edf441d8369f5188cdd5e3ae2b151434 in lucene-solr's branch refs/heads/branch_7x from markrmiller\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eb652b8 ]\n\nSOLR-12801: Make massive improvements to the tests.\n\nSOLR-12804: Remove static modifier from Overseer queue access.\n\nSOLR-12896: Introduce more checks for shutdown and closed to improve clean close and shutdown. (Partial)\n\nSOLR-12897: Introduce AlreadyClosedException to clean up silly close / shutdown logging. (Partial)\n\nSOLR-12898: Replace cluster state polling with ZkStateReader#waitFor. (Partial)\n\nSOLR-12923: The new AutoScaling tests are way too flaky and need special attention. (Partial)\n\nSOLR-12932: ant test (without badapples=false) should pass easily for developers. (Partial)\n\nSOLR-12933: Fix SolrCloud distributed commit. ",
            "author": "ASF subversion and git services",
            "date": "2018-11-30T18:10:44+0000"
        },
        {
            "id": "comment-16705126",
            "content": "Although it doesn't seem like there has been an apache jenkins build of master since mark's commit 75b1831967982, there have been 3 jenkins.thetaphi.de builds of master, and 1 jenkins.sarowe.net build of master...\n\n\tjenkins.sarowe.net\n\t\n\t\tprior to mark's commit, the most recent master build had 2 test failures\n\t\t\n\t\t\thttp://fucit.org/solr-jenkins-reports/job-data/sarowe/Lucene-Solr-tests-master/19410/\n\t\t\n\t\t\n\t\tThe single build since mark's commit had no failures...\n\t\t\n\t\t\thttp://fucit.org/solr-jenkins-reports/job-data/sarowe/Lucene-Solr-tests-master/19411/\n\t\t\n\t\t\n\t\n\t\n\tjenkins.thetaphi.de\n\t\n\t\tprior to mark's commit, the most recent master build coincidently succeeded w/o any test failures.\n\t\t\n\t\t\thttp://fucit.org/solr-jenkins-reports/job-data/thetaphi/Lucene-Solr-master-Linux/23276/\n\t\t\n\t\t\n\t\tAll 3 builds of master since that commit, have had 100+ suite level failures \u2013 although it should be noted they all used diff JVMs\n\t\t\n\t\t\thttp://fucit.org/solr-jenkins-reports/job-data/thetaphi/Lucene-Solr-master-Linux/23277/\n\t\t\thttp://fucit.org/solr-jenkins-reports/job-data/thetaphi/Lucene-Solr-master-Linux/23278/\n\t\t\thttp://fucit.org/solr-jenkins-reports/job-data/thetaphi/Lucene-Solr-master-Linux/23279/\n\t\t\n\t\t\n\t\n\t\n\n\n\n\nSkimming the logs from jenkins.thetaphi.de #23277, the suite failures mostly seem to fall into 2 types...\n\n\tThread Leaks\n\t\n\t\t\n\t\t\n\t\t\tSolrRrdBackendFactory-* and MetricsHistoryHandler-* threads seem to frequently leak in \"pairs\" \u2013 ie: it's very common to see 2 threads leaked w/one of each \u2013 but also 4 threads leaked 2 of each, etc...\n\t\t\tthere were other thread's leaked in some tests to various degrees, not enough for a pattern to be obvious\n\t\t\n\t\t\n\t\n\t\n\tObject Leaks\n\t\n\t\t\n\t\t\n\t\t\tNotably instances of [ZkStateReader, SolrZkClient] \u2013 also typically in pairs (if 2 objects leaked, one of each; if 24 objects leaked, 12 of each)\n\t\t\tthere were a handful of object leak failures that sometimes included other objects: in particular some large lists w/multiple SolrCore objects being leaked and ohter objects you'd expect to see hanging off of a SolrCore\n\t\t\n\t\t\n\t\n\t\n\n\n\nHypothosis: I know mark has mentioned cleaning up a lot of \"sleep\" and \"wait\" type logic in tests, I'm guessing that in doing this it's exposed some \"shutdown\" logic bugs that that in the past weren't as obvious because \"slow\" jenkins machines were waiting longer for other things due to hardcoded \"waits\" and were getting lucky that the the threads/objects were being cleaned up in a timely manor. ",
            "author": "Hoss Man",
            "date": "2018-11-30T18:32:01+0000"
        },
        {
            "id": "comment-16705142",
            "content": "Yeah, I've seen the leak emails - most likely related to reducing leak timeouts drastically - these must be some slow envs because I never saw this locally across 3 machines under a variety of loads, but I'll look at these leaks soon. ",
            "author": "Mark Miller",
            "date": "2018-11-30T18:35:35+0000"
        },
        {
            "id": "comment-16705359",
            "content": "Or maybe it is JVM version related - I'll look at that angle as well. ",
            "author": "Mark Miller",
            "date": "2018-11-30T22:26:57+0000"
        },
        {
            "id": "comment-16705407",
            "content": "Thread Leaks ...\n\nI'm pretty sure there is a bug in the lifecycle of MetricsHistoryHandler ... created SOLR-13030 ",
            "author": "Hoss Man",
            "date": "2018-11-30T23:18:14+0000"
        },
        {
            "id": "comment-16705517",
            "content": "Skimming the logs from jenkins.thetaphi.de #23277, the suite failures mostly seem to fall into 2 types...\n\nI completley overlooked this initially (because i was focused on the \"fails\") but in that jenkins.thetaphi.de #23277 build (which used java10) it seems that every test that didn't have a suite level failure was just skipping all of the test methods.\n\nFrom the #23277 logs...\n\n\n...\n   [junit4] Completed [2/837 (1!)] on J2 in 16.95s, 9 tests, 2 errors <<< FAILURES!\n   [junit4] \n   [junit4] Suite: org.apache.solr.DistributedIntervalFacetingTest\n   [junit4] Completed [3/837 (1!)] on J2 in 0.00s, 1 test, 1 skipped\n   [junit4] \n   [junit4] Suite: org.apache.solr.rest.schema.TestDynamicFieldCollectionResource\n   [junit4] Completed [4/837 (1!)] on J2 in 0.00s, 5 tests, 5 skipped\n   [junit4] \n   [junit4] Suite: org.apache.solr.index.UninvertDocValuesMergePolicyTest\n   [junit4] Completed [5/837 (1!)] on J2 in 0.00s, 2 tests, 2 skipped\n   [junit4] \n   [junit4] Suite: org.apache.solr.core.TestCodecSupport\n   [junit4] Completed [6/837 (1!)] on J2 in 0.00s, 8 tests, 8 skipped\n   [junit4] \n   [junit4] Suite: org.apache.solr.update.PeerSyncWithLeaderAndIndexFingerprintCachingTest\n   [junit4] Completed [7/837 (1!)] on J2 in 0.00s, 1 test, 1 skipped\n   [junit4] \n   [junit4] Suite: org.apache.solr.request.RegexBytesRefFilterTest\n   [junit4] Completed [8/837 (1!)] on J2 in 0.00s, 1 test, 1 skipped\n   [junit4] \n   [junit4] Suite: org.apache.solr.legacy.TestNumericRangeQuery32\n   [junit4] Completed [9/837 (1!)] on J2 in 0.00s, 18 tests, 18 skipped\n...\n\n\n\n...that last TestNumericRangeQuery32 subclasses LuceneTestCase directly, and doesn't use any solr code or test-framework code ... so it shouldn't really be possible it's inheriting any assumption/annotation that would cause it to be skipped ... so WTF????\n\n\n\ni see similar behavior myself when i run with java11 locally (fewer suite level failures, but what doesn't fail says it's being skipped) but can't wrap my head around what might be causing this...\n\n\nhossman@tray:~/lucene/dev/solr/core [master] $ ant test -Dtests.seed=A28FAA62F9DF8AD7\n...\nBUILD FAILED\n/home/hossman/lucene/dev/solr/common-build.xml:558: The following error occurred while executing this line:\n/home/hossman/lucene/dev/lucene/common-build.xml:1567: The following error occurred while executing this line:\n/home/hossman/lucene/dev/lucene/common-build.xml:1092: There were test failures: 837 suites (7 ignored), 4121 tests, 7 suite-level errors, 3954 ignored (128 assumptions) [seed: A28FAA62F9DF8AD7]\n\nTotal time: 1 minute 36 seconds\n\n\n\n... i can't reproduce this \"java11 skips almost every test\" wonkiness if i rollback to 81c092d8262a68dfda3994e790f2e1f3fdf275e2 (last master commit before 75b1831967982) ",
            "author": "Hoss Man",
            "date": "2018-12-01T00:32:30+0000"
        },
        {
            "id": "comment-16706034",
            "content": "I was feeling good since I ran the full set of tests 3 times and got no errors, so I fired up a beast run and it blew out on the first round .\n\n\u00a0\n\nant beast -Dbeast.iters 20 -Dtests.jvms=30\n\n\u00a0\n\nin solr/core/ Got the following non-reproducing result (full log can be attached if desired):\n\n\u00a0\n\n [beaster] 2> 5 /solr/collections\n [beaster] 2> \n [beaster] 2> NOTE: leaving temporary files on disk at: /home/gus/clients/ds/tp/code/lucene-solr/solr/build/solr-core/test/J20/temp/solr.update.processor.TimeRoutedAliasUpdateProcessorTest_703C314355FFA220-001\n [beaster] 2> Dec 01, 2018 5:34:02 PM com.carrotsearch.randomizedtesting.ThreadLeakControl checkThreadLeaks\n [beaster] 2> WARNING: Will linger awaiting termination of 1 leaked thread(s).\n [beaster] 2> NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=521, maxMBSortInHeap=7.426758507726064, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@55893cd5), locale=en-PH, timezone=America/Godthab\n [beaster] 2> NOTE: Linux 4.15.0-38-generic amd64/Oracle Corporation 1.8.0_144 (64-bit)/cpus=32,threads=1,free=97735136,total=520093696\n [beaster] 2> NOTE: All tests run in this JVM: [TestJsonFacetRefinement, SpellCheckComponentTest, TestUtils, CreateRoutedAliasTest, TestLegacyFieldReuse, ExecutePlanActionTest, TestRemoteStreaming, EchoParamsTest, BlobRepositoryCloudTest, CleanupOldIndexTest, TestPolicyCloud, ParsingFieldUpdateProcessorsTest, TlogReplayBufferedWhileIndexingTest, SimpleMLTQParserTest, AutoAddReplicasIntegrationTest, CustomCollectionTest, TimeRoutedAliasUpdateProcessorTest]\n [beaster] \n [beaster] Tests with failures [seed: 703C314355FFA220]:\n [beaster] - org.apache.solr.update.processor.TimeRoutedAliasUpdateProcessorTest.testParse\n [beaster] \n [beaster]\nBUILD FAILED\n/home/gus/clients/ds/tp/code/lucene-solr/lucene/common-build.xml:1522: The following error occurred while executing this line:\n/home/gus/clients/ds/tp/code/lucene-solr/lucene/common-build.xml:1512: The following error occurred while executing this line:\n/home/gus/clients/ds/tp/code/lucene-solr/lucene/common-build.xml:1038: There were test failures: 769 suites (5 ignored), 3645 tests, 1 error, 152 ignored (135 assumptions) [seed: 703C314355FFA220]\nTotal time: 6 minutes 20 seconds\n\n\nThe relevant part of the logs seems to regard the timing of alias removal vs collection deletion, Other stack traces are\u00a0possibly attributable to negative testing, but this one clearly shouldn't be there (and doesn't appear if the test is run singly)\n\n[beaster] > Throwable #1: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at https://127.0.0.1:33061/solr: Collection : myalias_20\n17-10-24 is part of alias myalias remove or modify the alias before removing this collection.\n [beaster] > at __randomizedtesting.SeedInfo.seed([703C314355FFA220:1FB97A1BE98991CF]:0)\n [beaster] > at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:643)\n [beaster] > at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\n [beaster] > at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\n [beaster] > at org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:483)\n [beaster] > at org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:413)\n [beaster] > at org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1104)\n [beaster] > at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\n [beaster] > at org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n [beaster] > at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n [beaster] > at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:211)\n [beaster] > at org.apache.solr.update.processor.TimeRoutedAliasUpdateProcessorTest.doBefore(TimeRoutedAliasUpdateProcessorTest.java:84)\n [beaster] > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n [beaster] > at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n [beaster] > at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n [beaster] > at java.lang.reflect.Method.invoke(Method.java:498)\n [beaster] > at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1737)\n [beaster] > at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:968)\n [beaster] > at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:984)\n [beaster] > at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\n [beaster] > at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49)\n [beaster] > at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n [beaster] > at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\n [beaster] > at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\n [beaster]\n\n\u00a0 ",
            "author": "Gus Heck",
            "date": "2018-12-01T23:17:36+0000"
        },
        {
            "id": "comment-16706041",
            "content": "\u00a0\n\nThis is really quite interesting: to quote a different part of the log, it's clear that the failure is being attributed to the wrong test... The test in question doesn't invoke the request proccessro at all (it probably should be in a separate class TimeRoutedAliasTest)... it also looks like a bug in the code, but it certainly shouldn't be reporting against this test unless I'me under-appreciating the test setup/teardown somewhere.\n\n[beaster] [17:34:01.913] ERROR 0.11s J20 | TimeRoutedAliasUpdateProcessorTest.testParse <<<\n [beaster] > Throwable #1: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at https://127.0.0.1:33061/solr: Collection : myalias_2017-10-24 is part of alias myalias remove or modify the alias before removing this collection.\n [beaster] > at __randomizedtesting.SeedInfo.seed([703C314355FFA220:1FB97A1BE98991CF]:0)\n [beaster] > at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:643)\n [beaster] > at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\n [beaster] > at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\n [beaster] > at org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:483)\n [beaster] > at org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:413)\n [beaster] > at org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1104)\n [beaster] > at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:884)\n [beaster] > at org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:817)\n [beaster] > at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\n [beaster] > at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:211)\n [beaster] > at org.apache.solr.update.processor.TimeRoutedAliasUpdateProcessorTest.doBefore(TimeRoutedAliasUpdateProcessorTest.java:84)\n [beaster] > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n [beaster] > at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n [beaster] > at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n [beaster] > at java.lang.reflect.Method.invoke(Method.java:498)\n [beaster] > at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1737)\n [beaster] > at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:968)\n [beaster] > at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:984)\n [beaster] > at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\n [beaster] > at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49)\n [beaster] > at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n [beaster] > at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\n [beaster] > at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\n [beaster] > at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\n [\n ",
            "author": "Gus Heck",
            "date": "2018-12-01T23:41:40+0000"
        },
        {
            "id": "comment-16706045",
            "content": "Beasting is a separate effort that I will work on by package (sub issues to the parent issue of this jira). This is just so you have the hope of 3 ant tests passing in a row. It's not really meant for clearing scripting runs or beasting tests. ",
            "author": "Mark Miller",
            "date": "2018-12-02T00:18:48+0000"
        },
        {
            "id": "comment-16706049",
            "content": "Ok, I was under the impression that beasting with just beast.iters set wasn't significantly different from regular runs with fast fingers on the uparrow/return keys and a counter. ",
            "author": "Gus Heck",
            "date": "2018-12-02T00:28:29+0000"
        },
        {
            "id": "comment-16706504",
            "content": "Ok, sorry for the noise, the above\u00a0strangeness is a non-issue. Terminal window was in an old checkout (but IDE was in a fully up to date location, hence the mismatch) from a time when\u00a0the error was possible for that method. ",
            "author": "Gus Heck",
            "date": "2018-12-02T23:08:22+0000"
        }
    ]
}