{
    "id": "SOLR-9466",
    "title": "During concurrency some Solr document are not seen even after soft and hard commit",
    "details": {
        "components": [
            "SolrCloud"
        ],
        "type": "Bug",
        "labels": "",
        "fix_versions": [],
        "affect_versions": "4.10.2",
        "status": "Closed",
        "resolution": "Invalid",
        "priority": "Critical"
    },
    "description": "Solr cloud with 2 nodes, master master, with 5 collection and 2 shards in each collection. \n\nDuring concurrent usage of SOLR where both updates and search is sent to SOLR server, some of our updates / adding of new documents are getting lost.\n\nWe could see that update hitting solr and we could see it in localhost_access file of tomcat, also in catalina.out. But still we couldn't see that record while searching. \n\nFollowing is the catalina.out logs for the document which is getting indexed properly.\n\nSep 01, 2016 7:39:31 AM org.apache.solr.update.processor.LogUpdateProcessor processAdd\nFINE: PRE_UPDATE add\n{,id=CUA0000004390000019223370564139207241C3LEA0000020769223370567404392838EXCC3000001}\n params(crid=CUA0000004390000019223370564139207241C3LEA0000020769223370567404392838EXCC3000001),defaults(wt=xml)\nSep 01, 2016 7:39:31 AM org.apache.solr.update.TransactionLog <init>\nFINE: New TransactionLog file=/ebdata2/solrdata/IOB_shard1_replica1/data/tlog/tlog.0000000000000220856, exists=false, size=0, openExisting=false\nSep 01, 2016 7:39:31 AM org.apache.solr.update.SolrCmdDistributor submit\nFINE: sending update to http://xx.xx.xx.xx:7070/solr/IOB_shard1_replica2/ retry:0 add{version=1544254202941800448,id=CUA0000004390000019223370564139207241C3LEA0000020769223370567404392838EXCC3000001} params:update.distrib=FROMLEADER&distrib.from=http%3A%2F%2Fxx.xx.xx.xx%3A7070%2Fsolr%2FIOB_shard1_replica1%2F\nSep 01, 2016 7:39:31 AM org.apache.solr.client.solrj.impl.ConcurrentUpdateSolrServer$Runner run\nFINE: starting runner: org.apache.solr.client.solrj.impl.ConcurrentUpdateSolrServer$Runner@3fb794b2\nSep 01, 2016 7:39:31 AM org.apache.solr.update.processor.LogUpdateProcessor finish\nFINE: PRE_UPDATE FINISH params(crid=CUA0000004390000019223370564139207241C3LEA0000020769223370567404392838EXCC3000001),defaults(wt=xml)\nSep 01, 2016 7:39:31 AM org.apache.solr.client.solrj.impl.ConcurrentUpdateSolrServer$Runner run\nFINE: finished: org.apache.solr.client.solrj.impl.ConcurrentUpdateSolrServer$Runner@3fb794b2\nSep 01, 2016 7:39:31 AM org.apache.solr.update.processor.LogUpdateProcessor finish\nINFO: [IOB_shard1_replica1] webapp=/solr path=/update params=\n{crid=CUA0000004390000019223370564139207241C3LEA0000020769223370567404392838EXCC3000001}\n \n{add=[CUA0000004390000019223370564139207241C3LEA0000020769223370567404392838EXCC3000001 (1544254202941800448)]}\n 0 9\nSep 01, 2016 7:39:31 AM org.apache.solr.servlet.SolrDispatchFilter doFilter\nFINE: Closing out SolrRequest: params(crid=CUA0000004390000019223370564139207241C3LEA0000020769223370567404392838EXCC3000001),defaults(wt=xml)\n\nFor the one which document is not getting indexed, we could see only following log in catalina.out. Not sure whether it's getting added to SOLR.\n\nSep 01, 2016 7:39:56 AM org.apache.solr.update.processor.LogUpdateProcessor finish\nFINE: PRE_UPDATE FINISH params(crid=CUA0000004390000019223370564139182810C3LEA0000020179223370567061972057EXCC1000002),defaults(wt=xml)\nSep 01, 2016 7:39:56 AM org.apache.solr.update.processor.LogUpdateProcessor finish\nINFO: [IOB_shard1_replica1] webapp=/solr path=/update params=\n{crid=CUA0000004390000019223370564139182810C3LEA0000020179223370567061972057EXCC1000002}\n {} 0 1\nSep 01, 2016 7:39:56 AM org.apache.solr.servlet.SolrDispatchFilter doFilter\nFINE: Closing out SolrRequest: params(crid=CUA0000004390000019223370564139182810C3LEA0000020179223370567061972057EXCC1000002),defaults(wt=xml)\n\nWe have set autosoftcommit to 1 seconds and autohardcommit to 30 seconds.\n\nWe are not getting any errors or exceptions in the log.",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2016-09-01T13:22:43+0000",
            "author": "Shawn Heisey",
            "content": "Situations like this should be brought up on the mailing list or the IRC channel before being opened in the bugtracker, so we can determine whether they are actually bugs.\n\nFor your problem, which I do not believe is a bug:\n\nYou have told Solr to soft commit after one second, but this doesn't mean that the commit will actually complete within one second \u2013 only that it will start within one second.  I've seen commits take a minute or more.  Usually this is a misconfiguration, where cache autowarmCount values are too high, or there's not enough memory available.\n\nhttps://wiki.apache.org/solr/SolrPerformanceProblems#Slow_commits\n\nAnother possible problem when using a third-party container like tomcat is that the container's maxThreads setting is too low.  This setting defaults to 200, but in the Jetty that comes with Solr, it is set to 10000, so that Solr can create as many threads as it needs.  With high concurrency, the number of threads required can easily exceed 200.\n\nIn the unlikely situation that this is a bug, we would need to see the bug demonstrated in a 6.x version of Solr.  Bugs in 4.x are not going to be fixed, unless it's a MAJOR showstopper bug. ",
            "id": "comment-15455370"
        },
        {
            "date": "2016-09-01T14:28:35+0000",
            "author": "Ganesh",
            "content": "Hi Shawn, Thanks for your reply.\n\nRegarding cache autowarm count, we have disable most of caches and for filter we have set autowarmcount as 0. \nAlso for our tomcat maxThreads we have set it to 5000. \n\nActually we are in the process of upgrading to new version and it's going on in our development environment. To validate our product in new version etc, that exercise will go for 3 to 4 weeks. \nBut till that we need to support our production environment with 4.10.2 version. So we are looking for some help badly on this. \n\nDo you see increase in tomcat's maxthread from 5000 to 10000 will help us over here ? Already we have set autowarmcount to zero. To give little background of our use case, our application can hit our solr server with almost 50 to 100 threads parallely for adding / updating the documents. \n\nI have pasted my solrconfig over here for reference. Let us know if any configuration change will help us to get rid out of this missing documents.\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!--  Licensed to the Apache Software Foundation (ASF) under one or more  contributor license agreements.  See the NOTICE file distributed with  this work for additional information regarding copyright ownership.  The ASF licenses this file to You under the Apache License, Version 2.0  (the \"License\"); you may not use this file except in compliance with  the License.  You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software  distributed under the License is distributed on an \"AS IS\" BASIS,  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the License for the specific language governing permissions and  limitations under the License. -->\n<config>\n\t<luceneMatchVersion>LUCENE_42</luceneMatchVersion>\n\t<lib dir=\"../../../contrib/extraction/lib\" regex=\".*\\.jar\" />\n\t<lib dir=\"../../../dist/\" regex=\"solr-cell-\\d.*\\.jar\" />\n\t<lib dir=\"../../../contrib/clustering/lib/\" regex=\".*\\.jar\" />\n\t<lib dir=\"../../../dist/\" regex=\"solr-clustering-\\d.*\\.jar\" />\n\t<lib dir=\"../../../contrib/langid/lib/\" regex=\".*\\.jar\" />\n\t<lib dir=\"../../../dist/\" regex=\"solr-langid-\\d.*\\.jar\" />\n\t<lib dir=\"../../../contrib/velocity/lib\" regex=\".*\\.jar\" />\n\t<lib dir=\"../../../dist/\" regex=\"solr-velocity-\\d.*\\.jar\" />\n\t<lib dir=\"/total/crap/dir/ignored\" />\n\t<dataDir>${solr.data.dir:}</dataDir>\n\t<directoryFactory name=\"DirectoryFactory\"  class=\"${solr.directoryFactory:solr.NRTCachingDirectoryFactory}\"/>\n\t<codecFactory class=\"solr.SchemaCodecFactory\"/>\n\t<lockType>${solr.lock.type:native}</lockType>\n</indexConfig>\n<jmx />\n<updateHandler class=\"solr.DirectUpdateHandler2\">\n\t<updateLog>\n\t\t<str name=\"dir\">${solr.ulog.dir:}</str>\n\t</updateLog>\n\t<autoCommit>\n\t\t<maxTime>30000</maxTime>\n\t\t<openSearcher>false</openSearcher>\n\t</autoCommit>\n\t<autoSoftCommit>\n\t\t<maxTime>1000</maxTime>\n\t</autoSoftCommit>\n</updateHandler>\n<maxBooleanClauses>1024</maxBooleanClauses>\n<filterCache class=\"solr.FastLRUCache\" size=\"256\" initialSize=\"128\" autowarmCount=\"0\"/>\n<enableLazyFieldLoading>false</enableLazyFieldLoading>\n<queryResultWindowSize>20</queryResultWindowSize>\n<queryResultMaxDocsCached>50</queryResultMaxDocsCached>\n<listener event=\"newSearcher\" class=\"solr.QuerySenderListener\">\n\t<arr name=\"queries\"/>\n</listener>\n<listener event=\"firstSearcher\" class=\"solr.QuerySenderListener\">\n\t<arr name=\"queries\">\n\t\t<lst>\n\t\t\t<str name=\"q\">static firstSearcher warming in solrconfig.xml</str>\n\t\t</lst>\n\t</arr>\n</listener>\n<useColdSearcher>false</useColdSearcher>\n<maxWarmingSearchers>2</maxWarmingSearchers>\n</query>\n<requestDispatcher handleSelect=\"false\" >\n\t<requestParsers enableRemoteStreaming=\"true\"  multipartUploadLimitInKB=\"2048000\" formdataUploadLimitInKB=\"2048\"/>\n\t<httpCaching never304=\"true\" />\n</requestDispatcher>\n<requestHandler name=\"/select\" class=\"solr.SearchHandler\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"echoParams\">explicit</str>\n\t\t<int name=\"rows\">10</int>\n\t\t<str name=\"df\">text</str>\n\t</lst>\n</requestHandler>\n<requestHandler name=\"/query\" class=\"solr.SearchHandler\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"echoParams\">explicit</str>\n\t\t<str name=\"wt\">json</str>\n\t\t<str name=\"indent\">true</str>\n\t\t<str name=\"df\">text</str>\n\t</lst>\n</requestHandler>\n<requestHandler name=\"/get\" class=\"solr.RealTimeGetHandler\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"omitHeader\">true</str>\n\t\t<str name=\"wt\">json</str>\n\t\t<str name=\"indent\">true</str>\n\t</lst>\n</requestHandler>\n\n<requestHandler name=\"/browse\" class=\"solr.SearchHandler\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"echoParams\">explicit</str>\n\t\t<!-- VelocityResponseWriter settings -->\n\t\t<str name=\"wt\">velocity</str>\n\t\t<str name=\"v.template\">browse</str>\n\t\t<str name=\"v.layout\">layout</str>\n\t\t<str name=\"title\">Solritas</str>\n\t\t<!-- Query settings -->\n\t\t<str name=\"defType\">edismax</str>\n\t\t<str name=\"qf\">text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4 title^10.0 description^5.0 keywords^5.0 author^2.0 resourcename^1.0</str>\n\t\t<str name=\"df\">text</str>\n\t\t<str name=\"mm\">100%</str>\n\t\t<str name=\"q.alt\">:</str>\n\t\t<str name=\"rows\">10</str>\n\t\t<str name=\"fl\">*,score</str>\n\t\t<str name=\"mlt.qf\">text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4 title^10.0 description^5.0 keywords^5.0 author^2.0 resourcename^1.0</str>\n\t\t<str name=\"mlt.fl\">text,features,name,sku,id,manu,cat,title,description,keywords,author,resourcename</str>\n\t\t<int name=\"mlt.count\">3</int>\n\t\t<!-- Faceting defaults -->\n\t\t<str name=\"facet\">on</str>\n\t\t<str name=\"facet.field\">cat</str>\n\t\t<str name=\"facet.field\">manu_exact</str>\n\t\t<str name=\"facet.field\">content_type</str>\n\t\t<str name=\"facet.field\">author_s</str>\n\t\t<str name=\"facet.query\">ipod</str>\n\t\t<str name=\"facet.query\">GB</str>\n\t\t<str name=\"facet.mincount\">1</str>\n\t\t<str name=\"facet.pivot\">cat,inStock</str>\n\t\t<str name=\"facet.range.other\">after</str>\n\t\t<str name=\"facet.range\">price</str>\n\t\t<int name=\"f.price.facet.range.start\">0</int>\n\t\t<int name=\"f.price.facet.range.end\">600</int>\n\t\t<int name=\"f.price.facet.range.gap\">50</int>\n\t\t<str name=\"facet.range\">popularity</str>\n\t\t<int name=\"f.popularity.facet.range.start\">0</int>\n\t\t<int name=\"f.popularity.facet.range.end\">10</int>\n\t\t<int name=\"f.popularity.facet.range.gap\">3</int>\n\t\t<str name=\"facet.range\">manufacturedate_dt</str>\n\t\t<str name=\"f.manufacturedate_dt.facet.range.start\">NOW/YEAR-10YEARS</str>\n\t\t<str name=\"f.manufacturedate_dt.facet.range.end\">NOW</str>\n\t\t<str name=\"f.manufacturedate_dt.facet.range.gap\">+1YEAR</str>\n\t\t<str name=\"f.manufacturedate_dt.facet.range.other\">before</str>\n\t\t<str name=\"f.manufacturedate_dt.facet.range.other\">after</str>\n\t\t<!-- Highlighting defaults -->\n\t\t<str name=\"hl\">on</str>\n\t\t<str name=\"hl.fl\">content features title name</str>\n\t\t<str name=\"hl.encoder\">html</str>\n\t\t<str name=\"hl.simple.pre\"><b></str>\n\t\t<str name=\"hl.simple.post\"></b></str>\n\t\t<str name=\"f.title.hl.fragsize\">0</str>\n\t\t<str name=\"f.title.hl.alternateField\">title</str>\n\t\t<str name=\"f.name.hl.fragsize\">0</str>\n\t\t<str name=\"f.name.hl.alternateField\">name</str>\n\t\t<str name=\"f.content.hl.snippets\">3</str>\n\t\t<str name=\"f.content.hl.fragsize\">200</str>\n\t\t<str name=\"f.content.hl.alternateField\">content</str>\n\t\t<str name=\"f.content.hl.maxAlternateFieldLength\">750</str>\n\t\t<!-- Spell checking defaults -->\n\t\t<str name=\"spellcheck\">on</str>\n\t\t<str name=\"spellcheck.extendedResults\">false</str>\n\t\t<str name=\"spellcheck.count\">5</str>\n\t\t<str name=\"spellcheck.alternativeTermCount\">2</str>\n\t\t<str name=\"spellcheck.maxResultsForSuggest\">5</str>\n\t\t<str name=\"spellcheck.collate\">true</str>\n\t\t<str name=\"spellcheck.collateExtendedResults\">true</str>\n\t\t<str name=\"spellcheck.maxCollationTries\">5</str>\n\t\t<str name=\"spellcheck.maxCollations\">3</str>\n\t</lst>\n\t<!-- append spellchecking to our list of components -->\n\t<arr name=\"last-components\">\n\t\t<str>spellcheck</str>\n\t</arr>\n</requestHandler>\n<requestHandler name=\"/update\" class=\"solr.UpdateRequestHandler\"/>\n<requestHandler name=\"/update/json\" class=\"solr.JsonUpdateRequestHandler\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"stream.contentType\">application/json</str>\n\t</lst>\n</requestHandler>\n<requestHandler name=\"/update/csv\" class=\"solr.CSVRequestHandler\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"stream.contentType\">application/csv</str>\n\t</lst>\n</requestHandler>\n<requestHandler name=\"/update/extract\"  startup=\"lazy\" class=\"solr.extraction.ExtractingRequestHandler\" >\n\t<lst name=\"defaults\">\n\t\t<str name=\"lowernames\">true</str>\n\t\t<str name=\"uprefix\">ignored_</str>\n\t\t<!-- capture link hrefs but ignore div attributes -->\n\t\t<str name=\"captureAttr\">true</str>\n\t\t<str name=\"fmap.a\">links</str>\n\t\t<str name=\"fmap.div\">ignored_</str>\n\t</lst>\n</requestHandler>\n<requestHandler name=\"/analysis/field\"  startup=\"lazy\" class=\"solr.FieldAnalysisRequestHandler\" />\n<requestHandler name=\"/analysis/document\"  class=\"solr.DocumentAnalysisRequestHandler\"  startup=\"lazy\" />\n<requestHandler name=\"/admin/\"  class=\"solr.admin.AdminHandlers\" />\n<requestHandler name=\"/admin/ping\" class=\"solr.PingRequestHandler\">\n\t<lst name=\"invariants\">\n\t\t<str name=\"q\">solrpingquery</str>\n\t</lst>\n\t<lst name=\"defaults\">\n\t\t<str name=\"echoParams\">all</str>\n\t</lst>\n</requestHandler>\n<!-- Echo the request contents back to the client -->\n<requestHandler name=\"/debug/dump\" class=\"solr.DumpRequestHandler\" >\n\t<lst name=\"defaults\">\n\t\t<str name=\"echoParams\">explicit</str>\n\t\t<str name=\"echoHandler\">true</str>\n\t</lst>\n</requestHandler>\n<requestHandler name=\"/replication\" class=\"solr.ReplicationHandler\" > </requestHandler>\n<searchComponent name=\"spellcheck\" class=\"solr.SpellCheckComponent\">\n\t<str name=\"queryAnalyzerFieldType\">textSpell</str>\n\t<!-- a spellchecker built from a field of the main index -->\n\t<lst name=\"spellchecker\">\n\t\t<str name=\"name\">default</str>\n\t\t<str name=\"field\">name</str>\n\t\t<str name=\"classname\">solr.DirectSolrSpellChecker</str>\n\t\t<!-- the spellcheck distance measure used, the default is the internal levenshtein -->\n\t\t<str name=\"distanceMeasure\">internal</str>\n\t\t<!-- minimum accuracy needed to be considered a valid spellcheck suggestion -->\n\t\t<float name=\"accuracy\">0.5</float>\n\t\t<!-- the maximum #edits we consider when enumerating terms: can be 1 or 2 -->\n\t\t<int name=\"maxEdits\">2</int>\n\t\t<!-- the minimum shared prefix when enumerating terms -->\n\t\t<int name=\"minPrefix\">1</int>\n\t\t<!-- maximum number of inspections per result. -->\n\t\t<int name=\"maxInspections\">5</int>\n\t\t<!-- minimum length of a query term to be considered for correction -->\n\t\t<int name=\"minQueryLength\">4</int>\n\t\t<!-- maximum threshold of documents a query term can appear to be considered for correction -->\n\t\t<float name=\"maxQueryFrequency\">0.01</float>\n\t\t<!-- uncomment this to require suggestions to occur in 1% of the documents<float name=\"thresholdTokenFrequency\">.01</float>-->\n\t</lst>\n\t<!-- a spellchecker that can break or combine words.  See \"/spell\" handler below for usage -->\n\t<lst name=\"spellchecker\">\n\t\t<str name=\"name\">wordbreak</str>\n\t\t<str name=\"classname\">solr.WordBreakSolrSpellChecker</str>\n\t\t<str name=\"field\">name</str>\n\t\t<str name=\"combineWords\">true</str>\n\t\t<str name=\"breakWords\">true</str>\n\t\t<int name=\"maxChanges\">10</int>\n\t</lst>\n</searchComponent>\n<requestHandler name=\"/spell\" class=\"solr.SearchHandler\" startup=\"lazy\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"df\">text</str>\n\t\t<str name=\"spellcheck.dictionary\">default</str>\n\t\t<str name=\"spellcheck.dictionary\">wordbreak</str>\n\t\t<str name=\"spellcheck\">on</str>\n\t\t<str name=\"spellcheck.extendedResults\">true</str>\n\t\t<str name=\"spellcheck.count\">10</str>\n\t\t<str name=\"spellcheck.alternativeTermCount\">5</str>\n\t\t<str name=\"spellcheck.maxResultsForSuggest\">5</str>\n\t\t<str name=\"spellcheck.collate\">true</str>\n\t\t<str name=\"spellcheck.collateExtendedResults\">true</str>\n\t\t<str name=\"spellcheck.maxCollationTries\">10</str>\n\t\t<str name=\"spellcheck.maxCollations\">5</str>\n\t</lst>\n\t<arr name=\"last-components\">\n\t\t<str>spellcheck</str>\n\t</arr>\n</requestHandler>\n<searchComponent name=\"tvComponent\" class=\"solr.TermVectorComponent\"/>\n<requestHandler name=\"/tvrh\" class=\"solr.SearchHandler\" startup=\"lazy\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"df\">text</str>\n\t\t<bool name=\"tv\">true</bool>\n\t</lst>\n\t<arr name=\"last-components\">\n\t\t<str>tvComponent</str>\n\t</arr>\n</requestHandler>\n<searchComponent name=\"clustering\" enable=\"${solr.clustering.enabled:false}\" class=\"solr.clustering.ClusteringComponent\" >\n\t<!-- Declare an engine -->\n\t<lst name=\"engine\">\n\t\t<!-- The name, only one can be named \"default\" -->\n\t\t<str name=\"name\">default</str>\n\t\t<str name=\"carrot.algorithm\">org.carrot2.clustering.lingo.LingoClusteringAlgorithm</str>\n\t\t<str name=\"LingoClusteringAlgorithm.desiredClusterCountBase\">20</str>\n\t\t<str name=\"carrot.lexicalResourcesDir\">clustering/carrot2</str>\n\t\t<str name=\"MultilingualClustering.defaultLanguage\">ENGLISH</str>\n\t</lst>\n\t<lst name=\"engine\">\n\t\t<str name=\"name\">stc</str>\n\t\t<str name=\"carrot.algorithm\">org.carrot2.clustering.stc.STCClusteringAlgorithm</str>\n\t</lst>\n</searchComponent>\n<requestHandler name=\"/clustering\" startup=\"lazy\" enable=\"${solr.clustering.enabled:false}\" class=\"solr.SearchHandler\">\n\t<lst name=\"defaults\">\n\t\t<bool name=\"clustering\">true</bool>\n\t\t<str name=\"clustering.engine\">default</str>\n\t\t<bool name=\"clustering.results\">true</bool>\n\t\t<!-- The title field -->\n\t\t<str name=\"carrot.title\">name</str>\n\t\t<str name=\"carrot.url\">id</str>\n\t\t<!-- The field to cluster on -->\n\t\t<str name=\"carrot.snippet\">features</str>\n\t\t<!-- produce summaries -->\n\t\t<bool name=\"carrot.produceSummary\">true</bool>\n\t\t<!-- the maximum number of labels per cluster -->\n\t\t<!-<int name=\"carrot.numDescriptions\">5</int>->\n\t\t<!-- produce sub clusters -->\n\t\t<bool name=\"carrot.outputSubClusters\">false</bool>\n\t\t<str name=\"defType\">edismax</str>\n\t\t<str name=\"qf\">text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4</str>\n\t\t<str name=\"q.alt\">:</str>\n\t\t<str name=\"rows\">10</str>\n\t\t<str name=\"fl\">*,score</str>\n\t</lst>\n\t<arr name=\"last-components\">\n\t\t<str>clustering</str>\n\t</arr>\n</requestHandler>\n<searchComponent name=\"terms\" class=\"solr.TermsComponent\"/>\n<!-- A request handler for demonstrating the terms component -->\n<requestHandler name=\"/terms\" class=\"solr.SearchHandler\" startup=\"lazy\">\n\t<lst name=\"defaults\">\n\t\t<bool name=\"terms\">true</bool>\n\t\t<bool name=\"distrib\">false</bool>\n\t</lst>\n\t<arr name=\"components\">\n\t\t<str>terms</str>\n\t</arr>\n</requestHandler>\n<searchComponent name=\"elevator\" class=\"solr.QueryElevationComponent\" >\n\t<!-- pick a fieldType to analyze queries -->\n\t<str name=\"queryFieldType\">string</str>\n\t<str name=\"config-file\">elevate.xml</str>\n</searchComponent>\n<!-- A request handler for demonstrating the elevator component -->\n<requestHandler name=\"/elevate\" class=\"solr.SearchHandler\" startup=\"lazy\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"echoParams\">explicit</str>\n\t\t<str name=\"df\">text</str>\n\t</lst>\n\t<arr name=\"last-components\">\n\t\t<str>elevator</str>\n\t</arr>\n</requestHandler>\n<searchComponent class=\"solr.HighlightComponent\" name=\"highlight\">\n\t<highlighting>\n\t\t<fragmenter name=\"gap\"  default=\"true\" class=\"solr.highlight.GapFragmenter\">\n\t\t\t<lst name=\"defaults\">\n\t\t\t\t<int name=\"hl.fragsize\">100</int>\n\t\t\t</lst>\n\t\t</fragmenter>\n\t\t<fragmenter name=\"regex\"  class=\"solr.highlight.RegexFragmenter\">\n\t\t\t<lst name=\"defaults\">\n\t\t\t\t<!-- slightly smaller fragsizes work better because of slop -->\n\t\t\t\t<int name=\"hl.fragsize\">70</int>\n\t\t\t\t<!-- allow 50% slop on fragment sizes -->\n\t\t\t\t<float name=\"hl.regex.slop\">0.5</float>\n\t\t\t\t<!-- a basic sentence pattern -->\n\t\t\t\t<str name=\"hl.regex.pattern\">[-\\w ,/\\n\\\"']\n{20,200}\n</str>\n\t\t\t</lst>\n\t\t</fragmenter>\n\t\t<!-- Configure the standard formatter -->\n\t\t<formatter name=\"html\"  default=\"true\" class=\"solr.highlight.HtmlFormatter\">\n\t\t\t<lst name=\"defaults\">\n\t\t\t\t<str name=\"hl.simple.pre\">\n\t\t\t\t\t<![CDATA[<em>]]>\n\t\t\t\t</str>\n\t\t\t\t<str name=\"hl.simple.post\">\n\t\t\t\t\t<![CDATA[</em>]]>\n\t\t\t\t</str>\n\t\t\t</lst>\n\t\t</formatter>\n\t\t<!-- Configure the standard encoder -->\n\t\t<encoder name=\"html\"  class=\"solr.highlight.HtmlEncoder\" />\n\t\t<!-- Configure the standard fragListBuilder -->\n\t\t<fragListBuilder name=\"simple\"  class=\"solr.highlight.SimpleFragListBuilder\"/>\n\t\t<!-- Configure the single fragListBuilder -->\n\t\t<fragListBuilder name=\"single\"  class=\"solr.highlight.SingleFragListBuilder\"/>\n\t\t<!-- Configure the weighted fragListBuilder -->\n\t\t<fragListBuilder name=\"weighted\"  default=\"true\" class=\"solr.highlight.WeightedFragListBuilder\"/>\n\t\t<!-- default tag FragmentsBuilder -->\n\t\t<fragmentsBuilder name=\"default\"  default=\"true\" class=\"solr.highlight.ScoreOrderFragmentsBuilder\">\n\t\t\t<Unable to render embedded object: File (--  </fragmentsBuilder><) not found.-- multi-colored tag FragmentsBuilder -->\n\t\t\t<fragmentsBuilder name=\"colored\"  class=\"solr.highlight.ScoreOrderFragmentsBuilder\">\n\t\t\t\t<lst name=\"defaults\">\n\t\t\t\t\t<str name=\"hl.tag.pre\">\n\t\t\t\t\t\t<![CDATA[<b style=\"background:yellow\">,<b style=\"background:lawgreen\">,<b style=\"background:aquamarine\">,<b style=\"background:magenta\">,<b style=\"background:palegreen\">,<b style=\"background:coral\">,<b style=\"background:wheat\">,<b style=\"background:khaki\">,<b style=\"background:lime\">,<b style=\"background:deepskyblue\">]]>\n\t\t\t\t\t</str>\n\t\t\t\t\t<str name=\"hl.tag.post\">\n\t\t\t\t\t\t<![CDATA[</b>]]>\n\t\t\t\t\t</str>\n\t\t\t\t</lst>\n\t\t\t</fragmentsBuilder>\n\t\t\t<boundaryScanner name=\"default\"  default=\"true\" class=\"solr.highlight.SimpleBoundaryScanner\">\n\t\t\t\t<lst name=\"defaults\">\n\t\t\t\t\t<str name=\"hl.bs.maxScan\">10</str>\n\t\t\t\t\t<str name=\"hl.bs.chars\">.,!? \t\n\n</str>\n\t\t\t\t</lst>\n\t\t\t</boundaryScanner>\n\t\t\t<boundaryScanner name=\"breakIterator\"  class=\"solr.highlight.BreakIteratorBoundaryScanner\">\n\t\t\t\t<lst name=\"defaults\">\n\t\t\t\t\t<!-- type should be one of CHARACTER, WORD(default), LINE and SENTENCE -->\n\t\t\t\t\t<str name=\"hl.bs.type\">WORD</str>\n\t\t\t\t\t<!-- language and country are used when constructing Locale object.  -->\n\t\t\t\t\t<!-- And the Locale object will be used when getting instance of BreakIterator -->\n\t\t\t\t\t<str name=\"hl.bs.language\">en</str>\n\t\t\t\t\t<str name=\"hl.bs.country\">US</str>\n\t\t\t\t</lst>\n\t\t\t</boundaryScanner>\n\t\t</highlighting>\n\t</searchComponent>\n\t<queryResponseWriter name=\"xml\" class=\"solr.XMLResponseWriter\" />\n\t<queryResponseWriter default=\"true\" name=\"PWxml\" class=\"com.vg.pw.solr.PWXMLOperation.PWXMLResponseWriter\" />\n\t<queryResponseWriter name=\"json\" class=\"solr.JSONResponseWriter\"/>\n\t<queryResponseWriter name=\"python\" class=\"solr.PythonResponseWriter\"/>\n\t<queryResponseWriter name=\"ruby\" class=\"solr.RubyResponseWriter\"/>\n\t<queryResponseWriter name=\"php\" class=\"solr.PHPResponseWriter\"/>\n\t<queryResponseWriter name=\"phps\" class=\"solr.PHPSerializedResponseWriter\"/>\n\t<queryResponseWriter name=\"csv\" class=\"solr.CSVResponseWriter\"/>\n\t<queryResponseWriter name=\"PWcsv\" class=\"com.vg.pw.solr.csv.response.PWCSVResponseWriter\" />\n\t<queryResponseWriter name=\"json\" class=\"solr.JSONResponseWriter\">\n\t\t<str name=\"content-type\">text/plain; charset=UTF-8</str>\n\t</queryResponseWriter>\n\t<queryResponseWriter name=\"velocity\" class=\"solr.VelocityResponseWriter\" startup=\"lazy\"/>\n\t<queryResponseWriter name=\"xslt\" class=\"solr.XSLTResponseWriter\">\n\t\t<int name=\"xsltCacheLifetimeSeconds\">5</int>\n\t</queryResponseWriter>\n\t<admin>\n\t\t<defaultQuery>:</defaultQuery>\n\t</admin>\n</config> ",
            "id": "comment-15455564"
        },
        {
            "date": "2016-09-01T16:35:53+0000",
            "author": "Shawn Heisey",
            "content": "This is the wrong place for this discussion.  Please move it to the mailing list or the IRC channel.  If a discussion there determines that there's a bug in a current version, we can re-open the issue.\n\nPlease don't think that I'm unwilling to help ... it just needs to happen in the correct place.  I have some questions for you to answer about your installation.  If you can go there in the next few hours, you'll find that I am reachable on IRC:\n\nhttps://wiki.apache.org/solr/IRCChannels ",
            "id": "comment-15455940"
        }
    ]
}