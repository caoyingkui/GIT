{
    "id": "SOLR-6920",
    "title": "During replication use checksums to verify if files are the same",
    "details": {
        "components": [
            "replication (java)"
        ],
        "type": "Bug",
        "labels": "",
        "fix_versions": [
            "5.0",
            "6.0"
        ],
        "affect_versions": "None",
        "status": "Closed",
        "resolution": "Fixed",
        "priority": "Critical"
    },
    "description": "Currently we check if an index file on the master and slave is the same by checking if it's name and file length match. \n\nWith LUCENE-2446 we now have a checksums for each index file in the segment. We should leverage this to verify if two files are the same.\n\nPlaces like SnapPuller.isIndexStale and SnapPuller.downloadIndexFiles should check against the checksum also.",
    "attachments": {
        "SOLR-6920.patch": "https://issues.apache.org/jira/secure/attachment/12690510/SOLR-6920.patch",
        "SOLR-6920-5x.patch": "https://issues.apache.org/jira/secure/attachment/12697192/SOLR-6920-5x.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "date": "2015-01-07T07:36:10+0000",
            "author": "Varun Thacker",
            "content": "Few tests fail with this patch -\n\n\n   [junit4] Tests with failures:\n   [junit4]   - org.apache.solr.cloud.BasicDistributedZk2Test.testDistribSearch\n   [junit4]   - org.apache.solr.cloud.ShardSplitTest.testDistribSearch\n   [junit4]   - org.apache.solr.cloud.SyncSliceTest.testDistribSearch\n   [junit4]   - org.apache.solr.cloud.RecoveryZkTest.testDistribSearch\n\n\n\n\nI picked ShardSplitTest.testDistribSearch and started investigating why is it failing always with the patch - \n\nI was seeing the following stack trace  - \n\n53340 T166 C65 P58357 oasc.SolrException.log ERROR SnapPull failed :org.apache.solr.common.SolrException: Error opening new searcher\n\t\tat org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1603)\n\t\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1715)\n\t\tat org.apache.solr.handler.SnapPuller.openNewSearcherAndUpdateCommitPoint(SnapPuller.java:680)\n\t\tat org.apache.solr.handler.SnapPuller.fetchLatestIndex(SnapPuller.java:496)\n\t\tat org.apache.solr.handler.ReplicationHandler.doFetch(ReplicationHandler.java:340)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.replicate(RecoveryStrategy.java:163)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.doRecovery(RecoveryStrategy.java:447)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.run(RecoveryStrategy.java:235)\n\tCaused by: java.io.FileNotFoundException: _1_2.liv in dir=RAMDirectory@2fdfb9bd lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@91b3fd9\n\t\tat org.apache.lucene.store.MockDirectoryWrapper.openInput(MockDirectoryWrapper.java:655)\n\t\tat org.apache.lucene.store.Directory.openChecksumInput(Directory.java:110)\n\t\tat org.apache.lucene.codecs.lucene50.Lucene50LiveDocsFormat.readLiveDocs(Lucene50LiveDocsFormat.java:84)\n\t\tat org.apache.lucene.codecs.asserting.AssertingLiveDocsFormat.readLiveDocs(AssertingLiveDocsFormat.java:64)\n\t\tat org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:101)\n\t\tat org.apache.lucene.index.ReadersAndUpdates.getReader(ReadersAndUpdates.java:134)\n\t\tat org.apache.lucene.index.ReadersAndUpdates.getReadOnlyClone(ReadersAndUpdates.java:186)\n\t\tat org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:94)\n\t\tat org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:430)\n\t\tat org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:268)\n\t\tat org.apache.lucene.index.DirectoryReader.openIfChanged(DirectoryReader.java:203)\n\t\tat org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1522)\n\t\t... 7 more\n\t\n53344 T166 C65 P58357 oasc.SolrException.log ERROR Error while trying to recover:org.apache.solr.common.SolrException: Replication for recovery failed.\n\t\tat org.apache.solr.cloud.RecoveryStrategy.replicate(RecoveryStrategy.java:166)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.doRecovery(RecoveryStrategy.java:447)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.run(RecoveryStrategy.java:235)\n\n\n\nThis looked very similar to the problem we were trying to solve in SOLR-6640. So I applied the patch from SOLR-6640 along with this patch and now  I am seeing these -\n\n\n392008 T11 oasc.Diagnostics.logThreadDumps ERROR Gave up waiting for recovery to finish.  THREAD DUMP:\n\t\"qtp2004060070-174\" Id=174 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"RecoveryThread-collection1_shard1_1_replica2\" Id=168 TIMED_WAITING on java.lang.Object@1398321c\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@1398321c\n\t\tat org.apache.solr.update.DefaultSolrCoreState.closeIndexWriter(DefaultSolrCoreState.java:209)\n\t\t-  locked org.apache.solr.update.DefaultSolrCoreState@50d256b5\n\t\tat org.apache.solr.handler.SnapPuller.fetchLatestIndex(SnapPuller.java:469)\n\t\tat org.apache.solr.handler.ReplicationHandler.doFetch(ReplicationHandler.java:340)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.replicate(RecoveryStrategy.java:163)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.doRecovery(RecoveryStrategy.java:447)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.run(RecoveryStrategy.java:235)\n\t\n\t\tNumber of locked synchronizers = 1\n\t\t- java.util.concurrent.locks.ReentrantLock$NonfairSync@213aae87\n\t\n\t\"searcherExecutor-61-thread-1\" Id=166 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6d01d650\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6d01d650\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"RecoveryThread-collection1_shard1_0_replica2\" Id=163 TIMED_WAITING on java.lang.Object@50e7ed31\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@50e7ed31\n\t\tat org.apache.solr.update.DefaultSolrCoreState.closeIndexWriter(DefaultSolrCoreState.java:209)\n\t\t-  locked org.apache.solr.update.DefaultSolrCoreState@3e7f8d5e\n\t\tat org.apache.solr.handler.SnapPuller.fetchLatestIndex(SnapPuller.java:469)\n\t\tat org.apache.solr.handler.ReplicationHandler.doFetch(ReplicationHandler.java:340)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.replicate(RecoveryStrategy.java:163)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.doRecovery(RecoveryStrategy.java:447)\n\t\tat org.apache.solr.cloud.RecoveryStrategy.run(RecoveryStrategy.java:235)\n\t\n\t\tNumber of locked synchronizers = 1\n\t\t- java.util.concurrent.locks.ReentrantLock$NonfairSync@281a3660\n\t\n\t\"searcherExecutor-56-thread-1\" Id=161 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2a855576\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2a855576\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"searcherExecutor-52-thread-1\" Id=156 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@17adcbc9\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@17adcbc9\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"searcherExecutor-48-thread-1\" Id=154 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@131e0544\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@131e0544\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"OverseerThreadFactory-5-thread-4\" Id=152 WAITING on java.util.concurrent.SynchronousQueue$TransferStack@17ebbd2a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@17ebbd2a\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)\n\t\tat java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n\t\tat java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:925)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\t...\n\t\n\t\"OverseerThreadFactory-5-thread-3\" Id=146 WAITING on java.util.concurrent.SynchronousQueue$TransferStack@17ebbd2a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@17ebbd2a\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)\n\t\tat java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n\t\tat java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:925)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\t...\n\t\n\t\"OverseerThreadFactory-5-thread-2\" Id=145 WAITING on java.util.concurrent.SynchronousQueue$TransferStack@17ebbd2a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@17ebbd2a\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)\n\t\tat java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n\t\tat java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:925)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\t...\n\t\n\t\"OverseerThreadFactory-5-thread-1\" Id=144 WAITING on java.util.concurrent.SynchronousQueue$TransferStack@17ebbd2a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@17ebbd2a\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)\n\t\tat java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n\t\tat java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:925)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\t...\n\t\n\t\"coreZkRegister-39-thread-1\" Id=136 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@75d01caa\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@75d01caa\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"Thread-57\" Id=134 WAITING on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Object.java:503)\n\t\tat org.apache.solr.core.CloserThread.run(CoreContainer.java:929)\n\t\n\t\"searcherExecutor-44-thread-1\" Id=133 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3504b1cf\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3504b1cf\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-EventThread\" Id=129 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@4735a83a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@4735a83a\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:494)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-SendThread(127.0.0.1:57967)\" Id=128 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@7b7a6620\n\t\t-  locked java.util.Collections$UnmodifiableSet@685b5a62\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@2c205e57\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:349)\n\t\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)\n\t\n\t\"qtp860063164-124\" Id=124 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp860063164-123\" Id=123 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp860063164-122\" Id=122 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp860063164-121\" Id=121 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp860063164-120\" Id=120 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp860063164-119\" Id=119 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@111b863\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp860063164-118 Acceptor0 SelectChannelConnector@127.0.0.1:57992\" Id=118 RUNNABLE (in native)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:241)\n\t\t-  locked java.lang.Object@32606c21\n\t\tat org.eclipse.jetty.server.nio.SelectChannelConnector.accept(SelectChannelConnector.java:109)\n\t\tat org.eclipse.jetty.server.AbstractConnector$Acceptor.run(AbstractConnector.java:938)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp860063164-117 Selector0\" Id=117 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@3f7ba2fc\n\t\t-  locked java.util.Collections$UnmodifiableSet@4d533b8b\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@27365e0f\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:569)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$1.run(SelectorManager.java:290)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\t...\n\t\n\t\"HashSessionScavenger-4\" Id=116 TIMED_WAITING on java.util.TaskQueue@62593ee5\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.util.TaskQueue@62593ee5\n\t\tat java.util.TimerThread.mainLoop(Timer.java:552)\n\t\tat java.util.TimerThread.run(Timer.java:505)\n\t\n\t\"coreZkRegister-30-thread-1\" Id=113 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@51305ed4\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@51305ed4\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"Thread-45\" Id=111 WAITING on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Object.java:503)\n\t\tat org.apache.solr.core.CloserThread.run(CoreContainer.java:929)\n\t\n\t\"searcherExecutor-35-thread-1\" Id=110 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3ea1d9f0\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3ea1d9f0\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-EventThread\" Id=107 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@73eb3baf\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@73eb3baf\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:494)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-SendThread(127.0.0.1:57967)\" Id=106 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@4f823fdd\n\t\t-  locked java.util.Collections$UnmodifiableSet@19498b68\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@41550ef\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:349)\n\t\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)\n\t\n\t\"qtp695935058-102\" Id=102 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp695935058-101\" Id=101 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp695935058-100\" Id=100 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp695935058-99\" Id=99 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp695935058-98\" Id=98 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp695935058-97\" Id=97 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@13747d01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp695935058-96 Acceptor0 SelectChannelConnector@127.0.0.1:57988\" Id=96 RUNNABLE (in native)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:241)\n\t\t-  locked java.lang.Object@44bad6a1\n\t\tat org.eclipse.jetty.server.nio.SelectChannelConnector.accept(SelectChannelConnector.java:109)\n\t\tat org.eclipse.jetty.server.AbstractConnector$Acceptor.run(AbstractConnector.java:938)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp695935058-95 Selector0\" Id=95 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@c24ea6a\n\t\t-  locked java.util.Collections$UnmodifiableSet@6211a266\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@7f8f54f6\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:569)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$1.run(SelectorManager.java:290)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\t...\n\t\n\t\"HashSessionScavenger-3\" Id=94 TIMED_WAITING on java.util.TaskQueue@1b1323e7\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.util.TaskQueue@1b1323e7\n\t\tat java.util.TimerThread.mainLoop(Timer.java:552)\n\t\tat java.util.TimerThread.run(Timer.java:505)\n\t\n\t\"coreZkRegister-21-thread-1\" Id=93 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@59a2094\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@59a2094\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"Thread-34\" Id=91 WAITING on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Object.java:503)\n\t\tat org.apache.solr.core.CloserThread.run(CoreContainer.java:929)\n\t\n\t\"searcherExecutor-26-thread-1\" Id=90 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@49d0d76b\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@49d0d76b\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-EventThread\" Id=87 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2deed7a9\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2deed7a9\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:494)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-SendThread(127.0.0.1:57967)\" Id=86 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@38060b85\n\t\t-  locked java.util.Collections$UnmodifiableSet@14d97f8d\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@5a431ae9\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:349)\n\t\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)\n\t\n\t\"qtp104014779-82\" Id=82 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp104014779-81\" Id=81 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp104014779-80\" Id=80 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp104014779-79\" Id=79 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp104014779-78\" Id=78 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp104014779-77\" Id=77 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6b9be54a\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp104014779-76 Acceptor0 SelectChannelConnector@127.0.0.1:57984\" Id=76 RUNNABLE (in native)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:241)\n\t\t-  locked java.lang.Object@47ea9477\n\t\tat org.eclipse.jetty.server.nio.SelectChannelConnector.accept(SelectChannelConnector.java:109)\n\t\tat org.eclipse.jetty.server.AbstractConnector$Acceptor.run(AbstractConnector.java:938)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp104014779-75 Selector0\" Id=75 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@6e6869e3\n\t\t-  locked java.util.Collections$UnmodifiableSet@5a90f357\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@3a7d5d\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:569)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$1.run(SelectorManager.java:290)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\t...\n\t\n\t\"HashSessionScavenger-2\" Id=74 TIMED_WAITING on java.util.TaskQueue@7ffc64c8\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.util.TaskQueue@7ffc64c8\n\t\tat java.util.TimerThread.mainLoop(Timer.java:552)\n\t\tat java.util.TimerThread.run(Timer.java:505)\n\t\n\t\"coreZkRegister-12-thread-1\" Id=73 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@133cc81d\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@133cc81d\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"Thread-23\" Id=71 WAITING on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Object.java:503)\n\t\tat org.apache.solr.core.CloserThread.run(CoreContainer.java:929)\n\t\n\t\"searcherExecutor-17-thread-1\" Id=70 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@7b75f1c8\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@7b75f1c8\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-EventThread\" Id=67 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@7c54c0ca\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@7c54c0ca\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:494)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-SendThread(127.0.0.1:57967)\" Id=66 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@18adf136\n\t\t-  locked java.util.Collections$UnmodifiableSet@2ac95c29\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@657d478\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:349)\n\t\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)\n\t\n\t\"qtp2004060070-62\" Id=62 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp2004060070-61\" Id=61 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp2004060070-59\" Id=59 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp2004060070-58\" Id=58 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp2004060070-57\" Id=57 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@42da41bf\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp2004060070-56 Acceptor0 SelectChannelConnector@127.0.0.1:57977\" Id=56 RUNNABLE (in native)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:241)\n\t\t-  locked java.lang.Object@703e1588\n\t\tat org.eclipse.jetty.server.nio.SelectChannelConnector.accept(SelectChannelConnector.java:109)\n\t\tat org.eclipse.jetty.server.AbstractConnector$Acceptor.run(AbstractConnector.java:938)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp2004060070-55 Selector0\" Id=55 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@49c6b334\n\t\t-  locked java.util.Collections$UnmodifiableSet@fd4cc87\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@89a39b8\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:569)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$1.run(SelectorManager.java:290)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\t...\n\t\n\t\"HashSessionScavenger-1\" Id=54 TIMED_WAITING on java.util.TaskQueue@45436371\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.util.TaskQueue@45436371\n\t\tat java.util.TimerThread.mainLoop(Timer.java:552)\n\t\tat java.util.TimerThread.run(Timer.java:505)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-EventThread\" Id=48 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@4b35b33d\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@4b35b33d\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:494)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-SendThread(127.0.0.1:57967)\" Id=47 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@270c253e\n\t\t-  locked java.util.Collections$UnmodifiableSet@9d5fa4f\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@6c7bbfee\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:349)\n\t\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)\n\t\n\t\"coreZkRegister-2-thread-1\" Id=46 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3075d9e6\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3075d9e6\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"Thread-12\" Id=44 WAITING on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@320a1953\n\t\tat java.lang.Object.wait(Object.java:503)\n\t\tat org.apache.solr.core.CloserThread.run(CoreContainer.java:929)\n\t\n\t\"searcherExecutor-8-thread-1\" Id=43 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@934a3e5\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@934a3e5\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"OverseerHdfsCoreFailoverThread-93101408575684611-127.0.0.1:57971__%2Fze-n_0000000000\" Id=41 TIMED_WAITING\n\t\tat java.lang.Thread.sleep(Native Method)\n\t\tat org.apache.solr.cloud.OverseerAutoReplicaFailoverThread.run(OverseerAutoReplicaFailoverThread.java:136)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"OverseerCollectionProcessor-93101408575684611-127.0.0.1:57971__%2Fze-n_0000000000\" Id=40 TIMED_WAITING on java.lang.Object@5ef4141b\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@5ef4141b\n\t\tat org.apache.solr.cloud.DistributedQueue$LatchWatcher.await(DistributedQueue.java:273)\n\t\tat org.apache.solr.cloud.DistributedQueue.getChildren(DistributedQueue.java:317)\n\t\tat org.apache.solr.cloud.DistributedQueue.peekTopN(DistributedQueue.java:444)\n\t\tat org.apache.solr.cloud.OverseerCollectionProcessor.run(OverseerCollectionProcessor.java:326)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"OverseerStateUpdate-93101408575684611-127.0.0.1:57971__%2Fze-n_0000000000\" Id=39 TIMED_WAITING on java.lang.Object@6a542950\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Object@6a542950\n\t\tat org.apache.solr.cloud.DistributedQueue$LatchWatcher.await(DistributedQueue.java:273)\n\t\tat org.apache.solr.cloud.DistributedQueue.getChildren(DistributedQueue.java:317)\n\t\tat org.apache.solr.cloud.DistributedQueue.peek(DistributedQueue.java:591)\n\t\tat org.apache.solr.cloud.DistributedQueue.peek(DistributedQueue.java:569)\n\t\tat org.apache.solr.cloud.Overseer$ClusterStateUpdater.run(Overseer.java:215)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-EventThread\" Id=37 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3b6479b9\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3b6479b9\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:494)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]-SendThread(127.0.0.1:57967)\" Id=36 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@5a077b5\n\t\t-  locked java.util.Collections$UnmodifiableSet@93b2d3b\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@197dcb62\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:349)\n\t\tat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)\n\t\n\t\"qtp1641950186-32\" Id=32 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp1641950186-31\" Id=31 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp1641950186-30\" Id=30 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp1641950186-29\" Id=29 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp1641950186-28\" Id=28 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp1641950186-27\" Id=27 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@11b39c01\n\t\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n\t\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp1641950186-26 Acceptor0 SelectChannelConnector@127.0.0.1:57971\" Id=26 RUNNABLE (in native)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)\n\t\tat sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:241)\n\t\t-  locked java.lang.Object@26c70ebb\n\t\tat org.eclipse.jetty.server.nio.SelectChannelConnector.accept(SelectChannelConnector.java:109)\n\t\tat org.eclipse.jetty.server.AbstractConnector$Acceptor.run(AbstractConnector.java:938)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"qtp1641950186-25 Selector0\" Id=25 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@2027048a\n\t\t-  locked java.util.Collections$UnmodifiableSet@b593a85\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@22ee5eed\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:569)\n\t\tat org.eclipse.jetty.io.nio.SelectorManager$1.run(SelectorManager.java:290)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\t...\n\t\n\t\"HashSessionScavenger-0\" Id=24 TIMED_WAITING on java.util.TaskQueue@4f9a2b85\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.util.TaskQueue@4f9a2b85\n\t\tat java.util.TimerThread.mainLoop(Timer.java:552)\n\t\tat java.util.TimerThread.run(Timer.java:505)\n\t\n\t\"ProcessThread(sid:0 cport:-1):\" Id=16 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@129f5197\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@129f5197\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat org.apache.zookeeper.server.PrepRequestProcessor.run(PrepRequestProcessor.java:120)\n\t\n\t\"SyncThread:0\" Id=15 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@19a59a0e\n\t\tat sun.misc.Unsafe.park(Native Method)\n\t\t-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@19a59a0e\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)\n\t\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n\t\tat org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:127)\n\t\n\t\"SessionTracker\" Id=14 TIMED_WAITING on org.apache.zookeeper.server.SessionTrackerImpl@47251a49\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on org.apache.zookeeper.server.SessionTrackerImpl@47251a49\n\t\tat org.apache.zookeeper.server.SessionTrackerImpl.run(SessionTrackerImpl.java:146)\n\t\n\t\"NIOServerCxn.Factory:0.0.0.0/0.0.0.0:0\" Id=13 RUNNABLE (in native)\n\t\tat sun.nio.ch.KQueueArrayWrapper.kevent0(Native Method)\n\t\tat sun.nio.ch.KQueueArrayWrapper.poll(KQueueArrayWrapper.java:200)\n\t\tat sun.nio.ch.KQueueSelectorImpl.doSelect(KQueueSelectorImpl.java:103)\n\t\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n\t\t-  locked sun.nio.ch.Util$2@54e0d31c\n\t\t-  locked java.util.Collections$UnmodifiableSet@7443fecc\n\t\t-  locked sun.nio.ch.KQueueSelectorImpl@1c0d3eb6\n\t\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n\t\tat org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:178)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"Thread-1\" Id=12 WAITING on java.lang.Thread@29902d1d\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Thread@29902d1d\n\t\tat java.lang.Thread.join(Thread.java:1281)\n\t\tat java.lang.Thread.join(Thread.java:1355)\n\t\tat org.apache.zookeeper.server.NIOServerCnxnFactory.join(NIOServerCnxnFactory.java:302)\n\t\tat org.apache.solr.cloud.ZkTestServer$ZKServerMain.runFromConfig(ZkTestServer.java:303)\n\t\tat org.apache.solr.cloud.ZkTestServer$2.run(ZkTestServer.java:452)\n\t\n\t\"TEST-ShardSplitTest.testDistribSearch-seed#[8490788943A65A5D]\" Id=11 RUNNABLE\n\t\tat sun.management.ThreadImpl.dumpThreads0(Native Method)\n\t\tat sun.management.ThreadImpl.dumpAllThreads(ThreadImpl.java:446)\n\t\tat org.apache.solr.core.Diagnostics.logThreadDumps(Diagnostics.java:46)\n\t\tat org.apache.solr.cloud.AbstractDistribZkTestBase.waitForRecoveriesToFinish(AbstractDistribZkTestBase.java:176)\n\t\tat org.apache.solr.cloud.AbstractDistribZkTestBase.waitForRecoveriesToFinish(AbstractDistribZkTestBase.java:137)\n\t\tat org.apache.solr.cloud.AbstractDistribZkTestBase.waitForRecoveriesToFinish(AbstractDistribZkTestBase.java:132)\n\t\tat org.apache.solr.cloud.AbstractFullDistribZkTestBase.waitForRecoveriesToFinish(AbstractFullDistribZkTestBase.java:823)\n\t\tat org.apache.solr.cloud.ShardSplitTest.splitByUniqueKeyTest(ShardSplitTest.java:240)\n\t\t...\n\t\n\t\"SUITE-ShardSplitTest-seed#[8490788943A65A5D]\" Id=10 TIMED_WAITING on java.lang.Thread@6ed9b2f9\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.Thread@6ed9b2f9\n\t\tat java.lang.Thread.join(Thread.java:1289)\n\t\tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:803)\n\t\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$2.evaluate(ThreadLeakControl.java:401)\n\t\tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:642)\n\t\tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$200(RandomizedRunner.java:129)\n\t\tat com.carrotsearch.randomizedtesting.RandomizedRunner$1.run(RandomizedRunner.java:559)\n\t\n\t\"Monitor Ctrl-Break\" Id=8 RUNNABLE (in native)\n\t\tat java.net.PlainSocketImpl.socketAccept(Native Method)\n\t\tat java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)\n\t\tat java.net.ServerSocket.implAccept(ServerSocket.java:530)\n\t\tat java.net.ServerSocket.accept(ServerSocket.java:498)\n\t\tat com.intellij.rt.execution.application.AppMain$1.run(AppMain.java:85)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\t\n\t\"Signal Dispatcher\" Id=4 RUNNABLE\n\t\n\t\"Finalizer\" Id=3 WAITING on java.lang.ref.ReferenceQueue$Lock@3881e03c\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.ref.ReferenceQueue$Lock@3881e03c\n\t\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)\n\t\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)\n\t\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:189)\n\t\n\t\"Reference Handler\" Id=2 WAITING on java.lang.ref.Reference$Lock@56a8a01f\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on java.lang.ref.Reference$Lock@56a8a01f\n\t\tat java.lang.Object.wait(Object.java:503)\n\t\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)\n\t\n\t\"main\" Id=1 WAITING on com.carrotsearch.randomizedtesting.RandomizedRunner$1@3058b2a9\n\t\tat java.lang.Object.wait(Native Method)\n\t\t-  waiting on com.carrotsearch.randomizedtesting.RandomizedRunner$1@3058b2a9\n\t\tat java.lang.Thread.join(Thread.java:1281)\n\t\tat java.lang.Thread.join(Thread.java:1355)\n\t\tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:569)\n\t\tat com.carrotsearch.randomizedtesting.RandomizedRunner.run(RandomizedRunner.java:435)\n\t\tat org.junit.runner.JUnitCore.run(JUnitCore.java:157)\n\t\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)\n\t\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)\n\t\t...\n\n\n\nLooking into why are the RecoveryThreads timing out. ",
            "id": "comment-14267362"
        },
        {
            "date": "2015-01-07T08:35:12+0000",
            "author": "Varun Thacker",
            "content": "When using a try-finally block code in SOLR-6440 the threads don't hang anymore. \n\nThe test still fails because of errors like this - \n\n\n391305 T11 C196 P59014 oasu.SolrIndexWriter.close ERROR Error closing IndexWriter java.lang.AssertionError: file _2_2.liv does not exist; files=[segments_2, _1.cfs, _3.si, _2.cfe, _1.si, _1.cfe, _3.cfe, _0.cfs, _0.cfe, _2.si, _0.si, _3.cfs, _2.cfs]\n\tat org.apache.lucene.index.IndexWriter.filesExist(IndexWriter.java:4232)\n\tat org.apache.lucene.index.IndexWriter.startCommit(IndexWriter.java:4303)\n\tat org.apache.lucene.index.IndexWriter.prepareCommitInternal(IndexWriter.java:2785)\n\tat org.apache.lucene.index.IndexWriter.commitInternal(IndexWriter.java:2888)\n\tat org.apache.lucene.index.IndexWriter.shutdown(IndexWriter.java:965)\n\tat org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1008)\n\tat org.apache.solr.update.SolrIndexWriter.close(SolrIndexWriter.java:129)\n\tat org.apache.solr.update.DirectUpdateHandler2.closeWriter(DirectUpdateHandler2.java:804)\n\tat org.apache.solr.update.DefaultSolrCoreState.closeIndexWriter(DefaultSolrCoreState.java:68)\n\tat org.apache.solr.update.DefaultSolrCoreState.close(DefaultSolrCoreState.java:359)\n\tat org.apache.solr.update.SolrCoreState.decrefSolrCoreState(SolrCoreState.java:72)\n\tat org.apache.solr.core.SolrCore.close(SolrCore.java:1110)\n\tat org.apache.solr.core.SolrCores.close(SolrCores.java:117)\n\tat org.apache.solr.core.CoreContainer.shutdown(CoreContainer.java:366)\n\tat org.apache.solr.servlet.SolrDispatchFilter.destroy(SolrDispatchFilter.java:194)\n\tat org.apache.solr.cloud.ChaosMonkey.stopJettySolrRunner(ChaosMonkey.java:197)\n\tat org.apache.solr.cloud.ChaosMonkey.stop(ChaosMonkey.java:550)\n\tat org.apache.solr.cloud.AbstractFullDistribZkTestBase.destroyServers(AbstractFullDistribZkTestBase.java:1568)\n\tat org.apache.solr.BaseDistributedSearchTestCase.tearDown(BaseDistributedSearchTestCase.java:283)\n\tat org.apache.solr.cloud.AbstractDistribZkTestBase.tearDown(AbstractDistribZkTestBase.java:231)\n\tat org.apache.solr.cloud.AbstractFullDistribZkTestBase.tearDown(AbstractFullDistribZkTestBase.java:1546)\n\tat org.apache.solr.cloud.BasicDistributedZkTest.tearDown(BasicDistributedZkTest.java:1166)\n\tat org.apache.solr.cloud.ShardSplitTest.tearDown(ShardSplitTest.java:91)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1618)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:885)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)\n\tat org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:50)\n\tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:46)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)\n\tat org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:49)\n\tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:65)\n\tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:365)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:798)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:458)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:836)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:738)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:772)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:783)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)\n\tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:46)\n\tat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:42)\n\tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)\n\tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\n\tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:54)\n\tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\n\tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:65)\n\tat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:55)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:365)\n\tat java.lang.Thread.run(Thread.java:745)\n\n\n\nNo .liv files get included with the logic change in ReplicationHandler.getFileList with the patch. Looking into that now. ",
            "id": "comment-14267406"
        },
        {
            "date": "2015-01-11T16:32:28+0000",
            "author": "Varun Thacker",
            "content": "Updated patch. Tests pass.\n\nThe difference from the earlier patch is the API usage of SegmentInfos\n\nFor reference, here is the link to the question I asked a question on the lucene user mailing list about the SegmentInfos API usage - http://mail-archives.apache.org/mod_mbox/lucene-java-user/201501.mbox/%3CCAEH2wZDm%2BEXEhWEyp9RoQDVffb7jJSG31A3WVGxV_TNCE%3D12zA%40mail.gmail.com%3E ",
            "id": "comment-14272952"
        },
        {
            "date": "2015-01-13T20:44:48+0000",
            "author": "Mark Miller",
            "content": "This looks good. We should not need the back compat < 5.0 code AFAICT though. ",
            "id": "comment-14275909"
        },
        {
            "date": "2015-01-13T23:17:50+0000",
            "author": "Varun Thacker",
            "content": "Hi Mark Miller,\n\nThanks for the review!\n\nWe should not need the back compat < 5.0 code AFAICT though.\nFrom what I understand an index built pre LUCENE-2446 would not have the checksum , so CodecUtil.retrieveChecksum(in) would throw an error as the validation would fail. I guess the check should be 4_8 and not 5_0 though. ",
            "id": "comment-14276158"
        },
        {
            "date": "2015-01-14T21:22:13+0000",
            "author": "Mark Miller",
            "content": "But isnt this just checking what solrconfig is set to? And that doesn't have to match what the index was built with? ",
            "id": "comment-14277707"
        },
        {
            "date": "2015-01-27T10:08:45+0000",
            "author": "Varun Thacker",
            "content": "Updated patch. This handles the back compat check correctly\n\nWhile running the tests I got a failure which can be reproduced with \n\nant test  -Dtestcase=SyncSliceTest -Dtests.method=test -Dtests.seed=588DD6F3A8F57A44 -Dtests.slow=true -Dtests.locale=no_NO_NY -Dtests.timezone=America/Bahia -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n\n\nThe exception thrown is - \n\n131990 T79 C17 P63349 oasc.SolrException.log ERROR java.lang.ArrayIndexOutOfBoundsException: -8\n\t\tat org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:73)\n\t\tat org.apache.lucene.store.DataInput.readInt(DataInput.java:98)\n\t\tat org.apache.lucene.store.MockIndexInputWrapper.readInt(MockIndexInputWrapper.java:159)\n\t\tat org.apache.lucene.codecs.CodecUtil.validateFooter(CodecUtil.java:414)\n\t\tat org.apache.lucene.codecs.CodecUtil.retrieveChecksum(CodecUtil.java:401)\n\t\tat org.apache.solr.handler.ReplicationHandler.getFileList(ReplicationHandler.java:445)\n\t\tat org.apache.solr.handler.ReplicationHandler.handleRequestBody(ReplicationHandler.java:212)\n\t\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:144)\n\t\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:2006)\n\t\tat org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:777)\n\t\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:413)\n\t\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:204)\n\t\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\n\t\tat org.apache.solr.client.solrj.embedded.JettySolrRunner$DebugFilter.doFilter(JettySolrRunner.java:142)\n\t\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\n\t\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)\n\t\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:229)\n\t\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n\t\tat org.eclipse.jetty.server.handler.GzipHandler.handle(GzipHandler.java:301)\n\t\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1077)\n\t\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)\n\t\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)\n\t\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)\n\t\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n\t\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n\t\tat org.eclipse.jetty.server.Server.handle(Server.java:368)\n\t\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)\n\t\tat org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942)\n\t\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004)\n\t\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)\n\t\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)\n\t\tat org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n\t\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)\n\t\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\t\tat java.lang.Thread.run(Thread.java:745)\n\n\n\nOn debugging I found out the file which was causing it - \n_0_MockRandom_0.sd . This is a MockRandomPostingsFormat.SEED_EXT fille.\n\nAdding this to SyncSliceTest fixed the fail - \n\n@LuceneTestCase.SuppressCodecs({ \"MockRandom\" })\n\n but any other test could end up using it causing a failure. Any idea on how to tackle it ",
            "id": "comment-14293279"
        },
        {
            "date": "2015-02-06T15:57:57+0000",
            "author": "Mark Miller",
            "content": "Varun Thacker, can't we just calculate the checksum ourselves if we don't find it? So that we treat old segments right as well? This issue is critical for avoiding corrupted indexes on replication. ",
            "id": "comment-14309351"
        },
        {
            "date": "2015-02-06T16:00:05+0000",
            "author": "Mark Miller",
            "content": "Any idea on how to tackle it\n\nIt seems like we can't be sure every file will have a checksum (at least in tests) and we have to recover properly if we find that it doesn't? ",
            "id": "comment-14309353"
        },
        {
            "date": "2015-02-06T16:15:40+0000",
            "author": "Mark Miller",
            "content": "can't we just calculate the checksum ourselves if we don't find it?\n\nI guess it would be fairly expensive for large files. For critical small files (the ones that always seem to come as the problem), perhaps we can do the checksum ourselves, or more likely, just always down .si and segments_n files regardless. ",
            "id": "comment-14309370"
        },
        {
            "date": "2015-02-06T16:27:21+0000",
            "author": "Varun Thacker",
            "content": "I guess it would be fairly expensive for large files. For critical small files (the ones that always seem to come as the problem), perhaps we can do the checksum ourselves, or more likely, just always down .si and segments_n files regardless.\n\nNice idea! So .si/segments_n/.liv should be downloaded again regardless. \n ",
            "id": "comment-14309393"
        },
        {
            "date": "2015-02-06T17:05:01+0000",
            "author": "Mark Miller",
            "content": "Here is a first pass at making the patch suitable for trunk. ",
            "id": "comment-14309437"
        },
        {
            "date": "2015-02-06T17:07:58+0000",
            "author": "Mark Miller",
            "content": "For 5x, we will want to put the version checks back in. ",
            "id": "comment-14309438"
        },
        {
            "date": "2015-02-06T17:34:25+0000",
            "author": "Varun Thacker",
            "content": "Mark,\n\nIn your patch if the file fails to retrieve a checksum and if its a .si/segments_n file then we will have to re-download the complete index. the reason being isStaleIndex will return true.\n\nInstead if we moved to the check into the if statement in downloadIndexFiles() to always re-download those files won't it be better?\n\nI think you have an extra file from HdfsTestUtil in the patch. ",
            "id": "comment-14309489"
        },
        {
            "date": "2015-02-06T18:08:48+0000",
            "author": "Mark Miller",
            "content": "In your patch if the file fails to retrieve a checksum...\n\nFeel free to put up a follow on patch - this one is just a first draft. I'll be taking another pass when I get a chance as well.\n\nI think you have an extra file from HdfsTestUtil in the patch.\n\nNo, that's fixes an error I see in the test that shalin mentions in SOLR-6640 and led me back to this issue. ",
            "id": "comment-14309538"
        },
        {
            "date": "2015-02-06T19:20:19+0000",
            "author": "Mark Miller",
            "content": "Another patch incorporating Varun's feedback and minor tweaks. ",
            "id": "comment-14309694"
        },
        {
            "date": "2015-02-06T19:23:46+0000",
            "author": "Mark Miller",
            "content": "That patch did pick up cruft (TopGroupsShardResponseProcessor) from fooling around trying to fix a Solr fail triggered by a Lucene change. I'll put up a clean one in a moment. ",
            "id": "comment-14309701"
        },
        {
            "date": "2015-02-06T20:00:36+0000",
            "author": "Varun Thacker",
            "content": "1. Changed the log message in SnapPuller.compareFile() since checksum won't be present in case of exception.\nFrom - LOG.warn(\"File {} did not match. expected checksum is {} and actual is checksum {}. \" + \"expected length is {} and actual length is {}\", filename, backupIndexFileChecksum indexFileChecksum, backupIndexFileLen, indexFileLen);\nTo - LOG.warn(\"File {} did not match. expected length is {} and actual length is {}\", filename,backupIndexFileLen, indexFileLen);\n\n2. In SnapPuller.downloadIndexFiles made (String) file.get(NAME)) into a variable for better readibility.\n\n3. The if condition still needs tweaking? We could still have a non checksummed/checksum threw error .si/.liv/segments_n file and be equal in length and we wouldn't re-download?\n\nMaybe the condition could be the check you initially proposed -\n1. If file is a .si/.liv/segments_n file download regardless\n2. else if  if (!compareResult.equal || downloadCompleteIndex) then re-download? ",
            "id": "comment-14309773"
        },
        {
            "date": "2015-02-06T20:08:33+0000",
            "author": "Mark Miller",
            "content": "3\n\nI'm not following - what are you seeing exactly? I read it as 'if a file was not checksummed, download anyway if it matches this file list'.\n\n|| (!compareResult.checkSummed && (((String) file.get(NAME)).endsWith(\".si\") || ((String) file.get(NAME)).endsWith(\".liv\")  || ((String) file.get(NAME)).startsWith(\"segments_\")))\n\nIf the file is checksummed, we can rely on the checksum. What am I missing that you are seeing? ",
            "id": "comment-14309788"
        },
        {
            "date": "2015-02-06T20:56:29+0000",
            "author": "Varun Thacker",
            "content": "You're right. I got confused a bit with this portion !compareResult.equal in the statement and replied too early. ",
            "id": "comment-14309895"
        },
        {
            "date": "2015-02-06T21:00:41+0000",
            "author": "Mark Miller",
            "content": "Okay - I think we should put this in trunk and 5x to start jenkins on it.\n\nI've moved my local machine to only running the 9 chaosmonkey jobs I have.\n\nIf anyone is following along, more review would be good.\n\nI'll commit to trunk and let's work on a 5x patch. ",
            "id": "comment-14309904"
        },
        {
            "date": "2015-02-06T21:41:31+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1657969 from Mark Miller in branch 'dev/trunk'\n[ https://svn.apache.org/r1657969 ]\n\nSOLR-6920, SOLR-6640: A replicated index can end up corrupted when small files end up with the same file name and size. ",
            "id": "comment-14309976"
        },
        {
            "date": "2015-02-07T00:34:24+0000",
            "author": "Mark Miller",
            "content": "First pass at the 5x version. ",
            "id": "comment-14310300"
        },
        {
            "date": "2015-02-07T00:50:16+0000",
            "author": "Mark Miller",
            "content": "New 5x patch to fix where Version is parsed in SnapPuller. ",
            "id": "comment-14310336"
        },
        {
            "date": "2015-02-07T05:29:57+0000",
            "author": "Varun Thacker",
            "content": "Hi Mark,\n\nIn the 5.x patch, should we wrap fileMeta.put(CHECKSUM, CodecUtil.retrieveChecksum(in)); for the segments_n file in a try-catch block?  ",
            "id": "comment-14310565"
        },
        {
            "date": "2015-02-07T15:54:39+0000",
            "author": "Mark Miller",
            "content": "Yeah, good catch. I'd almost like to do that on trunk as well just for consistency. ",
            "id": "comment-14310785"
        },
        {
            "date": "2015-02-07T16:15:55+0000",
            "author": "Mark Miller",
            "content": "New patch - cleaned it up a bit, handled Varun's comment. ",
            "id": "comment-14310792"
        },
        {
            "date": "2015-02-07T16:37:42+0000",
            "author": "Mark Miller",
            "content": "Been thinking about adding this since last night - should go in the trunk version too - this patch will also download any files under 100kb if there is no checksum - more future proof for new small files, alternate codec proof, etc. ",
            "id": "comment-14310806"
        },
        {
            "date": "2015-02-07T17:02:43+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658078 from Mark Miller in branch 'dev/trunk'\n[ https://svn.apache.org/r1658078 ]\n\nSOLR-6920, SOLR-6640: When we so not have a checksum for a file, always download files under 100kb and other small improvements. ",
            "id": "comment-14310818"
        },
        {
            "date": "2015-02-07T17:35:28+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658083 from Mark Miller in branch 'dev/branches/branch_5x'\n[ https://svn.apache.org/r1658083 ]\n\nSOLR-6920, SOLR-6640: A replicated index can end up corrupted when small files end up with the same file name and size. ",
            "id": "comment-14310835"
        },
        {
            "date": "2015-02-07T18:14:47+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658089 from Mark Miller in branch 'dev/trunk'\n[ https://svn.apache.org/r1658089 ]\n\nSOLR-6920, SOLR-6640: Do not log an error when a file does not exist for comparison. ",
            "id": "comment-14310853"
        },
        {
            "date": "2015-02-07T18:19:52+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658090 from Mark Miller in branch 'dev/branches/branch_5x'\n[ https://svn.apache.org/r1658090 ]\n\nSOLR-6920, SOLR-6640: Do not log an error when a file does not exist for comparison. ",
            "id": "comment-14310856"
        },
        {
            "date": "2015-02-08T03:56:15+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658129 from Mark Miller in branch 'dev/trunk'\n[ https://svn.apache.org/r1658129 ]\n\nSOLR-6920, SOLR-6640: Rename method to filesToAlwaysDownloadIfNoChecksums. ",
            "id": "comment-14311095"
        },
        {
            "date": "2015-02-08T04:01:20+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658130 from Mark Miller in branch 'dev/branches/branch_5x'\n[ https://svn.apache.org/r1658130 ]\n\nSOLR-6920, SOLR-6640: Rename method to filesToAlwaysDownloadIfNoChecksums. ",
            "id": "comment-14311100"
        },
        {
            "date": "2015-02-08T18:51:59+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658240 from Mark Miller in branch 'dev/branches/lucene_solr_5_0'\n[ https://svn.apache.org/r1658240 ]\n\nSOLR-6920, SOLR-6640: A replicated index can end up corrupted when small files end up with the same file name and size. ",
            "id": "comment-14311491"
        },
        {
            "date": "2015-02-09T18:42:10+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658519 from Mark Miller in branch 'dev/trunk'\n[ https://svn.apache.org/r1658519 ]\n\nSOLR-6920, SOLR-6640: Make constant and fix logging. ",
            "id": "comment-14312601"
        },
        {
            "date": "2015-02-09T18:48:25+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658524 from Mark Miller in branch 'dev/branches/branch_5x'\n[ https://svn.apache.org/r1658524 ]\n\nSOLR-6920, SOLR-6640: Make constant and fix logging. ",
            "id": "comment-14312611"
        },
        {
            "date": "2015-02-09T18:50:19+0000",
            "author": "Mark Miller",
            "content": "Thanks Varun, great job. ",
            "id": "comment-14312615"
        },
        {
            "date": "2015-02-09T18:56:05+0000",
            "author": "ASF subversion and git services",
            "content": "Commit 1658526 from Mark Miller in branch 'dev/branches/lucene_solr_5_0'\n[ https://svn.apache.org/r1658526 ]\n\nSOLR-6920, SOLR-6640: Make constant and fix logging. ",
            "id": "comment-14312629"
        },
        {
            "date": "2015-02-23T05:01:26+0000",
            "author": "Anshum Gupta",
            "content": "Bulk close after 5.0 release. ",
            "id": "comment-14332705"
        }
    ]
}