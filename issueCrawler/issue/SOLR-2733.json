{
    "id": "SOLR-2733",
    "title": "DIH - \"Ignoring Error when closing connection\"  when send command \"abort\" in jdbc 5.1.17",
    "details": {
        "affect_versions": "3.3",
        "status": "Open",
        "fix_versions": [],
        "components": [
            "contrib - DataImportHandler"
        ],
        "type": "Bug",
        "priority": "Major",
        "labels": "",
        "resolution": "Unresolved"
    },
    "description": "When I \"abort\" command in dataimport handler. I get avobe error.\nI can't get this error in jdbc 5.1.12 but occure in 5.1.13\n\nAug 29, 2011 10:10:19 PM org.apache.solr.handler.dataimport.JdbcDataSource closeConnection\nSEVERE: Ignoring Error when closing connection\njava.sql.SQLException: Streaming result set com.mysql.jdbc.RowDataDynamic@11d8b7e4 is still active. No statements may be issued when any streaming result sets are open and in use on a given connection. Ensure that you have called .close() on any active streaming result sets before attempting more queries.\n        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:934)\n        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:931)\n        at com.mysql.jdbc.MysqlIO.checkForOutstandingStreamingData(MysqlIO.java:2735)\n        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1899)\n        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2151)\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2619)\n        at com.mysql.jdbc.ConnectionImpl.rollbackNoChecks(ConnectionImpl.java:4830)\n        at com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4716)\n        at com.mysql.jdbc.ConnectionImpl.realClose(ConnectionImpl.java:4325)\n        at com.mysql.jdbc.ConnectionImpl.close(ConnectionImpl.java:1557)\n        at org.apache.solr.handler.dataimport.JdbcDataSource.closeConnection(JdbcDataSource.java:401)\n        at org.apache.solr.handler.dataimport.JdbcDataSource.close(JdbcDataSource.java:392)\n        at org.apache.solr.handler.dataimport.DataConfig$Entity.clearCache(DataConfig.java:171)\n        at org.apache.solr.handler.dataimport.DataConfig.clearCaches(DataConfig.java:340)\n        at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:367)\n        at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:427)\n        at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:408)",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "author": "Manjunath",
            "id": "comment-13937766",
            "date": "2014-03-17T13:03:55+0000",
            "content": "I did get the same error but different occasion.\nHere is the stack trace\n\n\nERROR org.apache.solr.handler.dataimport.JdbcDataSource  \u2013 Ignoring Error when closing connection\njava.sql.SQLException: Streaming result set com.mysql.jdbc.RowDataDynamic@479abcd4 is still active. No statements may be issued when any streaming result sets are open and in use on a given connection. Ensure that you have called .close() on any active streaming result sets before attempting more queries.\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:924)\n\tat com.mysql.jdbc.MysqlIO.checkForOutstandingStreamingData(MysqlIO.java:3314)\n\tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2477)\n\tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2731)\n\tat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2809)\n\tat com.mysql.jdbc.ConnectionImpl.rollbackNoChecks(ConnectionImpl.java:5165)\n\tat com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:5048)\n\tat com.mysql.jdbc.ConnectionImpl.realClose(ConnectionImpl.java:4654)\n\tat com.mysql.jdbc.ConnectionImpl.close(ConnectionImpl.java:1630)\n\tat org.apache.solr.handler.dataimport.JdbcDataSource.closeConnection(JdbcDataSource.java:436)\n\tat org.apache.solr.handler.dataimport.JdbcDataSource.close(JdbcDataSource.java:421)\n\tat org.apache.solr.handler.dataimport.DebugLogger$2.close(DebugLogger.java:180)\n\tat org.apache.solr.handler.dataimport.DocBuilder.closeEntityProcessorWrappers(DocBuilder.java:294)\n\tat org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:283)\n\tat org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:411)\n\tat org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:483)\n\tat org.apache.solr.handler.dataimport.DataImportHandler.handleRequestBody(DataImportHandler.java:179)\n\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)\n\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:1916)\n\tat org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:780)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:427)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:217)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n\tat org.eclipse.jetty.server.Server.handle(Server.java:368)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)\n\tat org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:953)\n\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1014)\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:861)\n\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)\n\tat org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)\n\tat org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\n\n "
        }
    ]
}