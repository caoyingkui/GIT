{
    "id": "LUCENE-8371",
    "title": "TestRandomChains.testRandomChainsWithLargeStrings() failure",
    "details": {
        "components": [
            "modules/analysis"
        ],
        "status": "Closed",
        "resolution": "Fixed",
        "fix_versions": [
            "7.5"
        ],
        "affect_versions": "None",
        "labels": "",
        "priority": "Major",
        "type": "Bug"
    },
    "description": "Reproducing seed for TestRandomChains.testRandomChainsWithLargeStrings() failure from https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-Linux/2196/:\n\n\nChecking out Revision 53ec8224705f4f0d35751b18b3f0168517c43121 (refs/remotes/origin/branch_7x)\n[...]\n   [junit4] Suite: org.apache.lucene.analysis.core.TestRandomChains\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\ua97b  \\uebcf\\ueb06\\uf85b\\uf649\\uf0b7 esgm s \\uabfd \\ue11c\\udbb4\\udc48\\ue90d\\u0142\\u0014\\u0018 cr \\u30ed\\u30a8\\u30ec\\u30e1 <? gr \\ud835\\udf53\\ud835\\udc58\\ud835\\ude2b \\ueff5\\uda61\\ude33\\ud94d\\udcbb\\udb3b\\uddc8\\u0738 \\ua711\\ua719 xqu ygvfwc ~?\\u0781%'\n   [junit4]   2> Exception from random analyzer: \n   [junit4]   2> charfilters=\n   [junit4]   2>   org.apache.lucene.analysis.fa.PersianCharFilter(java.io.StringReader@12c9ec6)\n   [junit4]   2> tokenizer=\n   [junit4]   2>   org.apache.lucene.analysis.core.LowerCaseTokenizer()\n   [junit4]   2> filters=\n   [junit4]   2>   org.apache.lucene.analysis.hunspell.HunspellStemFilter(ValidatingTokenFilter@17533c4 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false, org.apache.lucene.analysis.hunspell.Dictionary@1e0b337, true, false)\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.no.NorwegianLightStemFilter(OneTimeWrapper@3e3989 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false)\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.en.EnglishPossessiveFilter(OneTimeWrapper@96b77b term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false)\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.shingle.FixedShingleFilter(OneTimeWrapper@d4fade term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false, 3)\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestRandomChains -Dtests.method=testRandomChainsWithLargeStrings -Dtests.seed=8C3CDE29C6D4A774 -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=ms -Dtests.timezone=Europe/Saratov -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 0.42s J2 | TestRandomChains.testRandomChainsWithLargeStrings <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: finalOffset expected:<74> but was:<73>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([8C3CDE29C6D4A774:E66761389F9A8787]:0)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:561)\n   [junit4]    > \tat org.apache.lucene.analysis.core.TestRandomChains.testRandomChainsWithLargeStrings(TestRandomChains.java:893)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene70): {dummy=PostingsFormat(name=Memory)}, docValues:{}, maxPointsInLeafNode=1890, maxMBSortInHeap=7.329943162959591, sim=RandomSimilarity(queryNorm=false): {}, locale=ms, timezone=Europe/Saratov\n   [junit4]   2> NOTE: Linux 4.13.0-41-generic i386/Oracle Corporation 1.8.0_172 (32-bit)/cpus=8,threads=1,free=313060856,total=533725184",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "id": "comment-16523792",
            "author": "Erick Erickson",
            "content": "So I should not BadApple this one on Thursday? ",
            "date": "2018-06-26T14:21:29+0000"
        },
        {
            "id": "comment-16523811",
            "author": "Robert Muir",
            "content": "There is nothing wrong with the test, don't badapple it. It finds real bugs. ",
            "date": "2018-06-26T14:34:14+0000"
        },
        {
            "id": "comment-16523840",
            "author": "Erick Erickson",
            "content": "OK, I'll put it on the permanent \"don't BadApple\" list. ",
            "date": "2018-06-26T15:01:06+0000"
        },
        {
            "id": "comment-16525750",
            "author": "Steve Rowe",
            "content": "Another reproducing seed from https://builds.apache.org/job/Lucene-Solr-NightlyTests-7.x/249/:\n\n\nChecking out Revision dc2c9e98632ec7ceb7fb1bee336ec0ecac377270 (refs/remotes/origin/branch_7x)\n[...]\n   [junit4] Suite: org.apache.lucene.analysis.core.TestRandomChains\n   [junit4]   2> TEST FAIL: useCharFilter=false text='c \\u052c\\u8443\\ueedd\\ua291x\\ue16d\\ud87b\\ude42\\u7e7f jnssft \\u1df5\\u1df3\\u1dcc\\u1dc8\\u1ddf\\u1ddf\\u1dc2\\u1de8\\u1dde\\u1de1 t mgzelt ?'\n   [junit4]   2> Exception from random analyzer: \n   [junit4]   2> charfilters=\n   [junit4]   2>   org.apache.lucene.analysis.charfilter.MappingCharFilter(org.apache.lucene.analysis.charfilter.NormalizeCharMap@1490adc8, java.io.StringReader@6d79ac4d)\n   [junit4]   2>   org.apache.lucene.analysis.charfilter.HTMLStripCharFilter(org.apache.lucene.analysis.charfilter.MappingCharFilter@5f9d7e8f)\n   [junit4]   2> tokenizer=\n   [junit4]   2>   org.apache.lucene.analysis.standard.UAX29URLEmailTokenizer(org.apache.lucene.util.AttributeFactory$1@7cd0d664)\n   [junit4]   2> filters=\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.no.NorwegianLightStemFilter(OneTimeWrapper@2904482 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,flags=0,payload=null,keyword=false)\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.shingle.FixedShingleFilter(OneTimeWrapper@6b50d367 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,flags=0,payload=null,keyword=false, 3, <KATAKANA>, <HANGUL>)\n   [junit4]   2> NOTE: download the large Jenkins line-docs file by running 'ant get-jenkins-line-docs' in the lucene directory.\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestRandomChains -Dtests.method=testRandomChainsWithLargeStrings -Dtests.seed=319F02FFE4F7A86B -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/jenkins-slave/workspace/Lucene-Solr-NightlyTests-7.x/test-data/enwiki.random.lines.txt -Dtests.locale=he-IL -Dtests.timezone=Pacific/Gambier -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 16.0s J0 | TestRandomChains.testRandomChainsWithLargeStrings <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: finalOffset expected:<40> but was:<38>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([319F02FFE4F7A86B:5BC4BDEEBDB98898]:0)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:561)\n   [junit4]    > \tat org.apache.lucene.analysis.core.TestRandomChains.testRandomChainsWithLargeStrings(TestRandomChains.java:893)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]   2> NOTE: leaving temporary files on disk at: /x1/jenkins/jenkins-slave/workspace/Lucene-Solr-NightlyTests-7.x/checkout/lucene/build/analysis/common/test/J0/temp/lucene.analysis.core.TestRandomChains_319F02FFE4F7A86B-001\n   [junit4]   2> NOTE: test params are: codec=SimpleText, sim=RandomSimilarity(queryNorm=true): {dummy=DFR GB1}, locale=he-IL, timezone=Pacific/Gambier\n   [junit4]   2> NOTE: Linux 3.13.0-88-generic amd64/Oracle Corporation 1.8.0_172 (64-bit)/cpus=4,threads=1,free=269319248,total=336592896\n\n ",
            "date": "2018-06-28T00:04:40+0000"
        },
        {
            "id": "comment-16527354",
            "author": "Alan Woodward",
            "content": "Annoyingly, neither of those seeds reproduce anymore (I'm guessing due to StandardFilter going away, which changes the random selection).  I'll beast and see if I can find any more reproducing seeds. ",
            "date": "2018-06-29T09:14:27+0000"
        },
        {
            "id": "comment-16528825",
            "author": "Erick Erickson",
            "content": "Here are 2 failures, whether they reproduce reliably or not is an open question. Over 1,200 runs\n-test:\n    [mkdir] Created dir: /Users/Erick-test:\n    [mkdir] Created dir: /Users/Erick/apache/solrJiras/beast/results/beast-tmp/262/test-caches/analyzers-common\n   [junit4] <JUnit4> says jolly good day! Master seed: C7A35C74F69288E4\n   [junit4] Executing 1 suite with 1 JVM.\n   [junit4] \n   [junit4] Started J0 PID(21454@localhost).\n   [junit4] Suite: org.apache.lucene.analysis.core.TestRandomChains\n   [junit4] OK      2.17s | TestRandomChains.testRandomChainsWithLargeStrings\n   [junit4]   2> TEST FAIL: useCharFilter=false text='ighed for, at denne '\n   [junit4]   2> Exception from random analyzer: \n   [junit4]   2> charfilters=\n   [junit4]   2>   org.apache.lucene.analysis.charfilter.MappingCharFilter(org.apache.lucene.analysis.charfilter.NormalizeCharMap@162d6d0b, java.io.StringReader@3c566906)\n   [junit4]   2>   org.apache.lucene.analysis.charfilter.HTMLStripCharFilter(org.apache.lucene.analysis.charfilter.MappingCharFilter@51733c56)\n   [junit4]   2> tokenizer=\n   [junit4]   2>   org.apache.lucene.analysis.core.UnicodeWhitespaceTokenizer()\n   [junit4]   2> filters=\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.shingle.FixedShingleFilter(OneTimeWrapper@23da0490 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false, 2, <ALPHANUM>, <SOUTHEAST_ASIAN>)\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.miscellaneous.PatternKeywordMarkerFilter(OneTimeWrapper@63f905e3 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false, a)\n   [junit4]   2>   org.apache.lucene.analysis.core.TypeTokenFilter(ValidatingTokenFilter@667b7e06 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false, [<EMOJI>, <NUM>], true)\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestRandomChains -Dtests.method=testRandomChains -Dtests.seed=C7A35C74F69288E4 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=it -Dtests.timezone=Europe/Kirov -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 0.72s | TestRandomChains.testRandomChains <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: finalOffset expected:<20> but was:<19>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([C7A35C74F69288E4:FA427515B1809524]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:561)\n   [junit4]    >  at org.apache.lucene.analysis.core.TestRandomChains.testRandomChains(TestRandomChains.java:866)\n   [junit4]    >  at java.lang.Thread.run(Thread.java:748)\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene70), sim=RandomSimilarity(queryNorm=true): {}, locale=it, timezone=Europe/Kirov\n   [junit4]   2> NOTE: Mac OS X 10.13.5 x86_64/Oracle Corporation 1.8.0_151 (64-bit)/cpus=12,threads=1,free=466884864,total=514850816\n   [junit4]   2> NOTE: All tests run in this JVM: [TestRandomChains]\n   [junit4] Completed [1/1 (1!)] in 8.02s, 2 tests, 1 failure <<< FAILURES!\n   [junit4] \n   [junit4] \n   [junit4] Tests with failures [seed: C7A35C74F69288E4]:\n   [junit4]   - org.apache.lucene.analysis.core.TestRandomChains.testRandomChains\n   [junit4] \n   [junit4] \n   [junit4] JVM J0:     1.37 ..    11.21 =     9.84s\n   [junit4] Execution time total: 11 seconds\n\n\n   ****************************************************-init-totals:\n\n-test:\n    [mkdir] Created dir: /Users/Erick/apache/solrJiras/beast/results/beast-tmp/386/test-caches/analyzers-common\n   [junit4] <JUnit4> says \u4f60\u597d! Master seed: ECE1607EDB84B98D\n   [junit4] Executing 1 suite with 1 JVM.\n   [junit4] \n   [junit4] Started J0 PID(24855@localhost).\n   [junit4] Suite: org.apache.lucene.analysis.core.TestRandomChains\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\uabc3\\uabf3\\uabd5\\uabcb\\uabe9\\uabc9\\uabf5\\uabce\\uabf7\\uabf9\\uabcd\\uabde\\uabcc \\u788d\\uf8f4S+'\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\uabc3\\uabf3\\uabd5\\uabcb\\uabe9\\uabc9\\uabf5\\uabce\\uabf7\\uabf9\\uabcd\\uabde\\uabcc \\u788d\\uf8f4S+'\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\uabc3\\uabf3\\uabd5\\uabcb\\uabe9\\uabc9\\uabf5\\uabce\\uabf7\\uabf9\\uabcd\\uabde\\uabcc \\u788d\\uf8f4S+'\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\uabc3\\uabf3\\uabd5\\uabcb\\uabe9\\uabc9\\uabf5\\uabce\\uabf7\\uabf9\\uabcd\\uabde\\uabcc \\u788d\\uf8f4S+'\n   [junit4]   2> \u0e21\u0e34.\u0e22. \u0e52\u0e59, \u0e52\u0e55\u0e56\u0e51 \u0e53:\u0e51\u0e55:\u0e55\u0e57 \u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07 com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[Thread-8,5,TGRP-TestRandomChains]\n   [junit4]   2> java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]   2>  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]   2>  at org.junit.Assert.fail(Assert.java:93)\n   [junit4]   2>  at org.junit.Assert.failNotEquals(Assert.java:647)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:128)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:472)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4]   2> \n   [junit4]   2> \u0e21\u0e34.\u0e22. \u0e52\u0e59, \u0e52\u0e55\u0e56\u0e51 \u0e53:\u0e51\u0e55:\u0e55\u0e57 \u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07 com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[Thread-7,5,TGRP-TestRandomChains]\n   [junit4]   2> java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]   2>  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]   2>  at org.junit.Assert.fail(Assert.java:93)\n   [junit4]   2>  at org.junit.Assert.failNotEquals(Assert.java:647)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:128)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:472)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4]   2> \n   [junit4]   2> \u0e21\u0e34.\u0e22. \u0e52\u0e59, \u0e52\u0e55\u0e56\u0e51 \u0e53:\u0e51\u0e55:\u0e55\u0e57 \u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07 com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[Thread-9,5,TGRP-TestRandomChains]\n   [junit4]   2> java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]   2>  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]   2>  at org.junit.Assert.fail(Assert.java:93)\n   [junit4]   2>  at org.junit.Assert.failNotEquals(Assert.java:647)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:128)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:472)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4]   2> \n   [junit4]   2> \u0e21\u0e34.\u0e22. \u0e52\u0e59, \u0e52\u0e55\u0e56\u0e51 \u0e53:\u0e51\u0e55:\u0e55\u0e57 \u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07 com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[Thread-6,5,TGRP-TestRandomChains]\n   [junit4]   2> java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]   2>  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]   2>  at org.junit.Assert.fail(Assert.java:93)\n   [junit4]   2>  at org.junit.Assert.failNotEquals(Assert.java:647)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:128)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:472)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4]   2> \n   [junit4]   2> Exception from random analyzer: \n   [junit4]   2> charfilters=\n   [junit4]   2>   org.apache.lucene.analysis.fa.PersianCharFilter(java.io.StringReader@17bb8e46)\n   [junit4]   2> tokenizer=\n   [junit4]   2>   org.apache.lucene.analysis.core.LetterTokenizer(org.apache.lucene.util.AttributeFactory$DefaultAttributeFactory@347f1856)\n   [junit4]   2> filters=\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.synonym.SynonymGraphFilter(OneTimeWrapper@324f15db term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word, org.apache.lucene.analysis.synonym.SynonymMap@794d646a, true)\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.no.NorwegianLightStemFilter(OneTimeWrapper@73881d57 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,keyword=false)\n   [junit4]   2>   org.apache.lucene.analysis.miscellaneous.StemmerOverrideFilter(ValidatingTokenFilter@6e778a37 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,keyword=false, org.apache.lucene.analysis.miscellaneous.StemmerOverrideFilter$StemmerOverrideMap@4ec70982)\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestRandomChains -Dtests.method=testRandomChains -Dtests.seed=ECE1607EDB84B98D -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=th-TH-u-nu-thai-x-lvariant-TH -Dtests.timezone=America/Cayman -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   1.43s | TestRandomChains.testRandomChains <<<\n   [junit4]    > Throwable #1: java.lang.RuntimeException: some thread(s) failed\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:583)\n   [junit4]    >  at org.apache.lucene.analysis.core.TestRandomChains.testRandomChains(TestRandomChains.java:866)\n   [junit4]    >  at java.lang.Thread.run(Thread.java:748)Throwable #2: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=21, name=Thread-8, state=RUNNABLE, group=TGRP-TestRandomChains]\n   [junit4]    > Caused by: java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)Throwable #3: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=19, name=Thread-6, state=RUNNABLE, group=TGRP-TestRandomChains]\n   [junit4]    > Caused by: java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)Throwable #4: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=20, name=Thread-7, state=RUNNABLE, group=TGRP-TestRandomChains]\n   [junit4]    > Caused by: java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)Throwable #5: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=22, name=Thread-9, state=RUNNABLE, group=TGRP-TestRandomChains]\n   [junit4]    > Caused by: java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4] OK      1.35s | TestRandomChains.testRandomChainsWithLargeStrings\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene70): \n{dummy=Lucene50(blocksize=128)}, docValues:{}, maxPointsInLeafNode=687, maxMBSortInHeap=5.862354267195215, sim=RandomSimilarity(queryNorm=false): {}, locale=th-TH-u-nu-thai-x-lvariant-TH, timezone=America/Cayman\n   [junit4]   2> NOTE: Mac OS X 10.13.5 x86_64/Oracle Corporation 1.8.0_151 (64-bit)/cpus=12,threads=1,free=417829312,total=514326528\n   [junit4]   2> NOTE: All tests run in this JVM: [TestRandomChains]\n   [junit4] Completed [1/1 (1!)] in 7.05s, 2 tests, 1 error <<< FAILURES!\n   [junit4] \n   [junit4] \n   [junit4] Tests with failures [seed: ECE1607EDB84B98D]:\n   [junit4]   - org.apache.lucene.analysis.core.TestRandomChains.testRandomChains\n   [junit4] \n   [junit4] \n   [junit4] JVM J0:     1.09 ..     9.70 =     8.61s\n   [junit4] Execution time total: 9.71 sec.\n   [junit4] Tests summary: 1 suite, 2 tests, 1 error\n/apache/solrJiras/beast/results/beast-tmp/262/test-caches/analyzers-common\n   [junit4] <JUnit4> says jolly good day! Master seed: C7A35C74F69288E4\n   [junit4] Executing 1 suite with 1 JVM.\n   [junit4] \n   [junit4] Started J0 PID(21454@localhost).\n   [junit4] Suite: org.apache.lucene.analysis.core.TestRandomChains\n   [junit4] OK      2.17s | TestRandomChains.testRandomChainsWithLargeStrings\n   [junit4]   2> TEST FAIL: useCharFilter=false text='ighed for, at denne '\n   [junit4]   2> Exception from random analyzer: \n   [junit4]   2> charfilters=\n   [junit4]   2>   org.apache.lucene.analysis.charfilter.MappingCharFilter(org.apache.lucene.analysis.charfilter.NormalizeCharMap@162d6d0b, java.io.StringReader@3c566906)\n   [junit4]   2>   org.apache.lucene.analysis.charfilter.HTMLStripCharFilter(org.apache.lucene.analysis.charfilter.MappingCharFilter@51733c56)\n   [junit4]   2> tokenizer=\n   [junit4]   2>   org.apache.lucene.analysis.core.UnicodeWhitespaceTokenizer()\n   [junit4]   2> filters=\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.shingle.FixedShingleFilter(OneTimeWrapper@23da0490 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false, 2, <ALPHANUM>, <SOUTHEAST_ASIAN>)\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.miscellaneous.PatternKeywordMarkerFilter(OneTimeWrapper@63f905e3 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false, a)\n   [junit4]   2>   org.apache.lucene.analysis.core.TypeTokenFilter(ValidatingTokenFilter@667b7e06 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,termFrequency=1,keyword=false, [<EMOJI>, <NUM>], true)\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestRandomChains -Dtests.method=testRandomChains -Dtests.seed=C7A35C74F69288E4 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=it -Dtests.timezone=Europe/Kirov -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 0.72s | TestRandomChains.testRandomChains <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: finalOffset expected:<20> but was:<19>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([C7A35C74F69288E4:FA427515B1809524]:0)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    > \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:561)\n   [junit4]    > \tat org.apache.lucene.analysis.core.TestRandomChains.testRandomChains(TestRandomChains.java:866)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene70), sim=RandomSimilarity(queryNorm=true): {}, locale=it, timezone=Europe/Kirov\n   [junit4]   2> NOTE: Mac OS X 10.13.5 x86_64/Oracle Corporation 1.8.0_151 (64-bit)/cpus=12,threads=1,free=466884864,total=514850816\n   [junit4]   2> NOTE: All tests run in this JVM: [TestRandomChains]\n   [junit4] Completed [1/1 (1!)] in 8.02s, 2 tests, 1 failure <<< FAILURES!\n   [junit4] \n   [junit4] \n   [junit4] Tests with failures [seed: C7A35C74F69288E4]:\n   [junit4]   - org.apache.lucene.analysis.core.TestRandomChains.testRandomChains\n   [junit4] \n   [junit4] \n   [junit4] JVM J0:     1.37 ..    11.21 =     9.84s\n   [junit4] Execution time total: 11 seconds\n\n\n   ****************************************************-init-totals:\n\n-test:\n    [mkdir] Created dir: /Users/Erick/apache/solrJiras/beast/results/beast-tmp/386/test-caches/analyzers-common\n   [junit4] <JUnit4> says \u4f60\u597d! Master seed: ECE1607EDB84B98D\n   [junit4] Executing 1 suite with 1 JVM.\n   [junit4] \n   [junit4] Started J0 PID(24855@localhost).\n   [junit4] Suite: org.apache.lucene.analysis.core.TestRandomChains\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\uabc3\\uabf3\\uabd5\\uabcb\\uabe9\\uabc9\\uabf5\\uabce\\uabf7\\uabf9\\uabcd\\uabde\\uabcc \\u788d\\uf8f4S+'\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\uabc3\\uabf3\\uabd5\\uabcb\\uabe9\\uabc9\\uabf5\\uabce\\uabf7\\uabf9\\uabcd\\uabde\\uabcc \\u788d\\uf8f4S+'\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\uabc3\\uabf3\\uabd5\\uabcb\\uabe9\\uabc9\\uabf5\\uabce\\uabf7\\uabf9\\uabcd\\uabde\\uabcc \\u788d\\uf8f4S+'\n   [junit4]   2> TEST FAIL: useCharFilter=true text='\\uabc3\\uabf3\\uabd5\\uabcb\\uabe9\\uabc9\\uabf5\\uabce\\uabf7\\uabf9\\uabcd\\uabde\\uabcc \\u788d\\uf8f4S+'\n   [junit4]   2> \u0e21\u0e34.\u0e22. \u0e52\u0e59, \u0e52\u0e55\u0e56\u0e51 \u0e53:\u0e51\u0e55:\u0e55\u0e57 \u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07 com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[Thread-8,5,TGRP-TestRandomChains]\n   [junit4]   2> java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]   2>  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]   2>  at org.junit.Assert.fail(Assert.java:93)\n   [junit4]   2>  at org.junit.Assert.failNotEquals(Assert.java:647)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:128)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:472)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4]   2> \n   [junit4]   2> \u0e21\u0e34.\u0e22. \u0e52\u0e59, \u0e52\u0e55\u0e56\u0e51 \u0e53:\u0e51\u0e55:\u0e55\u0e57 \u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07 com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[Thread-7,5,TGRP-TestRandomChains]\n   [junit4]   2> java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]   2>  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]   2>  at org.junit.Assert.fail(Assert.java:93)\n   [junit4]   2>  at org.junit.Assert.failNotEquals(Assert.java:647)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:128)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:472)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4]   2> \n   [junit4]   2> \u0e21\u0e34.\u0e22. \u0e52\u0e59, \u0e52\u0e55\u0e56\u0e51 \u0e53:\u0e51\u0e55:\u0e55\u0e57 \u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07 com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[Thread-9,5,TGRP-TestRandomChains]\n   [junit4]   2> java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]   2>  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]   2>  at org.junit.Assert.fail(Assert.java:93)\n   [junit4]   2>  at org.junit.Assert.failNotEquals(Assert.java:647)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:128)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:472)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4]   2> \n   [junit4]   2> \u0e21\u0e34.\u0e22. \u0e52\u0e59, \u0e52\u0e55\u0e56\u0e51 \u0e53:\u0e51\u0e55:\u0e55\u0e57 \u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07 com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[Thread-6,5,TGRP-TestRandomChains]\n   [junit4]   2> java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]   2>  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]   2>  at org.junit.Assert.fail(Assert.java:93)\n   [junit4]   2>  at org.junit.Assert.failNotEquals(Assert.java:647)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:128)\n   [junit4]   2>  at org.junit.Assert.assertEquals(Assert.java:472)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]   2>  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4]   2> \n   [junit4]   2> Exception from random analyzer: \n   [junit4]   2> charfilters=\n   [junit4]   2>   org.apache.lucene.analysis.fa.PersianCharFilter(java.io.StringReader@17bb8e46)\n   [junit4]   2> tokenizer=\n   [junit4]   2>   org.apache.lucene.analysis.core.LetterTokenizer(org.apache.lucene.util.AttributeFactory$DefaultAttributeFactory@347f1856)\n   [junit4]   2> filters=\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.synonym.SynonymGraphFilter(OneTimeWrapper@324f15db term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word, org.apache.lucene.analysis.synonym.SynonymMap@794d646a, true)\n   [junit4]   2>   Conditional:org.apache.lucene.analysis.no.NorwegianLightStemFilter(OneTimeWrapper@73881d57 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,keyword=false)\n   [junit4]   2>   org.apache.lucene.analysis.miscellaneous.StemmerOverrideFilter(ValidatingTokenFilter@6e778a37 term=,bytes=[],startOffset=0,endOffset=0,positionIncrement=1,positionLength=1,type=word,keyword=false, org.apache.lucene.analysis.miscellaneous.StemmerOverrideFilter$StemmerOverrideMap@4ec70982)\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestRandomChains -Dtests.method=testRandomChains -Dtests.seed=ECE1607EDB84B98D -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=th-TH-u-nu-thai-x-lvariant-TH -Dtests.timezone=America/Cayman -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   1.43s | TestRandomChains.testRandomChains <<<\n   [junit4]    > Throwable #1: java.lang.RuntimeException: some thread(s) failed\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:583)\n   [junit4]    >  at org.apache.lucene.analysis.core.TestRandomChains.testRandomChains(TestRandomChains.java:866)\n   [junit4]    >  at java.lang.Thread.run(Thread.java:748)Throwable #2: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=21, name=Thread-8, state=RUNNABLE, group=TGRP-TestRandomChains]\n   [junit4]    > Caused by: java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)Throwable #3: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=19, name=Thread-6, state=RUNNABLE, group=TGRP-TestRandomChains]\n   [junit4]    > Caused by: java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)Throwable #4: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=20, name=Thread-7, state=RUNNABLE, group=TGRP-TestRandomChains]\n   [junit4]    > Caused by: java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)Throwable #5: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=22, name=Thread-9, state=RUNNABLE, group=TGRP-TestRandomChains]\n   [junit4]    > Caused by: java.lang.AssertionError: finalOffset expected:<18> but was:<17>\n   [junit4]    >  at __randomizedtesting.SeedInfo.seed([ECE1607EDB84B98D]:0)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:305)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:320)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.assertTokenStreamContents(BaseTokenStreamTestCase.java:324)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkAnalysisConsistency(BaseTokenStreamTestCase.java:860)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:659)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:67)\n   [junit4]    >  at org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:531)\n   [junit4] OK      1.35s | TestRandomChains.testRandomChainsWithLargeStrings\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene70): {dummy=Lucene50(blocksize=128)}\n, docValues:{}, maxPointsInLeafNode=687, maxMBSortInHeap=5.862354267195215, sim=RandomSimilarity(queryNorm=false): {}, locale=th-TH-u-nu-thai-x-lvariant-TH, timezone=America/Cayman\n   [junit4]   2> NOTE: Mac OS X 10.13.5 x86_64/Oracle Corporation 1.8.0_151 (64-bit)/cpus=12,threads=1,free=417829312,total=514326528\n   [junit4]   2> NOTE: All tests run in this JVM: [TestRandomChains]\n   [junit4] Completed [1/1 (1!)] in 7.05s, 2 tests, 1 error <<< FAILURES!\n   [junit4] \n   [junit4] \n   [junit4] Tests with failures [seed: ECE1607EDB84B98D]:\n   [junit4]   - org.apache.lucene.analysis.core.TestRandomChains.testRandomChains\n   [junit4] \n   [junit4] \n   [junit4] JVM J0:     1.09 ..     9.70 =     8.61s\n   [junit4] Execution time total: 9.71 sec.\n   [junit4] Tests summary: 1 suite, 2 tests, 1 error ",
            "date": "2018-06-30T17:27:48+0000"
        },
        {
            "id": "comment-16529793",
            "author": "Alan Woodward",
            "content": "These failures are a combination of:\na) a bug in ConditionalTokenFilter I mentioned in LUCENE-8376\nb) a bug in FixedShingleFilter.end() where it doesn't properly set its end position increment\nc) the various LimitToken*Filters, which shouldn't be wrapped in conditions because they don't deal correctly with end offsets ",
            "date": "2018-07-02T12:16:26+0000"
        },
        {
            "id": "comment-16530011",
            "author": "ASF subversion and git services",
            "content": "Commit 3a7ca355fce227bc3194ae32abf263b9152aec63 in lucene-solr's branch refs/heads/branch_7x from Alan Woodward\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3a7ca35 ]\n\nLUCENE-8376, LUCENE-8371: ConditionalTokenFilter fixes ",
            "date": "2018-07-02T14:38:39+0000"
        },
        {
            "id": "comment-16530013",
            "author": "ASF subversion and git services",
            "content": "Commit f835d2499778972ad901a6be11ecf6ef308c0bb0 in lucene-solr's branch refs/heads/master from Alan Woodward\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f835d24 ]\n\nLUCENE-8376, LUCENE-8371: ConditionalTokenFilter fixes ",
            "date": "2018-07-02T14:38:42+0000"
        }
    ]
}