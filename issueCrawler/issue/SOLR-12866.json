{
    "id": "SOLR-12866",
    "title": "Reproducing TestLocalFSCloudBackupRestore and TestHdfsCloudBackupRestore failures",
    "details": {
        "type": "Task",
        "status": "Open",
        "labels": "",
        "fix_versions": [],
        "components": [],
        "priority": "Major",
        "resolution": "Unresolved",
        "affect_versions": "None"
    },
    "description": "From https://builds.apache.org/job/Lucene-Solr-BadApples-Tests-7.x/185/, both tests failed 10/10 iterations for me on branch_7x with the seed:\n\n\nChecking out Revision 37fdcb02d87ec44293ec4942c75a3cb709c45418 (refs/remotes/origin/branch_7x)\n[...]\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestLocalFSCloudBackupRestore -Dtests.method=test -Dtests.seed=3CD4284489C09DB4 -Dtests.multiplier=2 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=mk-MK -Dtests.timezone=Pacific/Kiritimati -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 10.8s J2 | TestLocalFSCloudBackupRestore.test <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: Node 127.0.0.1:43864_solr has 3 replicas. Expected num replicas : 2. state: \n   [junit4]    > DocCollection(backuprestore_restored//collections/backuprestore_restored/state.json/9)={\n   [junit4]    >   \"pullReplicas\":0,\n   [junit4]    >   \"replicationFactor\":1,\n   [junit4]    >   \"shards\":{\n   [junit4]    >     \"shard2\":{\n   [junit4]    >       \"range\":\"0-7fffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\"core_node62\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard2_replica_n61\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:43864/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:43864_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"}},\n   [junit4]    >       \"stateTimestamp\":\"1539459703266853250\"},\n   [junit4]    >     \"shard1_1\":{\n   [junit4]    >       \"range\":\"c0000000-ffffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\"core_node64\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_1_replica_n63\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:43864/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:43864_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"}},\n   [junit4]    >       \"stateTimestamp\":\"1539459703266887720\"},\n   [junit4]    >     \"shard1_0\":{\n   [junit4]    >       \"range\":\"80000000-bfffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\"core_node66\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_0_replica_n65\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:43864/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:43864_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"}},\n   [junit4]    >       \"stateTimestamp\":\"1539459703266910800\"}},\n   [junit4]    >   \"router\":{\n   [junit4]    >     \"name\":\"compositeId\",\n   [junit4]    >     \"field\":\"shard_s\"},\n   [junit4]    >   \"maxShardsPerNode\":\"-1\",\n   [junit4]    >   \"autoAddReplicas\":\"false\",\n   [junit4]    >   \"nrtReplicas\":1,\n   [junit4]    >   \"tlogReplicas\":0}\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([3CD4284489C09DB4:B480179E273CF04C]:0)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.lambda$testBackupAndRestore$1(AbstractCloudBackupRestoreTestCase.java:339)\n   [junit4]    > \tat java.util.HashMap.forEach(HashMap.java:1289)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.testBackupAndRestore(AbstractCloudBackupRestoreTestCase.java:338)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.test(AbstractCloudBackupRestoreTestCase.java:144)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.TestLocalFSCloudBackupRestore.test(TestLocalFSCloudBackupRestore.java:64)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestHdfsCloudBackupRestore -Dtests.method=test -Dtests.seed=3CD4284489C09DB4 -Dtests.multiplier=2 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=bg -Dtests.timezone=Africa/Khartoum -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 13.3s J0 | TestHdfsCloudBackupRestore.test <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: Node 127.0.0.1:38450_solr has 3 replicas. Expected num replicas : 2. state: \n   [junit4]    > DocCollection(hdfsbackuprestore_restored//collections/hdfsbackuprestore_restored/state.json/10)={\n   [junit4]    >   \"pullReplicas\":0,\n   [junit4]    >   \"replicationFactor\":1,\n   [junit4]    >   \"shards\":{\n   [junit4]    >     \"shard2\":{\n   [junit4]    >       \"range\":\"0-7fffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\"core_node62\":{\n   [junit4]    >           \"core\":\"hdfsbackuprestore_restored_shard2_replica_n61\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:38450/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:38450_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"}},\n   [junit4]    >       \"stateTimestamp\":\"1539459705812441110\"},\n   [junit4]    >     \"shard1_1\":{\n   [junit4]    >       \"range\":\"c0000000-ffffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\"core_node64\":{\n   [junit4]    >           \"core\":\"hdfsbackuprestore_restored_shard1_1_replica_n63\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:38450/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:38450_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"}},\n   [junit4]    >       \"stateTimestamp\":\"1539459705812477955\"},\n   [junit4]    >     \"shard1_0\":{\n   [junit4]    >       \"range\":\"80000000-bfffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\"core_node66\":{\n   [junit4]    >           \"core\":\"hdfsbackuprestore_restored_shard1_0_replica_n65\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:38450/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:38450_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"}},\n   [junit4]    >       \"stateTimestamp\":\"1539459705812506250\"}},\n   [junit4]    >   \"router\":{\n   [junit4]    >     \"name\":\"compositeId\",\n   [junit4]    >     \"field\":\"shard_s\"},\n   [junit4]    >   \"maxShardsPerNode\":\"-1\",\n   [junit4]    >   \"autoAddReplicas\":\"false\",\n   [junit4]    >   \"nrtReplicas\":1,\n   [junit4]    >   \"tlogReplicas\":0}\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([3CD4284489C09DB4:B480179E273CF04C]:0)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.lambda$testBackupAndRestore$1(AbstractCloudBackupRestoreTestCase.java:339)\n   [junit4]    > \tat java.util.HashMap.forEach(HashMap.java:1289)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.testBackupAndRestore(AbstractCloudBackupRestoreTestCase.java:338)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.test(AbstractCloudBackupRestoreTestCase.java:144)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.TestHdfsCloudBackupRestore.test(TestHdfsCloudBackupRestore.java:213)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)",
    "attachments": {
        "SOLR-12866.patch": "https://issues.apache.org/jira/secure/attachment/12946304/SOLR-12866.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "id": "comment-16649143",
            "content": "CC Varun Thacker ",
            "author": "Steve Rowe",
            "date": "2018-10-13T22:13:01+0000"
        },
        {
            "id": "comment-16659229",
            "content": "Another reproducing seed for TestLocalFSCloudBackupRestore, from https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-MacOSX/890/ (reproduced for me on Linux on branch_7x with java8):\n\n\nChecking out Revision 36ce83bc9add02a900e38b396b42c3c729846598 (refs/remotes/origin/branch_7x)\n[...]\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestLocalFSCloudBackupRestore -Dtests.method=test -Dtests.seed=1F865FE108D99C42 -Dtests.slow=true -Dtests.locale=nnh -Dtests.timezone=Canada/Saskatchewan -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 26.7s J1 | TestLocalFSCloudBackupRestore.test <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: Node 127.0.0.1:62709_solr has 7 replicas. Expected num replicas : 6. state: \n   [junit4]    > DocCollection(backuprestore_restored//collections/backuprestore_restored/state.json/38)={\n   [junit4]    >   \"pullReplicas\":1,\n   [junit4]    >   \"replicationFactor\":2,\n   [junit4]    >   \"shards\":{\n   [junit4]    >     \"shard2\":{\n   [junit4]    >       \"range\":\"0-7fffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\n   [junit4]    >         \"core_node122\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard2_replica_n121\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62709/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62709_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"},\n   [junit4]    >         \"core_node128\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard2_replica_n127\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62709/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62709_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\"},\n   [junit4]    >         \"core_node130\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard2_replica_t129\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62709/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62709_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"TLOG\",\n   [junit4]    >           \"force_set_state\":\"false\"},\n   [junit4]    >         \"core_node132\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard2_replica_p131\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62710/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62710_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"PULL\",\n   [junit4]    >           \"force_set_state\":\"false\"}},\n   [junit4]    >       \"stateTimestamp\":\"1540067298009810113\"},\n   [junit4]    >     \"shard1_1\":{\n   [junit4]    >       \"range\":\"c0000000-ffffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\n   [junit4]    >         \"core_node124\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_1_replica_n123\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62710/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62710_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"},\n   [junit4]    >         \"core_node134\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_1_replica_n133\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62709/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62709_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\"},\n   [junit4]    >         \"core_node136\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_1_replica_t135\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62709/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62709_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"TLOG\",\n   [junit4]    >           \"force_set_state\":\"false\"},\n   [junit4]    >         \"core_node138\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_1_replica_p137\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62710/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62710_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"PULL\",\n   [junit4]    >           \"force_set_state\":\"false\"}},\n   [junit4]    >       \"stateTimestamp\":\"1540067298009839609\"},\n   [junit4]    >     \"shard1_0\":{\n   [junit4]    >       \"range\":\"80000000-bfffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\n   [junit4]    >         \"core_node126\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_0_replica_n125\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62710/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62710_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\",\n   [junit4]    >           \"leader\":\"true\"},\n   [junit4]    >         \"core_node140\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_0_replica_n139\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62709/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62709_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\",\n   [junit4]    >           \"force_set_state\":\"false\"},\n   [junit4]    >         \"core_node142\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_0_replica_t141\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62709/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62709_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"TLOG\",\n   [junit4]    >           \"force_set_state\":\"false\"},\n   [junit4]    >         \"core_node144\":{\n   [junit4]    >           \"core\":\"backuprestore_restored_shard1_0_replica_p143\",\n   [junit4]    >           \"base_url\":\"http://127.0.0.1:62710/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:62710_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"PULL\",\n   [junit4]    >           \"force_set_state\":\"false\"}},\n   [junit4]    >       \"stateTimestamp\":\"1540067298009877909\"}},\n   [junit4]    >   \"router\":{\"name\":\"compositeId\"},\n   [junit4]    >   \"maxShardsPerNode\":\"6\",\n   [junit4]    >   \"autoAddReplicas\":\"false\",\n   [junit4]    >   \"nrtReplicas\":2,\n   [junit4]    >   \"tlogReplicas\":1}\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([1F865FE108D99C42:97D2603BA625F1BA]:0)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.lambda$testBackupAndRestore$1(AbstractCloudBackupRestoreTestCase.java:339)\n   [junit4]    > \tat java.base/java.util.HashMap.forEach(HashMap.java:1340)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.testBackupAndRestore(AbstractCloudBackupRestoreTestCase.java:338)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.test(AbstractCloudBackupRestoreTestCase.java:144)\n   [junit4]    > \tat org.apache.solr.cloud.api.collections.TestLocalFSCloudBackupRestore.test(TestLocalFSCloudBackupRestore.java:64)\n   [junit4]    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n   [junit4]    > \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n   [junit4]    > \tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\n   [junit4]    > \tat java.base/java.lang.Thread.run(Thread.java:844)\n[...]\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene70): {shard_s=Lucene50(blocksize=128), id=Lucene50(blocksize=128)}, docValues:{}, maxPointsInLeafNode=688, maxMBSortInHeap=5.480202259929796, sim=RandomSimilarity(queryNorm=false): {}, locale=nnh, timezone=Canada/Saskatchewan\n   [junit4]   2> NOTE: Mac OS X 10.11.6 x86_64/Oracle Corporation 9 (64-bit)/cpus=3,threads=1,free=159091232,total=444596224\n\n ",
            "author": "Steve Rowe",
            "date": "2018-10-22T17:51:52+0000"
        },
        {
            "id": "comment-16664648",
            "content": "I'll work on this in the next couple of days! Sorry it took longer for me to get to this. ",
            "author": "Varun Thacker",
            "date": "2018-10-26T04:43:52+0000"
        },
        {
            "id": "comment-16666238",
            "content": "This is a snippet of the RestoreCmd command that does the replica placement\n\nAssign.AssignRequest assignRequest = new Assign.AssignRequestBuilder()\n    .forCollection(restoreCollectionName)\n    .forShard(sliceNames)\n    .assignNrtReplicas(numNrtReplicas)\n    .assignTlogReplicas(numTlogReplicas)\n    .assignPullReplicas(numPullReplicas)\n    .onNodes(nodeList)\n    .build();\nAssign.AssignStrategyFactory assignStrategyFactory = new Assign.AssignStrategyFactory(ocmh.cloudManager);\nAssign.AssignStrategy assignStrategy = assignStrategyFactory.create(clusterState, restoreCollection);\nList<ReplicaPosition> replicaPositions = assignStrategy.assign(ocmh.cloudManager, assignRequest);\nsessionWrapper = PolicyHelper.getLastSessionWrapper(true);\n\nNow we have two nodes and 3 shards to create and this ends up assigning all of them to one node and hence the test fails.\n\nI'm trying to isolate this in a mock and test more . For reference when I stepped through this code in debug mode here is what i saw\n\nresult = {Assign$AssignRequest@6811} \ncollectionName = \"backuprestore_restored\"\nshardNames = {ArrayList@6741} size = 3\nnodes = {ArrayList@6719} size = 2\nnumNrtReplicas = 1\nnumTlogReplicas = 0\nnumPullReplicas = 0\n\nreplicaPositions = {ArrayList@6785} size = 3\n0 = {ReplicaPosition@6793} \"shard2:1[NRT] @127.0.0.1:61176_solr\"\n1 = {ReplicaPosition@6794} \"shard1_1:1[NRT] @127.0.0.1:61176_solr\"\n2 = {ReplicaPosition@6795} \"shard1_0:1[NRT] @127.0.0.1:61176_solr\"\n ",
            "author": "Varun Thacker",
            "date": "2018-10-27T23:16:41+0000"
        },
        {
            "id": "comment-16669415",
            "content": "Here is a patch which tries to write a mock testing testing replica asssingment under the following conditions -\n\n\tWe have created a collection with createNodeSet=EMPTY , so clusterstate has already been created but no replicas are present ( testEmptyCollection.json )\n\tCreate one replica for all 3 shards of the collection on a 2 node cluster\n\n\n\nI want to test if the assignment engine places all of them on only one node. This is what I am seeing in RestoreCmd as posted on my earlier comment so I want to see where are we going wrong.\n\n\u00a0\n\nUnfortunately as of now, I'm stuck in getting the mock to work. When i run the test I get this error\n\n16:06:45.053 [TEST-TestPolicy.testPolicyForEmptyCollection-seed#[33EAB712F76AB404]] ERROR org.apache.solr.client.solrj.cloud.autoscaling.Policy - Exception! prefs = [{\n\u00a0 \"minimize\":\"cores\",\n\u00a0 \"precision\":1}, {\"maximize\":\"freedisk\"}], recent r1 = node2, r2 = node1, matrix = 2\n\n\n...\nCaused by: org.apache.solr.common.SolrException\n\u00a0\u00a0 \u00a0at org.apache.solr.client.solrj.cloud.autoscaling.Policy.setApproxValuesAndSortNodes(Policy.java:314)\n\u00a0\u00a0 \u00a0at org.apache.solr.client.solrj.cloud.autoscaling.Policy$Session.applyRules(Policy.java:606)\n...\n\n\u00a0The test doesn't like the fact that I have \"replicaInfo\" as empty.\u00a0 So the preferences sort algorithm runs into a NullPointerException and throws the RuntimeException. ",
            "author": "Varun Thacker",
            "date": "2018-10-30T23:05:00+0000"
        }
    ]
}