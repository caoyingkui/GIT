{
    "id": "SOLR-9302",
    "title": "Better error message when running SQL queries in standalone mode",
    "details": {
        "components": [],
        "type": "Improvement",
        "labels": "",
        "fix_versions": [],
        "affect_versions": "None",
        "status": "Closed",
        "resolution": "Duplicate",
        "priority": "Major"
    },
    "description": "I tried running sql queries on the techproducts example by mistake. When I ran a query I got an exception like this\n\n\n{\"result-set\":{\"docs\":[\n{\"EXCEPTION\":\"java.net.UnknownHostException: null: unknown error\",\"EOF\":true,\"RESPONSE_TIME\":5}]}}\n\n\n\nHere is the stack trace from the solr logs\n\n\nERROR - 2016-07-13 13:07:01.496; [   x:techproducts] org.apache.solr.common.SolrException; org.apache.solr.common.SolrException: java.net.UnknownHostException: null: unknown error\n\tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:169)\n\tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:115)\n\tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:105)\n\tat org.apache.solr.common.cloud.ZkStateReader.<init>(ZkStateReader.java:227)\n\tat org.apache.solr.client.solrj.impl.CloudSolrClient.connect(CloudSolrClient.java:502)\n\tat org.apache.solr.client.solrj.io.SolrClientCache.getCloudSolrClient(SolrClientCache.java:50)\n\tat org.apache.solr.client.solrj.io.stream.CloudSolrStream.open(CloudSolrStream.java:298)\n\tat org.apache.solr.client.solrj.io.stream.SelectStream.open(SelectStream.java:184)\n\tat org.apache.solr.client.solrj.io.stream.ExceptionStream.open(ExceptionStream.java:51)\n\tat org.apache.solr.handler.StreamHandler$TimerStream.open(StreamHandler.java:423)\n\tat org.apache.solr.response.TextResponseWriter.writeTupleStream(TextResponseWriter.java:304)\n\tat org.apache.solr.response.TextResponseWriter.writeVal(TextResponseWriter.java:168)\n\tat org.apache.solr.response.JSONWriter.writeNamedListAsMapWithDups(JSONResponseWriter.java:183)\n\tat org.apache.solr.response.JSONWriter.writeNamedList(JSONResponseWriter.java:299)\n\tat org.apache.solr.response.JSONWriter.writeResponse(JSONResponseWriter.java:95)\n\tat org.apache.solr.response.JSONResponseWriter.write(JSONResponseWriter.java:60)\n\tat org.apache.solr.response.QueryResponseWriterUtil.writeQueryResponse(QueryResponseWriterUtil.java:65)\n\tat org.apache.solr.servlet.HttpSolrCall.writeResponse(HttpSolrCall.java:731)\n\tat org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:473)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:257)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:208)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1668)\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:581)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1160)\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1092)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n\tat org.eclipse.jetty.server.Server.handle(Server.java:518)\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:308)\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:244)\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n\tat org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:246)\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:156)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n\tat java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.UnknownHostException: null: unknown error\n\tat java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\n\tat java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)\n\tat java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323)\n\tat java.net.InetAddress.getAllByName0(InetAddress.java:1276)\n\tat java.net.InetAddress.getAllByName(InetAddress.java:1192)\n\tat java.net.InetAddress.getAllByName(InetAddress.java:1126)\n\tat org.apache.zookeeper.client.StaticHostProvider.<init>(StaticHostProvider.java:61)\n\tat org.apache.zookeeper.ZooKeeper.<init>(ZooKeeper.java:445)\n\tat org.apache.zookeeper.ZooKeeper.<init>(ZooKeeper.java:380)\n\tat org.apache.solr.common.cloud.SolrZooKeeper.<init>(SolrZooKeeper.java:43)\n\tat org.apache.solr.common.cloud.ZkClientConnectionStrategy.createSolrZooKeeper(ZkClientConnectionStrategy.java:103)\n\tat org.apache.solr.common.cloud.DefaultConnectionStrategy.connect(DefaultConnectionStrategy.java:37)\n\tat org.apache.solr.common.cloud.SolrZkClient.<init>(SolrZkClient.java:144)\n\t... 44 more\n\n\n\n\nWe should respond back with a more useful message to the user in case sql queries are been run in standalone mode",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2016-07-13T13:36:23+0000",
            "author": "Yonik Seeley",
            "content": "Ultimately it feels like one should be able to run an SQL query in standalone mode.  Shouldn't be too hard? ",
            "id": "comment-15374996"
        },
        {
            "date": "2016-10-07T13:57:25+0000",
            "author": "Kevin Risden",
            "content": "It shouldn't be too hard. Lets open a JIRA for specifically that. I'm going to close this JIRA as a duplicate of SOLR-8969 ",
            "id": "comment-15555143"
        }
    ]
}