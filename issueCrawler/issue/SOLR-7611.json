{
    "id": "SOLR-7611",
    "title": "TestSearcherReuse failure",
    "details": {
        "components": [],
        "type": "Bug",
        "labels": "",
        "fix_versions": [],
        "affect_versions": "5.2",
        "status": "Resolved",
        "resolution": "Fixed",
        "priority": "Major"
    },
    "description": "[junit4] FAILURE 0.94s | TestSearcherReuse.test <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected same:<Searcher@66681f2[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C3) Uninverting(_2(5.2.0):c2)))}> was not:<Searcher@5d94043f[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C3) Uninverting(_2(5.2.0):c2)))}>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([F1A11DF972B907D6:79F52223DC456A2E]:0)\n   [junit4]    > \tat org.apache.solr.search.TestSearcherReuse.assertSearcherHasNotChanged(TestSearcherReuse.java:247)\n   [junit4]    > \tat org.apache.solr.search.TestSearcherReuse.test(TestSearcherReuse.java:104)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:745)\n\n\n\nReproduces for me on the 5.2 release branch with the following - note that both -Dtests.multiplier=2 and -Dtests.nightly=true are required to reproduce:\n\n\nant test  -Dtestcase=TestSearcherReuse -Dtests.seed=F1A11DF972B907D6 -Dtests.multiplier=2 -Dtests.nightly=true\n\n\n\nFull log:\n\n\n   [junit4] <JUnit4> says hallo! Master seed: F1A11DF972B907D6\n   [junit4] Executing 1 suite with 1 JVM.\n   [junit4] \n   [junit4] Started J0 PID(776@smb.local).\n   [junit4] Suite: org.apache.solr.search.TestSearcherReuse\n   [junit4]   2> log4j:WARN No such property [conversionPattern] in org.apache.solr.util.SolrLogLayout.\n   [junit4]   2> Creating dataDir: /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001\n   [junit4]   2> 889 T11 oas.SolrTestCaseJ4.buildSSLConfig Randomized ssl (false) and clientAuth (false)\n   [junit4]   2> 959 T11 oas.SolrTestCaseJ4.initCore ####initCore\n   [junit4]   2> 1093 T11 oasc.SolrResourceLoader.<init> new SolrResourceLoader for directory: '/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/'\n   [junit4]   2> 1390 T11 oasc.SolrConfig.refreshRequestParams current version of requestparams : -1\n   [junit4]   2> 1449 T11 oasc.SolrConfig.<init> Using Lucene MatchVersion: 5.2.0\n   [junit4]   2> 1551 T11 oasc.SolrConfig.<init> Loaded SolrConfig: solrconfig-managed-schema.xml\n   [junit4]   2> 1563 T11 oass.ManagedIndexSchemaFactory.readSchemaLocally The schema is configured as managed, but managed schema resource managed-schema not found - loading non-managed schema schema-id-and-version-fields-only.xml instead\n   [junit4]   2> 1580 T11 oass.IndexSchema.readSchema Reading Solr Schema from /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/conf/schema-id-and-version-fields-only.xml\n   [junit4]   2> 1594 T11 oass.IndexSchema.readSchema [null] Schema name=id-and-version-fields-only\n   [junit4]   2> 1676 T11 oass.IndexSchema.readSchema unique key field: id\n   [junit4]   2> 1706 T11 oass.ManagedIndexSchema.persistManagedSchema Upgraded to managed schema at /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/conf/managed-schema\n   [junit4]   2> 1709 T11 oass.ManagedIndexSchemaFactory.upgradeToManagedSchema After upgrading to managed schema, renamed the non-managed schema /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/conf/schema-id-and-version-fields-only.xml to /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/conf/schema-id-and-version-fields-only.xml.bak\n   [junit4]   2> 1714 T11 oasc.SolrResourceLoader.locateSolrHome JNDI not configured for solr (NoInitialContextEx)\n   [junit4]   2> 1715 T11 oasc.SolrResourceLoader.locateSolrHome using system property solr.solr.home: /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001\n   [junit4]   2> 1715 T11 oasc.SolrResourceLoader.<init> new SolrResourceLoader for directory: '/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/'\n   [junit4]   2> 1765 T11 oasc.CoreContainer.<init> New CoreContainer 731222945\n   [junit4]   2> 1767 T11 oasc.CoreContainer.load Loading cores into CoreContainer [instanceDir=/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/]\n   [junit4]   2> 1768 T11 oasc.CoreContainer.load loading shared library: /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/lib\n   [junit4]   2> 1769 T11 oasc.SolrResourceLoader.addToClassLoader WARN Can't find (or read) directory to add to classloader: lib (resolved as: /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/lib).\n   [junit4]   2> 1821 T11 oashc.HttpShardHandlerFactory.init created with socketTimeout : 600000,connTimeout : 60000,maxConnectionsPerHost : 20,maxConnections : 10000,corePoolSize : 0,maximumPoolSize : 2147483647,maxThreadIdleTime : 5,sizeOfQueue : -1,fairnessPolicy : false,useRetries : false,\n   [junit4]   2> 2086 T11 oasu.UpdateShardHandler.<init> Creating UpdateShardHandler HTTP client with params: socketTimeout=30000&connTimeout=30000&retry=true\n   [junit4]   2> 2093 T11 oasl.LogWatcher.createWatcher SLF4J impl is org.slf4j.impl.Log4jLoggerFactory\n   [junit4]   2> 2096 T11 oasl.LogWatcher.newRegisteredLogWatcher Registering Log Listener [Log4j (org.slf4j.impl.Log4jLoggerFactory)]\n   [junit4]   2> 2099 T11 oasc.CoreContainer.load Node Name: testNode\n   [junit4]   2> 2100 T11 oasc.CoreContainer.initializeAuthenticationPlugin No authentication plugin used.\n   [junit4]   2> 2265 T11 oasc.CoreDescriptor.<init> CORE DESCRIPTOR: {dataDir=/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001, config=solrconfig-managed-schema.xml, shard=shard1, collection=collection1, name=collection1, instanceDir=collection1, loadOnStartup=true, schema=managed-schema, absoluteInstDir=/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/, transient=false}\n   [junit4]   2> 2269 T12 oasc.SolrResourceLoader.<init> new SolrResourceLoader for directory: '/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/'\n   [junit4]   2> 2309 T12 oasc.SolrConfig.refreshRequestParams current version of requestparams : -1\n   [junit4]   2> 2335 T12 oasc.SolrConfig.<init> Using Lucene MatchVersion: 5.2.0\n   [junit4]   2> 2372 T12 oasc.SolrConfig.<init> Loaded SolrConfig: solrconfig-managed-schema.xml\n   [junit4]   2> 2373 T12 oass.IndexSchema.readSchema Reading Solr Schema from /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/conf/managed-schema\n   [junit4]   2> 2379 T12 oass.IndexSchema.readSchema [collection1] Schema name=id-and-version-fields-only\n   [junit4]   2> 2396 T12 oass.IndexSchema.readSchema unique key field: id\n   [junit4]   2> 2398 T12 oasc.CoreContainer.create Creating SolrCore 'collection1' using configuration from instancedir /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/\n   [junit4]   2> 2401 T12 x:collection1 oasc.SolrCore.initDirectoryFactory solr.NRTCachingDirectoryFactory\n   [junit4]   2> 2419 T12 x:collection1 oasc.SolrCore.<init> [[collection1] ] Opening new SolrCore at [/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/], dataDir=[null]\n   [junit4]   2> 2420 T12 x:collection1 oasc.SolrCore.initInfoRegistry JMX monitoring not detected for core: collection1\n   [junit4]   2> 2457 T12 x:collection1 oasc.CachingDirectoryFactory.get return new directory for /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001\n   [junit4]   2> 2459 T12 x:collection1 oasc.SolrCore.getNewIndexDir New index directory detected: old=null new=/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index/\n   [junit4]   2> 2460 T12 x:collection1 oasc.SolrCore.initIndex WARN [collection1] Solr index directory '/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index' doesn't exist. Creating new index...\n   [junit4]   2> 2470 T12 x:collection1 oasc.CachingDirectoryFactory.get return new directory for /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index\n   [junit4]   2> 2472 T12 x:collection1 oasu.RandomMergePolicy.<init> RandomMergePolicy wrapping class org.apache.lucene.index.TieredMergePolicy: [TieredMergePolicy: maxMergeAtOnce=16, maxMergeAtOnceExplicit=34, maxMergedSegmentMB=49.7861328125, floorSegmentMB=1.3154296875, forceMergeDeletesPctAllowed=27.39707383380555, segmentsPerTier=28.0, maxCFSSegmentSizeMB=8.796093022207999E12, noCFSRatio=0.0\n   [junit4]   2> 2560 T12 x:collection1 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=1\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_1,generation=1}\n   [junit4]   2> 2562 T12 x:collection1 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 1\n   [junit4]   2> 2874 T12 x:collection1 oasc.SolrCore.loadUpdateProcessorChains no updateRequestProcessorChain defined as default, creating implicit default\n   [junit4]   2> 2905 T12 x:collection1 oasc.RequestHandlers.applyInitParams WARN INVALID paramSet a in requestHandler {type = requestHandler,name = /dump,class = DumpRequestHandler,args = {defaults={a=A,b=B}}}\n   [junit4]   2> 2968 T12 x:collection1 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\n   [junit4]   2> 2977 T12 x:collection1 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\n   [junit4]   2> 2979 T12 x:collection1 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\n   [junit4]   2> 2981 T12 x:collection1 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\n   [junit4]   2> 3012 T12 x:collection1 oasc.RequestHandlers.initHandlersFromConfig Registered paths: /config,/schema,/dump,/admin/system,/update,/admin/plugins,/admin/luke,/admin/segments,/update/csv,/admin/ping,/admin/mbeans,/admin/properties,/admin/threads,/update/json/docs,/admin/file,/replication,/update/json,standard,/admin/logging,/get\n   [junit4]   2> 3016 T12 x:collection1 oasc.SolrCore.initStatsCache Using default statsCache cache: org.apache.solr.search.stats.LocalStatsCache\n   [junit4]   2> 3036 T12 x:collection1 oasu.UpdateHandler.<init> Using UpdateLog implementation: org.apache.solr.update.UpdateLog\n   [junit4]   2> 3037 T12 x:collection1 oasu.UpdateLog.init Initializing UpdateLog: dataDir= defaultSyncLevel=FLUSH numRecordsToKeep=100 maxNumLogsToKeep=10 numVersionBuckets=65536\n   [junit4]   2> 3051 T12 x:collection1 oasu.CommitTracker.<init> Hard AutoCommit: disabled\n   [junit4]   2> 3052 T12 x:collection1 oasu.CommitTracker.<init> Soft AutoCommit: disabled\n   [junit4]   2> 3056 T12 x:collection1 oasu.RandomMergePolicy.<init> RandomMergePolicy wrapping class org.apache.lucene.index.MockRandomMergePolicy: org.apache.lucene.index.MockRandomMergePolicy@7c491585\n   [junit4]   2> 3069 T12 x:collection1 oasc.SolrDeletionPolicy.onInit SolrDeletionPolicy.onInit: commits: num=1\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_1,generation=1}\n   [junit4]   2> 3069 T12 x:collection1 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 1\n   [junit4]   2> 3106 T12 x:collection1 oass.SolrIndexSearcher.<init> Opening Searcher@6d2fdb53[collection1] main\n   [junit4]   2> 3120 T12 x:collection1 oasr.ManagedResourceStorage$FileStorageIO.configure File-based storage initialized to use dir: /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/conf\n   [junit4]   2> 3120 T12 x:collection1 oasr.RestManager.init Initializing RestManager with initArgs: {storageDir=/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/conf}\n   [junit4]   2> 3150 T12 x:collection1 oasr.ManagedResourceStorage.load Reading _rest_managed.json using file:dir=/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/tempDir-001/collection1/conf\n   [junit4]   2> 3150 T12 x:collection1 oasr.RestManager.init Initializing 0 registered ManagedResources\n   [junit4]   2> 3183 T12 x:collection1 oash.ReplicationHandler.inform Commits will be reserved for  10000\n   [junit4]   2> 3184 T13 x:collection1 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@6d2fdb53[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader())}\n   [junit4]   2> 3185 T12 x:collection1 oasu.UpdateLog.onFirstSearcher On first searcher opened, looking up max value of version field\n   [junit4]   2> 3185 T12 x:collection1 oasu.VersionInfo.getMaxVersionFromIndex Refreshing highest value of _version_ for 65536 version buckets from index\n   [junit4]   2> 3186 T12 x:collection1 oasu.VersionInfo.getMaxVersionFromIndex No terms found for _version_, cannot seed version bucket highest value from index\n   [junit4]   2> 3186 T12 x:collection1 oasu.UpdateLog.seedBucketsWithHighestVersion Could not find max version in index or recent updates, using new clock 1502552624681975808\n   [junit4]   2> 3190 T12 x:collection1 oasu.UpdateLog.seedBucketsWithHighestVersion Took 4 ms to seed version buckets with highest version 1502552624681975808\n   [junit4]   2> 3191 T12 x:collection1 oasc.CoreContainer.registerCore registering core: collection1\n   [junit4]   2> 3199 T11 oas.SolrTestCaseJ4.initCore ####initCore end\n   [junit4]   2> 3216 T11 oas.SolrTestCaseJ4.setUp ###Starting test\n   [junit4]   2> ASYNC  NEW_CORE C0 name=collection1 org.apache.solr.core.SolrCore@b70de0f\n   [junit4]   2> 3520 T11 C0 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[1 (1502552624851845120)]} 0 301\n   [junit4]   2> 3538 T11 C0 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[2 (1502552625050025984)]} 0 1\n   [junit4]   2> 3540 T11 C0 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[3 (1502552625053171712)]} 0 0\n   [junit4]   2> 3542 T11 C0 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n   [junit4]   2> ASYNC  NEW_CORE C1 name=collection1 org.apache.solr.core.SolrCore@b70de0f\n   [junit4]   2> 3734 T11 C1 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_1,generation=1}\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_2,generation=2}\n   [junit4]   2> 3734 T11 C1 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 2\n   [junit4]   2> 3775 T11 C1 oass.SolrIndexSearcher.<init> Opening Searcher@65d06070[collection1] main\n   [junit4]   2> 3778 T11 C1 oasu.DirectUpdateHandler2.commit end_commit_flush\n   [junit4]   2> 3779 T13 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@65d06070[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C3)))}\n   [junit4]   2> 3779 T11 C1 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 237\n   [junit4]   2> 3784 T11 C1 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[4 (1502552625306927104)]} 0 2\n   [junit4]   2> 3787 T11 C1 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[5 (1502552625311121408)]} 0 1\n   [junit4]   2> 3789 T11 C1 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n   [junit4]   2> 3865 T11 C1 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_2,generation=2}\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_3,generation=3}\n   [junit4]   2> 3867 T11 C1 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 3\n   [junit4]   2> 3878 T11 C1 oass.SolrIndexSearcher.<init> Opening Searcher@ae918c9[collection1] main\n   [junit4]   2> 3880 T11 C1 oasu.DirectUpdateHandler2.commit end_commit_flush\n   [junit4]   2> 3880 T13 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@ae918c9[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C3) Uninverting(_2(5.2.0):c2)))}\n   [junit4]   2> 3883 T11 C1 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 94\n   [junit4]   2> 4033 T11 C1 oasc.SolrCore.execute [collection1] webapp=null path=null params={q=*:*&rows=20&qt=standard&version=2.2&start=0} hits=5 status=0 QTime=143 \n   [junit4]   2> 4054 T11 C1 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n   [junit4]   2> 4063 T11 C1 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_3,generation=3}\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_4,generation=4}\n   [junit4]   2> 4064 T11 C1 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 4\n   [junit4]   2> 4068 T11 C1 oass.SolrIndexSearcher.<init> Opening Searcher@7ef4de5d[collection1] main\n   [junit4]   2> 4069 T11 C1 oasu.DirectUpdateHandler2.commit end_commit_flush\n   [junit4]   2> 4069 T13 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@7ef4de5d[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C3) Uninverting(_2(5.2.0):c2)))}\n   [junit4]   2> 4070 T11 C1 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 16\n   [junit4]   2> 4074 T11 oas.SolrTestCaseJ4.tearDown ###Ending test\n   [junit4]   2> 4209 T11 C1 oass.SolrIndexSearcher.<init> Opening Searcher@528db148[collection1] realtime\n   [junit4]   2> 4210 T11 C1 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {deleteByQuery=*:* (-1502552625616257024)} 0 133\n   [junit4]   2> 4212 T11 C1 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n   [junit4]   2> 4215 T11 C1 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_4,generation=4}\n   [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@56041a58; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_5,generation=5}\n   [junit4]   2> 4216 T11 C1 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 5\n   [junit4]   2> 4217 T11 C1 oass.SolrIndexSearcher.<init> Opening Searcher@e9a15d9[collection1] main\n   [junit4]   2> 4217 T11 C1 oasu.DirectUpdateHandler2.commit end_commit_flush\n   [junit4]   2> 4217 T13 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@e9a15d9[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader())}\n   [junit4]   2> 4223 T11 C1 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 11\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=F1A11DF972B907D6 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=sr -Dtests.timezone=GMT -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 1.05s | TestSearcherReuse.test <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected same:<Searcher@ae918c9[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C3) Uninverting(_2(5.2.0):c2)))}> was not:<Searcher@7ef4de5d[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C3) Uninverting(_2(5.2.0):c2)))}>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([F1A11DF972B907D6:79F52223DC456A2E]:0)\n   [junit4]    > \tat org.apache.solr.search.TestSearcherReuse.assertSearcherHasNotChanged(TestSearcherReuse.java:247)\n   [junit4]    > \tat org.apache.solr.search.TestSearcherReuse.test(TestSearcherReuse.java:104)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:745)\n   [junit4]   2> 4252 T11 oas.SolrTestCaseJ4.deleteCore ###deleteCore\n   [junit4]   2> 4252 T11 oasc.CoreContainer.shutdown Shutting down CoreContainer instance=731222945\n   [junit4]   2> 4253 T11 oasc.SolrCore.close [collection1]  CLOSING SolrCore org.apache.solr.core.SolrCore@b70de0f\n   [junit4]   2> 4254 T11 oasu.DirectUpdateHandler2.close closing DirectUpdateHandler2{commits=4,autocommits=0,soft autocommits=0,optimizes=0,rollbacks=0,expungeDeletes=0,docsPending=0,adds=0,deletesById=0,deletesByQuery=0,errors=0,cumulative_adds=5,cumulative_deletesById=0,cumulative_deletesByQuery=1,cumulative_errors=0,transaction_logs_total_size=364,transaction_logs_total_number=3}\n   [junit4]   2> 4254 T11 oasu.SolrCoreState.decrefSolrCoreState Closing SolrCoreState\n   [junit4]   2> 4254 T11 oasu.DefaultSolrCoreState.closeIndexWriter SolrCoreState ref count has reached 0 - closing IndexWriter\n   [junit4]   2> 4255 T11 oasu.DefaultSolrCoreState.closeIndexWriter closing IndexWriter with IndexWriterCloser\n   [junit4]   2> 4256 T11 oasc.SolrCore.closeSearcher [collection1] Closing main searcher on request.\n   [junit4]   2> 4256 T11 oasc.CachingDirectoryFactory.close Closing NRTCachingDirectoryFactory - 2 directories currently being tracked\n   [junit4]   2> 4257 T11 oasc.CachingDirectoryFactory.closeCacheValue looking to close /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001 [CachedDir<<refCount=0;path=/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001;done=false>>]\n   [junit4]   2> 4257 T11 oasc.CachingDirectoryFactory.close Closing directory: /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001\n   [junit4]   2> 4258 T11 oasc.CachingDirectoryFactory.closeCacheValue looking to close /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index [CachedDir<<refCount=0;path=/Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index;done=false>>]\n   [junit4]   2> 4258 T11 oasc.CachingDirectoryFactory.close Closing directory: /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002/init-core-data-001/index\n   [junit4]   2> NOTE: leaving temporary files on disk at: /Users/sarowe/svn/lucene/dev/branches/lucene_solr_5_2/solr/build/solr-core/test/J0/temp/solr.search.TestSearcherReuse F1A11DF972B907D6-002\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene50): {}, docValues:{}, sim=RandomSimilarityProvider(queryNorm=true,coord=yes): {}, locale=sr, timezone=GMT\n   [junit4]   2> NOTE: Mac OS X 10.10.3 x86_64/Oracle Corporation 1.7.0_71 (64-bit)/cpus=8,threads=1,free=200793376,total=255852544\n   [junit4]   2> NOTE: All tests run in this JVM: [TestSearcherReuse]\n   [junit4] Completed [1/1] in 4.51s, 1 test, 1 failure <<< FAILURES!\n   [junit4] \n   [junit4] \n   [junit4] Tests with failures:\n   [junit4]   - org.apache.solr.search.TestSearcherReuse.test",
    "attachments": {
        "typescript": "https://issues.apache.org/jira/secure/attachment/12736305/typescript",
        "SOLR-7611_test.patch": "https://issues.apache.org/jira/secure/attachment/12736299/SOLR-7611_test.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "date": "2015-05-30T01:08:40+0000",
            "author": "Steve Rowe",
            "content": "Another seed that reproduces on the 5.2 release branch:\n\n\nant test  -Dtestcase=TestSearcherReuse -Dtests.seed=64C8ED4E4C36262F -Dtests.multiplier=2 -Dtests.nightly=true\n\n\n\nlog:\n\n\n  [junit4] Suite: org.apache.solr.search.TestSearcherReuse\n  [junit4]   2> Creating dataDir: /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001\n  [junit4]   2> 247111 T5288 oas.SolrTestCaseJ4.buildSSLConfig Randomized ssl (false) and clientAuth (false)\n  [junit4]   2> 247112 T5288 oas.SolrTestCaseJ4.initCore ####initCore\n  [junit4]   2> 247112 T5288 oasc.SolrResourceLoader.<init> new SolrResourceLoader for directory: '/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/'\n  [junit4]   2> 247128 T5288 oasc.SolrConfig.refreshRequestParams current version of requestparams : -1\n  [junit4]   2> 247135 T5288 oasc.SolrConfig.<init> Using Lucene MatchVersion: 5.2.0\n  [junit4]   2> 247157 T5288 oasc.SolrConfig.<init> Loaded SolrConfig: solrconfig-managed-schema.xml\n  [junit4]   2> 247161 T5288 oass.ManagedIndexSchemaFactory.readSchemaLocally The schema is configured as managed, but managed schema resource managed-schema not found - loading non-managed schema schema-id-and-version-fields-only.xml instead\n  [junit4]   2> 247164 T5288 oass.IndexSchema.readSchema Reading Solr Schema from /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/conf/schema-id-and-version-fields-only.xml\n  [junit4]   2> 247168 T5288 oass.IndexSchema.readSchema [null] Schema name=id-and-version-fields-only\n  [junit4]   2> 247173 T5288 oass.IndexSchema.readSchema unique key field: id\n  [junit4]   2> 247176 T5288 oass.ManagedIndexSchema.persistManagedSchema Upgraded to managed schema at /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/conf/managed-schema\n  [junit4]   2> 247176 T5288 oass.ManagedIndexSchemaFactory.upgradeToManagedSchema After upgrading to managed schema, renamed the non-managed schema /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/conf/schema-id-and-version-fields-only.xml to /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/conf/schema-id-and-version-fields-only.xml.bak\n  [junit4]   2> 247176 T5288 oasc.SolrResourceLoader.locateSolrHome JNDI not configured for solr (NoInitialContextEx)\n  [junit4]   2> 247176 T5288 oasc.SolrResourceLoader.locateSolrHome using system property solr.solr.home: /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001\n  [junit4]   2> 247177 T5288 oasc.SolrResourceLoader.<init> new SolrResourceLoader for directory: '/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/'\n  [junit4]   2> 247196 T5288 oasc.CoreContainer.<init> New CoreContainer 365438927\n  [junit4]   2> 247196 T5288 oasc.CoreContainer.load Loading cores into CoreContainer [instanceDir=/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/]\n  [junit4]   2> 247196 T5288 oasc.CoreContainer.load loading shared library: /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/lib\n  [junit4]   2> 247197 T5288 oasc.SolrResourceLoader.addToClassLoader WARN Can't find (or read) directory to add to classloader: lib (resolved as: /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/lib).\n  [junit4]   2> 247207 T5288 oashc.HttpShardHandlerFactory.init created with socketTimeout : 600000,connTimeout : 60000,maxConnectionsPerHost : 20,maxConnections : 10000,corePoolSize : 0,maximumPoolSize : 2147483647,maxThreadIdleTime : 5,sizeOfQueue : -1,fairnessPolicy : false,useRetries : false,\n  [junit4]   2> 247209 T5288 oasu.UpdateShardHandler.<init> Creating UpdateShardHandler HTTP client with params: socketTimeout=30000&connTimeout=30000&retry=true\n  [junit4]   2> 247209 T5288 oasl.LogWatcher.createWatcher SLF4J impl is org.slf4j.impl.Log4jLoggerFactory\n  [junit4]   2> 247210 T5288 oasl.LogWatcher.newRegisteredLogWatcher Registering Log Listener [Log4j (org.slf4j.impl.Log4jLoggerFactory)]\n  [junit4]   2> 247210 T5288 oasc.CoreContainer.load Node Name: testNode\n  [junit4]   2> 247210 T5288 oasc.CoreContainer.initializeAuthenticationPlugin No authentication plugin used.\n  [junit4]   2> 247211 T5288 oasc.CoreDescriptor.<init> CORE DESCRIPTOR: {transient=false, config=solrconfig-managed-schema.xml, absoluteInstDir=/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/, instanceDir=collection1, shard=shard1, schema=managed-schema, loadOnStartup=true, dataDir=/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001, name=collection1, collection=collection1}\n  [junit4]   2> 247211 T5289 oasc.SolrResourceLoader.<init> new SolrResourceLoader for directory: '/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/'\n  [junit4]   2> 247231 T5289 oasc.SolrConfig.refreshRequestParams current version of requestparams : -1\n  [junit4]   2> 247239 T5289 oasc.SolrConfig.<init> Using Lucene MatchVersion: 5.2.0\n  [junit4]   2> 247257 T5289 oasc.SolrConfig.<init> Loaded SolrConfig: solrconfig-managed-schema.xml\n  [junit4]   2> 247257 T5289 oass.IndexSchema.readSchema Reading Solr Schema from /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/conf/managed-schema\n  [junit4]   2> 247261 T5289 oass.IndexSchema.readSchema [collection1] Schema name=id-and-version-fields-only\n  [junit4]   2> 247267 T5289 oass.IndexSchema.readSchema unique key field: id\n  [junit4]   2> 247267 T5289 oasc.CoreContainer.create Creating SolrCore 'collection1' using configuration from instancedir /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/\n  [junit4]   2> 247268 T5289 x:collection1 oasc.SolrCore.initDirectoryFactory solr.NRTCachingDirectoryFactory\n  [junit4]   2> 247268 T5289 x:collection1 oasc.SolrCore.<init> [[collection1] ] Opening new SolrCore at [/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/], dataDir=[null]\n  [junit4]   2> 247268 T5289 x:collection1 oasc.SolrCore.initInfoRegistry JMX monitoring not detected for core: collection1\n  [junit4]   2> 247277 T5289 x:collection1 oasc.CachingDirectoryFactory.get return new directory for /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001\n  [junit4]   2> 247277 T5289 x:collection1 oasc.SolrCore.getNewIndexDir New index directory detected: old=null new=/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index/\n  [junit4]   2> 247278 T5289 x:collection1 oasc.SolrCore.initIndex WARN [collection1] Solr index directory '/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index' doesn't exist. Creating new index...\n  [junit4]   2> 247287 T5289 x:collection1 oasc.CachingDirectoryFactory.get return new directory for /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index\n  [junit4]   2> 247288 T5289 x:collection1 oasu.RandomMergePolicy.<init> RandomMergePolicy wrapping class org.apache.lucene.index.LogDocMergePolicy: [LogDocMergePolicy: minMergeSize=1000, mergeFactor=7, maxMergeSize=9223372036854775807, maxMergeSizeForForcedMerge=9223372036854775807, calibrateSizeByDeletes=false, maxMergeDocs=2147483647, maxCFSSegmentSizeMB=2.0390625, noCFSRatio=0.0]\n  [junit4]   2> 247290 T5289 x:collection1 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=1\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_1,generation=1}\n  [junit4]   2> 247290 T5289 x:collection1 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 1\n  [junit4]   2> 247292 T5289 x:collection1 oasc.SolrCore.loadUpdateProcessorChains no updateRequestProcessorChain defined as default, creating implicit default\n  [junit4]   2> 247292 T5289 x:collection1 oasc.RequestHandlers.applyInitParams WARN INVALID paramSet a in requestHandler {type = requestHandler,name = /dump,class = DumpRequestHandler,args = {defaults={a=A,b=B}}}\n  [junit4]   2> 247294 T5289 x:collection1 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\n  [junit4]   2> 247295 T5289 x:collection1 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\n  [junit4]   2> 247296 T5289 x:collection1 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\n  [junit4]   2> 247297 T5289 x:collection1 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\n  [junit4]   2> 247306 T5289 x:collection1 oasc.RequestHandlers.initHandlersFromConfig Registered paths: /admin/plugins,/get,/update/json/docs,/config,/admin/ping,/schema,standard,/admin/system,/replication,/dump,/update/csv,/update/json,/admin/segments,/admin/luke,/admin/threads,/admin/file,/admin/mbeans,/admin/properties,/update,/admin/logging\n  [junit4]   2> 247308 T5289 x:collection1 oasc.SolrCore.initStatsCache Using default statsCache cache: org.apache.solr.search.stats.LocalStatsCache\n  [junit4]   2> 247309 T5289 x:collection1 oasu.CommitTracker.<init> Hard AutoCommit: disabled\n  [junit4]   2> 247309 T5289 x:collection1 oasu.CommitTracker.<init> Soft AutoCommit: disabled\n  [junit4]   2> 247309 T5289 x:collection1 oasu.RandomMergePolicy.<init> RandomMergePolicy wrapping class org.apache.lucene.index.TieredMergePolicy: [TieredMergePolicy: maxMergeAtOnce=44, maxMergeAtOnceExplicit=35, maxMergedSegmentMB=81.8359375, floorSegmentMB=1.5185546875, forceMergeDeletesPctAllowed=5.724561829740376, segmentsPerTier=15.0, maxCFSSegmentSizeMB=8.796093022207999E12, noCFSRatio=0.6639164995851017\n  [junit4]   2> 247310 T5289 x:collection1 oasc.SolrDeletionPolicy.onInit SolrDeletionPolicy.onInit: commits: num=1\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_1,generation=1}\n  [junit4]   2> 247310 T5289 x:collection1 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 1\n  [junit4]   2> 247311 T5289 x:collection1 oass.SolrIndexSearcher.<init> Opening Searcher@6b41100d[collection1] main\n  [junit4]   2> 247311 T5289 x:collection1 oasr.ManagedResourceStorage$FileStorageIO.configure File-based storage initialized to use dir: /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/conf\n  [junit4]   2> 247311 T5289 x:collection1 oasr.RestManager.init Initializing RestManager with initArgs: {storageDir=/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/conf}\n  [junit4]   2> 247311 T5289 x:collection1 oasr.ManagedResourceStorage.load Reading _rest_managed.json using file:dir=/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/tempDir-001/collection1/conf\n  [junit4]   2> 247311 T5289 x:collection1 oasr.RestManager.init Initializing 0 registered ManagedResources\n  [junit4]   2> 247311 T5289 x:collection1 oash.ReplicationHandler.inform Commits will be reserved for  10000\n  [junit4]   2> 247312 T5289 x:collection1 oasc.CoreContainer.registerCore registering core: collection1\n  [junit4]   2> 247313 T5290 x:collection1 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@6b41100d[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader())}\n  [junit4]   2> 247313 T5288 oas.SolrTestCaseJ4.initCore ####initCore end\n  [junit4]   2> 247318 T5288 oas.SolrTestCaseJ4.setUp ###Starting test\n  [junit4]   2> ASYNC  NEW_CORE C253 name=collection1 org.apache.solr.core.SolrCore@576916e8\n  [junit4]   2> 247319 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[1]} 0 0\n  [junit4]   2> 247325 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[2]} 0 0\n  [junit4]   2> 247326 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[3]} 0 0\n  [junit4]   2> 247332 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[4]} 0 1\n  [junit4]   2> 247342 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n  [junit4]   2> 247360 T5288 C253 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_1,generation=1}\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_2,generation=2}\n  [junit4]   2> 247361 T5288 C253 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 2\n  [junit4]   2> 247365 T5288 C253 oass.SolrIndexSearcher.<init> Opening Searcher@208b6837[collection1] main\n  [junit4]   2> 247367 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247367 T5290 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@208b6837[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C4)))}\n  [junit4]   2> 247367 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 26\n  [junit4]   2> 247369 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[5]} 0 1\n  [junit4]   2> 247370 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {add=[6]} 0 0\n  [junit4]   2> 247371 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n  [junit4]   2> 247375 T5288 C253 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_2,generation=2}\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_3,generation=3}\n  [junit4]   2> 247375 T5288 C253 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 3\n  [junit4]   2> 247376 T5288 C253 oass.SolrIndexSearcher.<init> Opening Searcher@52b729f9[collection1] main\n  [junit4]   2> 247376 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247376 T5290 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@52b729f9[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C4) Uninverting(_1(5.2.0):C2)))}\n  [junit4]   2> 247376 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 5\n  [junit4]   2> 247377 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n  [junit4]   2> 247378 T5288 C253 oasu.DirectUpdateHandler2.commit No uncommitted changes. Skipping IW.commit.\n  [junit4]   2> 247379 T5288 C253 oasc.SolrCore.openNewSearcher SolrIndexSearcher has not changed - not re-opening: org.apache.solr.search.SolrIndexSearcher\n  [junit4]   2> 247379 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247380 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 3\n  [junit4]   2> 247381 T5288 C253 oasc.SolrCore.execute [collection1] webapp=null path=null params={rows=20&start=0&qt=standard&q=*:*&version=2.2} hits=6 status=0 QTime=1 \n  [junit4]   2> 247382 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n  [junit4]   2> 247382 T5288 C253 oasu.DirectUpdateHandler2.commit No uncommitted changes. Skipping IW.commit.\n  [junit4]   2> 247383 T5288 C253 oasc.SolrCore.openNewSearcher SolrIndexSearcher has not changed - not re-opening: org.apache.solr.search.SolrIndexSearcher\n  [junit4]   2> 247383 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247383 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 1\n  [junit4]   2> 247384 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n  [junit4]   2> 247384 T5288 C253 oasu.DirectUpdateHandler2.commit No uncommitted changes. Skipping IW.commit.\n  [junit4]   2> 247384 T5288 C253 oasc.SolrCore.openNewSearcher SolrIndexSearcher has not changed - not re-opening: org.apache.solr.search.SolrIndexSearcher\n  [junit4]   2> 247384 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247385 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 1\n  [junit4]   2> 247386 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=true,prepareCommit=false}\n  [junit4]   2> 247386 T5288 C253 oasc.SolrCore.openNewSearcher SolrIndexSearcher has not changed - not re-opening: org.apache.solr.search.SolrIndexSearcher\n  [junit4]   2> 247386 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247386 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 0\n  [junit4]   2> 247387 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=true,prepareCommit=false}\n  [junit4]   2> 247388 T5288 C253 oasc.SolrCore.openNewSearcher SolrIndexSearcher has not changed - not re-opening: org.apache.solr.search.SolrIndexSearcher\n  [junit4]   2> 247388 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247388 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 1\n  [junit4]   2> 247389 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {deleteByQuery=id:match_no_documents} 0 0\n  [junit4]   2> 247390 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n  [junit4]   2> 247391 T5288 C253 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_3,generation=3}\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_4,generation=4}\n  [junit4]   2> 247392 T5288 C253 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 4\n  [junit4]   2> 247392 T5288 C253 oass.SolrIndexSearcher.<init> Opening Searcher@76f21584[collection1] main\n  [junit4]   2> 247392 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247393 T5290 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@76f21584[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C4) Uninverting(_1(5.2.0):C2)))}\n  [junit4]   2> 247393 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 3\n  [junit4]   2> 247395 T5288 oas.SolrTestCaseJ4.tearDown ###Ending test\n  [junit4]   2> 247395 T5288 C253 oasu.DirectUpdateHandler2.deleteAll [collection1] REMOVING ALL DOCUMENTS FROM INDEX\n  [junit4]   2> 247396 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {deleteByQuery=*:*} 0 1\n  [junit4]   2> 247397 T5288 C253 oasu.DirectUpdateHandler2.commit start commit{,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false,prepareCommit=false}\n  [junit4]   2> 247398 T5288 C253 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits: num=2\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_4,generation=4}\n  [junit4]   2> \t\tcommit{dir=NRTCachingDirectory(MMapDirectory@/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index lockFactory=org.apache.lucene.store.SingleInstanceLockFactory@74bca68f; maxCacheMB=48.0 maxMergeSizeMB=4.0),segFN=segments_5,generation=5}\n  [junit4]   2> 247398 T5288 C253 oasc.SolrDeletionPolicy.updateCommits newest commit generation = 5\n  [junit4]   2> 247399 T5288 C253 oass.SolrIndexSearcher.<init> Opening Searcher@1ec37f76[collection1] main\n  [junit4]   2> 247399 T5288 C253 oasu.DirectUpdateHandler2.commit end_commit_flush\n  [junit4]   2> 247399 T5290 oasc.SolrCore.registerSearcher [collection1] Registered new searcher Searcher@1ec37f76[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader())}\n  [junit4]   2> 247400 T5288 C253 oasup.LogUpdateProcessor.finish [collection1] webapp=null path=null params={} {commit=} 0 3\n  [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=64C8ED4E4C36262F -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=mk -Dtests.timezone=Australia/Perth -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n  [junit4] FAILURE 0.09s J10 | TestSearcherReuse.test <<<\n  [junit4]    > Throwable #1: java.lang.AssertionError: expected same:<Searcher@52b729f9[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C4) Uninverting(_1(5.2.0):C2)))}> was not:<Searcher@76f21584[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.2.0):C4) Uninverting(_1(5.2.0):C2)))}>\n  [junit4]    > \tat __randomizedtesting.SeedInfo.seed([64C8ED4E4C36262F:EC9CD294E2CA4BD7]:0)\n  [junit4]    > \tat org.apache.solr.search.TestSearcherReuse.assertSearcherHasNotChanged(TestSearcherReuse.java:247)\n  [junit4]    > \tat org.apache.solr.search.TestSearcherReuse.test(TestSearcherReuse.java:117)\n  [junit4]    > \tat java.lang.Thread.run(Thread.java:745)\n  [junit4]   2> 247408 T5288 oas.SolrTestCaseJ4.deleteCore ###deleteCore\n  [junit4]   2> 247408 T5288 oasc.CoreContainer.shutdown Shutting down CoreContainer instance=365438927\n  [junit4]   2> 247409 T5288 oasc.SolrCore.close [collection1]  CLOSING SolrCore org.apache.solr.core.SolrCore@576916e8\n  [junit4]   2> 247409 T5288 oasu.DirectUpdateHandler2.close closing DirectUpdateHandler2{commits=9,autocommits=0,soft autocommits=0,optimizes=0,rollbacks=0,expungeDeletes=0,docsPending=0,adds=0,deletesById=0,deletesByQuery=0,errors=0,cumulative_adds=6,cumulative_deletesById=0,cumulative_deletesByQuery=2,cumulative_errors=0}\n  [junit4]   2> 247409 T5288 oasu.SolrCoreState.decrefSolrCoreState Closing SolrCoreState\n  [junit4]   2> 247409 T5288 oasu.DefaultSolrCoreState.closeIndexWriter SolrCoreState ref count has reached 0 - closing IndexWriter\n  [junit4]   2> 247409 T5288 oasu.DefaultSolrCoreState.closeIndexWriter closing IndexWriter with IndexWriterCloser\n  [junit4]   2> 247410 T5288 oasc.SolrCore.closeSearcher [collection1] Closing main searcher on request.\n  [junit4]   2> 247410 T5288 oasc.CachingDirectoryFactory.close Closing NRTCachingDirectoryFactory - 2 directories currently being tracked\n  [junit4]   2> 247410 T5288 oasc.CachingDirectoryFactory.closeCacheValue looking to close /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001 [CachedDir<<refCount=0;path=/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001;done=false>>]\n  [junit4]   2> 247410 T5288 oasc.CachingDirectoryFactory.close Closing directory: /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001\n  [junit4]   2> 247411 T5288 oasc.CachingDirectoryFactory.closeCacheValue looking to close /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index [CachedDir<<refCount=0;path=/var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index;done=false>>]\n  [junit4]   2> 247411 T5288 oasc.CachingDirectoryFactory.close Closing directory: /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001/init-core-data-001/index\n  [junit4]   2> NOTE: leaving temporary files on disk at: /var/lib/jenkins/jobs/Solr-core-NightlyTests-5.2-Java7/workspace/solr/build/solr-core/test/J10/temp/solr.search.TestSearcherReuse 64C8ED4E4C36262F-001\n  [junit4]   2> NOTE: test params are: codec=Asserting(Lucene50): {}, docValues:{}, sim=DefaultSimilarity, locale=mk, timezone=Australia/Perth\n  [junit4]   2> NOTE: Linux 4.0.2 amd64/Oracle Corporation 1.7.0_79 (64-bit)/cpus=16,threads=1,free=346294872,total=1045430272\n  [junit4]   2> NOTE: All tests run in this JVM: [TestOverriddenPrefixQueryForCustomFieldType, TestSuggestSpellingConverter, DistribJoinFromCollectionTest, TermVectorComponentDistributedTest, DistanceUnitsTest, DistributedIntervalFacetingTest, SystemInfoHandlerTest, TestManagedResourceStorage, TestRandomDVFaceting, TestDefaultStatsCache, VMParamsZkACLAndCredentialsProvidersTest, DistributedQueryElevationComponentTest, JsonLoaderTest, TestIBSimilarityFactory, IndexSchemaRuntimeFieldTest, CoreAdminCreateDiscoverTest, TestSearcherReuse]\n  [junit4] Completed [210/497] on J10 in 0.32s, 1 test, 1 failure <<< FAILURES!\n\n ",
            "id": "comment-14565745"
        },
        {
            "date": "2015-05-30T01:26:13+0000",
            "author": "Hoss Man",
            "content": "This test does a bunch of \"commits\" that are suppose to be No-Ops and then confirms the the searcher hasn't changed.\n\nif you read the logs, you can see that just before the failures, there are in fact new segment files, so there are new readers, so the searchers must change \u2013 but the attached patch makes this  more clear by adding some additional asserts on the underlying readers before comparing the searchers themselves.  (the toString of the searcher that gets printed in the existing assert shows it's Object.hashCode() to make it clear they are diff, and the reader toString()s are included, but the reader.toString()s can look identicale even though they are not \u2013 hence the new asserts)\n\nit's not yet clear to me why the new segment files are getting written sometimes .. best guess is that maybe this is somehow related to  LUCENE-6505? ",
            "id": "comment-14565757"
        },
        {
            "date": "2015-05-30T01:29:16+0000",
            "author": "Steve Rowe",
            "content": "it's not yet clear to me why the new segment files are getting written sometimes .. best guess is that maybe this is somehow related to LUCENE-6505?\n\nYeah, I svn up'd to r1682300 (just before the 5.2 branch LUCENE-6505 commit) and neither of the two seeds above reproduce any longer for me. ",
            "id": "comment-14565762"
        },
        {
            "date": "2015-05-30T02:25:30+0000",
            "author": "Steve Rowe",
            "content": "Hoss pointed out that succeeding with the same seeds that repro post-LUCENE-6505 could be false negatives, since randomization changes from the commit could change other random variables.\n\nSo I ran the test 100 times at r1682300, and there were 7 failures, each of which reproduce for me:\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=9D29262298F82DFC -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=ar_EG -Dtests.timezone=America/El_Salvador -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=E942A8CBAD0211E0 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=sr_RS -Dtests.timezone=Africa/El_Aaiun -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=D65A0D59437ED0CC -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=in -Dtests.timezone=Etc/GMT+4 -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=DDDB4AA402826B6E -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=ar_YE -Dtests.timezone=America/Curacao -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=6EF8BC952C50ED57 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=ru -Dtests.timezone=Asia/Riyadh89 -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=C1B453484C709EEE -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=th_TH -Dtests.timezone=Africa/Khartoum -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherReuse -Dtests.method=test -Dtests.seed=7D275B133B6C20B -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.locale=mt -Dtests.timezone=Canada/Mountain -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n\n\n\nAll 7 failures are at line 104 of TestSearcherReuse.java, right after the first empty commit.\n\nThe attached typescript contains the logs from all 100 runs. ",
            "id": "comment-14565790"
        },
        {
            "date": "2015-07-06T16:21:23+0000",
            "author": "Hoss Man",
            "content": "reply i sent to a jenkins fail earlier today, posting here as well for permemenant record...\n\n\nFWIW: Steve looked in to this a bit ago and filed SOLR-7611...\n\nhttps://issues.apache.org/jira/browse/SOLR-7611\n\n...my impression at the time was that LUCENE-6505 totally invalidated the \nentire premise of the test, but i didn't spend that much time looking into \nit.  But then steve said he was able to reproduce some failures even after \nhe rolled back LUCENE-6505 \u2013 which left me more confused.\n\nI honestly have no idea what's going on and haven't really had time to \nthink about it any more.\n\nI suspect that there may be 2 unrelated problems here that exhibit the \nsame symptoms...\n\n1) something that's been broken a while that causes some seeds to fail.\n\n2) mike's change in LUCENE-6505 which (seems to) eliminate the point of \nthe feature being tested here and as a result changed the test in a way \nthat may by making #1 happen more often (ie: with more seeds) ",
            "id": "comment-14615266"
        },
        {
            "date": "2015-07-06T16:22:57+0000",
            "author": "Hoss Man",
            "content": "For context, the original issue where this test was added (and the feature it was trying to test) are SOLR-5783 ",
            "id": "comment-14615268"
        },
        {
            "date": "2015-09-04T17:16:13+0000",
            "author": "Yonik Seeley",
            "content": "Sorry folks - didn't see this issue before I opened the other one.\nAnyway, my failure was due to background merges completing after the first commit, causing the second commit to have changes.\n\nI assume it's the same case here.  The seed here no longer fails either, so I think we can close. ",
            "id": "comment-14731081"
        }
    ]
}