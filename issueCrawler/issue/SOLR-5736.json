{
    "id": "SOLR-5736",
    "title": "Solr Suggester not working in sharding (distributed search)",
    "details": {
        "affect_versions": "4.5.1",
        "status": "Open",
        "fix_versions": [],
        "components": [
            "spellchecker"
        ],
        "type": "Bug",
        "priority": "Major",
        "labels": "",
        "resolution": "Unresolved"
    },
    "description": "I have two solr server (solr 4.5.1) which is running in shard..\n\nI have implemented solr suggester using spellcheckComponent for auto-suggester.\n\nwhen i execute suggest url on individual core then the solr suggestion is coming properly.\n\nmysolr.com:8986/solr/core1/suggest?spellcheck.q=city%20of and mysolr.com:8987/solr/core1/suggest?spellcheck.q=city%20of\n\nwhen i fired url with refence to solr wiki (wiki.apache.org/solr/SpellCheckComponent#Distributed_Search_Support) the result is not coming and below exception is occur.\n\nURL :- mysolr.com:8986/solr/core1/select?shards=mysolr.com:8986/solr/core1,mysolr.com:8987/solr/core1&spellcheck.q=city%20of&shards.qt=%2Fsuggest&qt=suggest\n\njava.lang.NullPointerException at org.apache.solr.handler.component.QueryComponent.mergeIds(QueryComponent.java:843) at org.apache.solr.handler.component.QueryComponent.handleRegularResponses(QueryComponent.java:649) at org.apache.solr.handler.component.QueryComponent.handleResponses(QueryComponent.java:628) at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:311) at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135) at org.apache.solr.core.SolrCore.execute(SolrCore.java:1859) at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:703) at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:406) at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:195) at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255) at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) at org.eclipse.jetty.server.Server.handle(Server.java:368) at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489) at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53) at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942) at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004) at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640) at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235) at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72) at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608) at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543) at java.lang.Thread.run(Thread.java:619)\n\nfor reference below is my schema.xml and solrconfig.xml entry\n\n<searchComponent class=\"solr.SpellCheckComponent\" name=\"suggest\">\n<lst name=\"spellchecker\">\n  <str name=\"name\"<\nspan class=\"pun\" style=\"margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background-color: transparent; color: rgb(0, 0, 0); background-position: initial initial; background-repeat: initial initial;\">>suggest</str>\n  <str name=\"classname\">org.apache.solr.spelling.suggest.Suggester</str>\n  <str name=\"lookupImpl\">org.apache.solr.spelling.suggest.tst.TSTLookupFactory</str>\n  <str name=\"field\"\n>sugg</str> \n  <str name=\"buildOnCommit\n\">true</str>\n</lst>\n\n <requestHandler class=\"org.apache.solr.handler.component.SearchHandler\" name=\"/suggest\">\n<lst name=\"defaults\">\n  <str name=\"spellcheck\">on</str>\n  <str name=\"spellcheck.di\nctionary\">suggest</str>\n  <str name=\"spellcheck.on\nlyMorePopular\">true</st\nr>\n  <str name=\"spellcheck.co\nunt\">10</str>\n  <str name=\"spellcheck.co\nllate\">true</str\n>\n</lst>\n<arr name=\"components\">\n  <str>suggest</str>\n</arr>\n\n<fieldType name=\"text_autocomplete\" class=\"solr.TextField\" positionIncrementGap=\"100\">\n    <analyzer>\n        <tokenizer class=<\n/span>\"solr.KeywordTokenizerFactory\"/>\n        <filter class=\"solr.LowerCaseFilterFactory\"/>\n        <filter class=\"solr.TrimFilterFactory\"/>\n        <filter class=\"solr.SynonymFilterFactory\" synonyms=\"syn.txt\" ignoreCase=\"true\" expand=\"true\"/>\n        <filter class=\"solr.RemoveDuplicatesTokenFilterFactory\"/>\n    </analyzer>\n\ni have unique filed, id which is store = true in schema.xml\n\ncan any one please suggest the solution.",
    "attachments": {},
    "issue_links": {},
    "comments": []
}