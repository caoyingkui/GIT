{
    "id": "LUCENE-5239",
    "title": "Scary TestSearcherManager failure",
    "details": {
        "components": [],
        "fix_versions": [
            "6.0"
        ],
        "affect_versions": "None",
        "priority": "Major",
        "labels": "",
        "type": "Bug",
        "resolution": "Fixed",
        "status": "Resolved"
    },
    "description": "http://builds.flonkings.com/job/Lucene-trunk-Linux-Java7-64-test-only/58093 hit a spooky failure, where it looks like the wrong document is deleted.\n\nIt doesn't reproduce easily, but after beasting I was finally able to reproduce it.  But when I run with -verbose it won't fail for me ... but does for Shai!\n\nDetails:\n\n\n   [junit4] Suite: org.apache.lucene.search.TestSearcherManager\n   [junit4]   1> doc id=0 is not supposed to be deleted, but got hitCount=0\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherManager -Dtests.method=testSearcherManager -Dtests.seed=6A8BC03A6E804E02 -Dtests.slow=true -Dtests.locale=fr_LU -Dtests.timezone=Africa/Algiers -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 4.98s J2 | TestSearcherManager.testSearcherManager <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([6A8BC03A6E804E02:66A48880D8892FFF]:0)\n   [junit4]    > \tat org.apache.lucene.index.ThreadedIndexingAndSearchingTestCase.runTest(ThreadedIndexingAndSearchingTestCase.java:607)\n   [junit4]    > \tat org.apache.lucene.search.TestSearcherManager.testSearcherManager(TestSearcherManager.java:56)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:722)\n   [junit4]   2> Sep 23, 2013 2:10:14 PM com.carrotsearch.randomizedtesting.ThreadLeakControl checkThreadLeaks\n   [junit4]   2> WARNING: Will linger awaiting termination of 8 leaked thread(s).\n   [junit4]   2> Sep 23, 2013 2:10:34 PM com.carrotsearch.randomizedtesting.ThreadLeakControl checkThreadLeaks\n   [junit4]   2> SEVERE: 8 threads leaked from SUITE scope at org.apache.lucene.search.TestSearcherManager: \n   [junit4]   2>    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2> Sep 23, 2013 2:10:34 PM com.carrotsearch.randomizedtesting.ThreadLeakControl tryToInterruptAll\n   [junit4]   2> INFO: Starting to interrupt leaked threads:\n   [junit4]   2>    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2> Sep 23, 2013 2:10:37 PM com.carrotsearch.randomizedtesting.ThreadLeakControl tryToInterruptAll\n   [junit4]   2> SEVERE: There are still zombie threads that couldn't be terminated:\n   [junit4]   2>    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2>    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\n   [junit4]   2> NOTE: test params are: codec=Lucene42, sim=DefaultSimilarity, locale=fr_LU, timezone=Africa/Algiers\n   [junit4]   2> NOTE: Linux 3.2.0-26-generic amd64/Oracle Corporation 1.7.0_05 (64-bit)/cpus=8,threads=9,free=186577648,total=278331392\n   [junit4]   2> NOTE: All tests run in this JVM: [TestMultiLevelSkipList, TestTryDelete, TestFieldValueFilter, TestPayloadTermQuery, TestRollingBuffer, TestDocumentsWriterStallControl, TestBagOfPositions, TestExplanations, TestMultiThreadTermVectors, TestPayloadSpans, TestParallelTermEnum, TestFlushByRamOrCountsPolicy, TestLucene45DocValuesFormat, TestIdentityHashSet, TestSloppyPhraseQuery2, TestOmitPositions, TestShardSearching, TestSimpleExplanationsOfNonMatches, TestRamUsageEstimatorOnWildAnimals, TestElevationComparator, TestPhrasePrefixQuery, NestedSetupChain, NestedTeardownChain, Test2BPositions, TestIndexWriter, TestLucene42DocValuesFormat, TestSearcherManager]\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherManager -Dtests.seed=6A8BC03A6E804E02 -Dtests.slow=true -Dtests.locale=fr_LU -Dtests.timezone=Africa/Algiers -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   0.00s J2 | TestSearcherManager (suite) <<<\n   [junit4]    > Throwable #1: com.carrotsearch.randomizedtesting.ThreadLeakError: 8 threads leaked from SUITE scope at org.apache.lucene.search.TestSearcherManager: \n   [junit4]    >    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([6A8BC03A6E804E02]:0)Throwable #2: com.carrotsearch.randomizedtesting.ThreadLeakError: There are still zombie threads that couldn't be terminated:\n   [junit4]    >    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    >    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([6A8BC03A6E804E02]:0)\n   [junit4] Completed on J2 in 28.86s, 7 tests, 1 failure, 2 errors <<< FAILURES!",
    "attachments": {
        "TestSearcherManager.testSearcherManager.0.t1.log": "https://issues.apache.org/jira/secure/attachment/12604760/TestSearcherManager.testSearcherManager.0.t1.log",
        "LUCENE-5239.patch": "https://issues.apache.org/jira/secure/attachment/12604759/LUCENE-5239.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "date": "2013-09-24T08:13:06+0000",
            "content": "I've been debugging this for several hours, added some prints (in the attached patch). I am able to reproduce it quite easily on latest trunk with luceneutil, but not on 4x. I also failed to reproduce on trunk before field updates (LUCENE-5189), but as I got more details from the print, I suspected something fishy going on in FreqProxTermsWriter (details below), so I tried to reproduce on trunk before LUCENE-5123 (rev 1524840) and also failed to reproduce (over 1000 attempts, but on latest trunk it repros after <100).\n\nI'm attaching both the patch with the sops as well as a failure log. I'll explain the prints in the log:\n\n\n\tThis is the failure: \"doc id=0 is not supposed to be deleted, but got hitCount=0\", which means that a document with 'docid' field set to \"0\" is not found, while it should be.\n\t\n\t\tInterestingly, the failures are ALWAYS on either docid 0 or 1 and with packID=0 (don't remember if I ever saw packID=1).\n\t\n\t\n\n\n\n\n\tNow search the log for \"docid=0\" and you find this line: \"[Thread-5]   FPTW.applyDelets seg=_0(5.0):C12 delTerm=packID:0 doc=0 docid=0\"\n\t\n\t\tThis is a print that I added to FreqProxTermsWriter.applyDeletes.\n\t\tIt follows this print \"[Thread-5] FPTW.applyDelets seg=_0(5.0):C12 delTerm=packID:0 doc=0\"\n\t\tAs you can see, the delete term is packID:0, and it got from DocsEnum doc=0.\n\t\tAt that point, I iterate on the docs of every term in the 'docid' field and print the doc. It prints what I put above, meaning doc=0 is associated with docid:0 and packID:0 terms.\n\t\n\t\n\n\n\n\n\tBut if you search the log for \"packID=0\", it never prints \"docid=0\" when adding/updating the documents.\n\n\n\nTherefore I think something fishy is going on with FreqProxTermsWriter (or surrounding classes). Also, given that the failures always happen on the docs in RAM, strengthens my feeling that it's not related to DV updates (the majority of the changes, and problems encountered so far, were to segment merging and ReaderAndLiveDocs).\n\nI'm not familiar with the changes on LUCENE-5123, but I'll be happy to assist by running the test with whatever sops are added, since it reproduces fairly quickly for me. ",
            "author": "Shai Erera",
            "id": "comment-13776111"
        },
        {
            "date": "2013-09-24T10:32:16+0000",
            "content": "so I tried to reproduce on trunk before LUCENE-5123 (rev 1524840) and also failed to reproduce (over 1000 attempts, but on latest trunk it repros after <100).\n\nAha!  Thank you for narrowing it down ... I did change how deletes are applied during flush in LUCENE-5123 ... something must be wrong there.  I'll dig. ",
            "author": "Michael McCandless",
            "id": "comment-13776179"
        },
        {
            "date": "2013-09-24T11:10:19+0000",
            "content": "Commit 1525851 from Michael McCandless in branch 'dev/trunk'\n[ https://svn.apache.org/r1525851 ]\n\nLUCENE-5239: don't delete same term for the wrong field ",
            "author": "ASF subversion and git services",
            "id": "comment-13776213"
        },
        {
            "date": "2013-09-24T11:15:32+0000",
            "content": "This was a trunk-only issue, introduced by LUCENE-5123. ",
            "author": "Michael McCandless",
            "id": "comment-13776215"
        },
        {
            "date": "2013-09-24T11:40:34+0000",
            "content": "Thanks for fixing Mike! I ran 1600 iters and the test didn't fail. ",
            "author": "Shai Erera",
            "id": "comment-13776226"
        },
        {
            "date": "2013-09-24T11:51:09+0000",
            "content": "Thank you for digging/isolating!! ",
            "author": "Michael McCandless",
            "id": "comment-13776229"
        },
        {
            "date": "2013-09-24T12:19:32+0000",
            "content": "w00t kudos guys! thanks for narrowing it down. ",
            "author": "Simon Willnauer",
            "id": "comment-13776250"
        },
        {
            "date": "2013-09-24T12:22:14+0000",
            "content": "+1.  When folks ask me \"Can I trust Lucene?\" this is the kind of thread I point them to! ",
            "author": "Eric Pugh",
            "id": "comment-13776252"
        },
        {
            "date": "2013-09-24T12:58:43+0000",
            "content": "Do we know why this didn't reproduce for the same seed? I mean \u2013 was it a race condition that was pretty much time-based or is it something we could fix in the test infrastructure? ",
            "author": "Dawid Weiss",
            "id": "comment-13776265"
        },
        {
            "date": "2013-09-24T14:00:11+0000",
            "content": "It did reproduce with the seed. But because the test is concurrent, you needed to get an unlucky assignment of documents to a certain thread to expose it. Mike added a deterministic testcase which reproduces the problem, always. ",
            "author": "Shai Erera",
            "id": "comment-13776321"
        },
        {
            "date": "2013-09-24T14:02:59+0000",
            "content": "Thanks Shai. Good to know. ",
            "author": "Dawid Weiss",
            "id": "comment-13776324"
        },
        {
            "date": "2013-09-24T14:44:49+0000",
            "content": "Commit 1525905 from Michael McCandless in branch 'dev/branches/branch_4x'\n[ https://svn.apache.org/r1525905 ]\n\nLUCENE-5239: backport test to 4.x ",
            "author": "ASF subversion and git services",
            "id": "comment-13776354"
        }
    ]
}