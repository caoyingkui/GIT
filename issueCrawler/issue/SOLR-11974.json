{
    "id": "SOLR-11974",
    "title": "TestCollapseQParserPlugin.testStringCollapse() failure",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [
            "Tests"
        ],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "None",
        "resolution": "Unresolved",
        "status": "Open"
    },
    "description": "Reproducing branch_7x seed from my Jenkins - reproduces for me on master too:\n\n\nChecking out Revision 6ae6ce2f42b61b117c31149ac87b1cb3d6ffe440 (refs/remotes/origin/branch_7x)\n[...]\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestCollapseQParserPlugin -Dtests.method=testStringCollapse -Dtests.seed=32531513E27A1FB -Dtests.slow=true -Dtests.locale=fr-LU -Dtests.timezone=Europe/Warsaw -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 1.15s J5  | TestCollapseQParserPlugin.testStringCollapse <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([32531513E27A1FB:F6AD0130F74002EF]:0)\n   [junit4]    > \tat org.apache.lucene.index.AssertingLeafReader$AssertingSortedDocValues.advanceExact(AssertingLeafReader.java:617)\n   [junit4]    > \tat org.apache.solr.search.CollapsingQParserPlugin$OrdScoreCollector.collect(CollapsingQParserPlugin.java:557)\n   [junit4]    > \tat org.apache.lucene.search.MatchAllDocsQuery$1$1.score(MatchAllDocsQuery.java:62)\n   [junit4]    > \tat org.apache.lucene.search.BulkScorer.score(BulkScorer.java:39)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:660)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:462)\n   [junit4]    > \tat org.apache.solr.search.Grouping.searchWithTimeLimiter(Grouping.java:447)\n   [junit4]    > \tat org.apache.solr.search.Grouping.execute(Grouping.java:395)\n   [junit4]    > \tat org.apache.solr.handler.component.QueryComponent.doProcessGroupedSearch(QueryComponent.java:1409)\n   [junit4]    > \tat org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:367)\n   [junit4]    > \tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:295)\n   [junit4]    > \tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:195)\n   [junit4]    > \tat org.apache.solr.core.SolrCore.execute(SolrCore.java:2503)\n   [junit4]    > \tat org.apache.solr.util.TestHarness.query(TestHarness.java:337)\n   [junit4]    > \tat org.apache.solr.util.TestHarness.query(TestHarness.java:319)\n   [junit4]    > \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:876)\n   [junit4]    > \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:862)\n   [junit4]    > \tat org.apache.solr.search.TestCollapseQParserPlugin.testCollapseQueries(TestCollapseQParserPlugin.java:768)\n   [junit4]    > \tat org.apache.solr.search.TestCollapseQParserPlugin.testStringCollapse(TestCollapseQParserPlugin.java:213)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n[...]\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene70): {text_ws=FSTOrd50, term_s=PostingsFormat(name=Memory), id=PostingsFormat(name=MockRandom), group_s=PostingsFormat(name=MockRandom), group_s_dv=FSTOrd50}, docValues:{id_i=DocValuesFormat(name=Direct), group_i=DocValuesFormat(name=Direct), group_ti_dv=DocValuesFormat(name=Lucene70), _version_=DocValuesFormat(name=Asserting), test_l=DocValuesFormat(name=Direct), group_tf_dv=DocValuesFormat(name=Memory), test_i=DocValuesFormat(name=Lucene70), group_f=DocValuesFormat(name=Asserting), test_f=DocValuesFormat(name=Memory), group_s_dv=DocValuesFormat(name=Asserting)}, maxPointsInLeafNode=1995, maxMBSortInHeap=7.1608710565771645, sim=RandomSimilarity(queryNorm=false): {}, locale=fr-LU, timezone=Europe/Warsaw\n   [junit4]   2> NOTE: Linux 4.1.0-custom2-amd64 amd64/Oracle Corporation 1.8.0_151 (64-bit)/cpus=16,threads=1,free=168356360,total=529530880\n\n\n\nI see this elsewhere in the log, multiple times:\n\n\n   [junit4]   2> 484673 ERROR (TEST-TestCollapseQParserPlugin.testNumericCollapse-seed#[32531513E27A1FB]) [    ] o.a.s.h.RequestHandlerBase java.lang.RuntimeException: java.io.IOException: min/max must be Int or Float field types when collapsing on numeric fields\n   [junit4]   2> \tat org.apache.solr.search.CollapsingQParserPlugin$CollapsingPostFilter.getFilterCollector(CollapsingQParserPlugin.java:377)\n   [junit4]   2> \tat org.apache.solr.search.SolrIndexSearcher.getProcessedFilter(SolrIndexSearcher.java:1085)\n   [junit4]   2> \tat org.apache.solr.search.SolrIndexSearcher.getDocListNC(SolrIndexSearcher.java:1541)\n   [junit4]   2> \tat org.apache.solr.search.SolrIndexSearcher.getDocListC(SolrIndexSearcher.java:1417)\n   [junit4]   2> \tat org.apache.solr.search.SolrIndexSearcher.search(SolrIndexSearcher.java:584)\n   [junit4]   2> \tat org.apache.solr.handler.component.QueryComponent.doProcessUngroupedSearch(QueryComponent.java:1435)\n   [junit4]   2> \tat org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:375)\n   [junit4]   2> \tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:295)\n   [junit4]   2> \tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:195)\n   [junit4]   2> \tat org.apache.solr.core.SolrCore.execute(SolrCore.java:2503)\n   [junit4]   2> \tat org.apache.solr.util.TestHarness.query(TestHarness.java:337)\n   [junit4]   2> \tat org.apache.solr.util.TestHarness.query(TestHarness.java:319)\n   [junit4]   2> \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:876)\n   [junit4]   2> \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:862)\n   [junit4]   2> \tat org.apache.solr.search.TestCollapseQParserPlugin.testCollapseQueries(TestCollapseQParserPlugin.java:617)\n   [junit4]   2> \tat org.apache.solr.search.TestCollapseQParserPlugin.testNumericCollapse(TestCollapseQParserPlugin.java:220)\n   [junit4]   2> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   2> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n   [junit4]   2> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n   [junit4]   2> \tat java.lang.reflect.Method.invoke(Method.java:498)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1737)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:934)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:970)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:984)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49)\n   [junit4]   2> \tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:943)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:829)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:879)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:890)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\n   [junit4]   2> \tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\n   [junit4]   2> \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]   2> Caused by: java.io.IOException: min/max must be Int or Float field types when collapsing on numeric fields\n   [junit4]   2> \tat org.apache.solr.search.CollapsingQParserPlugin$IntFieldValueCollector.<init>(CollapsingQParserPlugin.java:1159)\n   [junit4]   2> \tat org.apache.solr.search.CollapsingQParserPlugin$CollectorFactory.getCollector(CollapsingQParserPlugin.java:1401)\n   [junit4]   2> \tat org.apache.solr.search.CollapsingQParserPlugin$CollapsingPostFilter.getFilterCollector(CollapsingQParserPlugin.java:366)\n   [junit4]   2> \t... 54 more\n   [junit4]   2> \n   [junit4]   2> 484681 INFO  (TEST-TestCollapseQParserPlugin.testNumericCollapse-seed#[32531513E27A1FB]) [    ] o.a.s.c.S.Request [collection1]  webapp=null path=null params={q=*:*&fq={!collapse+field%3Dgroup_i+min%3Dtest_l}&sort=test_i+desc} status=500 QTime=63\n   [junit4]   2> 484681 ERROR (TEST-TestCollapseQParserPlugin.testNumericCollapse-seed#[32531513E27A1FB]) [    ] o.a.s.SolrTestCaseJ4 REQUEST FAILED: q=*:*&fq={!collapse+field%3Dgroup_i+min%3Dtest_l}&sort=test_i+desc:java.lang.RuntimeException: java.io.IOException: min/max must be Int or Float field types when collapsing on numeric fields\n   [junit4]   2> \tat org.apache.solr.search.CollapsingQParserPlugin$CollapsingPostFilter.getFilterCollector(CollapsingQParserPlugin.java:377)\n   [junit4]   2> \tat org.apache.solr.search.SolrIndexSearcher.getProcessedFilter(SolrIndexSearcher.java:1085)\n   [junit4]   2> \tat org.apache.solr.search.SolrIndexSearcher.getDocListNC(SolrIndexSearcher.java:1541)\n   [junit4]   2> \tat org.apache.solr.search.SolrIndexSearcher.getDocListC(SolrIndexSearcher.java:1417)\n   [junit4]   2> \tat org.apache.solr.search.SolrIndexSearcher.search(SolrIndexSearcher.java:584)\n   [junit4]   2> \tat org.apache.solr.handler.component.QueryComponent.doProcessUngroupedSearch(QueryComponent.java:1435)\n   [junit4]   2> \tat org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:375)\n   [junit4]   2> \tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:295)\n   [junit4]   2> \tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:195)\n   [junit4]   2> \tat org.apache.solr.core.SolrCore.execute(SolrCore.java:2503)\n   [junit4]   2> \tat org.apache.solr.util.TestHarness.query(TestHarness.java:337)\n   [junit4]   2> \tat org.apache.solr.util.TestHarness.query(TestHarness.java:319)\n   [junit4]   2> \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:876)\n   [junit4]   2> \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:862)\n   [junit4]   2> \tat org.apache.solr.search.TestCollapseQParserPlugin.testCollapseQueries(TestCollapseQParserPlugin.java:617)\n   [junit4]   2> \tat org.apache.solr.search.TestCollapseQParserPlugin.testNumericCollapse(TestCollapseQParserPlugin.java:220)\n   [junit4]   2> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   2> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n   [junit4]   2> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n   [junit4]   2> \tat java.lang.reflect.Method.invoke(Method.java:498)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1737)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:934)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:970)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:984)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49)\n   [junit4]   2> \tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:943)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:829)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:879)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:890)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\n   [junit4]   2> \tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\n   [junit4]   2> \tat java.lang.Thread.run(Thread.java:748)\n   [junit4]   2> Caused by: java.io.IOException: min/max must be Int or Float field types when collapsing on numeric fields\n   [junit4]   2> \tat org.apache.solr.search.CollapsingQParserPlugin$IntFieldValueCollector.<init>(CollapsingQParserPlugin.java:1159)\n   [junit4]   2> \tat org.apache.solr.search.CollapsingQParserPlugin$CollectorFactory.getCollector(CollapsingQParserPlugin.java:1401)\n   [junit4]   2> \tat org.apache.solr.search.CollapsingQParserPlugin$CollapsingPostFilter.getFilterCollector(CollapsingQParserPlugin.java:366)\n   [junit4]   2> \t... 54 more",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2018-02-12T18:51:10+0000",
            "content": "Failure started with the aa157f18335 commit on LUCENE-8152. ",
            "author": "Steve Rowe",
            "id": "comment-16361261"
        },
        {
            "date": "2018-02-12T19:31:51+0000",
            "content": "It looks like the refactoring on LUCENE-8152 exposes a pre-existing bug with this seed (not all seeds make the test fail). I'll look into it more tomorrow and mark the test with AwaitsFix for now. ",
            "author": "Adrien Grand",
            "id": "comment-16361321"
        },
        {
            "date": "2018-02-12T19:33:24+0000",
            "content": "Commit 91fbdfc15e84dc48cb019360a138fac6745265c8 in lucene-solr's branch refs/heads/branch_7x from Adrien Grand\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=91fbdfc ]\n\nSOLR-11974: Disable test. ",
            "author": "ASF subversion and git services",
            "id": "comment-16361325"
        },
        {
            "date": "2018-02-12T19:33:25+0000",
            "content": "Commit b3ea634d7dd037127f5815e6fb50e75d896251b2 in lucene-solr's branch refs/heads/master from Adrien Grand\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b3ea634 ]\n\nSOLR-11974: Disable test. ",
            "author": "ASF subversion and git services",
            "id": "comment-16361326"
        },
        {
            "date": "2018-02-13T09:45:05+0000",
            "content": "This is a problem with the oas.search.Grouping class: the grouping collector is created via a post filter and is then consumed twice, which breaks the invariant that collectors are called on increasing doc ids. Could someone who is more familiar with grouping and post filters help look into it? ",
            "author": "Adrien Grand",
            "id": "comment-16362062"
        },
        {
            "date": "2018-02-13T13:00:53+0000",
            "content": "I was surprised to see that we have test case that involved Grouping with the CollapsingQParserPlugin. The CollapsingQParserPlugin really should only be used with results that have not already been collapsed or grouped. ",
            "author": "Joel Bernstein",
            "id": "comment-16362268"
        },
        {
            "date": "2018-02-15T10:45:29+0000",
            "content": "Joel Bernstein So is this test invalid? Should we try to detect when invalid combinations like this are requested? ",
            "author": "Adrien Grand",
            "id": "comment-16365375"
        },
        {
            "date": "2018-02-15T12:58:45+0000",
            "content": "Joel Bernstein\u00a0FYI Not sure if this is related but there are several bugs open due to (intentional or not) chaining of CollapsingQParserPlugins. See\u00a0SOLR-8807,\u00a0SOLR-9104,\u00a0SOLR-10336,\u00a0SOLR-10885, SOLR-7435. ",
            "author": "Matthias Krueger",
            "id": "comment-16365488"
        }
    ]
}