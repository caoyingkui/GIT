{
    "id": "LUCENE-2800",
    "title": "Search Index Generation fails",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [
            "core/index"
        ],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "2.0.0",
        "resolution": "Unresolved",
        "status": "Reopened"
    },
    "description": "Hi,\n\nWe are using lucene 2.0.0 for search index In our Comergent application\n It was working fine since from more than 3 years. \nFrom this week, it is throwing Exception while creating New Index and also for Incremental Index.\nBelow is the exception\n\n\ncom.comergent.api.appservices.productService.ProductServiceException: java.io.IOException: Cannot delete ...\\searchIndex\\en_US\\MasterIndex_602580\\segments \n\tat com.comergent.reference.appservices.productService.search.indexBuilder.CatalogIndexSetBuilder.indexPCFromCache(CatalogIndexSetBuilder.java:634) \n\tat com.comergent.reference.appservices.productService.search.indexBuilder.CatalogIndexSetBuilder.buildIndexSet(CatalogIndexSetBuilder.java:276) \n\tat com.comergent.appservices.search.indexBuilder.IndexSetBuilder$BuilderThread.run(IndexSetBuilder.java:469) \nCaused by: java.io.IOException: Cannot delete ----searchIndex\\en_US\\MasterIndex_602580\\segments \n\tat org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java:268) \n\tat org.apache.lucene.index.SegmentInfos.write(SegmentInfos.java:95) \n\tat org.apache.lucene.index.IndexWriter$4.doBody(IndexWriter.java:726) \n\tat org.apache.lucene.store.Lock$With.run(Lock.java:99) \n\tat org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:724) \n\tat org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686) \n\tat org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:674) \n\tat org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:479) \n\tat org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:462) \n\tat com.comergent.reference.appservices.productService.search.indexBuilder.CatalogIndexSetBuilder.indexPCFromCache(CatalogIndexSetBuilder.java:630) \n\t... 2 more \n2010.12.05 06:25:13:532 Env/Thread-21961:ERROR:CatalogIndexSetBuilder CatalogIndexSetBuilder: [MasterIndex_602580] - Exception: com.comergent.api.appservices.productService.ProductServiceException: java.io.IOException: Cannot delete ...\\MasterIndex_602580\\segments\n2010.12.05 06:25:13:532 Env/Thread-21961:INFO:CMGT_SEARCH IndexSetBuilder$BuilderThread: error building the index for: MasterIndex_602580\ncom.comergent.api.exception.ComergentException: com.comergent.api.appservices.productService.ProductServiceException: java.io.IOException: Cannot delete \\searchIndex\\en_US\\MasterIndex_602580\\segments\n\tat com.comergent.reference.appservices.productService.search.indexBuilder.CatalogIndexSetBuilder.buildIndexSet(CatalogIndexSetBuilder.java:305)\n\tat com.comergent.appservices.search.indexBuilder.IndexSetBuilder$BuilderThread.run(IndexSetBuilder.java:469)\nCaused by: com.comergent.api.appservices.productService.ProductServiceException: java.io.IOException: Cannot delete ...\\MasterIndex_602580\\segments\n\tat com.comergent.reference.appservices.productService.search.indexBuilder.CatalogIndexSetBuilder.indexPCFromCache(CatalogIndexSetBuilder.java:634)\n\tat com.comergent.reference.appservices.productService.search.indexBuilder.CatalogIndexSetBuilder.buildIndexSet(CatalogIndexSetBuilder.java:276)\n\t... 1 more\nCaused by: java.io.IOException: Cannot delete ...\\MasterIndex_602580\\segments\n\tat org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java:268)\n\tat org.apache.lucene.index.SegmentInfos.write(SegmentInfos.java:95)\n\tat org.apache.lucene.index.IndexWriter$4.doBody(IndexWriter.java:726)\n\tat org.apache.lucene.store.Lock$With.run(Lock.java:99)\n\tat org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:724)\n\tat org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)\n\tat org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:674)\n\tat org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:479)\n\tat org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:462)\n\tat com.comergent.reference.appservices.productService.search.indexBuilder.CatalogIndexSetBuilder.indexPCFromCache(CatalogIndexSetBuilder.java:630)\n\t... 2 more\n\n2010.12.05 06:25:13:938 Env/http-8080-Processor75:INFO:CMGT_SEARCH IndexSetBuilder: error building the index: com.comergent.api.appservices.search.exception.IndexingException: Error in executing some builder threads...\n\tat com.comergent.appservices.search.indexBuilder.IndexSetBuilder.monitor(IndexSetBuilder.java:440)\n\tat com.comergent.appservices.search.indexBuilder.IndexSetBuilder.build(IndexSetBuilder.java:185)\n\tat com.comergent.reference.appservices.search.indexBuilder.ComergentIndexSetManager.startIndexBuilder(ComergentIndexSetManager.java:269)\n\tat com.comergent.appservices.search.indexBuilder.IndexSetManager.startFullIndexBuilder(IndexSetManager.java:516)\n\tat com.comergent.reference.appservices.search.indexBuilder.IndexMaintenanceBLC.service(IndexMaintenanceBLC.java:145)\n\tat com.comergent.dcm.core.AppExecutionEnv.runAppObj(AppExecutionEnv.java:77)\n\tat com.comergent.dcm.messaging.MessagingController.handleRequest(MessagingController.java:199)\n\tat com.comergent.dcm.messaging.MessagingController.execute(MessagingController.java:103)\n\tat com.comergent.dcm.core.DispatchServlet.executeController(DispatchServlet.java:485)\n\tat com.comergent.dcm.core.DispatchServlet.doExecute(DispatchServlet.java:434)\n\tat com.comergent.dcm.messaging.MessagingServlet.execute(MessagingServlet.java:161)\n\tat com.comergent.dcm.core.DispatchServlet.dispatch(DispatchServlet.java:189)\n\tat com.comergent.dcm.core.DispatchServlet.doPost(DispatchServlet.java:157)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:709)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50)\n\tat com.comergent.dcm.core.filters.CredentialPropagationFilter.executeFilter(CredentialPropagationFilter.java:57)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50)\n\tat com.comergent.dcm.core.filters.AAFilter.executeFilter(AAFilter.java:54)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50)\n\tat com.comergent.dcm.core.WrappingFilter.executeFilter(WrappingFilter.java:113)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50)\n\tat com.comergent.dcm.core.filters.StatsFilter.executeFilter(StatsFilter.java:38)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.SSLSessionKeyFilter.handleHttpRequest(SSLSessionKeyFilter.java:79)\n\tat com.comergent.dcm.core.filters.SSLSessionKeyFilter.doFilter(SSLSessionKeyFilter.java:186)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.IPSessionTrackingFilter.doFilter(IPSessionTrackingFilter.java:67)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50)\n\tat com.comergent.dcm.core.filters.RequestControlFilter.executeFilter(RequestControlFilter.java:102)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50)\n\tat com.comergent.dcm.core.filters.TimingFilter.executeFilter(TimingFilter.java:46)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50)\n\tat com.comergent.dcm.core.filters.EntryFilter.executeFilter(EntryFilter.java:51)\n\tat com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n\tat org.jstripe.tomcat.probe.Tomcat55AgentValve.invoke(Tomcat55AgentValve.java:20)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)\n\tat org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)\n\tat org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)\n\tat org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n\tat java.lang.Thread.run(Unknown Source)\n\n\n\n\nCould you please help us to solve this issue.",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2013-11-30T13:14:28+0000",
            "content": "2013 Old JIRA cleanup ",
            "author": "Erick Erickson",
            "id": "comment-13835683"
        }
    ]
}