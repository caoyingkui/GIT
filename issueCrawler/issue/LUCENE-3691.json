{
    "id": "LUCENE-3691",
    "title": "If query contains only ideographic space, ParseException thrown",
    "details": {
        "labels": "",
        "priority": "Minor",
        "components": [],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "2.9.1",
        "resolution": "Unresolved",
        "status": "Open"
    },
    "description": "Searching for \"\\u3000x\", \"x\\u3000\" and everything similar works fine; however, searching for just \"\\u3000\" throws the following exception:\ncore.SolrCore - org.apache.solr.common.SolrException: org.apache.lucene.queryParser.ParseException: Cannot parse '<80><80>': Encountered \"<EOF>\" at line 1, column 1.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n\n        at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:108)\n        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:174)\n        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)\n        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)\n        at org.apache.solr.client.solrj.embedded.EmbeddedSolrServer.request(EmbeddedSolrServer.java:139)\n        at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:89)\n        at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:122)\n        ...\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)\n        ...\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n        ...\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n        ...\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)\n        at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n        at java.lang.Thread.run(Thread.java:662)\nCaused by: org.apache.lucene.queryParser.ParseException: Cannot parse '<80><80>': Encountered \"<EOF>\" at line 1, column 1.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n\n        at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:205)\n        at org.apache.solr.search.DisMaxQParser.getUserQuery(DisMaxQParser.java:195)\n        at org.apache.solr.search.DisMaxQParser.addMainQuery(DisMaxQParser.java:158)\n        at org.apache.solr.search.DisMaxQParser.parse(DisMaxQParser.java:74)\n        at org.apache.solr.search.QParser.getQuery(QParser.java:131)\n        at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:89)\n        ... 36 more\nCaused by: org.apache.lucene.queryParser.ParseException: Encountered \"<EOF>\" at line 1, column 1.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n\n        at org.apache.lucene.queryParser.QueryParser.generateParseException(QueryParser.java:1846)\n        at org.apache.lucene.queryParser.QueryParser.jj_consume_token(QueryParser.java:1728)\n        at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1355)\n        at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1265)\n        at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1254)\n        at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:200)\n        ... 41 more\n\n\nAvoiding querying for empty strings fixes the problem, but I'm not sure this is expected behavior. Solr is queried using a WhitespaceTokenizer on the query. \n\nI'm posting the issue here since it seems like a problem with Lucene vs Solr, sorry if I'm wrong. ~Antoniya",
    "attachments": {},
    "issue_links": {},
    "comments": []
}