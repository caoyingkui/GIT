{
    "id": "SOLR-11788",
    "title": "conjunction of filterQueries not working properly",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [
            "search"
        ],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "6.4.1",
        "resolution": "Incomplete",
        "status": "Closed"
    },
    "description": "those two filter queries work fine individually and lead to the same result:\n1. all brands of products with application 50\nhttp://localhost:8983/solr/master_wac_WacBrandClassificationClass_flop/select?q=*:*&fq=\n{!join%20from=brands_string_mv%20to=code_string%20fromIndex=master_wac_Product_flop}applications_string_mv:50\n\n2. all brands of products with category 100\nhttp://localhost:8983/solr/master_wac_WacBrandClassificationClass_flop/select?q=*:*&fq={!join%20from=brands_string_mv%20to=code_string%20fromIndex=master_wac_Product_flop}\ncategory_string_mv:100\n\nalthough 1 and 2 have the exact same result set, the conjunction of both does not work\n3. combination:\nhttp://localhost:8983/solr/master_wac_WacBrandClassificationClass_flop/select?q=*:*&fq=\n{!join%20from=brands_string_mv%20to=code_string%20fromIndex=master_wac_Product_flop}applications_string_mv:50,{!join%20from=brands_string_mv%20to=code_string%20fromIndex=master_wac_Product_flop}\ncategory_string_mv:100\n\n\nResult for 1:\n\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<response>\n<lst name=\"responseHeader\"><int name=\"status\">0</int><int name=\"QTime\">0</int><lst name=\"params\"><str name=\"q\">*:*</str><str name=\"fq\">{!join from=brands_string_mv to=code_string fromIndex=master_wac_Product_flop}applications_string_mv:50</str></lst></lst><result name=\"response\" numFound=\"1\" start=\"0\"><doc><long name=\"indexOperationId\">99207272441184304</long><str name=\"id\">wackerMarketingClassificationCatalog/Default/36</str><long name=\"pk\">8796094169230</long><str name=\"catalogId\">wackerMarketingClassificationCatalog</str><str name=\"catalogVersion\">Default</str><str name=\"itemtype_string\">WacBrandClassificationClass</str><str name=\"code_string\">36</str><arr name=\"autosuggest_fr\"><str>ELASTOSIL \u00ae WT</str></arr><str name=\"name_sortable_fr_sortabletext\">ELASTOSIL \u00ae WT</str><str name=\"name_text_fr\">ELASTOSIL \u00ae WT</str><arr name=\"spellcheck_fr\"><str>ELASTOSIL \u00ae WT</str></arr><str name=\"name_text_en\">ELASTOSIL \u00ae WT</str><str name=\"name_sortable_en_sortabletext\">ELASTOSIL \u00ae WT</str><arr name=\"autosuggest_en\"><str>ELASTOSIL \u00ae WT</str></arr><arr name=\"spellcheck_en\"><str>ELASTOSIL \u00ae WT</str></arr><str name=\"name_text_de\">ELASTOSIL \u00ae WT</str><str name=\"name_sortable_de_sortabletext\">ELASTOSIL \u00ae WT</str><arr name=\"autosuggest_de\"><str>ELASTOSIL \u00ae WT</str></arr><arr name=\"spellcheck_de\"><str>ELASTOSIL \u00ae WT</str></arr><str name=\"indexedType_string\">WacBrandClassificationClass</str><long name=\"_version_\">1587316359348355073</long></doc></result>\n</response>\n\n\n\n\n\nResult for 2:\n\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<response>\n<lst name=\"responseHeader\"><int name=\"status\">0</int><int name=\"QTime\">0</int><lst name=\"params\"><str name=\"q\">*:*</str><str name=\"fq\">{!join from=brands_string_mv to=code_string fromIndex=master_wac_Product_flop}category_string_mv:100</str></lst></lst><result name=\"response\" numFound=\"1\" start=\"0\"><doc><long name=\"indexOperationId\">99207272441184304</long><str name=\"id\">wackerMarketingClassificationCatalog/Default/36</str><long name=\"pk\">8796094169230</long><str name=\"catalogId\">wackerMarketingClassificationCatalog</str><str name=\"catalogVersion\">Default</str><str name=\"itemtype_string\">WacBrandClassificationClass</str><str name=\"code_string\">36</str><arr name=\"autosuggest_fr\"><str>ELASTOSIL \u00ae WT</str></arr><str name=\"name_sortable_fr_sortabletext\">ELASTOSIL \u00ae WT</str><str name=\"name_text_fr\">ELASTOSIL \u00ae WT</str><arr name=\"spellcheck_fr\"><str>ELASTOSIL \u00ae WT</str></arr><str name=\"name_text_en\">ELASTOSIL \u00ae WT</str><str name=\"name_sortable_en_sortabletext\">ELASTOSIL \u00ae WT</str><arr name=\"autosuggest_en\"><str>ELASTOSIL \u00ae WT</str></arr><arr name=\"spellcheck_en\"><str>ELASTOSIL \u00ae WT</str></arr><str name=\"name_text_de\">ELASTOSIL \u00ae WT</str><str name=\"name_sortable_de_sortabletext\">ELASTOSIL \u00ae WT</str><arr name=\"autosuggest_de\"><str>ELASTOSIL \u00ae WT</str></arr><arr name=\"spellcheck_de\"><str>ELASTOSIL \u00ae WT</str></arr><str name=\"indexedType_string\">WacBrandClassificationClass</str><long name=\"_version_\">1587316359348355073</long></doc></result>\n</response>\n\n\n\n\n\nResult for 3 (combination of fq 1 and 2):\n\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<response>\n<lst name=\"responseHeader\"><int name=\"status\">0</int><int name=\"QTime\">0</int><lst name=\"params\"><str name=\"q\">*:*</str><str name=\"fq\">{!join from=brands_string_mv to=code_string fromIndex=master_wac_Product_flop}applications_string_mv:50,{!join from=brands_string_mv to=code_string fromIndex=master_wac_Product_flop}category_string_mv:100</str></lst></lst><result name=\"response\" numFound=\"0\" start=\"0\"></result>\n</response>\n\n\n\n\nthis filterquery however works (and leads to the same result as 1 and 2):\nhttp://localhost:8983/solr/master_wac_WacBrandClassificationClass_flop/select?q=*:*&fq=\n{!join%20from=brands_string_mv%20to=code_string%20fromIndex=master_wac_Product_flop}\ncategory_string_mv:100 AND applications_string_mv:50",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2017-12-21T16:34:53+0000",
            "content": "This kinds of questions belong on the Solr User mailing list first. Jira is for bugs against the core product.\n\nEither way, Just try having two fq parameters, they add up together. So, ?q=x&fq=y&fq=z ",
            "author": "Alexandre Rafalovitch",
            "id": "comment-16300242"
        },
        {
            "date": "2018-01-31T19:12:33+0000",
            "content": "Reporter is suggested to use the Solr-User mailing list first and only file an issue if a bug has been determined. Information on our mailing lists is at https://lucene.apache.org/solr/community.html#mailing-lists-irc. ",
            "author": "Cassandra Targett",
            "id": "comment-16347422"
        }
    ]
}