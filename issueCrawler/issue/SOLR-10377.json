{
    "id": "SOLR-10377",
    "title": "Improve readability of the explain output for JSON format",
    "details": {
        "labels": "",
        "priority": "Minor",
        "components": [],
        "type": "Improvement",
        "fix_versions": [],
        "affect_versions": "None",
        "resolution": "Unresolved",
        "status": "Open"
    },
    "description": "Today when I ask solr for the debug query output In json with indent I get this:\n\n\n1: \" 3.545981 = sum of: 3.545981 = weight(name:dns in 0) [SchemaSimilarity], result of: 3.545981 = score(doc=0,freq=1.0 = termFreq=1.0 ), product of: 2.3025851 = idf, computed as log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) from: 2.0 = docFreq 24.0 = docCount 1.54 = tfNorm, computed as (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) from: 1.0 = termFreq=1.0 1.2 = parameter k1 0.75 = parameter b 7.0 = avgFieldLength 1.0 = fieldLength \",\n2: \" 7.4202514 = sum of: 7.4202514 = sum of: 2.7921112 = weight(name:domain in 1) [SchemaSimilarity], result of: 2.7921112 = score(doc=1,freq=1.0 = termFreq=1.0 ), product of: 2.3025851 = idf, computed as log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) from: 2.0 = docFreq 24.0 = docCount 1.2125984 = tfNorm, computed as (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) from: 1.0 = termFreq=1.0 1.2 = parameter k1 0.75 = parameter b 7.0 = avgFieldLength 4.0 = fieldLength 2.7921112 = weight(name:name in 1) [SchemaSimilarity], result of: 2.7921112 = score(doc=1,freq=1.0 = termFreq=1.0 ), product of: 2.3025851 = idf, computed as log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) from: 2.0 = docFreq 24.0 = docCount 1.2125984 = tfNorm, computed as (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) from: 1.0 = termFreq=1.0 1.2 = parameter k1 0.75 = parameter b 7.0 = avgFieldLength 4.0 = fieldLength 1.8360289 = weight(name:system in 1) [SchemaSimilarity], result of: 1.8360289 = score(doc=1,freq=1.0 = termFreq=1.0 ), product of: 1.5141277 = idf, computed as log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) from: 5.0 = docFreq 24.0 = docCount 1.2125984 = tfNorm, computed as (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) from: 1.0 = termFreq=1.0 1.2 = parameter k1 0.75 = parameter b 7.0 = avgFieldLength 4.0 = fieldLength \"\n\n\n\nWhen I run the same query with \"wt=ruby\" I get a much nicer output\n\n\n'2'=>'\n7.4202514 = sum of:\n  7.4202514 = sum of:\n    2.7921112 = weight(name:domain in 1) [SchemaSimilarity], result of:\n      2.7921112 = score(doc=1,freq=1.0 = termFreq=1.0\n), product of:\n        2.3025851 = idf, computed as log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) from:\n          2.0 = docFreq\n          24.0 = docCount\n        1.2125984 = tfNorm, computed as (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) from:\n          1.0 = termFreq=1.0\n          1.2 = parameter k1\n          0.75 = parameter b\n          7.0 = avgFieldLength\n          4.0 = fieldLength\n    2.7921112 = weight(name:name in 1) [SchemaSimilarity], result of:\n      2.7921112 = score(doc=1,freq=1.0 = termFreq=1.0\n), product of:\n        2.3025851 = idf, computed as log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) from:\n          2.0 = docFreq\n          24.0 = docCount\n        1.2125984 = tfNorm, computed as (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) from:\n          1.0 = termFreq=1.0\n          1.2 = parameter k1\n          0.75 = parameter b\n          7.0 = avgFieldLength\n          4.0 = fieldLength\n    1.8360289 = weight(name:system in 1) [SchemaSimilarity], result of:\n      1.8360289 = score(doc=1,freq=1.0 = termFreq=1.0\n), product of:\n        1.5141277 = idf, computed as log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) from:\n          5.0 = docFreq\n          24.0 = docCount\n        1.2125984 = tfNorm, computed as (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) from:\n          1.0 = termFreq=1.0\n          1.2 = parameter k1\n          0.75 = parameter b\n          7.0 = avgFieldLength\n          4.0 = fieldLength\n',\n      '1'=>'\n3.545981 = sum of:\n  3.545981 = weight(name:dns in 0) [SchemaSimilarity], result of:\n    3.545981 = score(doc=0,freq=1.0 = termFreq=1.0\n), product of:\n      2.3025851 = idf, computed as log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) from:\n        2.0 = docFreq\n        24.0 = docCount\n      1.54 = tfNorm, computed as (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) from:\n        1.0 = termFreq=1.0\n        1.2 = parameter k1\n        0.75 = parameter b\n        7.0 = avgFieldLength\n        1.0 = fieldLength\n'}\n\n\n\nAlso the explain for the JSON output is not sorted by score",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2017-03-28T01:20:35+0000",
            "content": "Looks like the ordering was messed up because of the JSONView plugin that I had. Solr is returning the order correctly. ",
            "author": "Varun Thacker",
            "id": "comment-15944354"
        }
    ]
}