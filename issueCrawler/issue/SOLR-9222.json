{
    "id": "SOLR-9222",
    "title": "TestIndexSearcher.testReopen() failures on branch_5_5",
    "details": {
        "components": [],
        "type": "Task",
        "labels": "",
        "fix_versions": [
            "5.5.2"
        ],
        "affect_versions": "5.5.2",
        "status": "Closed",
        "resolution": "Fixed",
        "priority": "Major"
    },
    "description": "My Jenkins found a reproducing branch_5_5 TestIndexSearcher.testReopen() failure - this seed doesn't reproduce for me on master, branch_6x, branch_6_1 or branch_6_0:\n\n\nChecking out Revision c6b9ac065571718e7e92174fa7e2a927583012fa (refs/remotes/origin/branch_5_5)\n[...]\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=52A28BF648BE6222 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=ar-AE -Dtests.timezone=Europe/Jersey -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 0.41s J2 | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<1> but was:<6>\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([52A28BF648BE6222:7EEA5AE03B82ED01]:0)\n   [junit4]    > \tat org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:161)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:745)\n\n\n\nLooking through Jenkins emails, I found more seeds that still reproduce on current branch_5_5 - note that these failures predate the 5.5.2 backports, and none reproduce on branch_6_0:\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=48E44A87883F4799 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=sr-Latn-RS -Dtests.timezone=America/Chihuahua -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 0.48s | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<_0(5.5.2):C2> but was:<_3(5.5.2):c6>\n   [junit4]    >        at __randomizedtesting.SeedInfo.seed([48E44A87883F4799:64AC9B91FB03C8BA]:0)\n   [junit4]    >        at org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:121)\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=71EAFF9264F2CFDC -Dtests.multiplier=2 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=ar-KW -Dtests.timezone=Asia/Thimbu -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 0.43s | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: nothing changed, searcher should be the same expected same:<Searcher@482af190[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.5.2):C2) Uninverting(_1(5.5.2):C2) Uninverting(_2(5.5.2):C2)))}> was not:<Searcher@4278f92f[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.5.2):C2) Uninverting(_1(5.5.2):C2) Uninverting(_2(5.5.2):C2)))}>\n   [junit4]    >        at __randomizedtesting.SeedInfo.seed([71EAFF9264F2CFDC:5DA22E8417CE40FF]:0)\n   [junit4]    >        at org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:134)\n\n\n\n\n  [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=27D558253F223BD1 -Dtests.multiplier=2 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=de-GR -Dtests.timezone=America/Juneau -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 0.60s | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<_0(5.5.2):c2> but was:<_4(5.5.2):C6>\n   [junit4]    >        at __randomizedtesting.SeedInfo.seed([27D558253F223BD1:B9D89334C1EB4F2]:0)\n   [junit4]    >        at org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:121)\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=A17758EE270828B3 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=de-CH -Dtests.timezone=Asia/Katmandu -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] FAILURE 0.46s | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: nothing changed, searcher should be the same expected same:<Searcher@3b730aea[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.5.2):c2) Uninverting(_1(5.5.2):c2) Uninverting(_2(5.5.2):c2)))}> was not:<Searcher@131a937e[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.5.2):c2) Uninverting(_1(5.5.2):c2) Uninverting(_2(5.5.2):c2)))}>\n   [junit4]    >        at __randomizedtesting.SeedInfo.seed([A17758EE270828B3:8D3F89F85434A790]:0)\n   [junit4]    >        at org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:134)\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=9EC410D73C43C5E2 -Dtests.multiplier=2 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=hu-HU -Dtests.timezone=Mexico/BajaNorte -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 0.44s | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: nothing changed, searcher should be the same expected same:<Searcher@219c2b05[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.5.2):c2) Uninverting(_1(5.5.2):c2) Uninverting(_2(5.5.2):c2)))}> was not:<Searcher@adc2bd8[collection1] main{ExitableDirectoryReader(UninvertingDirectoryReader(Uninverting(_0(5.5.2):c2) Uninverting(_1(5.5.2):c2) Uninverting(_2(5.5.2):c2)))}>\n   [junit4]    >        at __randomizedtesting.SeedInfo.seed([9EC410D73C43C5E2:B28CC1C14F7F4AC1]:0)\n   [junit4]    >        at org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:134)\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=D182CE444F24E904 -Dtests.multiplier=2 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=es-HN -Dtests.timezone=Australia/Melbourne -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] FAILURE 0.39s | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<_0(5.5.2):C2> but was:<_3(5.5.2):c6>\n   [junit4]    >        at __randomizedtesting.SeedInfo.seed([D182CE444F24E904:FDCA1F523C186627]:0)\n   [junit4]    >        at org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:121)\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=C54BCBA9F8D085CA -Dtests.multiplier=2 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=de-GR -Dtests.timezone=Pacific/Johnston -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 0.59s | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<_0(5.5.2):c2> but was:<_2(5.5.2):c4>\n   [junit4]    >        at __randomizedtesting.SeedInfo.seed([C54BCBA9F8D085CA:E9031ABF8BEC0AE9]:0)\n   [junit4]    >        at org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:111)\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestIndexSearcher -Dtests.method=testReopen -Dtests.seed=78DC986344E9E28 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=sr -Dtests.timezone=America/Halifax -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 0.63s | TestIndexSearcher.testReopen <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: expected:<1> but was:<6>\n   [junit4]    >        at __randomizedtesting.SeedInfo.seed([78DC986344E9E28:2BC518904772110B]:0)\n   [junit4]    >        at org.apache.solr.search.TestIndexSearcher.testReopen(TestIndexSearcher.java:161)",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2016-06-20T23:53:15+0000",
            "author": "Steve Rowe",
            "content": "These seeds stopped reproducing after I backported SOLR-8674 to branch_5_5 - see SOLR-9229 for details. ",
            "id": "comment-15340714"
        },
        {
            "date": "2016-06-25T20:33:48+0000",
            "author": "Steve Rowe",
            "content": "Bulk close issues released with 5.5.2. ",
            "id": "comment-15349788"
        }
    ]
}