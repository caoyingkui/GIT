{
    "id": "LUCENE-3992",
    "title": "TestIndexWriterOnJRECrash failure",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [],
        "type": "Bug",
        "fix_versions": [
            "4.0-ALPHA"
        ],
        "affect_versions": "None",
        "resolution": "Fixed",
        "status": "Closed"
    },
    "description": "triggered this beasting a bunch of tests... gonna probably be hard to reproduce...",
    "attachments": {
        "LUCENE-3992.patch": "https://issues.apache.org/jira/secure/attachment/12522831/LUCENE-3992.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "date": "2012-04-16T17:53:04+0000",
            "content": "\n  [junit4] Suite: TestIndexWriterOnJRECrash\n   [junit4]    > (@BeforeClass output)\n   [junit4]   2> NOTE: Using no memory expensive codecs (Memory, SimpleText) for TestIndexWriterOnJRECrash.\n   [junit4]   2> \n   [junit4] ERROR   4.94s J1 | TestIndexWriterOnJRECrash.testNRTThreads\n   [junit4]    > Throwable #1: java.lang.RuntimeException: CheckIndex failed\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([D1AD5AD26B075DC7:4A744EC92AFC4BAC]:0)\n   [junit4]    > \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:173)\n   [junit4]    > \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:161)\n   [junit4]    > \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:135)\n   [junit4]    > \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]    > \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]    > \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.testNRTThreads(TestIndexWriterOnJRECrash.java:62)\n   [junit4]    > \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]    > \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n   [junit4]    > \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n   [junit4]    > \tat java.lang.reflect.Method.invoke(Method.java:597)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1844)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:142)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:748)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:809)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:823)\n   [junit4]    > \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:758)\n   [junit4]    > \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:680)\n   [junit4]    > \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]    > \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:613)\n   [junit4]    > \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]    > \tat org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:652)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:755)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:142)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:606)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:625)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:661)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:672)\n   [junit4]    > \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]    > \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n   [junit4]    > \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:553)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:142)\n   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:499)\n   [junit4]    > \n   [junit4]   1> CheckIndex failed\n   [junit4]   1> Segments file=segments_3 numSegments=7 version=4.0 format=FORMAT_3_1 [Lucene 3.1+]\n   [junit4]   1>   1 of 7: name=_b docCount=201\n   [junit4]   1>     codec=Lucene3x\n   [junit4]   1>     compound=false\n   [junit4]   1> FAILED\n   [junit4]   1>     WARNING: fixIndex() would remove reference to this segment; full exception:\n   [junit4]   1> org.apache.lucene.index.IndexFormatTooNewException: Format version is not supported (resource: MockIndexInputWrapper(SimpleFSIndexInput(path=\"/home/rmuir/workspace/lucene-trunk/lucene/build/core/test/S1/jrecrash6989569900tmp/jrecrash6989569900tmp/TestNRTThreads5875358754tmp/_b.fnm\"))): -2147483648 (needs to be between -2 and -3)\n   [junit4]   1> \tat org.apache.lucene.codecs.lucene3x.Lucene3xFieldInfosReader.read(Lucene3xFieldInfosReader.java:73)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:201)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:227)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:391)\n   [junit4]   1> \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:506)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:169)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:161)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:135)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.testNRTThreads(TestIndexWriterOnJRECrash.java:62)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n   [junit4]   1> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n   [junit4]   1> \tat java.lang.reflect.Method.invoke(Method.java:597)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1844)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:748)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:809)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:823)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:758)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:680)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:613)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:652)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:755)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:606)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:625)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:661)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:672)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:553)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:499)\n   [junit4]   1> \n   [junit4]   1>   2 of 7: name=_a docCount=39\n   [junit4]   1>     codec=Lucene3x\n   [junit4]   1>     compound=false\n   [junit4]   1> FAILED\n   [junit4]   1>     WARNING: fixIndex() would remove reference to this segment; full exception:\n   [junit4]   1> org.apache.lucene.index.IndexFormatTooNewException: Format version is not supported (resource: MockIndexInputWrapper(SimpleFSIndexInput(path=\"/home/rmuir/workspace/lucene-trunk/lucene/build/core/test/S1/jrecrash6989569900tmp/jrecrash6989569900tmp/TestNRTThreads5875358754tmp/_a.fnm\"))): -2147483648 (needs to be between -2 and -3)\n   [junit4]   1> \tat org.apache.lucene.codecs.lucene3x.Lucene3xFieldInfosReader.read(Lucene3xFieldInfosReader.java:73)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:201)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:227)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:391)\n   [junit4]   1> \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:506)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:169)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:161)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:135)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.testNRTThreads(TestIndexWriterOnJRECrash.java:62)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n   [junit4]   1> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n   [junit4]   1> \tat java.lang.reflect.Method.invoke(Method.java:597)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1844)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:748)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:809)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:823)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:758)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:680)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:613)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:652)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:755)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:606)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:625)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:661)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:672)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:553)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:499)\n   [junit4]   1> \n   [junit4]   1>   3 of 7: name=_c docCount=18\n   [junit4]   1>     codec=Lucene3x\n   [junit4]   1>     compound=false\n   [junit4]   1> FAILED\n   [junit4]   1>     WARNING: fixIndex() would remove reference to this segment; full exception:\n   [junit4]   1> org.apache.lucene.index.IndexFormatTooNewException: Format version is not supported (resource: MockIndexInputWrapper(SimpleFSIndexInput(path=\"/home/rmuir/workspace/lucene-trunk/lucene/build/core/test/S1/jrecrash6989569900tmp/jrecrash6989569900tmp/TestNRTThreads5875358754tmp/_c.fnm\"))): -2147483648 (needs to be between -2 and -3)\n   [junit4]   1> \tat org.apache.lucene.codecs.lucene3x.Lucene3xFieldInfosReader.read(Lucene3xFieldInfosReader.java:73)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:201)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:227)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:391)\n   [junit4]   1> \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:506)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:169)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:161)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:135)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.testNRTThreads(TestIndexWriterOnJRECrash.java:62)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n   [junit4]   1> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n   [junit4]   1> \tat java.lang.reflect.Method.invoke(Method.java:597)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1844)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:748)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:809)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:823)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:758)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:680)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:613)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:652)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:755)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:606)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:625)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:661)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:672)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:553)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:499)\n   [junit4]   1> \n   [junit4]   1>   4 of 7: name=_d docCount=22\n   [junit4]   1>     codec=Lucene3x\n   [junit4]   1>     compound=false\n   [junit4]   1> FAILED\n   [junit4]   1>     WARNING: fixIndex() would remove reference to this segment; full exception:\n   [junit4]   1> org.apache.lucene.index.IndexFormatTooNewException: Format version is not supported (resource: MockIndexInputWrapper(SimpleFSIndexInput(path=\"/home/rmuir/workspace/lucene-trunk/lucene/build/core/test/S1/jrecrash6989569900tmp/jrecrash6989569900tmp/TestNRTThreads5875358754tmp/_d.fnm\"))): -2147483648 (needs to be between -2 and -3)\n   [junit4]   1> \tat org.apache.lucene.codecs.lucene3x.Lucene3xFieldInfosReader.read(Lucene3xFieldInfosReader.java:73)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:201)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:227)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:391)\n   [junit4]   1> \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:506)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:169)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:161)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:135)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.testNRTThreads(TestIndexWriterOnJRECrash.java:62)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n   [junit4]   1> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n   [junit4]   1> \tat java.lang.reflect.Method.invoke(Method.java:597)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1844)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:748)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:809)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:823)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:758)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:680)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:613)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:652)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:755)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:606)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:625)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:661)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:672)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:553)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:499)\n   [junit4]   1> \n   [junit4]   1>   5 of 7: name=_f docCount=6\n   [junit4]   1>     codec=Lucene3x\n   [junit4]   1>     compound=false\n   [junit4]   1> FAILED\n   [junit4]   1>     WARNING: fixIndex() would remove reference to this segment; full exception:\n   [junit4]   1> org.apache.lucene.index.IndexFormatTooNewException: Format version is not supported (resource: MockIndexInputWrapper(SimpleFSIndexInput(path=\"/home/rmuir/workspace/lucene-trunk/lucene/build/core/test/S1/jrecrash6989569900tmp/jrecrash6989569900tmp/TestNRTThreads5875358754tmp/_f.fnm\"))): -2147483648 (needs to be between -2 and -3)\n   [junit4]   1> \tat org.apache.lucene.codecs.lucene3x.Lucene3xFieldInfosReader.read(Lucene3xFieldInfosReader.java:73)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:201)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:227)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:391)\n   [junit4]   1> \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:506)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:169)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:161)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:135)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.testNRTThreads(TestIndexWriterOnJRECrash.java:62)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n   [junit4]   1> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n   [junit4]   1> \tat java.lang.reflect.Method.invoke(Method.java:597)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1844)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:748)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:809)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:823)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:758)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:680)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:613)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:652)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:755)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:606)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:625)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:661)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:672)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:553)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:499)\n   [junit4]   1> \n   [junit4]   1>   6 of 7: name=_e docCount=9\n   [junit4]   1>     codec=Lucene3x\n   [junit4]   1>     compound=false\n   [junit4]   1> FAILED\n   [junit4]   1>     WARNING: fixIndex() would remove reference to this segment; full exception:\n   [junit4]   1> org.apache.lucene.index.IndexFormatTooNewException: Format version is not supported (resource: MockIndexInputWrapper(SimpleFSIndexInput(path=\"/home/rmuir/workspace/lucene-trunk/lucene/build/core/test/S1/jrecrash6989569900tmp/jrecrash6989569900tmp/TestNRTThreads5875358754tmp/_e.fnm\"))): -2147483648 (needs to be between -2 and -3)\n   [junit4]   1> \tat org.apache.lucene.codecs.lucene3x.Lucene3xFieldInfosReader.read(Lucene3xFieldInfosReader.java:73)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:201)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:227)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:391)\n   [junit4]   1> \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:506)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:169)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:161)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:135)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.testNRTThreads(TestIndexWriterOnJRECrash.java:62)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n   [junit4]   1> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n   [junit4]   1> \tat java.lang.reflect.Method.invoke(Method.java:597)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1844)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:748)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:809)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:823)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:758)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:680)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:613)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:652)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:755)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:606)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:625)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:661)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:672)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:553)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:499)\n   [junit4]   1> \n   [junit4]   1>   7 of 7: name=_g docCount=1\n   [junit4]   1>     codec=Lucene3x\n   [junit4]   1>     compound=false\n   [junit4]   1> FAILED\n   [junit4]   1>     WARNING: fixIndex() would remove reference to this segment; full exception:\n   [junit4]   1> org.apache.lucene.index.IndexFormatTooNewException: Format version is not supported (resource: MockIndexInputWrapper(SimpleFSIndexInput(path=\"/home/rmuir/workspace/lucene-trunk/lucene/build/core/test/S1/jrecrash6989569900tmp/jrecrash6989569900tmp/TestNRTThreads5875358754tmp/_g.fnm\"))): -2147483648 (needs to be between -2 and -3)\n   [junit4]   1> \tat org.apache.lucene.codecs.lucene3x.Lucene3xFieldInfosReader.read(Lucene3xFieldInfosReader.java:73)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:201)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:227)\n   [junit4]   1> \tat org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:391)\n   [junit4]   1> \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:506)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:169)\n   [junit4]   1> \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:161)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:135)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.checkIndexes(TestIndexWriterOnJRECrash.java:141)\n   [junit4]   1> \tat org.apache.lucene.index.TestIndexWriterOnJRECrash.testNRTThreads(TestIndexWriterOnJRECrash.java:62)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n   [junit4]   1> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n   [junit4]   1> \tat java.lang.reflect.Method.invoke(Method.java:597)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1844)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:748)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:809)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:823)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:758)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:680)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:613)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:652)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:755)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:606)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:625)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:661)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:672)\n   [junit4]   1> \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n   [junit4]   1> \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n   [junit4]   1> \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:553)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:142)\n   [junit4]   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:499)\n   [junit4]   1> \n   [junit4]   1> WARNING: 7 broken segments (containing 296 documents) detected\n   [junit4]   1> \n   [junit4]   2> NOTE: reproduce with: ant test -Dtests.class=*.TestIndexWriterOnJRECrash -Dtests.method=testNRTThreads -Dtests.seed=D1AD5AD26B075DC7 -Dtests.multiplier=5 -Dtests.nightly=true -Dargs=\"-Dfile.encoding=UTF-8\"\n   [junit4]   2> NOTE: reproduce with: ant test -Dtests.class=*.TestIndexWriterOnJRECrash -Dtests.method=testNRTThreads -Dtests.seed=D1AD5AD26B075DC7 -Dtests.multiplier=5 -Dtests.nightly=true -Dargs=\"-Dfile.encoding=UTF-8\"\n   [junit4]   1> \n   [junit4]   2>\n   [junit4]    > (@AfterClass output)\n   [junit4]   2> NOTE: test params are: codec=Lucene40: {thisCodeMakesAbsolutelyNoSenseCanWeDeleteIt=MockVariableIntBlock(baseBlockSize=22)}, sim=RandomSimilarityProvider(queryNorm=true,coord=true): {}, locale=es_ES, timezone=Europe/Luxembourg\n   [junit4]   2> NOTE: all tests run in this JVM:\n   [junit4]   2> [TestNewestSegment, TestBitVector, TestOmitNorms, TestFlushByRamOrCountsPolicy, TestDocBoost, TestIndexWriterOnJRECrash]\n   [junit4]   2> NOTE: Linux 3.0.0-14-generic amd64/Sun Microsystems Inc. 1.6.0_24 (64-bit)/cpus=8,threads=1,free=292481936,total=335609856\n   [junit4]   2> \n   [junit4] Completed on J1 in 4.95s, 1 test, 1 error <<< FAILURES!\n\n ",
            "author": "Robert Muir",
            "id": "comment-13254844"
        },
        {
            "date": "2012-04-16T18:06:00+0000",
            "content": "This seed reproduces for me actually, so either i have hardware problems or its a real bug. ",
            "author": "Robert Muir",
            "id": "comment-13254856"
        },
        {
            "date": "2012-04-16T18:26:03+0000",
            "content": "OK i know, its a super-sneaky bug in the test.\n\nThis bug has been around since LUCENE-3687, but the test is only run nightly, so i just happened to trip it.\n\nThe problem is (as described in LUCENE-3687), we don't have perfect 3.x emulation. So PreFlexRWFieldInfosWriter\ncurrently writes a 'very close to 3.x format' and has a specialized FieldInfosReader to handle that.\nThis kicks in when preflex impersonation is on: LuceneTestCase.PREFLEX_IMPERSONATION_IS_ACTIVE\n\nBut this test creates the file in a separate JVM so it can crash it, and doesnt handle these impersonated indexes.\nI'll figure out a way to fix the test... ",
            "author": "Robert Muir",
            "id": "comment-13254876"
        },
        {
            "date": "2012-04-16T18:45:15+0000",
            "content": "patch, i also fixed the seed format so the test is more efficient... amazing the previous one slipped through really. ",
            "author": "Robert Muir",
            "id": "comment-13254903"
        },
        {
            "date": "2012-04-16T18:48:49+0000",
            "content": "I see why it's slipped through \u2013 I ran @Nightly only one or two times, the build server was running regular daily tests... Thanks for fixing. ",
            "author": "Dawid Weiss",
            "id": "comment-13254908"
        },
        {
            "date": "2012-04-16T18:55:42+0000",
            "content": "Well the seed format wasnt really a bug (it wouldnt cause a test failure) since the sub-process it creates, \nit doesnt care if it passes or fails.\nit doesnt care what happens to it, its gonna crash its jvm either way \n\nIt just makes the test less efficient as we have a lower probability of creating an actual index if randomizedrunner\nimmediately tosses out the bogusly-formatted seed... ",
            "author": "Robert Muir",
            "id": "comment-13254915"
        }
    ]
}