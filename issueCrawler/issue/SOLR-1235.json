{
    "id": "SOLR-1235",
    "title": "disallow period (.) in entity names",
    "details": {
        "affect_versions": "1.3",
        "status": "Closed",
        "fix_versions": [
            "1.4"
        ],
        "components": [
            "contrib - DataImportHandler"
        ],
        "type": "Improvement",
        "priority": "Minor",
        "labels": "",
        "resolution": "Fixed"
    },
    "description": "periods do not work because it is a special char for resolving namespaces",
    "attachments": {
        "SOLR-1235.patch": "https://issues.apache.org/jira/secure/attachment/12416400/SOLR-1235.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "author": "Noble Paul",
            "id": "comment-12722485",
            "date": "2009-06-22T04:40:22+0000",
            "content": "committed r787139 "
        },
        {
            "author": "Tricia Jenkins",
            "id": "comment-12742526",
            "date": "2009-08-12T19:06:24+0000",
            "content": "This commit causes the example-DIH to fail with DataImportHandlerException: Entity must have name '.  The reason is that the \"entity\" on line 3 of trunk/example/example-DIH/solr/mail/conf/data-config.xml is missing the name attribute which causes the condition on line 177 of org.apache.solr.handler.dataimport.DataConfig to fail.\n\nThe simple solution is to add a name attribute to the offending entity.  The complex solution would be to change the DataConfig test so that null is accepted as a name, but the period is not.  What do you think?\n\nOther info:\n\nI start the example-DIH webapp as described:\n\njava -Dsolr.solr.home=\"./example-DIH/solr/\" -jar start.jar\n\n\n\nAnd the error appears:\n\nHTTP ERROR: 500\n\nSevere errors in solr configuration.\n\nCheck your log files for more detailed information on what may be wrong.\n\nIf you want solr to continue after configuration errors, change: \n\n <abortOnConfigurationError>false</abortOnConfigurationError>\n\nin solr.xml\n\n-------------------------------------------------------------\norg.apache.solr.common.SolrException: FATAL: Could not create importer. DataImporter config invalid\n\tat org.apache.solr.handler.dataimport.DataImportHandler.inform(DataImportHandler.java:121)\n\tat org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:415)\n\tat org.apache.solr.core.SolrCore.<init>(SolrCore.java:574)\n\tat org.apache.solr.core.CoreContainer.create(CoreContainer.java:381)\n\tat org.apache.solr.core.CoreContainer.load(CoreContainer.java:241)\n\tat org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:115)\n\tat org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:83)\n\tat org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:99)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:594)\n\tat org.mortbay.jetty.servlet.Context.startContext(Context.java:139)\n\tat org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1218)\n\tat org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:500)\n\tat org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)\n\tat org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:161)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:117)\n\tat org.mortbay.jetty.Server.doStart(Server.java:210)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:929)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.mortbay.start.Main.invokeMain(Main.java:183)\n\tat org.mortbay.start.Main.start(Main.java:497)\n\tat org.mortbay.start.Main.main(Main.java:115)\nCaused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Exception occurred while initializing context\n\tat org.apache.solr.handler.dataimport.DataImporter.loadDataConfig(DataImporter.java:182)\n\tat org.apache.solr.handler.dataimport.DataImporter.<init>(DataImporter.java:99)\n\tat org.apache.solr.handler.dataimport.DataImportHandler.inform(DataImportHandler.java:113)\n\t... 30 more\nCaused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Entity must have name '\n\tat org.apache.solr.handler.dataimport.DataConfig$Entity.<init>(DataConfig.java:118)\n\tat org.apache.solr.handler.dataimport.DataConfig$Document.<init>(DataConfig.java:72)\n\tat org.apache.solr.handler.dataimport.DataConfig.readFromXml(DataConfig.java:240)\n\tat org.apache.solr.handler.dataimport.DataImporter.loadDataConfig(DataImporter.java:178)\n\t... 32 more\n-------------------------------------------------------------\norg.apache.solr.handler.dataimport.DataImportHandlerException: Exception occurred while initializing context\n\tat org.apache.solr.handler.dataimport.DataImporter.loadDataConfig(DataImporter.java:182)\n\tat org.apache.solr.handler.dataimport.DataImporter.<init>(DataImporter.java:99)\n\tat org.apache.solr.handler.dataimport.DataImportHandler.inform(DataImportHandler.java:113)\n\tat org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:415)\n\tat org.apache.solr.core.SolrCore.<init>(SolrCore.java:574)\n\tat org.apache.solr.core.CoreContainer.create(CoreContainer.java:381)\n\tat org.apache.solr.core.CoreContainer.load(CoreContainer.java:241)\n\tat org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:115)\n\tat org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:83)\n\tat org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:99)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:594)\n\tat org.mortbay.jetty.servlet.Context.startContext(Context.java:139)\n\tat org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1218)\n\tat org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:500)\n\tat org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)\n\tat org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:161)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:117)\n\tat org.mortbay.jetty.Server.doStart(Server.java:210)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:929)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.mortbay.start.Main.invokeMain(Main.java:183)\n\tat org.mortbay.start.Main.start(Main.java:497)\n\tat org.mortbay.start.Main.main(Main.java:115)\nCaused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Entity must have name '\n\tat org.apache.solr.handler.dataimport.DataConfig$Entity.<init>(DataConfig.java:118)\n\tat org.apache.solr.handler.dataimport.DataConfig$Document.<init>(DataConfig.java:72)\n\tat org.apache.solr.handler.dataimport.DataConfig.readFromXml(DataConfig.java:240)\n\tat org.apache.solr.handler.dataimport.DataImporter.loadDataConfig(DataImporter.java:178)\n\t... 32 more\n-------------------------------------------------------------\norg.apache.solr.handler.dataimport.DataImportHandlerException: Entity must have name '\n\tat org.apache.solr.handler.dataimport.DataConfig$Entity.<init>(DataConfig.java:118)\n\tat org.apache.solr.handler.dataimport.DataConfig$Document.<init>(DataConfig.java:72)\n\tat org.apache.solr.handler.dataimport.DataConfig.readFromXml(DataConfig.java:240)\n\tat org.apache.solr.handler.dataimport.DataImporter.loadDataConfig(DataImporter.java:178)\n\tat org.apache.solr.handler.dataimport.DataImporter.<init>(DataImporter.java:99)\n\tat org.apache.solr.handler.dataimport.DataImportHandler.inform(DataImportHandler.java:113)\n\tat org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:415)\n\tat org.apache.solr.core.SolrCore.<init>(SolrCore.java:574)\n\tat org.apache.solr.core.CoreContainer.create(CoreContainer.java:381)\n\tat org.apache.solr.core.CoreContainer.load(CoreContainer.java:241)\n\tat org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:115)\n\tat org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:83)\n\tat org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:99)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:594)\n\tat org.mortbay.jetty.servlet.Context.startContext(Context.java:139)\n\tat org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1218)\n\tat org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:500)\n\tat org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)\n\tat org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:161)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:117)\n\tat org.mortbay.jetty.Server.doStart(Server.java:210)\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)\n\tat org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:929)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.mortbay.start.Main.invokeMain(Main.java:183)\n\tat org.mortbay.start.Main.start(Main.java:497)\n\tat org.mortbay.start.Main.main(Main.java:115)\n "
        },
        {
            "author": "Noble Paul",
            "id": "comment-12742729",
            "date": "2009-08-13T06:07:30+0000",
            "content": "thanks Tricia for catching this\n\nI have made the name not mandatory. DIH assigns a random name if not specified.  "
        },
        {
            "author": "Grant Ingersoll",
            "id": "comment-12775783",
            "date": "2009-11-10T15:52:08+0000",
            "content": "Bulk close for Solr 1.4 "
        }
    ]
}