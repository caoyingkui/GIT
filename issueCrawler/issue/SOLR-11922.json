{
    "id": "SOLR-11922",
    "title": "parallel - cartesianProduct",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [
            "Parallel SQL",
            "streaming expressions"
        ],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "6.6.2",
        "resolution": "Unresolved",
        "status": "Open"
    },
    "description": "Fix CartesianProductStream in order to run Parallel:\n\nparallel(\n\u00a0\u00a0 cartesianProduct(\n\u00a0\u00a0\u00a0 search(\n\n\u00a0\n\nWhen trying to run que streaming expression above, Solr raises the error bellow:\n\n\u00a0\n\n\njava.io.IOException: java.lang.NullPointerException\n\u00a0\u00a0\u00a0 at org.apache.solr.client.solrj.io.stream.ParallelStream.constructStreams(ParallelStream.java:277)\n\u00a0\u00a0\u00a0 at org.apache.solr.client.solrj.io.stream.CloudSolrStream.open(CloudSolrStream.java:305)\n\u00a0\u00a0\u00a0 at org.apache.solr.client.solrj.io.stream.ExceptionStream.open(ExceptionStream.java:51)\n\u00a0\u00a0\u00a0 at org.apache.solr.handler.StreamHandler$TimerStream.open(StreamHandler.java:535)\n\u00a0\u00a0\u00a0 at org.apache.solr.client.solrj.io.stream.TupleStream.writeMap(TupleStream.java:83)\n\u00a0\u00a0\u00a0 at org.apache.solr.response.JSONWriter.writeMap(JSONResponseWriter.java:547)\n\u00a0\u00a0\u00a0 at org.apache.solr.response.TextResponseWriter.writeVal(TextResponseWriter.java:193)\n\u00a0\u00a0\u00a0 at org.apache.solr.response.JSONWriter.writeNamedListAsMapWithDups(JSONResponseWriter.java:209)\n\u00a0\u00a0\u00a0 at org.apache.solr.response.JSONWriter.writeNamedList(JSONResponseWriter.java:325)\n\u00a0\u00a0\u00a0 at org.apache.solr.response.JSONWriter.writeResponse(JSONResponseWriter.java:120)\n\u00a0\u00a0\u00a0 at org.apache.solr.response.JSONResponseWriter.write(JSONResponseWriter.java:71)\n\u00a0\u00a0\u00a0 at org.apache.solr.response.QueryResponseWriterUtil.writeQueryResponse(QueryResponseWriterUtil.java:65)\n\u00a0\u00a0\u00a0 at org.apache.solr.servlet.HttpSolrCall.writeResponse(HttpSolrCall.java:809)\n\u00a0\u00a0\u00a0 at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:538)\n\u00a0\u00a0\u00a0 at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:361)\n\u00a0\u00a0\u00a0 at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1691)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:582)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:335)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.Server.handle(Server.java:534)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n\u00a0\u00a0\u00a0 at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n\u00a0\u00a0\u00a0 at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.NullPointerException\n\u00a0\u00a0\u00a0 at org.apache.solr.client.solrj.io.stream.CartesianProductStream.toExpression(CartesianProductStream.java:154)\n\u00a0\u00a0\u00a0 at org.apache.solr.client.solrj.io.stream.CartesianProductStream.toExpression(CartesianProductStream.java:134)\n\u00a0\u00a0\u00a0 at org.apache.solr.client.solrj.io.stream.CartesianProductStream.toExpression(CartesianProductStream.java:44)\n\u00a0\u00a0\u00a0 at org.apache.solr.client.solrj.io.stream.ParallelStream.constructStreams(ParallelStream.java:255)",
    "attachments": {},
    "issue_links": {},
    "comments": []
}