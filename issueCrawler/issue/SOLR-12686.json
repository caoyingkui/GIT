{
    "id": "SOLR-12686",
    "title": "SOLRJ 7.x library fails ejb deployment with weblogic",
    "details": {
        "labels": "",
        "priority": "Blocker",
        "components": [
            "clients - java",
            "SolrJ"
        ],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "7.4",
        "resolution": "Invalid",
        "status": "Resolved"
    },
    "description": "Hi Team,\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0We have an ejb application and deployment in weblogic cluster where the application uses SOLRJ java client to communicate with SOLR.\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0Previously we were using solrj 5.4 and it was working fine.\u00a0Recently we enabled kerberos in our cluster so we forced to upgrade our solrj library to 7.x. since the authentication stuff classes are available only in solrj version 7.x\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ours is maven project so are using \"weblogic-maven-plugin\" to compile all our jsp files before deployment and\u00a0build fails due to below error trace\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0And also also we runs the build by removing that \"weblogic-maven-plugin\" in pom. But this time build is success and deployment fails.\n\n\u00a0\n\n[jspc] -webapp specified, searching . for JSPs\n[jspc] No jsp files found, nothing to do\njava.lang.ArrayIndexOutOfBoundsException: 22091\n at com.bea.objectweb.asm.ClassReader.<init>(Unknown Source)\n at com.bea.objectweb.asm.ClassReader.<init>(Unknown Source)\n at weblogic.application.utils.annotation.ClassInfoImpl.<init>(ClassInfoImpl.java:51)\n at weblogic.application.utils.annotation.ClassfinderClassInfos.polulateOneClassInfo(ClassfinderClassInfos\n at weblogic.application.utils.annotation.ClassfinderClassInfos.populateClassInfos(ClassfinderClassInfos.j\n at weblogic.application.utils.annotation.ClassfinderClassInfos.<init>(ClassfinderClassInfos.java:35)\n at weblogic.servlet.internal.War.initializeClassInfosIfNecessary(War.java:443)\n at weblogic.servlet.internal.War.getAnnotatedClasses(War.java:373)\n at weblogic.servlet.internal.WebBaseModuleExtensionContext.getAnnotatedClasses(WebBaseModuleExtensionCont\n at weblogic.ejb.container.deployer.BaseModuleExtensionFactory.hasAnnotatedEJBs(BaseModuleExtensionFactory\n at weblogic.ejb.tools.EJBToolsModuleExtensionFactory.create(EJBToolsModuleExtensionFactory.java:22)\n at weblogic.application.compiler.ModuleState.initExtensions(ModuleState.java:206)\n at weblogic.application.compiler.flow.CompileModuleFlow.compileModules(CompileModuleFlow.java:148)\n at weblogic.application.compiler.flow.CompileModuleFlow.compile(CompileModuleFlow.java:69)\n at weblogic.application.compiler.FlowDriver$FlowStateChange.next(FlowDriver.java:70)\n at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:37)\n at weblogic.application.compiler.FlowDriver.run(FlowDriver.java:27)\n at weblogic.application.compiler.EARCompiler.compile(EARCompiler.java:53)\n at weblogic.application.compiler.flow.AppCompilerFlow.compileInput(AppCompilerFlow.java:101)\n at weblogic.application.compiler.flow.AppCompilerFlow.compile(AppCompilerFlow.java:35)\n at weblogic.application.compiler.FlowDriver$FlowStateChange.next(FlowDriver.java:70)\n at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:37)\n at weblogic.application.compiler.FlowDriver.run(FlowDriver.java:27)\n at weblogic.application.compiler.Appc.runBody(Appc.java:203)\n at weblogic.utils.compiler.Tool.run(Tool.java:158)\n at weblogic.utils.compiler.Tool.run(Tool.java:115)\n at weblogic.application.compiler.Appc.main(Appc.java:263)\n at weblogic.appc.main(appc.java:14)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:483)\n at weblogic.ant.taskdefs.j2ee.CompilerTask.invokeMain(CompilerTask.java:301)\n at weblogic.ant.taskdefs.j2ee.Appc.privateExecute(Appc.java:261)\n at weblogic.ant.taskdefs.j2ee.Appc.execute(Appc.java:164)\n at org.codehaus.mojo.weblogic.AppcMojo.execute(AppcMojo.java:191)\n at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecu\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)\n at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)\n at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)\n at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)\n at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:483)\n at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)\n at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)\n at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)\n at org.codehaus.classworlds.Launcher.main(Launcher.java:375)\n[ERROR] Exception encountered during APPC processing\nweblogic.utils.compiler.ToolFailureException: 22091\n at weblogic.ant.taskdefs.j2ee.CompilerTask.invokeMain(CompilerTask.java:310)\n at weblogic.ant.taskdefs.j2ee.Appc.privateExecute(Appc.java:261)\n at weblogic.ant.taskdefs.j2ee.Appc.execute(Appc.java:164)\n at org.codehaus.mojo.weblogic.AppcMojo.execute(AppcMojo.java:191)\n at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecu\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)\n at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)\n at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)\n at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)\n at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:483)\n at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)\n at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)\n at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)\n at org.codehaus.classworlds.Launcher.main(Launcher.java:375)\nCaused by: weblogic.utils.compiler.ToolFailureException: 22091\n at weblogic.application.compiler.FlowDriver.handleStateChangeException(FlowDriver.java:54)\n at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:38)\n at weblogic.application.compiler.FlowDriver.run(FlowDriver.java:27)\n at weblogic.application.compiler.Appc.runBody(Appc.java:203)\n at weblogic.utils.compiler.Tool.run(Tool.java:158)\n at weblogic.utils.compiler.Tool.run(Tool.java:115)\n at weblogic.application.compiler.Appc.main(Appc.java:263)\n at weblogic.appc.main(appc.java:14)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:483)\n at weblogic.ant.taskdefs.j2ee.CompilerTask.invokeMain(CompilerTask.java:301)\n ... 22 more\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 22091\n at com.bea.objectweb.asm.ClassReader.<init>(Unknown Source)\n at com.bea.objectweb.asm.ClassReader.<init>(Unknown Source)\n at weblogic.application.utils.annotation.ClassInfoImpl.<init>(ClassInfoImpl.java:51)\n at weblogic.application.utils.annotation.ClassfinderClassInfos.polulateOneClassInfo(ClassfinderClassInfos\n at weblogic.application.utils.annotation.ClassfinderClassInfos.populateClassInfos(ClassfinderClassInfos.j\n at weblogic.application.utils.annotation.ClassfinderClassInfos.<init>(ClassfinderClassInfos.java:35)\n at weblogic.servlet.internal.War.initializeClassInfosIfNecessary(War.java:443)\n at weblogic.servlet.internal.War.getAnnotatedClasses(War.java:373)\n at weblogic.servlet.internal.WebBaseModuleExtensionContext.getAnnotatedClasses(WebBaseModuleExtensionCont\n at weblogic.ejb.container.deployer.BaseModuleExtensionFactory.hasAnnotatedEJBs(BaseModuleExtensionFactory\n at weblogic.ejb.tools.EJBToolsModuleExtensionFactory.create(EJBToolsModuleExtensionFactory.java:22)\n at weblogic.application.compiler.ModuleState.initExtensions(ModuleState.java:206)\n at weblogic.application.compiler.flow.CompileModuleFlow.compileModules(CompileModuleFlow.java:148)\n at weblogic.application.compiler.flow.CompileModuleFlow.compile(CompileModuleFlow.java:69)\n at weblogic.application.compiler.FlowDriver$FlowStateChange.next(FlowDriver.java:70)\n at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:37)\n at weblogic.application.compiler.FlowDriver.run(FlowDriver.java:27)\n at weblogic.application.compiler.EARCompiler.compile(EARCompiler.java:53)\n at weblogic.application.compiler.flow.AppCompilerFlow.compileInput(AppCompilerFlow.java:101)\n at weblogic.application.compiler.flow.AppCompilerFlow.compile(AppCompilerFlow.java:35)\n at weblogic.application.compiler.FlowDriver$FlowStateChange.next(FlowDriver.java:70)\n at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:37)\n ... 33 more\n\u2014 Nested Exception \u2014\nweblogic.utils.compiler.ToolFailureException: 22091\n at weblogic.application.compiler.FlowDriver.handleStateChangeException(FlowDriver.java:54)\n at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:38)\n at weblogic.application.compiler.FlowDriver.run(FlowDriver.java:27)\n at weblogic.application.compiler.Appc.runBody(Appc.java:203)\n at weblogic.utils.compiler.Tool.run(Tool.java:158)\n at weblogic.utils.compiler.Tool.run(Tool.java:115)\n at weblogic.application.compiler.Appc.main(Appc.java:263)\n at weblogic.appc.main(appc.java:14)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:483)\n at weblogic.ant.taskdefs.j2ee.CompilerTask.invokeMain(CompilerTask.java:301)\n at weblogic.ant.taskdefs.j2ee.Appc.privateExecute(Appc.java:261)\n at weblogic.ant.taskdefs.j2ee.Appc.execute(Appc.java:164)\n at org.codehaus.mojo.weblogic.AppcMojo.execute(AppcMojo.java:191)\n at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecu\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:\n at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)\n at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)\n at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)\n at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)\n at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:483)\n at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)\n at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)\n at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)\n at org.codehaus.classworlds.Launcher.main(Launcher.java:375)\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 22091\n at com.bea.objectweb.asm.ClassReader.<init>(Unknown Source)\n at com.bea.objectweb.asm.ClassReader.<init>(Unknown Source)\n at weblogic.application.utils.annotation.ClassInfoImpl.<init>(ClassInfoImpl.java:51)\n at weblogic.application.utils.annotation.ClassfinderClassInfos.polulateOneClassInfo(ClassfinderClassInfos\n at weblogic.application.utils.annotation.ClassfinderClassInfos.populateClassInfos(ClassfinderClassInfos.j\n at weblogic.application.utils.annotation.ClassfinderClassInfos.<init>(ClassfinderClassInfos.java:35)\n at weblogic.servlet.internal.War.initializeClassInfosIfNecessary(War.java:443)\n at weblogic.servlet.internal.War.getAnnotatedClasses(War.java:373)\n at weblogic.servlet.internal.WebBaseModuleExtensionContext.getAnnotatedClasses(WebBaseModuleExtensionCont\n at weblogic.ejb.container.deployer.BaseModuleExtensionFactory.hasAnnotatedEJBs(BaseModuleExtensionFactory\n at weblogic.ejb.tools.EJBToolsModuleExtensionFactory.create(EJBToolsModuleExtensionFactory.java:22)\n at weblogic.application.compiler.ModuleState.initExtensions(ModuleState.java:206)\n at weblogic.application.compiler.flow.CompileModuleFlow.compileModules(CompileModuleFlow.java:148)\n at weblogic.application.compiler.flow.CompileModuleFlow.compile(CompileModuleFlow.java:69)\n at weblogic.application.compiler.FlowDriver$FlowStateChange.next(FlowDriver.java:70)\n at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:37)\n at weblogic.application.compiler.FlowDriver.run(FlowDriver.java:27)\n at weblogic.application.compiler.EARCompiler.compile(EARCompiler.java:53)\n at weblogic.application.compiler.flow.AppCompilerFlow.compileInput(AppCompilerFlow.java:101)\n at weblogic.application.compiler.flow.AppCompilerFlow.compile(AppCompilerFlow.java:35)\n at weblogic.application.compiler.FlowDriver$FlowStateChange.next(FlowDriver.java:70)\n at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:42)\n at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:37)\n\n\u00a0\n\n\u00a0\n\nPlease help us to solve this problem.\n\n\u00a0\n\n\u00a0\n\nThanks & Regrads,\n\nJ.Ganesh Kumar.",
    "attachments": {
        "Capture.PNG": "https://issues.apache.org/jira/secure/attachment/12936413/Capture.PNG"
    },
    "issue_links": {},
    "comments": [
        {
            "date": "2018-08-21T11:14:43+0000",
            "content": "Please do not file a Jira unless there is a confirmed bug in Lucene/Solr code. There is no sign of a Solr bug here, what I can see is an Exception from BEA's own code:\n\njava.lang.ArrayIndexOutOfBoundsException: 22091\nat com.bea.objectweb.asm.ClassReader.<init>(Unknown Source)\n\nI'm closing this as \"invalid\" and kindly ask you to:\n\n\tContact BEA web logic support regarding their bug causing this failure\n\tSend an email to our users mailing list solr-user@ to ask for advice. Could be that other solr users have worked around the same issue with web logic earlier.\n\n\n\n\u00a0 ",
            "author": "Jan H\u00f8ydahl",
            "id": "comment-16587297"
        }
    ]
}