{
    "id": "LUCENE-7269",
    "title": "TestPointQueries failures",
    "details": {
        "resolution": "Fixed",
        "affect_versions": "6.0",
        "components": [],
        "labels": "",
        "fix_versions": [
            "6.1",
            "7.0"
        ],
        "priority": "Major",
        "status": "Closed",
        "type": "Bug"
    },
    "description": "My Jenkins found a reproducing seed on master:\n\n\nChecking out Revision a48245a1bfbef0259d38ef36fec814f3891ab80c (refs/remotes/origin/master)\n[...]\n   [junit4] Suite: org.apache.lucene.search.TestPointQueries\n   [junit4] IGNOR/A 0.00s J1 | TestPointQueries.testRandomBinaryBig\n   [junit4]    > Assumption #1: 'nightly' test group is disabled (@Nightly())\n   [junit4]   2> maj 02, 2016 3:29:13 PM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[T0,5,TGRP-TestPointQueries]\n   [junit4]   2> java.lang.AssertionError\n   [junit4]   2> \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]   2> \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$2._run(TestPointQueries.java:805)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$2.run(TestPointQueries.java:758)\n   [junit4]   2> \n   [junit4]   2> maj 02, 2016 3:29:13 PM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[T1,5,TGRP-TestPointQueries]\n   [junit4]   2> java.lang.AssertionError\n   [junit4]   2> \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]   2> \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$2._run(TestPointQueries.java:805)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$2.run(TestPointQueries.java:758)\n   [junit4]   2> \n   [junit4]   2> maj 02, 2016 3:29:13 PM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[T3,5,TGRP-TestPointQueries]\n   [junit4]   2> java.lang.AssertionError\n   [junit4]   2> \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]   2> \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$2._run(TestPointQueries.java:805)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$2.run(TestPointQueries.java:758)\n   [junit4]   2> \n   [junit4]   2> maj 02, 2016 3:29:13 PM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[T2,5,TGRP-TestPointQueries]\n   [junit4]   2> java.lang.AssertionError\n   [junit4]   2> \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]   2> \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$2._run(TestPointQueries.java:805)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$2.run(TestPointQueries.java:758)\n   [junit4]   2> \n   [junit4]   2> NOTE: download the large Jenkins line-docs file by running 'ant get-jenkins-line-docs' in the lucene directory.\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestPointQueries -Dtests.method=testRandomBinaryTiny -Dtests.seed=61528898A1A30059 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=pl -Dtests.timezone=America/Phoenix -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] ERROR   0.16s J1 | TestPointQueries.testRandomBinaryTiny <<<\n   [junit4]    > Throwable #1: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=463, name=T0, state=RUNNABLE, group=TGRP-TestPointQueries]\n   [junit4]    > Caused by: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]    > \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]    > \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$2._run(TestPointQueries.java:805)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$2.run(TestPointQueries.java:758)Throwable #2: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=464, name=T1, state=RUNNABLE, group=TGRP-TestPointQueries]\n   [junit4]    > Caused by: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]    > \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]    > \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$2._run(TestPointQueries.java:805)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$2.run(TestPointQueries.java:758)Throwable #3: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=465, name=T2, state=RUNNABLE, group=TGRP-TestPointQueries]\n   [junit4]    > Caused by: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]    > \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]    > \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$2._run(TestPointQueries.java:805)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$2.run(TestPointQueries.java:758)Throwable #4: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=466, name=T3, state=RUNNABLE, group=TGRP-TestPointQueries]\n   [junit4]    > Caused by: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]    > \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]    > \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$2._run(TestPointQueries.java:805)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$2.run(TestPointQueries.java:758)\n   [junit4] IGNOR/A 0.00s J1 | TestPointQueries.testRandomLongsBig\n   [junit4]    > Assumption #1: 'nightly' test group is disabled (@Nightly())\n   [junit4]   2> NOTE: test params are: codec=Lucene60, sim=ClassicSimilarity, locale=pl, timezone=America/Phoenix\n   [junit4]   2> NOTE: Linux 4.1.0-custom2-amd64 amd64/Oracle Corporation 1.8.0_77 (64-bit)/cpus=16,threads=1,free=238466144,total=339214336\n   [junit4]   2> NOTE: All tests run in this JVM: [TestOfflineSorter, TestMathUtil, TestMergeSchedulerExternal, Test2BTerms, TestPayloads, TestFilterLeafReader, TestMixedCodecs, TestSegmentInfos, TestGeoEncodingUtils, TestFastCompressionMode, TestMmapDirectory, TestStressIndexing2, TestCrash, TestBlockPostingsFormat, TestDemoParallelLeafReader, TestBooleanMinShouldMatch, TestCharsRefBuilder, TestLongPostings, TestPersistentSnapshotDeletionPolicy, TestDocumentsWriterStallControl, TestSubScorerFreqs, TestLevenshteinAutomata, TestAllFilesDetectTruncation, TestDocValues, TestRegExp, TestSearch, TestMergePolicyWrapper, TestNRTCachingDirectory, TestExceedMaxTermLength, TestFieldsReader, Test2BPostings, TestArrayUtil, TestSearchAfter, TestVersion, TestNewestSegment, TestIndexWriterReader, TestLegacyNumericUtils, TestScoreCachingWrappingScorer, TestSimpleFSDirectory, TestSpanNotQuery, TestMixedDocValuesUpdates, TestConsistentFieldNumbers, TestPointQueries]\n   [junit4]   2> NOTE: download the large Jenkins line-docs file by running 'ant get-jenkins-line-docs' in the lucene directory.\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestPointQueries -Dtests.seed=61528898A1A30059 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=pl -Dtests.timezone=America/Phoenix -Dtests.asserts=true -Dtests.file.encoding=US-ASCII\n   [junit4] ERROR   0.00s J1 | TestPointQueries (suite) <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: The test or suite printed 12284 bytes to stdout and stderr, even though the limit was set to 8192 bytes. Increase the limit with @Limit, ignore it completely with @SuppressSysoutChecks or run with -Dtests.verbose=true\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([61528898A1A30059]:0)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:745)\n   [junit4] Completed [50/419 (1!)] on J1 in 6.63s, 45 tests, 1 failure, 1 error, 2 skipped <<< FAILURES!",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "id": "comment-15267724",
            "author": "Steve Rowe",
            "date": "2016-05-02T23:26:58+0000",
            "content": "This code - added in LUCENE-7262 - is where the assertion is tripped:\n\nDocIdSetBuilder.java\n101:  DocIdSetBuilder(int maxDoc, int docCount, long valueCount) {\n102:    this.maxDoc = maxDoc;\n103:    this.multivalued = docCount < 0 || docCount != valueCount;\n104:    this.numValuesPerDoc = (docCount < 0 || valueCount < 0)\n105:        // assume one value per doc, this means the cost will be overestimated\n106:        // if the docs are actually multi-valued\n107:        ? 1\n108:       // otherwise compute from index stats\n109:        : (double) valueCount / docCount;\n110:    assert numValuesPerDoc >= 1;\n\n\n\nThe same assertion was tripped in TestPointQueries.testRandomLongsTiny() on Policeman Jenkins http://jenkins.thetaphi.de/job/Lucene-Solr-master-Linux/16643/:\n\n\n   [junit4] Suite: org.apache.lucene.search.TestPointQueries\n   [junit4]   2> May 03, 2016 4:32:50 AM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[T1,5,TGRP-TestPointQueries]\n   [junit4]   2> java.lang.AssertionError\n   [junit4]   2> \tat __randomizedtesting.SeedInfo.seed([FFA825CE713FFF2F]:0)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]   2> \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$1._run(TestPointQueries.java:554)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$1.run(TestPointQueries.java:503)\n   [junit4]   2> \n   [junit4]   2> May 03, 2016 4:32:50 AM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\n   [junit4]   2> WARNING: Uncaught exception in thread: Thread[T0,5,TGRP-TestPointQueries]\n   [junit4]   2> java.lang.AssertionError\n   [junit4]   2> \tat __randomizedtesting.SeedInfo.seed([FFA825CE713FFF2F]:0)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]   2> \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]   2> \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]   2> \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]   2> \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]   2> \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]   2> \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$1._run(TestPointQueries.java:554)\n   [junit4]   2> \tat org.apache.lucene.search.TestPointQueries$1.run(TestPointQueries.java:503)\n   [junit4]   2> \n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestPointQueries -Dtests.method=testRandomLongsTiny -Dtests.seed=FFA825CE713FFF2F -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=en-ZM -Dtests.timezone=Asia/Kuala_Lumpur -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] ERROR   0.03s J2 | TestPointQueries.testRandomLongsTiny <<<\n   [junit4]    > Throwable #1: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=489, name=T0, state=RUNNABLE, group=TGRP-TestPointQueries]\n   [junit4]    > Caused by: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([FFA825CE713FFF2F]:0)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]    > \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]    > \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$1._run(TestPointQueries.java:554)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$1.run(TestPointQueries.java:503)Throwable #2: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=490, name=T1, state=RUNNABLE, group=TGRP-TestPointQueries]\n   [junit4]    > Caused by: java.lang.AssertionError\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([FFA825CE713FFF2F]:0)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:110)\n   [junit4]    > \tat org.apache.lucene.util.DocIdSetBuilder.<init>(DocIdSetBuilder.java:98)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.buildMatchingDocIdSet(PointRangeQuery.java:109)\n   [junit4]    > \tat org.apache.lucene.search.PointRangeQuery$1.scorer(PointRangeQuery.java:213)\n   [junit4]    > \tat org.apache.lucene.search.Weight.bulkScorer(Weight.java:135)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.cache(LRUQueryCache.java:683)\n   [junit4]    > \tat org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.bulkScorer(LRUQueryCache.java:766)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.AssertingWeight.bulkScorer(AssertingWeight.java:68)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:666)\n   [junit4]    > \tat org.apache.lucene.search.AssertingIndexSearcher.search(AssertingIndexSearcher.java:91)\n   [junit4]    > \tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$1._run(TestPointQueries.java:554)\n   [junit4]    > \tat org.apache.lucene.search.TestPointQueries$1.run(TestPointQueries.java:503)\n   [junit4] IGNOR/A 0.00s J2 | TestPointQueries.testRandomLongsBig\n   [junit4]    > Assumption #1: 'nightly' test group is disabled (@Nightly())\n   [junit4] IGNOR/A 0.00s J2 | TestPointQueries.testRandomBinaryBig\n   [junit4]    > Assumption #1: 'nightly' test group is disabled (@Nightly())\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene60): {id=Lucene50(blocksize=128)}, docValues:{id=DocValuesFormat(name=Lucene54), value=DocValuesFormat(name=Asserting)}, maxPointsInLeafNode=32, maxMBSortInHeap=7.107446227776487, sim=ClassicSimilarity, locale=en-ZM, timezone=Asia/Kuala_Lumpur\n   [junit4]   2> NOTE: Linux 4.2.0-35-generic i386/Oracle Corporation 9-ea (32-bit)/cpus=12,threads=1,free=67514616,total=153092096\n   [junit4]   2> NOTE: All tests run in this JVM: [TestInfoStream, TestGeoUtils, TestFrequencyTrackingRingBuffer, TestNRTThreads, TestNumericUtils, TestIOUtils, TestTopDocsMerge, Test2BPoints, TestNearSpansOrdered, TestMutableValues, TestDocInverterPerFieldErrorInfo, TestCachingCollector, TestSpanExplanationsOfNonMatches, TestWildcard, TestIndexWriterMerging, TestIndexWriterOnDiskFull, Test2BPositions, TestBytesStore, TestTimSorter, TestTotalHitCountCollector, TestMixedCodecs, TestTopDocsCollector, TestSpanNearQuery, TestBooleanOr, TestControlledRealTimeReopenThread, TestDateTools, TestCharTermAttributeImpl, TestRoaringDocIdSet, TestSpans, TestFuzzyQuery, TestIndexWriterExceptions2, TestSloppyPhraseQuery, Test2BPagedBytes, TestSearchForDuplicates, TestRollingUpdates, TestArrayUtil, TestNumericRangeQuery32, TestTermsEnum2, TestSimpleFSLockFactory, TestIndexWriterReader, TestIndexableField, TestRegExp, TestMultiLevelSkipList, Test2BBinaryDocValues, TestSparseFixedBitDocIdSet, TestElevationComparator, TestBytesRefHash, TestRegexpRandom2, TestSearch, TestIndexFileDeleter, TestTwoPhaseCommitTool, TestIntBlockPool, TestPointQueries]\n   [junit4] Completed [142/419 (1!)] on J2 in 9.95s, 45 tests, 1 error, 2 skipped <<< FAILURES!\n\n "
        },
        {
            "id": "comment-15268544",
            "author": "ASF subversion and git services",
            "date": "2016-05-03T11:31:16+0000",
            "content": "Commit b0b8d5795edbc8289c96e21c4303caebb7941712 in lucene-solr's branch refs/heads/master from Mike McCandless\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b0b8d57 ]\n\nLUCENE-7269: also handle annoying schema ghost corner case where number of docs with points in a segment is 0 "
        },
        {
            "id": "comment-15268545",
            "author": "ASF subversion and git services",
            "date": "2016-05-03T11:32:17+0000",
            "content": "Commit 920051f0504a3cc18bdc256e3e25a24cc9b4c69f in lucene-solr's branch refs/heads/branch_6x from Mike McCandless\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=920051f ]\n\nLUCENE-7269: also handle annoying schema ghost corner case where number of docs with points in a segment is 0 "
        },
        {
            "id": "comment-15268547",
            "author": "Michael McCandless",
            "date": "2016-05-03T11:32:50+0000",
            "content": "Thanks Steve Rowe. "
        },
        {
            "id": "comment-15270157",
            "author": "Adrien Grand",
            "date": "2016-05-04T05:58:54+0000",
            "content": "Thanks Mike and Steve. "
        },
        {
            "id": "comment-15277146",
            "author": "Hoss Man",
            "date": "2016-05-09T22:03:01+0000",
            "content": "\nManually correcting fixVersion per Step #S5 of LUCENE-7271 "
        }
    ]
}