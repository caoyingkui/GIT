{
    "id": "SOLR-5407",
    "title": "Strange error condition with cloud replication not working quite right",
    "details": {
        "affect_versions": "4.5",
        "status": "Closed",
        "fix_versions": [],
        "components": [],
        "type": "Bug",
        "priority": "Major",
        "labels": "",
        "resolution": "Unresolved"
    },
    "description": "I have a clodu deployment of 4.5 on EC2. Architecture is 3 dedicated ZK nodes, and a pair of solr nodes.  I'll apologize in advance that this error report is not going to have a lot of detail, I'm really hoping that the scenario/description will trigger some \"likely\" possible explanation.\n\nThe situation I got into was that the server had decided to fail over, so my app servers were all taking to what should have been the primary for most of the shards/collections, but actually was the replica.\n\nHere's where it gets odd - no errors being returned to the client code for any of the searches or document updates - and the current primary server was definitely receiving all of the updates - even though they were being submitted to the inactive/replica node. (clients talking to solr-p1, which was not primary at the time, and writes were being passed through to solr-r1, which was primary at the time.)\n\nAll sounds good so far right? Except - the replica server at the time, through which the writes were passing - never got any of those content updates. It had an old unmodified copy of the index. \n\nI restarted solr-p1 (was the replica at the time) - no change in behavior. Behavior did not change until I killed and restarted the current primary (solr-r1) to force it to fail over.\n\nAt that point, everything was all happy again and working properly. \n\nUntil this morning, when one of the developers provisioned a new collection, which happened to put it's primary on solr-r1. Again, clients all pointing at solr-p1. The developer reported that the documents were going into the index, but not visible on the replica server.",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "author": "Nathan Neulinger",
            "id": "comment-13809767",
            "date": "2013-10-30T23:52:54+0000",
            "content": "The only error we could find in the logs was this:\n\n09:08:01 \tWARN \tPeerSync \tno frame of reference to tell if we've missed updates\n09:25:49 \tWARN \tOverseer \t\n09:25:49 \tERROR \tSolrDispatchFilter \tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\n09:25:49 \tERROR \tSolrDispatchFilter \tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\n09:25:49 \tWARN \tOverseerCollectionProcessor \tOverseer cannot talk to ZK\n09:25:49 \tERROR \tSolrDispatchFilter \tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\n09:25:49 \tERROR \tSolrDispatchFilter \tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\n09:25:49 \tERROR \tSolrDispatchFilter \tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\n09:25:49 \tERROR \tSolrDispatchFilter \tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\n09:26:37 \tWARN \tPeerSync \tno frame of reference to tell if we've missed updates\n "
        },
        {
            "author": "Nathan Neulinger",
            "id": "comment-13809799",
            "date": "2013-10-31T00:30:46+0000",
            "content": "Digging further, it looks like it all keys around some sort of communications problem with zookeeper - looks like it all started at the end of this log snippet below (reverse time order) when it's reporting that 'Our previous ZooKeeper session was expired. Attempting to reconnect to recover relationship with ZooKeeper'. \n\n\n\n2013-10-29T16:25:50.344Z\tGoing to wait for coreNodeName: core_node2, state: down, checkLive: null, onlyIfLeader: null\n2013-10-29T16:25:50.329Z\tpublishing core=myappqa-master_v8_shard1_replica1 state=down\n2013-10-29T16:25:50.329Z\tCreating new http client, config:maxConnections=128&maxConnectionsPerHost=32&followRedirects=false\n2013-10-29T16:25:50.328Z\tWaited coreNodeName: core_node1, state: down, checkLive: null, onlyIfLeader: null for: 1 seconds.\n2013-10-29T16:25:49.884Z\tA cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)\n2013-10-29T16:25:49.825Z\tUpdating cloud state from ZooKeeper...\n2013-10-29T16:25:49.825Z\tUpdate state numShards=1 message={\n\"operation\":\"state\",\n\"state\":\"down\",\n\"base_url\":\"http://10.170.2.54:8983/solr\",\n\"core\":\"hiv...\n2013-10-29T16:25:49.324Z\tGoing to wait for coreNodeName: core_node1, state: down, checkLive: null, onlyIfLeader: null\n2013-10-29T16:25:49.309Z\tCreating new http client, config:maxConnections=128&maxConnectionsPerHost=32&followRedirects=false\n2013-10-29T16:25:49.308Z\tpublishing core=myappqa-master_v6_shard1_replica2 state=down\n2013-10-29T16:25:49.308Z\tWaited coreNodeName: core_node1, state: down, checkLive: null, onlyIfLeader: null for: 2 seconds.\n2013-10-29T16:25:48.302Z\tA cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)\n2013-10-29T16:25:48.239Z\tUpdating cloud state from ZooKeeper...\n2013-10-29T16:25:48.239Z\tUpdate state numShards=1 message={\n\"operation\":\"state\",\n\"state\":\"down\",\n\"base_url\":\"http://10.170.2.54:8983/solr\",\n\"core\":\"hiv...\n2013-10-29T16:25:47.304Z\tGoing to wait for coreNodeName: core_node1, state: down, checkLive: null, onlyIfLeader: null\n2013-10-29T16:25:47.289Z\tCreating new http client, config:maxConnections=128&maxConnectionsPerHost=32&followRedirects=false\n2013-10-29T16:25:47.289Z\tpublishing core=myappstaging-profile_v7_shard1_replica1 state=down\n2013-10-29T16:25:47.287Z\tWaited coreNodeName: core_node2, state: down, checkLive: null, onlyIfLeader: null for: 2 seconds.\n2013-10-29T16:25:46.469Z\tA cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)\n2013-10-29T16:25:46.406Z\tUpdate state numShards=1 message={\n\"operation\":\"state\",\n\"state\":\"down\",\n\"base_url\":\"http://10.170.2.54:8983/solr\",\n\"core\":\"hiv...\n2013-10-29T16:25:45.925Z\tUpdating cloud state from ZooKeeper...\n2013-10-29T16:25:45.286Z\tGoing to wait for coreNodeName: core_node2, state: down, checkLive: null, onlyIfLeader: null\n2013-10-29T16:25:45.270Z\tpublishing core=myappstaging-profile_v8_shard1_replica1 state=down\n2013-10-29T16:25:45.270Z\tCreating new http client, config:maxConnections=128&maxConnectionsPerHost=32&followRedirects=false\n2013-10-29T16:25:45.269Z\tWaited coreNodeName: core_node2, state: down, checkLive: null, onlyIfLeader: null for: 2 seconds.\n2013-10-29T16:25:45.039Z\tA cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)\n2013-10-29T16:25:44.994Z\tmakePath: /collections/myappproduction-production_v8/leaders/shard1\n2013-10-29T16:25:44.994Z\tI am the new leader: http://10.136.6.24:8983/solr/myappproduction-production_v8_shard1_replica1/ shard1\n2013-10-29T16:25:44.994Z\thttp://10.136.6.24:8983/solr/myappproduction-production_v8_shard1_replica1/ has no replicas\n2013-10-29T16:25:44.991Z\tSync replicas to http://10.136.6.24:8983/solr/myappproduction-production_v8_shard1_replica1/\n2013-10-29T16:25:44.991Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.991Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.991Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.991Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.991Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.940Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-feature-completion_v9_shard1_replica1/ shard1\n2013-10-29T16:25:44.940Z\tmakePath: /collections/myappstaging-feature-completion_v9/leaders/shard1\n2013-10-29T16:25:44.939Z\thttp://10.136.6.24:8983/solr/myappstaging-feature-completion_v9_shard1_replica1/ has no replicas\n2013-10-29T16:25:44.939Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.939Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.939Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.939Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-feature-completion_v9_shard1_replica1/\n2013-10-29T16:25:44.938Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.938Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.880Z\tmakePath: /collections/myappstaging-profile_v7/leaders/shard1\n2013-10-29T16:25:44.873Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-profile_v7_shard1_replica2/ shard1\n2013-10-29T16:25:44.872Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-profile_v7_shard1_replica2/\n2013-10-29T16:25:44.872Z\tStopping recovery for zkNodeName=core_node2core=myappstaging-profile_v7_shard1_replica2\n2013-10-29T16:25:44.872Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.872Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.872Z\thttp://10.136.6.24:8983/solr/myappstaging-profile_v7_shard1_replica2/ has no replicas\n2013-10-29T16:25:44.872Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.872Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.863Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.809Z\tmakePath: /collections/myappqa-master_v6/leaders/shard1\n2013-10-29T16:25:44.808Z\tStopping recovery for zkNodeName=core_node2core=myappqa-master_v6_shard1_replica1\n2013-10-29T16:25:44.808Z\thttp://10.136.6.24:8983/solr/myappqa-master_v6_shard1_replica1/ has no replicas\n2013-10-29T16:25:44.808Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.808Z\tI am the new leader: http://10.136.6.24:8983/solr/myappqa-master_v6_shard1_replica1/ shard1\n2013-10-29T16:25:44.808Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.808Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.808Z\tSync replicas to http://10.136.6.24:8983/solr/myappqa-master_v6_shard1_replica1/\n2013-10-29T16:25:44.808Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.807Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.749Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-feature-completion_v8_shard1_replica1/ shard1\n2013-10-29T16:25:44.749Z\tmakePath: /collections/myappstaging-feature-completion_v8/leaders/shard1\n2013-10-29T16:25:44.749Z\thttp://10.136.6.24:8983/solr/myappstaging-feature-completion_v8_shard1_replica1/ has no replicas\n2013-10-29T16:25:44.747Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.747Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.747Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.747Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-feature-completion_v8_shard1_replica1/\n2013-10-29T16:25:44.747Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.746Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.694Z\tmakePath: /collections/myappproduction-production_v9/leaders/shard1\n2013-10-29T16:25:44.693Z\thttp://10.136.6.24:8983/solr/myappproduction-production_v9_shard1_replica2/ has no replicas\n2013-10-29T16:25:44.693Z\tI am the new leader: http://10.136.6.24:8983/solr/myappproduction-production_v9_shard1_replica2/ shard1\n2013-10-29T16:25:44.692Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.692Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.692Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.692Z\tSync replicas to http://10.136.6.24:8983/solr/myappproduction-production_v9_shard1_replica2/\n2013-10-29T16:25:44.692Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.691Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.647Z\tmakePath: /collections/myappstaging-alpha4_v9/leaders/shard1\n2013-10-29T16:25:44.647Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-alpha4_v9_shard1_replica1/ shard1\n2013-10-29T16:25:44.647Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha4_v9_shard1_replica1/ has no replicas\n2013-10-29T16:25:44.632Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.632Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-alpha4_v9_shard1_replica1/\n2013-10-29T16:25:44.632Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.632Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.631Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.630Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.572Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-master_v9_shard1_replica1/ shard1\n2013-10-29T16:25:44.572Z\tmakePath: /collections/myappstaging-master_v9/leaders/shard1\n2013-10-29T16:25:44.571Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.571Z\thttp://10.136.6.24:8983/solr/myappstaging-master_v9_shard1_replica1/ has no replicas\n2013-10-29T16:25:44.571Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.571Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-master_v9_shard1_replica1/\n2013-10-29T16:25:44.571Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.571Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.568Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.511Z\tmakePath: /collections/myappstaging-preetalpha4_v9/leaders/shard1\n2013-10-29T16:25:44.511Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-preetalpha4_v9_shard1_replica2/ shard1\n2013-10-29T16:25:44.511Z\thttp://10.136.6.24:8983/solr/myappstaging-preetalpha4_v9_shard1_replica2/ has no replicas\n2013-10-29T16:25:44.510Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.509Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.509Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.509Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-preetalpha4_v9_shard1_replica2/\n2013-10-29T16:25:44.509Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.509Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.450Z\tmakePath: /collections/collection1/leaders/shard1\n2013-10-29T16:25:44.450Z\tI am the new leader: http://10.136.6.24:8983/solr/collection1/ shard1\n2013-10-29T16:25:44.444Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:44.444Z\thttp://10.136.6.24:8983/solr/collection1/ has no replicas\n2013-10-29T16:25:44.444Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:44.444Z\tSync replicas to http://10.136.6.24:8983/solr/collection1/\n2013-10-29T16:25:44.444Z\tI may be the new leader - try and sync\n2013-10-29T16:25:44.443Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:44.434Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:44.418Z\tA cluster state change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/live_nodes, has occurred - updating... (live nodes size: 1)\n2013-10-29T16:25:44.418Z\tUpdating live nodes... (1)\n2013-10-29T16:25:43.715Z\tmakePath: /collections/myappqa-master_v9/leaders/shard1\n2013-10-29T16:25:43.714Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:43.714Z\tI may be the new leader - try and sync\n2013-10-29T16:25:43.714Z\tI am the new leader: http://10.136.6.24:8983/solr/myappqa-master_v9_shard1_replica1/ shard1\n2013-10-29T16:25:43.714Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:43.714Z\tSync replicas to http://10.136.6.24:8983/solr/myappqa-master_v9_shard1_replica1/\n2013-10-29T16:25:43.714Z\thttp://10.136.6.24:8983/solr/myappqa-master_v9_shard1_replica1/ has no replicas\n2013-10-29T16:25:43.714Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:43.713Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:43.654Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-alpha3_v8_shard1_replica2/ shard1\n2013-10-29T16:25:43.654Z\tmakePath: /collections/myappstaging-alpha3_v8/leaders/shard1\n2013-10-29T16:25:43.654Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha3_v8_shard1_replica2/ has no replicas\n2013-10-29T16:25:43.653Z\tI may be the new leader - try and sync\n2013-10-29T16:25:43.653Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:43.653Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:43.653Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-alpha3_v8_shard1_replica2/\n2013-10-29T16:25:43.653Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:43.652Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:43.591Z\tmakePath: /collections/myappqa-master_v8/leaders/shard1\n2013-10-29T16:25:43.591Z\tI am the new leader: http://10.136.6.24:8983/solr/myappqa-master_v8_shard1_replica2/ shard1\n2013-10-29T16:25:43.591Z\thttp://10.136.6.24:8983/solr/myappqa-master_v8_shard1_replica2/ has no replicas\n2013-10-29T16:25:43.575Z\tI may be the new leader - try and sync\n2013-10-29T16:25:43.575Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:43.575Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:43.575Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:43.575Z\tSync replicas to http://10.136.6.24:8983/solr/myappqa-master_v8_shard1_replica2/\n2013-10-29T16:25:43.574Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:43.505Z\tmakePath: /collections/myappstaging-profile_v8/leaders/shard1\n2013-10-29T16:25:43.498Z\thttp://10.136.6.24:8983/solr/myappstaging-profile_v8_shard1_replica2/ has no replicas\n2013-10-29T16:25:43.498Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-profile_v8_shard1_replica2/\n2013-10-29T16:25:43.498Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-profile_v8_shard1_replica2/ shard1\n2013-10-29T16:25:43.498Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:43.497Z\tStopping recovery for zkNodeName=core_node1core=myappstaging-profile_v8_shard1_replica2\n2013-10-29T16:25:43.497Z\tI may be the new leader - try and sync\n2013-10-29T16:25:43.497Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:43.497Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:43.489Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:43.472Z\tUpdate state numShards=1 message={\n\"operation\":\"state\",\n\"state\":\"down\",\n\"base_url\":\"http://10.170.2.54:8983/solr\",\n\"core\":\"hiv...\n2013-10-29T16:25:43.456Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-alpha4-adam_v9_shard1_replica2/ shard1\n2013-10-29T16:25:43.456Z\tmakePath: /collections/myappstaging-alpha4-adam_v9/leaders/shard1\n2013-10-29T16:25:43.456Z\t[myappstaging-alpha4-adam_v9_shard1_replica1] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=...\n2013-10-29T16:25:43.440Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:43.440Z\tPeerSync: core=myappstaging-alpha4-adam_v9_shard1_replica2 url=http://10.136.6.24:8983/solr DONE. sync succeeded\n2013-10-29T16:25:43.440Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha4-adam_v9_shard1_replica2/ has no replicas\n2013-10-29T16:25:43.440Z\tPeerSync: core=myappstaging-alpha4-adam_v9_shard1_replica2 url=http://10.136.6.24:8983/solr Our versions are newer. ourLowThreshold=14495694169781043...\n2013-10-29T16:25:43.439Z\tPeerSync: core=myappstaging-alpha4-adam_v9_shard1_replica2 url=http://10.136.6.24:8983/solr Received 17 versions from 10.170.2.54:8983/solr/myappstag...\n2013-10-29T16:25:43.330Z\tUpdating cloud state from ZooKeeper...\n2013-10-29T16:25:43.322Z\tPeerSync: core=myappstaging-alpha4-adam_v9_shard1_replica2 url=http://10.136.6.24:8983/solr START replicas=[http://10.170.2.54:8983/solr/myappstaging-...\n2013-10-29T16:25:43.321Z\tI may be the new leader - try and sync\n2013-10-29T16:25:43.321Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-alpha4-adam_v9_shard1_replica2/\n2013-10-29T16:25:43.321Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:43.321Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:43.314Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:43.314Z\tProcess current queue of collection creations\n2013-10-29T16:25:43.314Z\tStarting to work on the main queue\n2013-10-29T16:25:43.264Z\tGoing to wait for coreNodeName: core_node2, state: down, checkLive: null, onlyIfLeader: null\n2013-10-29T16:25:43.262Z\tCreating new http client, config:maxConnections=128&maxConnectionsPerHost=32&followRedirects=false\n2013-10-29T16:25:43.247Z\tOverseer (id=234546968080679008-10.136.6.24:8983_solr-n_0000000021) starting\n2013-10-29T16:25:43.247Z\tmakePath: /overseer_elect/leader\n2013-10-29T16:25:43.203Z\tPeerSync: core=myappstaging-preetalpha4_v8_shard1_replica1 url=http://10.170.2.54:8983/solr DONE. sync succeeded\n2013-10-29T16:25:43.203Z\t[myappstaging-preetalpha4_v8_shard1_replica1] webapp=/solr path=/get params={sync=http://10.136.6.24:8983/solr/myappstaging-preetalpha4_v8_shard1_repl...\n2013-10-29T16:25:43.203Z\tmakePath: /collections/myappstaging-preetalpha4_v8/leaders/shard1\n2013-10-29T16:25:43.189Z\tPeerSync: core=myappstaging-preetalpha4_v8_shard1_replica1 url=http://10.170.2.54:8983/solr Our versions are newer. ourLowThreshold=14490017764527308...\n2013-10-29T16:25:43.189Z\thttp://10.136.6.24:8983/solr/myappstaging-preetalpha4_v8_shard1_replica2/: sync completed with http://10.170.2.54:8983/solr/myappstaging-preetalpha4_...\n2013-10-29T16:25:43.189Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-preetalpha4_v8_shard1_replica2/ shard1\n2013-10-29T16:25:43.187Z\tPeerSync: core=myappstaging-preetalpha4_v8_shard1_replica1 url=http://10.170.2.54:8983/solr Received 10 versions from 10.136.6.24:8983/solr/myappstag...\n2013-10-29T16:25:43.187Z\t[myappstaging-preetalpha4_v8_shard1_replica2] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=...\n2013-10-29T16:25:43.187Z\tPeerSync: core=myappstaging-preetalpha4_v8_shard1_replica1 url=http://10.170.2.54:8983/solr START replicas=[http://10.136.6.24:8983/solr/myappstaging-...\n2013-10-29T16:25:43.187Z\t[myappstaging-preetalpha4_v8_shard1_replica1] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=...\n2013-10-29T16:25:43.187Z\thttp://10.136.6.24:8983/solr/myappstaging-preetalpha4_v8_shard1_replica2/: try and ask http://10.170.2.54:8983/solr/myappstaging-preetalpha4_v8_shard1...\n2013-10-29T16:25:43.187Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:43.170Z\tPeerSync: core=myappstaging-preetalpha4_v8_shard1_replica2 url=http://10.136.6.24:8983/solr DONE. sync succeeded\n2013-10-29T16:25:43.170Z\tPeerSync: core=myappstaging-preetalpha4_v8_shard1_replica2 url=http://10.136.6.24:8983/solr Received 10 versions from 10.170.2.54:8983/solr/myappstag...\n2013-10-29T16:25:43.170Z\tPeerSync: core=myappstaging-preetalpha4_v8_shard1_replica2 url=http://10.136.6.24:8983/solr Our versions are newer. ourLowThreshold=14490017764527308...\n2013-10-29T16:25:43.100Z\tPeerSync: core=myappstaging-preetalpha4_v8_shard1_replica2 url=http://10.136.6.24:8983/solr START replicas=[http://10.170.2.54:8983/solr/myappstaging-...\n2013-10-29T16:25:43.100Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-preetalpha4_v8_shard1_replica2/\n2013-10-29T16:25:43.100Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:43.100Z\tI may be the new leader - try and sync\n2013-10-29T16:25:43.100Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:43.099Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:43.056Z\tmakePath: /collections/myappstaging-alpha3_v7/leaders/shard1\n2013-10-29T16:25:43.044Z\t[myappstaging-alpha3_v7_shard1_replica2] webapp=/solr path=/get params={sync=http://10.136.6.24:8983/solr/myappstaging-alpha3_v7_shard1_replica1/&...\n2013-10-29T16:25:43.044Z\tPeerSync: core=myappstaging-alpha3_v7_shard1_replica2 url=http://10.170.2.54:8983/solr DONE. sync succeeded\n2013-10-29T16:25:43.041Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-alpha3_v7_shard1_replica1/ shard1\n2013-10-29T16:25:43.041Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha3_v7_shard1_replica1/: sync completed with http://10.170.2.54:8983/solr/myappstaging-alpha3_v7_shard1_...\n2013-10-29T16:25:43.041Z\t[myappstaging-alpha3_v7_shard1_replica1] webapp=/solr path=/get params=\n{getVersions=100&distrib=false&wt=javabin&qt=/get&version=2} st...\n2013-10-29T16:25:43.040Z\tPeerSync: core=myappstaging-alpha3_v7_shard1_replica2 url=http://10.170.2.54:8983/solr Our versions are newer. ourLowThreshold=1448183627488690176 ot...\n2013-10-29T16:25:43.040Z\tPeerSync: core=myappstaging-alpha3_v7_shard1_replica2 url=http://10.170.2.54:8983/solr Received 98 versions from 10.136.6.24:8983/solr/myappstaging-a...\n2013-10-29T16:25:43.027Z\tPeerSync: core=myappstaging-alpha3_v7_shard1_replica2 url=http://10.170.2.54:8983/solr START replicas=[http://10.136.6.24:8983/solr/myappstaging-alpha...\n2013-10-29T16:25:43.011Z\t[myappstaging-alpha3_v7_shard1_replica2] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=2}\n st...\n2013-10-29T16:25:42.989Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha3_v7_shard1_replica1/: try and ask http://10.170.2.54:8983/solr/myappstaging-alpha3_v7_shard1_replica2/...\n2013-10-29T16:25:42.989Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:42.988Z\tPeerSync: core=myappstaging-alpha3_v7_shard1_replica1 url=http://10.136.6.24:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.982Z\tPeerSync: core=myappstaging-alpha3_v7_shard1_replica1 url=http://10.136.6.24:8983/solr Our versions are newer. ourLowThreshold=1448183627488690176 ot...\n2013-10-29T16:25:42.982Z\tPeerSync: core=myappstaging-alpha3_v7_shard1_replica1 url=http://10.136.6.24:8983/solr Received 98 versions from 10.170.2.54:8983/solr/myappstaging-a...\n2013-10-29T16:25:42.955Z\tPeerSync: core=myappstaging-alpha3_v7_shard1_replica1 url=http://10.136.6.24:8983/solr START replicas=[http://10.170.2.54:8983/solr/myappstaging-alpha...\n2013-10-29T16:25:42.954Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-alpha3_v7_shard1_replica1/\n2013-10-29T16:25:42.954Z\tStopping recovery for zkNodeName=core_node1core=myappstaging-alpha3_v7_shard1_replica1\n2013-10-29T16:25:42.953Z\tI may be the new leader - try and sync\n2013-10-29T16:25:42.953Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:42.953Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:42.953Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:42.897Z\t[myappstaging-alpha4-adam_v8_shard1_replica1] webapp=/solr path=/get params={sync=http://10.136.6.24:8983/solr/myappstaging-alpha4-adam_v8_shard1_repl...\n2013-10-29T16:25:42.896Z\tmakePath: /collections/myappstaging-alpha4-adam_v8/leaders/shard1\n2013-10-29T16:25:42.882Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-alpha4-adam_v8_shard1_replica2/ shard1\n2013-10-29T16:25:42.881Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha4-adam_v8_shard1_replica2/: sync completed with http://10.170.2.54:8983/solr/myappstaging-alpha4-adam_...\n2013-10-29T16:25:42.881Z\t[myappstaging-alpha4-adam_v8_shard1_replica2] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=...\n2013-10-29T16:25:42.881Z\tPeerSync: core=myappstaging-alpha4-adam_v8_shard1_replica1 url=http://10.170.2.54:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.880Z\tPeerSync: core=myappstaging-alpha4-adam_v8_shard1_replica1 url=http://10.170.2.54:8983/solr Received 10 versions from 10.136.6.24:8983/solr/myappstag...\n2013-10-29T16:25:42.880Z\tPeerSync: core=myappstaging-alpha4-adam_v8_shard1_replica1 url=http://10.170.2.54:8983/solr Our versions are newer. ourLowThreshold=14489007407885189...\n2013-10-29T16:25:42.798Z\t[myappstaging-alpha4-adam_v8_shard1_replica1] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=...\n2013-10-29T16:25:42.798Z\tPeerSync: core=myappstaging-alpha4-adam_v8_shard1_replica1 url=http://10.170.2.54:8983/solr START replicas=[http://10.136.6.24:8983/solr/myappstaging-...\n2013-10-29T16:25:42.782Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:42.782Z\tPeerSync: core=myappstaging-alpha4-adam_v8_shard1_replica2 url=http://10.136.6.24:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.782Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha4-adam_v8_shard1_replica2/: try and ask http://10.170.2.54:8983/solr/myappstaging-alpha4-adam_v8_shard1...\n2013-10-29T16:25:42.782Z\tPeerSync: core=myappstaging-alpha4-adam_v8_shard1_replica2 url=http://10.136.6.24:8983/solr Our versions are newer. ourLowThreshold=14489007407885189...\n2013-10-29T16:25:42.781Z\tPeerSync: core=myappstaging-alpha4-adam_v8_shard1_replica2 url=http://10.136.6.24:8983/solr Received 10 versions from 10.170.2.54:8983/solr/myappstag...\n2013-10-29T16:25:42.765Z\tPeerSync: core=myappstaging-alpha4-adam_v8_shard1_replica2 url=http://10.136.6.24:8983/solr START replicas=[http://10.170.2.54:8983/solr/myappstaging-...\n2013-10-29T16:25:42.754Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:42.754Z\tI may be the new leader - try and sync\n2013-10-29T16:25:42.754Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-alpha4-adam_v8_shard1_replica2/\n2013-10-29T16:25:42.754Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:42.754Z\tStopping recovery for zkNodeName=core_node2core=myappstaging-alpha4-adam_v8_shard1_replica2\n2013-10-29T16:25:42.749Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:42.693Z\tmakePath: /collections/myappstaging-preetalpha5_v9/leaders/shard1\n2013-10-29T16:25:42.693Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-preetalpha5_v9_shard1_replica2/ shard1\n2013-10-29T16:25:42.692Z\tPeerSync: core=myappstaging-preetalpha5_v9_shard1_replica1 url=http://10.170.2.54:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.692Z\thttp://10.136.6.24:8983/solr/myappstaging-preetalpha5_v9_shard1_replica2/: sync completed with http://10.170.2.54:8983/solr/myappstaging-preetalpha5_...\n2013-10-29T16:25:42.692Z\t[myappstaging-preetalpha5_v9_shard1_replica1] webapp=/solr path=/get params={sync=http://10.136.6.24:8983/solr/myappstaging-preetalpha5_v9_shard1_repl...\n2013-10-29T16:25:42.618Z\t[myappstaging-preetalpha5_v9_shard1_replica2] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=...\n2013-10-29T16:25:42.603Z\tPeerSync: core=myappstaging-preetalpha5_v9_shard1_replica1 url=http://10.170.2.54:8983/solr Received 10 versions from 10.136.6.24:8983/solr/myappstag...\n2013-10-29T16:25:42.603Z\tPeerSync: core=myappstaging-preetalpha5_v9_shard1_replica1 url=http://10.170.2.54:8983/solr Our versions are newer. ourLowThreshold=14499085375829442...\n2013-10-29T16:25:42.596Z\tPeerSync: core=myappstaging-preetalpha5_v9_shard1_replica1 url=http://10.170.2.54:8983/solr START replicas=[http://10.136.6.24:8983/solr/myappstaging-...\n2013-10-29T16:25:42.579Z\t[myappstaging-preetalpha5_v9_shard1_replica1] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=...\n2013-10-29T16:25:42.565Z\thttp://10.136.6.24:8983/solr/myappstaging-preetalpha5_v9_shard1_replica2/: try and ask http://10.170.2.54:8983/solr/myappstaging-preetalpha5_v9_shard1...\n2013-10-29T16:25:42.565Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:42.565Z\tPeerSync: core=myappstaging-preetalpha5_v9_shard1_replica2 url=http://10.136.6.24:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.553Z\tPeerSync: core=myappstaging-preetalpha5_v9_shard1_replica2 url=http://10.136.6.24:8983/solr Our versions are newer. ourLowThreshold=14499085375829442...\n2013-10-29T16:25:42.553Z\tPeerSync: core=myappstaging-preetalpha5_v9_shard1_replica2 url=http://10.136.6.24:8983/solr Received 10 versions from 10.170.2.54:8983/solr/myappstag...\n2013-10-29T16:25:42.549Z\tPeerSync: core=myappstaging-preetalpha5_v9_shard1_replica2 url=http://10.136.6.24:8983/solr START replicas=[http://10.170.2.54:8983/solr/myappstaging-...\n2013-10-29T16:25:42.549Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-preetalpha5_v9_shard1_replica2/\n2013-10-29T16:25:42.549Z\tI may be the new leader - try and sync\n2013-10-29T16:25:42.548Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:42.547Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:42.547Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:42.505Z\t[myappstaging-alpha4_v8_shard1_replica2] webapp=/solr path=/get params={sync=http://10.136.6.24:8983/solr/myappstaging-alpha4_v8_shard1_replica1/&...\n2013-10-29T16:25:42.502Z\tmakePath: /collections/myappstaging-alpha4_v8/leaders/shard1\n2013-10-29T16:25:42.489Z\t[myappstaging-alpha4_v8_shard1_replica1] webapp=/solr path=/get params=\n{getVersions=100&distrib=false&wt=javabin&qt=/get&version=2} st...\n2013-10-29T16:25:42.489Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-alpha4_v8_shard1_replica1/ shard1\n2013-10-29T16:25:42.489Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha4_v8_shard1_replica1/: sync completed with http://10.170.2.54:8983/solr/myappstaging-alpha4_v8_shard1_...\n2013-10-29T16:25:42.488Z\tPeerSync: core=myappstaging-alpha4_v8_shard1_replica2 url=http://10.170.2.54:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.488Z\tPeerSync: core=myappstaging-alpha4_v8_shard1_replica2 url=http://10.170.2.54:8983/solr Our versions are newer. ourLowThreshold=1449121459772325888 ot...\n2013-10-29T16:25:42.488Z\tPeerSync: core=myappstaging-alpha4_v8_shard1_replica2 url=http://10.170.2.54:8983/solr Received 1 versions from 10.136.6.24:8983/solr/myappstaging-al...\n2013-10-29T16:25:42.411Z\thttp://10.136.6.24:8983/solr/myappstaging-alpha4_v8_shard1_replica1/: try and ask http://10.170.2.54:8983/solr/myappstaging-alpha4_v8_shard1_replica2/...\n2013-10-29T16:25:42.411Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:42.410Z\tPeerSync: core=myappstaging-alpha4_v8_shard1_replica2 url=http://10.170.2.54:8983/solr START replicas=[http://10.136.6.24:8983/solr/myappstaging-alpha...\n2013-10-29T16:25:42.410Z\t[myappstaging-alpha4_v8_shard1_replica2] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&version=2}\n st...\n2013-10-29T16:25:42.394Z\tPeerSync: core=myappstaging-alpha4_v8_shard1_replica1 url=http://10.136.6.24:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.394Z\tPeerSync: core=myappstaging-alpha4_v8_shard1_replica1 url=http://10.136.6.24:8983/solr Our versions are newer. ourLowThreshold=1449121459772325888 ot...\n2013-10-29T16:25:42.394Z\tPeerSync: core=myappstaging-alpha4_v8_shard1_replica1 url=http://10.136.6.24:8983/solr Received 1 versions from 10.170.2.54:8983/solr/myappstaging-al...\n2013-10-29T16:25:42.388Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:195)\n2013-10-29T16:25:42.388Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:322)\n2013-10-29T16:25:42.387Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:252)\n2013-10-29T16:25:42.387Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:65)\n2013-10-29T16:25:42.387Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:249)\n2013-10-29T16:25:42.387Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkStateReader.updateAliases(ZkStateReader.java:556)\n2013-10-29T16:25:42.387Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:249)\n2013-10-29T16:25:42.383Z\t<13>Oct 29 16:25:49 solr-p1 solr: [qtp739893596-11195] ERROR org.apache.solr.servlet.SolrDispatchFilter - null:org.apache.zookeeper.KeeperExcept...\n2013-10-29T16:25:42.371Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:195)\n2013-10-29T16:25:42.371Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:322)\n2013-10-29T16:25:42.371Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkStateReader.updateAliases(ZkStateReader.java:556)\n2013-10-29T16:25:42.370Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:252)\n2013-10-29T16:25:42.370Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:249)\n2013-10-29T16:25:42.370Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:65)\n2013-10-29T16:25:42.370Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:249)\n2013-10-29T16:25:42.369Z\t<13>Oct 29 16:25:49 solr-p1 solr: [qtp739893596-11186] ERROR org.apache.solr.servlet.SolrDispatchFilter - null:org.apache.zookeeper.KeeperExcept...\n2013-10-29T16:25:42.362Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:65)\n2013-10-29T16:25:42.362Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:322)\n2013-10-29T16:25:42.362Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:195)\n2013-10-29T16:25:42.362Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkStateReader.updateAliases(ZkStateReader.java:556)\n2013-10-29T16:25:42.362Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:249)\n2013-10-29T16:25:42.361Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:249)\n2013-10-29T16:25:42.361Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:252)\n2013-10-29T16:25:42.360Z\t<13>Oct 29 16:25:49 solr-p1 solr: [qtp739893596-11194] ERROR org.apache.solr.servlet.SolrDispatchFilter - null:org.apache.zookeeper.KeeperExcept...\n2013-10-29T16:25:42.352Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:249)\n2013-10-29T16:25:42.352Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:65)\n2013-10-29T16:25:42.352Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:322)\n2013-10-29T16:25:42.352Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:195)\n2013-10-29T16:25:42.352Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:249)\n2013-10-29T16:25:42.352Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkStateReader.updateAliases(ZkStateReader.java:556)\n2013-10-29T16:25:42.351Z\t<13>Oct 29 16:25:49 solr-p1 solr: [qtp739893596-11196] ERROR org.apache.solr.servlet.SolrDispatchFilter - null:org.apache.zookeeper.KeeperExcept...\n2013-10-29T16:25:42.351Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:252)\n2013-10-29T16:25:42.347Z\tAccording to ZK I (id=162489378735849528-10.170.2.54:8983_solr-n_0000000019) am no longer a leader.\n2013-10-29T16:25:42.346Z\tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\nat org.apache.zookeeper.Ke...\n2013-10-29T16:25:42.339Z\tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\nat org.apache.zookeeper.Ke...\n2013-10-29T16:25:42.327Z\tPeerSync: core=myappstaging-alpha4_v8_shard1_replica1 url=http://10.136.6.24:8983/solr START replicas=[http://10.170.2.54:8983/solr/myappstaging-alpha...\n2013-10-29T16:25:42.326Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-alpha4_v8_shard1_replica1/\n2013-10-29T16:25:42.324Z\tI may be the new leader - try and sync\n2013-10-29T16:25:42.320Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:195)\n2013-10-29T16:25:42.320Z\t<13>Oct 29 16:25:49 solr-p1 solr: [qtp739893596-11192] ERROR org.apache.solr.servlet.SolrDispatchFilter - null:org.apache.zookeeper.KeeperExcept...\n2013-10-29T16:25:42.320Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:322)\n2013-10-29T16:25:42.320Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:249)\n2013-10-29T16:25:42.320Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:249)\n2013-10-29T16:25:42.320Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:252)\n2013-10-29T16:25:42.320Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkStateReader.updateAliases(ZkStateReader.java:556)\n2013-10-29T16:25:42.320Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:65)\n2013-10-29T16:25:42.316Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:42.316Z\tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\nat org.apache.zookeeper.Ke...\n2013-10-29T16:25:42.316Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:42.310Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkStateReader.updateAliases(ZkStateReader.java:556)\n2013-10-29T16:25:42.310Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:322)\n2013-10-29T16:25:42.310Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:195)\n2013-10-29T16:25:42.309Z\tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\nat org.apache.zookeeper.Ke...\n2013-10-29T16:25:42.309Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:249)\n2013-10-29T16:25:42.309Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:65)\n2013-10-29T16:25:42.307Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:42.306Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:249)\n2013-10-29T16:25:42.306Z\t<13>Oct 29 16:25:49 solr-p1 solr: #011at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:252)\n2013-10-29T16:25:42.300Z\tOverseer cannot talk to ZK\n2013-10-29T16:25:42.300Z\tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\nat org.apache.zookeeper.Ke...\n2013-10-29T16:25:42.299Z\t<13>Oct 29 16:25:49 solr-p1 solr: [qtp739893596-11191] ERROR org.apache.solr.servlet.SolrDispatchFilter - null:org.apache.zookeeper.KeeperExcept...\n2013-10-29T16:25:42.299Z\tnull:org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /aliases.json\nat org.apache.zookeeper.Ke...\n2013-10-29T16:25:42.298Z\t\n2013-10-29T16:25:42.268Z\tmakePath: /collections/myappstaging-feature-rulecompletion_v9/leaders/shard1\n2013-10-29T16:25:42.263Z\tI am the new leader: http://10.136.6.24:8983/solr/myappstaging-feature-rulecompletion_v9_shard1_replica1/ shard1\n2013-10-29T16:25:42.259Z\t[myappstaging-feature-rulecompletion_v9_shard1_replica2] webapp=/solr path=/get params={sync=http://10.136.6.24:8983/solr/myappstaging-feature-rulecom...\n2013-10-29T16:25:42.259Z\tPeerSync: core=myappstaging-feature-rulecompletion_v9_shard1_replica2 url=http://10.170.2.54:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.251Z\t[myappstaging-feature-rulecompletion_v9_shard1_replica1] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&a...\n2013-10-29T16:25:42.251Z\tPeerSync: core=myappstaging-feature-rulecompletion_v9_shard1_replica2 url=http://10.170.2.54:8983/solr Our versions are newer. ourLowThreshold=144962...\n2013-10-29T16:25:42.251Z\tPeerSync: core=myappstaging-feature-rulecompletion_v9_shard1_replica2 url=http://10.170.2.54:8983/solr Received 4 versions from 10.136.6.24:8983/solr...\n2013-10-29T16:25:42.251Z\thttp://10.136.6.24:8983/solr/myappstaging-feature-rulecompletion_v9_shard1_replica1/: sync completed with http://10.170.2.54:8983/solr/myappstaging-f...\n2013-10-29T16:25:42.247Z\thttp://10.136.6.24:8983/solr/myappstaging-feature-rulecompletion_v9_shard1_replica1/: try and ask http://10.170.2.54:8983/solr/myappstaging-feature-ru...\n2013-10-29T16:25:42.246Z\tSync Success - now sync replicas to me\n2013-10-29T16:25:42.246Z\tPeerSync: core=myappstaging-feature-rulecompletion_v9_shard1_replica1 url=http://10.136.6.24:8983/solr DONE. sync succeeded\n2013-10-29T16:25:42.239Z\tPeerSync: core=myappstaging-feature-rulecompletion_v9_shard1_replica2 url=http://10.170.2.54:8983/solr START replicas=[http://10.136.6.24:8983/solr/hi...\n2013-10-29T16:25:42.236Z\t[myappstaging-feature-rulecompletion_v9_shard1_replica2] webapp=/solr path=/get params={getVersions=100&distrib=false&wt=javabin&qt=/get&a...\n2013-10-29T16:25:42.236Z\tConnection with ZooKeeper reestablished.\n2013-10-29T16:25:42.236Z\tpublishing core=myappstaging-alpha3_v7_shard1_replica2 state=down\n2013-10-29T16:25:42.232Z\tPeerSync: core=myappstaging-feature-rulecompletion_v9_shard1_replica1 url=http://10.136.6.24:8983/solr Our versions are newer. ourLowThreshold=144962...\n2013-10-29T16:25:42.232Z\tPeerSync: core=myappstaging-feature-rulecompletion_v9_shard1_replica1 url=http://10.136.6.24:8983/solr Received 4 versions from 10.170.2.54:8983/solr...\n2013-10-29T16:25:42.231Z\tPeerSync: core=myappstaging-feature-rulecompletion_v9_shard1_replica1 url=http://10.136.6.24:8983/solr START replicas=[http://10.170.2.54:8983/solr/hi...\n2013-10-29T16:25:42.230Z\tClient is connected to ZooKeeper\n2013-10-29T16:25:42.230Z\tSync replicas to http://10.136.6.24:8983/solr/myappstaging-feature-rulecompletion_v9_shard1_replica1/\n2013-10-29T16:25:42.230Z\tI may be the new leader - try and sync\n2013-10-29T16:25:42.230Z\tMy last published State was Active, it's okay to be the leader.\n2013-10-29T16:25:42.229Z\tWatcher org.apache.solr.common.cloud.ConnectionManager@52e80740 name:ZooKeeperConnection Watcher:solr-z1.domain.com:2181,solr-z2.domain.com:2181,sol...\n2013-10-29T16:25:42.223Z\tChecking if I should try and be the leader.\n2013-10-29T16:25:42.222Z\tWaiting for client to connect to ZooKeeper\n2013-10-29T16:25:42.211Z\tRunning the leader process for shard shard1\n2013-10-29T16:25:42.186Z\tConnection expired - starting a new one...\n2013-10-29T16:25:42.186Z\tOur previous ZooKeeper session was expired. Attempting to reconnect to recover relationship with ZooKeeper...\n2013-10-29T16:25:42.179Z\tWatcher fired on path: null state: Expired type None\n2013-10-29T16:25:42.179Z\tWatcher fired on path: null state: Expired type None\n2013-10-29T16:25:42.179Z\tWatcher fired on path: null state: Expired type None\n2013-10-29T16:25:42.179Z\tWatcher fired on path: null state: Expired type None\n2013-10-29T16:25:42.179Z\tWatcher org.apache.solr.common.cloud.ConnectionManager@52e80740 name:ZooKeeperConnection Watcher:solr-z1.domain.com:2181,solr-z2.domain.com:2181,sol...\n2013-10-29T16:25:42.169Z\t[myappstaging-feature-rulecompletion2_v9_shard1_replica2] webapp=/solr path=/get params={sync=http://10.136.6.24:8983/solr/myappstaging-feature-ruleco...\n2013-10-29T16:25:42.169Z\tPeerSync: core=myappstaging-feature-rulecompletion2_v9_shard1_replica2 url=http://10.170.2.54:8983/solr DONE. sync succeeded "
        },
        {
            "author": "Nathan Neulinger",
            "id": "comment-13809800",
            "date": "2013-10-31T00:35:12+0000",
            "content": "Found this, will investigate further\n\nhttp://mail-archives.apache.org/mod_mbox/lucene-solr-user/201212.mbox/%3CCABCJ+++ZzocAM0eDgv-3xWpFVRPFskoYazJT1XCQM2MYHT+Xhg@mail.gmail.com%3E\n\ntalking about raising zookeeper session timeout.  "
        },
        {
            "author": "Nathan Neulinger",
            "id": "comment-13809802",
            "date": "2013-10-31T00:35:47+0000",
            "content": "This also looks an awful lot like what we saw:\n\nhttp://osdir.com/ml/solr-user.lucene.apache.org/2013-10/msg00673.html\n "
        },
        {
            "author": "Nathan Neulinger",
            "id": "comment-13809818",
            "date": "2013-10-31T00:59:19+0000",
            "content": "Bigger concern than the initial failure is that the solr deployment sortof acted like everything was up, but was only partially working right.  "
        },
        {
            "author": "Nathan Neulinger",
            "id": "comment-13810192",
            "date": "2013-10-31T12:30:05+0000",
            "content": "After some further investigation - it seems like this might be related to SOLR-5325 fixed in 4.5.1. We haven't upgraded yet, but have it scheduled.\n\nI also raised the zk tick to 5000 and increased timeout to 40 seconds just in case that helps.  "
        }
    ]
}