{
    "id": "SOLR-12093",
    "title": "LeaderVoteWaitTimeoutTest failures",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "7.4,                                            master (8.0)",
        "resolution": "Unresolved",
        "status": "Open"
    },
    "description": "Recent failures from jenkins (https://builds.apache.org/view/L/view/Lucene/job/Lucene-Solr-NightlyTests-7.x/174/):\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=LeaderVoteWaitTimeoutTest -Dtests.method=basicTest -Dtests.seed=F36F789B06B8474E -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/jenkins-slave/workspace/Lucene-Solr-NightlyTests-7.x/test-data/enwiki.random.lines.txt -Dtests.locale=lv -Dtests.timezone=Africa/Dakar -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   1.44s J0 | LeaderVoteWaitTimeoutTest.basicTest <<<\n   [junit4]    > Throwable #1: java.lang.NullPointerException\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([F36F789B06B8474E:19B6FF9421D4A7D]:0)\n   [junit4]    > \tat org.apache.solr.client.solrj.embedded.JettySolrRunner.getNodeName(JettySolrRunner.java:347)\n   [junit4]    > \tat org.apache.solr.cloud.LeaderVoteWaitTimeoutTest.basicTest(LeaderVoteWaitTimeoutTest.java:96)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)\n\n\n\n\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=LeaderVoteWaitTimeoutTest -Dtests.method=testMostInSyncReplicasCanWinElection -Dtests.seed=F36F789B06B8474E -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/jenkins-slave/workspace/Lucene-Solr-NightlyTests-7.x/test-data/enwiki.random.lines.txt -Dtests.locale=lv -Dtests.timezone=Africa/Dakar -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] FAILURE 12.6s J0 | LeaderVoteWaitTimeoutTest.testMostInSyncReplicasCanWinElection <<<\n   [junit4]    > Throwable #1: java.lang.AssertionError: Timeout waiting for new leader\n   [junit4]    > null\n   [junit4]    > Live Nodes: [127.0.0.1:35393_solr, 127.0.0.1:39510_solr, 127.0.0.1:42166_solr]\n   [junit4]    > Last available state: DocCollection(collection1//collections/collection1/state.json/14)={\n   [junit4]    >   \"pullReplicas\":\"0\",\n   [junit4]    >   \"replicationFactor\":\"3\",\n   [junit4]    >   \"shards\":{\"shard1\":{\n   [junit4]    >       \"range\":\"80000000-7fffffff\",\n   [junit4]    >       \"state\":\"active\",\n   [junit4]    >       \"replicas\":{\n   [junit4]    >         \"core_node62\":{\n   [junit4]    >           \"core\":\"collection1_shard1_replica_n61\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:45622/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:45622_solr\",\n   [junit4]    >           \"state\":\"down\",\n   [junit4]    >           \"type\":\"NRT\"},\n   [junit4]    >         \"core_node64\":{\n   [junit4]    >           \"core\":\"collection1_shard1_replica_n63\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:42166/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:42166_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\"},\n   [junit4]    >         \"core_node66\":{\n   [junit4]    >           \"core\":\"collection1_shard1_replica_n65\",\n   [junit4]    >           \"base_url\":\"https://127.0.0.1:39510/solr\",\n   [junit4]    >           \"node_name\":\"127.0.0.1:39510_solr\",\n   [junit4]    >           \"state\":\"active\",\n   [junit4]    >           \"type\":\"NRT\"}}}},\n   [junit4]    >   \"router\":{\"name\":\"compositeId\"},\n   [junit4]    >   \"maxShardsPerNode\":\"1\",\n   [junit4]    >   \"autoAddReplicas\":\"false\",\n   [junit4]    >   \"nrtReplicas\":\"3\",\n   [junit4]    >   \"tlogReplicas\":\"0\"}\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([F36F789B06B8474E:5B736421C4F87364]:0)\n   [junit4]    > \tat org.apache.solr.cloud.SolrCloudTestCase.waitForState(SolrCloudTestCase.java:269)\n   [junit4]    > \tat org.apache.solr.cloud.LeaderVoteWaitTimeoutTest.testMostInSyncReplicasCanWinElection(LeaderVoteWaitTimeoutTest.java:189)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:748)",
    "attachments": {},
    "issue_links": {},
    "comments": []
}