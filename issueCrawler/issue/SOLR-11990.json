{
    "id": "SOLR-11990",
    "title": "Make it possible to co-locate replicas of multiple collections together in a node",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [
            "AutoScaling",
            "SolrCloud"
        ],
        "type": "New Feature",
        "fix_versions": [
            "7.5",
            "master (8.0)"
        ],
        "affect_versions": "None",
        "resolution": "Fixed",
        "status": "Closed"
    },
    "description": "It is necessary to co-locate replicas of different collection together in a node when cross-collection joins are performed.\n\nwhile creating a collection specify the parameter withCollection=other-collection-name . This ensure that Solr always ensure that atleast one replica of other-collection is present with this collection replicas\nThis requires changing create collection, create shard and add replica APIs as well because we want a replica of collection A to be created first before a replica of collection B is created so that join queries etc are always possible.\n\nSome caveats to this implementation:\n\n\tThe other-collection should only have a single shard named \"shard1\"\n\tAny replica of other-collection created by this feature will be of NRT type\n\n\n\nRemoving the above caveats can be a goal of other issues.",
    "attachments": {
        "SOLR-11990.patch": "https://issues.apache.org/jira/secure/attachment/12919274/SOLR-11990.patch",
        "SOLR-11990-TestWithCollection-testDeleteWithCollection-fixes.patch": "https://issues.apache.org/jira/secure/attachment/12935995/SOLR-11990-TestWithCollection-testDeleteWithCollection-fixes.patch",
        "SOLR-11990-fix.patch": "https://issues.apache.org/jira/secure/attachment/12937755/SOLR-11990-fix.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "date": "2018-04-16T19:44:21+0000",
            "content": "First cut of the feature. It only supports `withCollection` for collections with a single shard because we do not have access to the other clauses (specifically the collection and shard values) at the time of the Operand.match operation. There is still a lot of work and tests left:\n\n\tCollection APIs need to be fixed to pre-create `withCollection` replicas before replicas of `collection` can be created.\n\tDelete `withCollection` replicas if `collection` replicas are moved or deleted\n\n ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16439935"
        },
        {
            "date": "2018-04-17T08:58:57+0000",
            "content": "New patch removes broken support for multi-shard `withCollection`. It is not possible to support such a feature today because of ambiguity about how to co-locate multi-shard collections together. We can tackle that in a later issue. The goal behind this issue is to be support joining collections which usually means co-locating a multi-shard `collection` with a single-shard `withCollection` ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16440633"
        },
        {
            "date": "2018-04-18T11:47:47+0000",
            "content": "The ideal syntax for such a feature would be\n\n\u00a0\n\n//place all replicas of collection 'comment' where collection 'article' is present\n\n{\"replica\" :\"#ALL\", \"collection\" : \"comment\", \"withCollection\" :\"article\" }\n\n\n\nWith this feature\n\n\twe expect the collection \"article\" to be created first. If \"article\" is not present creation of collection \"comment\" must fail\n\tThe collection \"article\" must have only one shard\n\twhen \"comments\" collection is created, it must first identify nodes where replicas are going to be created, and then it must go on and create replicas of \"article\" in all those nodes\n\tWhen a new replica (or a shard)\u00a0 is created for \"comment\" , it must do the same as create collection\n\n\n\n\u00a0I seriously think it is a lot of work . We will have to change the way the collection APIs work. The way the rules are computed in the Policy framework also needs to change specifically for this use case. The APIs are not written to handle multiple collections simultaneously. I think it will be much easier if we just make this as a collection attribute  and deal it specially there. That way, we don't have to touch the Policy framework at all ",
            "author": "Noble Paul",
            "id": "comment-16442366"
        },
        {
            "date": "2018-05-01T20:14:51+0000",
            "content": "I've attached another approach which does not modify the policy framework directly but instead modifies Suggesters and Collection APIs to maintain the co-location of two collections. This is still a work in progress and has many nocommits. ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16460096"
        },
        {
            "date": "2018-06-19T12:32:55+0000",
            "content": "New patch that removes the WITH_COLLECTION hint, further reducing the amount of changes needed. Tests have been added for create collection, add replica and move replica operations. There are a few changes here that I will extracted to their own issues and commit independently e.g. solrj support for modify collection. ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16517019"
        },
        {
            "date": "2018-06-26T13:30:12+0000",
            "content": "Patch updated to master after the commits on SOLR-12506 and SOLR-12507. ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16523720"
        },
        {
            "date": "2018-07-17T06:43:38+0000",
            "content": "This patch:\n\n\tChanges the approach to use a new ConditionType called WITH_COLLECTION that ensures that we project add replica correctly i.e. during computation, adding a replica for the main collection also adds a replica for the with collection so that we don't generate bad suggestions at all\n\tSolrClientNodeStateProvider is aware of the `withCollection` flag and returns them in the state\n\tMove replica, delete collection APIs are aware of with collection\n\tNew integration tests in TestWithCollection.testNodeAdded\n\tStill a few nocommits left\n\n ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16546097"
        },
        {
            "date": "2018-07-18T11:08:22+0000",
            "content": "I added more changes on top of Noble's last patch and pushed it to a branch jira/solr-11990.\n\nChanges:\n\n\tRemoved nocommit in CreateCollectionCmd. Now we do all input validations before we try to assign replicas so that in case the collection could not be created, we are not left with dangling collection references in the cluster state\n\tAdded more tests in TestWithCollection.testNodeAdded and TestPolicy.testWithColl\n\n ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16547692"
        },
        {
            "date": "2018-07-20T09:08:37+0000",
            "content": "More changes have been pushed to the branch:\n\n\tSupport for suggestions API are in place\n\tWITH_COLLECTION is not a global tag and similarly the violations/suggestions are also per node\n\tNew TestPolicy.testWithCollectionSuggestions to test suggestions\n\n\n\nI think this is ready. I'll wait for a final review by Noble Paul before merging to master. ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16550546"
        },
        {
            "date": "2018-07-29T01:57:27+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560944"
        },
        {
            "date": "2018-07-29T01:57:29+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560945"
        },
        {
            "date": "2018-07-29T01:57:31+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560946"
        },
        {
            "date": "2018-07-29T01:57:33+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560947"
        },
        {
            "date": "2018-07-29T01:57:34+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560948"
        },
        {
            "date": "2018-07-29T01:57:36+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560949"
        },
        {
            "date": "2018-07-29T01:57:38+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560950"
        },
        {
            "date": "2018-07-29T01:57:39+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560951"
        },
        {
            "date": "2018-07-29T01:57:41+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560952"
        },
        {
            "date": "2018-07-29T01:57:43+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560953"
        },
        {
            "date": "2018-07-29T01:57:45+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560954"
        },
        {
            "date": "2018-07-29T01:57:46+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560955"
        },
        {
            "date": "2018-07-29T01:57:48+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560956"
        },
        {
            "date": "2018-07-29T01:57:50+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560957"
        },
        {
            "date": "2018-07-29T01:57:51+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560958"
        },
        {
            "date": "2018-07-29T01:57:53+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560959"
        },
        {
            "date": "2018-07-29T01:57:55+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560960"
        },
        {
            "date": "2018-07-29T01:57:56+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560961"
        },
        {
            "date": "2018-07-29T01:57:58+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560962"
        },
        {
            "date": "2018-07-29T01:58:00+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560963"
        },
        {
            "date": "2018-07-29T01:58:01+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560964"
        },
        {
            "date": "2018-07-29T01:58:03+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560965"
        },
        {
            "date": "2018-07-29T01:58:04+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560966"
        },
        {
            "date": "2018-07-29T01:58:06+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560967"
        },
        {
            "date": "2018-07-29T01:58:08+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560968"
        },
        {
            "date": "2018-07-29T01:58:09+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560969"
        },
        {
            "date": "2018-07-29T01:58:11+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560970"
        },
        {
            "date": "2018-07-29T01:58:13+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560971"
        },
        {
            "date": "2018-07-29T01:58:15+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560972"
        },
        {
            "date": "2018-07-29T01:58:16+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16560973"
        },
        {
            "date": "2018-07-29T03:11:05+0000",
            "content": "Commit 3c3137728091fe5f973f93539cd3b485807e90cc in lucene-solr's branch refs/heads/branch_7x from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3c31377 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\n(cherry picked from commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325) ",
            "author": "ASF subversion and git services",
            "id": "comment-16560984"
        },
        {
            "date": "2018-07-29T03:13:21+0000",
            "content": "Thanks Noble Paul for the help in designing and reviewing this piece. ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16560985"
        },
        {
            "date": "2018-07-31T02:32:19+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563008"
        },
        {
            "date": "2018-07-31T02:32:21+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563009"
        },
        {
            "date": "2018-07-31T02:32:23+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563010"
        },
        {
            "date": "2018-07-31T02:32:25+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563011"
        },
        {
            "date": "2018-07-31T02:32:27+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563012"
        },
        {
            "date": "2018-07-31T02:32:29+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563013"
        },
        {
            "date": "2018-07-31T02:32:30+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563014"
        },
        {
            "date": "2018-07-31T02:32:32+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563015"
        },
        {
            "date": "2018-07-31T02:32:34+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563016"
        },
        {
            "date": "2018-07-31T02:32:35+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563017"
        },
        {
            "date": "2018-07-31T02:32:37+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563018"
        },
        {
            "date": "2018-07-31T02:32:39+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563019"
        },
        {
            "date": "2018-07-31T02:32:41+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563020"
        },
        {
            "date": "2018-07-31T02:32:42+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563021"
        },
        {
            "date": "2018-07-31T02:32:44+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563022"
        },
        {
            "date": "2018-07-31T02:32:46+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563023"
        },
        {
            "date": "2018-07-31T02:32:48+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563024"
        },
        {
            "date": "2018-07-31T02:32:49+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563025"
        },
        {
            "date": "2018-07-31T02:32:51+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563026"
        },
        {
            "date": "2018-07-31T02:32:53+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563027"
        },
        {
            "date": "2018-07-31T02:32:55+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563028"
        },
        {
            "date": "2018-07-31T02:32:56+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563029"
        },
        {
            "date": "2018-07-31T02:32:58+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563030"
        },
        {
            "date": "2018-07-31T02:33:00+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563031"
        },
        {
            "date": "2018-07-31T02:33:02+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563032"
        },
        {
            "date": "2018-07-31T02:33:03+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563033"
        },
        {
            "date": "2018-07-31T02:33:05+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563034"
        },
        {
            "date": "2018-07-31T02:33:07+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563035"
        },
        {
            "date": "2018-07-31T02:33:08+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563036"
        },
        {
            "date": "2018-07-31T02:33:10+0000",
            "content": "Commit 179c8f9b48af9bf3c327226d0e1fdbe460c4a325 in lucene-solr's branch refs/heads/jira/http2 from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=179c8f9 ]\n\nSOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node.\n\nA collection may be co-located with another collection during collection creation time by specifying a\n'withCollection' parameter. It can also be co-located afterwards by using the modify collection API.\nThe co-location guarantee is enforced regardless of future cluster operations whether they are invoked\nmanually via the Collection API or automatically by the Autoscaling framework.\n\nSquashed commit of the following:\n\ncommit 3827703b38c598f1247c90ab57d3d640ab3a9e21\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:54:10 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 7977222e07ba47274062cb8d8a69e7956d644000\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:52:17 2018 +0530\n\n    SOLR-11990: Added change log entry\n\ncommit 1857075fdb9d535b6149ad4369fed8b64b0c01f6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 11:49:51 2018 +0530\n\n    SOLR-11990: Added note about co-location guarantees being one way only\n\ncommit 8557cbc8a511f21d1fcad99e11ea9d2104d0bef4\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:43:37 2018 +0530\n\n    SOLR-11990: Remove unused import\n\ncommit 864b013fd744edca9b6b84a8a7573fab3c5310d5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:21:59 2018 +0530\n\n    SOLR-11990: Fixing compilation issues after merging master\n\ncommit dd840a2f7e765ee96c899d4d9ea89b6b67c5ae62\nMerge: bb4ffb3 828d281\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Sat Jul 28 10:03:50 2018 +0530\n\n    Merge branch 'master' into jira/solr-11990\n\n\n\tConflicts:\n\tsolr/solr-ref-guide/src/collections-api.adoc\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Clause.java\n\tsolr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/Suggestion.java\n\n\n\ncommit bb4ffb32c4960a2809ac8927e214e1e012204a73\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 14:09:44 2018 +0530\n\n    SOLR-11990: Ensure that the suggestion are validated by the policy engine otherwise move to the next candidate replica or the next candidate node\n\ncommit a97d45b22f9c232e939f979502c761001be9ae24\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 13:22:10 2018 +0530\n\n    SOLR-11990: Autoscaling suggestions for withCollection violations should prefer moving replicas before adding replicas\n\ncommit 7b5a84338dfe7335599a5e96aff2d26cb4eeaac6\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 27 12:22:45 2018 +0530\n\n    SOLR-11990: Fix statement about the behavior of the modify collection API when modifying the withCollection parameter\n\ncommit 63aec4fe0de7025c16b6ebc47dad1004531ecee1\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Thu Jul 26 07:29:07 2018 +0530\n\n    SOLR-11990: Added new page to the reference guide describing how to colocate collections together including guarantees and limitations\n\ncommit 6bfcd0786bb30353de9c26a01ec97ce3191b58f8\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:42:25 2018 +0530\n\n    SOLR-11990: Added another test which creates two collections which are colocated with two different collections and ensures that create collection and add replica operations work correctly\n\ncommit 4cead778f0044b6fb4012b085abf7b60350f495b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 21:07:47 2018 +0530\n\n    SOLR-11990: Stop or start jettys in test setup to ensure that we always have exactly 2 replicas running before a test starts\n\ncommit 70dbfd042c2164fcd76d406eeab1518e4d3147fb\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:19:07 2018 +0530\n\n    SOLR-11990: Added description of the new withCollection parameter in the reference guide\n\ncommit 9d8260852b9d667d4d8e026432fd7727b7789393\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 19:16:46 2018 +0530\n\n    SOLR-11990: Reset count down latch during test setup\n\ncommit ae508165571b1afde54337859b8d5fdbb1d67312\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 25 15:43:54 2018 +0530\n\n    SOLR-11990: Add support for withCollection in simulated create collection API\n\ncommit 84f026b8c4cc25edb548430b8f5ad09d2486b3b5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 17:21:33 2018 +0530\n\n    SOLR-11990: Ported the refactoring made in CreateCollectionCmd to the simulated version so that simulation tests are able to create collections correctly\n\ncommit defe111c9d31c8e4f0f00b4f2f3c875f5b2fa602\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:17:52 2018 +0530\n\n    SOLR-11990: Add missing javadoc for return statement\n\ncommit 8e47d5bc4545548c5441909c3fcc1a7901b38185\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:11:45 2018 +0530\n\n    SOLR-11990: Replace usage of forbidden Charsets with StandardCharsets class\n\ncommit 2d1b9eb25ea96a3a42c000ae654400ed44c17554\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 16:07:36 2018 +0530\n\n    SOLR-11990: Extract ConditionType to an interface VarType along with a WithCollectionVarType implementation\n\ncommit 1de2a4f52a59afca28de75bfa5156a3d6567a4f5\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 12:53:26 2018 +0530\n\n    SOLR-11990: Pass strict-ness parameter to the ConditionType so that WITH_COLLECTION can choose not to project add replica in strict mode.\n\n    This ensures that add replica or move replica suggesters always choose nodes that already have withCollection replicas first unless there are violations in doing so. Only if the first pass fails to find a suitable replica, do we go to the other nodes in the cluster. This also removes the need for the majority of changes in AddReplicaSuggester and so they've been reverted.\n\ncommit 0d616ed9e9bad791548c87086cba7760d724350d\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Tue Jul 24 11:36:34 2018 +0530\n\n    SOLR-11990: Minor changes to formatting and code comments\n\ncommit 1228538f934f35f15797d89c2c66f2deb9cddd8c\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 14:26:19 2018 +0530\n\n    SOLR-11990: Added a test which simulates a lost node and asserts that move replica suggester moves the replica on the lost node to a node already having the withCollection present\n\ncommit 582f1fd98de93ab73c74a1f623749dd031beb381\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:35:22 2018 +1000\n\n    SOLR-11990: NPE removing unnecessary System.out.println\n\ncommit 501bc6c1d066321b344bbb8b1de3c2ead52f8c49\nAuthor: Noble Paul <noble@apache.org>\nDate:   Mon Jul 23 18:31:07 2018 +1000\n\n    SOLR-11990: NPE during class init\n\ncommit acbf4a69321e16cff11cc7cf0a1f076fd9ac0037\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Mon Jul 23 13:55:30 2018 +0530\n\n    SOLR-11990: Added asserts on the nodes that should be selected by the add replica suggester\n\ncommit 4824933fd6eb7d1773acbff1a1a0c5e670226e0b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 14:30:52 2018 +0530\n\n    SOLR-11990: Added WITH_COLLECTION to global tags. Fixed implementation of addViolatingReplicas and getSuggestions in the clause impl. Added more asserts in testWithCollectionSuggestions.\n\ncommit dbadb33211c190026e08d8e3ea587b6f8df8720b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Fri Jul 20 13:44:36 2018 +0530\n\n    SOLR-11990: Added support for comparing violations, generating suggestions and adding violating replicas\n\ncommit ada1f17d5c93a4186260473e4822d2bee1da0e16\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 19:14:56 2018 +0530\n\n    SOLR-11990: Fix mock node state provider in TestPolicy to use the right cluster state. Added nocommits to ensure that we return the right suggestions for this feature.\n\ncommit ef2d61812e0d96eb2275b3411906d9de57ab835e\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 18:39:51 2018 +0530\n\n    SOLR-11990: Add missing node in nodeValues configuration\n\ncommit 34841fc01fea4a9f1e6a9f64050e576f2247a72b\nAuthor: Shalin Shekhar Mangar <shalin@apache.org>\nDate:   Wed Jul 18 16:32:57 2018 +0530\n\n    SOLR-11990: Make it possible to co-locate replicas of multiple collections together in a node ",
            "author": "ASF subversion and git services",
            "id": "comment-16563037"
        },
        {
            "date": "2018-08-10T17:32:55+0000",
            "content": "Commit e46c6b83a40a34d3ed7047c516936ac445401f69 in lucene-solr's branch refs/heads/master from Cassandra Targett\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e46c6b8 ]\n\nSOLR-11990: standardize \"co-locate\" for \"colocate\" throughout ",
            "author": "ASF subversion and git services",
            "id": "comment-16576621"
        },
        {
            "date": "2018-08-10T17:34:47+0000",
            "content": "Commit d3829efc412223386a3e8e722c17b008843d4b8c in lucene-solr's branch refs/heads/branch_7x from Cassandra Targett\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d3829ef ]\n\nSOLR-11990: standardize \"co-locate\" for \"colocate\" throughout ",
            "author": "ASF subversion and git services",
            "id": "comment-16576625"
        },
        {
            "date": "2018-08-16T11:11:04+0000",
            "content": "Re-opening due to the TestWithCollection failures on jenkins.\n\nAlso, Steve Rowe reported privately that when a CREATE command fails because of a policy rule violation, the collection metadata remains in ZooKeeper, even though no replicas are added, so the user has to manually delete the zombie collection. This is also due to the changes made in this issue. ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16582363"
        },
        {
            "date": "2018-08-17T08:50:25+0000",
            "content": "The TestWithCollection.testDeleteWithCollection fails because after collection is created, we try to delete the linked collection immediately and sometimes the delete request races with the zookeeper update  made by create collection such that the COLOCATED_WITH property is not visible to the overseer collection processor during the delete request. Therefore the delete request succeeds even though it should fail because a linked collection exists.\n\nThe attached SOLR-11990-TestWithCollection-testDeleteWithCollection-fixes.patch adds a waitForState command to the CreateCollectionCmd so that the latest state is visible to the overseer. I also added more asserts so that a successful deletion should fail the test. ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16583604"
        },
        {
            "date": "2018-08-17T08:57:43+0000",
            "content": "Commit 0530d05c734c4eb0d99a12389520069a144a636f in lucene-solr's branch refs/heads/branch_7x from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0530d05 ]\n\nSOLR-11990: Create Collection API now waits for the updated state of the withCollection to be visible after setting the COLOCATED_WITH value\n\nSometimes deletion of the withCollection succeeds even though the linked collection exists, if the delete request is sent immediately after the creation of the linked collection. This is because of a race between the delete request and the zookeeper update made by create collection such that the COLOCATED_WITH property is not visible to the overseer collection processor during the delete request. Therefore, we now wait until the property is visible before returning a success to the user. The test also adds more asserts so that a similar race will fail the test immediately with a proper assert message. ",
            "author": "ASF subversion and git services",
            "id": "comment-16583610"
        },
        {
            "date": "2018-08-17T09:00:08+0000",
            "content": "Commit 6e21cb3aa9451ae72d450ce2e2bb4216a37a7ac8 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6e21cb3 ]\n\nSOLR-11990: Create Collection API now waits for the updated state of the withCollection to be visible after setting the COLOCATED_WITH value\n\nSometimes deletion of the withCollection succeeds even though the linked collection exists, if the delete request is sent immediately after the creation of the linked collection. This is because of a race between the delete request and the zookeeper update made by create collection such that the COLOCATED_WITH property is not visible to the overseer collection processor during the delete request. Therefore, we now wait until the property is visible before returning a success to the user. The test also adds more asserts so that a similar race will fail the test immediately with a proper assert message. ",
            "author": "ASF subversion and git services",
            "id": "comment-16583612"
        },
        {
            "date": "2018-08-30T12:54:45+0000",
            "content": "Simple SOLR-11990-fix.patch to fix the regression. I'll commit this once precommit and tests pass. I've fixed this because it is a change in behavior from before but the bug is bigger than this fix alone. Any exception after the collection is created in ZK can cause the same problem. I'll open a separate issue to fix the full problem. ",
            "author": "Shalin Shekhar Mangar",
            "id": "comment-16597416"
        },
        {
            "date": "2018-08-31T03:53:39+0000",
            "content": "Commit 5670d612e3f2512d85c972b5fc717586118a19d5 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5670d61 ]\n\nSOLR-11990: When a Collection CREATE command fails because of a policy rule violation, the collection metadata remains in ZooKeeper, even though no replicas are added, so the user has to manually delete the zombie collection.\n\nThis is due to a change in behavior made in this issue where collection metadata creation was moved before attempting to use policy to place replicas. This change reverts the behavior by explicitly deleting the metadata when an AssignmentException occurs. Since the policy depends on collection metadata such as WITH_COLLECTION and COLOCATED_WITH properties, moving metadata creation after policy use would have resulted in passing these properties through the entire call stack quite invasively. Therefore the current approach is adopted. ",
            "author": "ASF subversion and git services",
            "id": "comment-16598200"
        },
        {
            "date": "2018-08-31T03:54:19+0000",
            "content": "Commit cc5fdbf387d03e4ab0c8bc73c14d60d6fdaa3dc5 in lucene-solr's branch refs/heads/branch_7x from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cc5fdbf ]\n\nSOLR-11990: When a Collection CREATE command fails because of a policy rule violation, the collection metadata remains in ZooKeeper, even though no replicas are added, so the user has to manually delete the zombie collection.\n\nThis is due to a change in behavior made in this issue where collection metadata creation was moved before attempting to use policy to place replicas. This change reverts the behavior by explicitly deleting the metadata when an AssignmentException occurs. Since the policy depends on collection metadata such as WITH_COLLECTION and COLOCATED_WITH properties, moving metadata creation after policy use would have resulted in passing these properties through the entire call stack quite invasively. Therefore the current approach is adopted.\n\n(cherry picked from commit 5670d612e3f2512d85c972b5fc717586118a19d5) ",
            "author": "ASF subversion and git services",
            "id": "comment-16598205"
        },
        {
            "date": "2018-08-31T04:12:08+0000",
            "content": "Commit 4d78db26be21727fa29b0c055f24e0bac625e017 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4d78db2 ]\n\nSOLR-11990: Set waitForFinalState=true for the move replica API call so that the cluster is at steady state when the test ends. ",
            "author": "ASF subversion and git services",
            "id": "comment-16598225"
        },
        {
            "date": "2018-08-31T04:12:46+0000",
            "content": "Commit 5b23a375e30f156ae1fe4f35377d922a6fded091 in lucene-solr's branch refs/heads/branch_7x from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5b23a37 ]\n\nSOLR-11990: Set waitForFinalState=true for the move replica API call so that the cluster is at steady state when the test ends.\n\n(cherry picked from commit 4d78db26be21727fa29b0c055f24e0bac625e017) ",
            "author": "ASF subversion and git services",
            "id": "comment-16598226"
        },
        {
            "date": "2018-09-05T10:37:29+0000",
            "content": "Commit df20c4b9e6f9ff3408c7eaf9ceea7a1656a72ff8 in lucene-solr's branch refs/heads/master from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=df20c4b ]\n\nSOLR-11990: Wait for all nodes to be live before running tests.\n\nA few tests have failed on jenkins where the very first call to Solr to set the policy fails because no live nodes were found. This commit adds a 30 second (max) wait for nodes to be registered live in ZK before attempting to run any test. ",
            "author": "ASF subversion and git services",
            "id": "comment-16604257"
        },
        {
            "date": "2018-09-05T10:38:15+0000",
            "content": "Commit e03dabb742bc81f071a7941c330a437610860abd in lucene-solr's branch refs/heads/branch_7x from Shalin Shekhar Mangar\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e03dabb ]\n\nSOLR-11990: Wait for all nodes to be live before running tests.\n\nA few tests have failed on jenkins where the very first call to Solr to set the policy fails because no live nodes were found. This commit adds a 30 second (max) wait for nodes to be registered live in ZK before attempting to run any test.\n\n(cherry picked from commit df20c4b9e6f9ff3408c7eaf9ceea7a1656a72ff8) ",
            "author": "ASF subversion and git services",
            "id": "comment-16604259"
        }
    ]
}