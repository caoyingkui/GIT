{
    "id": "SOLR-12819",
    "title": "TestPointFields.testIntPointFieldSortAndFunction failure",
    "details": {
        "type": "Bug",
        "status": "Open",
        "labels": "",
        "fix_versions": [],
        "components": [
            "Tests"
        ],
        "priority": "Major",
        "resolution": "Unresolved",
        "affect_versions": "None"
    },
    "description": "From https://jenkins.thetaphi.de/job/Lucene-Solr-master-Linux/22953/, reproduces for me on Java8:\n\n\nChecking out Revision 3ece536d812aff0e4c29b30ef8330c11cf1c967e (refs/remotes/origin/master)\n[...]\n[java-info] java version \"11\"\n[java-info] OpenJDK Runtime Environment (11+28, Oracle Corporation)\n[java-info] OpenJDK 64-Bit Server VM (11+28, Oracle Corporation)\n[java-info] Test args: [-XX:+UseCompressedOops -XX:+UseParallelGC]\n[...]\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestPointFields -Dtests.method=testIntPointFieldSortAndFunction -Dtests.seed=E7AB050900E7AC47 -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=mk-MK -Dtests.timezone=SystemV/AST4ADT -Dtests.asserts=true -Dtests.file.encoding=UTF-8\n   [junit4] ERROR   0.35s J2 | TestPointFields.testIntPointFieldSortAndFunction <<<\n   [junit4]    > Throwable #1: java.lang.RuntimeException: Exception during query\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([E7AB050900E7AC47:839B80921A9C4030]:0)\n   [junit4]    > \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:917)\n   [junit4]    > \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:877)\n   [junit4]    > \tat org.apache.solr.schema.TestPointFields.doTestIntPointFunctionQuery(TestPointFields.java:2547)\n   [junit4]    > \tat org.apache.solr.schema.TestPointFields.testIntPointFieldSortAndFunction(TestPointFields.java:166)\n   [junit4]    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n   [junit4]    > \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n   [junit4]    > \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\n   [junit4]    > \tat java.base/java.lang.Thread.run(Thread.java:834)\n   [junit4]    > Caused by: java.lang.RuntimeException: REQUEST FAILED: xpath=//result/doc[24]/int[@name='number_p_i_dv_sml'][.='-1562090388']\n   [junit4]    > \txml response was: <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n   [junit4]    > <response>\n   [junit4]    > <lst name=\"responseHeader\"><int name=\"status\">0</int><int name=\"QTime\">0</int></lst><result name=\"response\" numFound=\"30\" start=\"0\"><doc><str name=\"id\">R</str><int name=\"number_p_i_dv_sml\">2012409951</int></doc><doc><str name=\"id\">I</str><int name=\"number_p_i_dv_sml\">1996013463</int></doc><doc><str name=\"id\">P</str><int name=\"number_p_i_dv_sml\">1954065694</int></doc><doc><str name=\"id\">J</str><int name=\"number_p_i_dv_sml\">1753974609</int></doc><doc><str name=\"id\">Q</str><int name=\"number_p_i_dv_sml\">1706241224</int></doc><doc><str name=\"id\">X</str><int name=\"number_p_i_dv_sml\">1679916326</int></doc><doc><str name=\"id\">C</str><int name=\"number_p_i_dv_sml\">1666526097</int></doc><doc><str name=\"id\">W</str><int name=\"number_p_i_dv_sml\">872938326</int></doc><doc><str name=\"id\">D</str><int name=\"number_p_i_dv_sml\">826820678</int></doc><doc><str name=\"id\">M</str><int name=\"number_p_i_dv_sml\">797909837</int></doc><doc><str name=\"id\">N</str><int name=\"number_p_i_dv_sml\">522763383</int></doc><doc><str name=\"id\">Y</str><int name=\"number_p_i_dv_sml\">458258037</int></doc><doc><str name=\"id\">G</str><int name=\"number_p_i_dv_sml\">326192740</int></doc><doc><str name=\"id\">V</str><int name=\"number_p_i_dv_sml\">-271328149</int></doc><doc><str name=\"id\">L</str><int name=\"number_p_i_dv_sml\">-331652139</int></doc><doc><str name=\"id\">O</str><int name=\"number_p_i_dv_sml\">-355898366</int></doc><doc><str name=\"id\">A</str><int name=\"number_p_i_dv_sml\">-464192352</int></doc><doc><str name=\"id\">F</str><int name=\"number_p_i_dv_sml\">-479633553</int></doc><doc><str name=\"id\">Z</str><int name=\"number_p_i_dv_sml\">-573873718</int></doc><doc><str name=\"id\">[</str><int name=\"number_p_i_dv_sml\">-574660573</int></doc><doc><str name=\"id\">S</str><int name=\"number_p_i_dv_sml\">-951407310</int></doc><doc><str name=\"id\">K</str><int name=\"number_p_i_dv_sml\">-1192759055</int></doc><doc><str name=\"id\">^</str><int name=\"number_p_i_dv_sml\">-1457364845</int></doc><doc><str name=\"id\">\\</str><int name=\"number_p_i_dv_sml\">-1562090420</int></doc><doc><str name=\"id\">]</str><int name=\"number_p_i_dv_sml\">-1562090388</int></doc><doc><str name=\"id\">T</str><int name=\"number_p_i_dv_sml\">-1683540077</int></doc><doc><str name=\"id\">E</str><int name=\"number_p_i_dv_sml\">-1711761420</int></doc><doc><str name=\"id\">U</str><int name=\"number_p_i_dv_sml\">-1809272606</int></doc><doc><str name=\"id\">H</str><int name=\"number_p_i_dv_sml\">-1992435150</int></doc><doc><str name=\"id\">B</str><int name=\"number_p_i_dv_sml\">-2108818256</int></doc></result>\n   [junit4]    > </response>\n   [junit4]    > \trequest was:q=*:*&fl=id,+number_p_i_dv_sml&sort=product(-1,number_p_i_dv_sml)+asc&rows=30&wt=xml\n   [junit4]    > \tat org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:910)\n   [junit4]    > \t... 41 more\n[...]\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene80): {id=TestBloomFilteredLucenePostings(BloomFilteringPostingsFormat(Lucene50(blocksize=128)))}, docValues:{foo_p_f_ni_dv_ns=DocValuesFormat(name=Lucene70), foo_p_f_ni_dv_ns_mv=DocValuesFormat(name=Lucene70), number_p_dt_dv_ns=DocValuesFormat(name=Direct), foo_p_d_ni_dv_ns_mv=DocValuesFormat(name=Lucene70), foo_p_i_ni_dv_ns=DocValuesFormat(name=Direct), number_p_f_ni_mv_dv_smf=DocValuesFormat(name=Lucene70), number_p_dt_ni_mv_dv_sml=DocValuesFormat(name=Lucene70), number_p_i_dv_ns=DocValuesFormat(name=Lucene70), number_p_l_ni_dv=DocValuesFormat(name=Asserting), number_p_f_dv=DocValuesFormat(name=Direct), number_p_l_dv_ns=DocValuesFormat(name=Asserting), foo_p_l_ni_dv_ns=DocValuesFormat(name=Lucene70), number_p_dt_ni_mv_dv=DocValuesFormat(name=Asserting), number_p_l_dv_sml=DocValuesFormat(name=Lucene70), number_p_i_dv_smf=DocValuesFormat(name=Asserting), number_p_d_ni_ns_dv=DocValuesFormat(name=Direct), number_p_dt_ni_dv_ns_mv=DocValuesFormat(name=Direct), number_p_i_ni_dv_ns_mv=DocValuesFormat(name=Lucene70), number_p_f_dv_smf=DocValuesFormat(name=Lucene70), number_p_l_ni_dv_ns=DocValuesFormat(name=Asserting), number_p_l_dv_smf=DocValuesFormat(name=Lucene70), number_p_d_ni_mv_dv_sml=DocValuesFormat(name=Lucene70), number_p_f_ni_dv_ns_mv=DocValuesFormat(name=Direct), number_p_d_dv_smf=DocValuesFormat(name=Lucene70), number_p_f_ni_mv_dv_sml=DocValuesFormat(name=Lucene70), number_p_d_ni_mv_dv_smf=DocValuesFormat(name=Lucene70), number_p_dt_ni_dv=DocValuesFormat(name=Direct), number_p_f_dv_ns_mv=DocValuesFormat(name=Direct), number_p_l_dv_ns_mv=DocValuesFormat(name=Asserting), number_p_dt_mv_dv_sml=DocValuesFormat(name=Lucene70), number_p_l_ni_ns_dv=DocValuesFormat(name=Direct), number_p_i_ni_dv_ns=DocValuesFormat(name=Lucene70), number_p_i_dv_sml=DocValuesFormat(name=Direct), number_p_f_ni_ns_dv=DocValuesFormat(name=Asserting), foo_p_d_ni_dv_ns=DocValuesFormat(name=Lucene70), number_p_dt_dv_sml=DocValuesFormat(name=Lucene70), number_p_dt_dv_smf=DocValuesFormat(name=Lucene70), number_p_i_mv_dv=DocValuesFormat(name=Lucene70), number_p_l_ni_dv_ns_mv=DocValuesFormat(name=Asserting), number_p_d_ni_dv=DocValuesFormat(name=Asserting), number_p_dt_ni_dv_sml=DocValuesFormat(name=Lucene70), number_p_d_mv_dv_smf=DocValuesFormat(name=Lucene70), number_p_d_ni_dv_smf=DocValuesFormat(name=Lucene70), number_p_dt_ni_dv_smf=DocValuesFormat(name=Lucene70), foo_p_l_ni_dv_ns_mv=DocValuesFormat(name=Lucene70), number_p_d_mv_dv_sml=DocValuesFormat(name=Lucene70), number_p_dt_ni_ns_dv=DocValuesFormat(name=Asserting), number_p_dt_mv_dv_smf=DocValuesFormat(name=Lucene70), foo_p_i_ni_dv_ns_mv=DocValuesFormat(name=Direct), number_p_l_mv_dv=DocValuesFormat(name=Direct), number_p_d_ni_dv_sml=DocValuesFormat(name=Lucene70), number_p_i_ni_mv_dv=DocValuesFormat(name=Lucene70), number_p_f_mv_dv=DocValuesFormat(name=Asserting), number_p_f_ni_mv_dv=DocValuesFormat(name=Asserting), number_p_i_mv_dv_smf=DocValuesFormat(name=Asserting), foo_p_dt_ni_dv_ns_mv=DocValuesFormat(name=Lucene70), number_p_l_ni_mv_dv=DocValuesFormat(name=Direct), number_p_l_ni_dv_sml=DocValuesFormat(name=Lucene70), number_p_d_dv=DocValuesFormat(name=Asserting), number_p_i_ni_mv_dv_smf=DocValuesFormat(name=Direct), number_p_d_dv_ns=DocValuesFormat(name=Asserting), number_p_l_ni_dv_smf=DocValuesFormat(name=Lucene70), number_p_i_ni_mv_dv_sml=DocValuesFormat(name=Asserting), number_p_dt_dv_ns_mv=DocValuesFormat(name=Direct), number_p_l_dv=DocValuesFormat(name=Asserting), number_p_dt_mv_dv=DocValuesFormat(name=Asserting), number_p_l_mv_dv_smf=DocValuesFormat(name=Lucene70), number_p_d_ni_dv_ns=DocValuesFormat(name=Asserting), number_p_i_dv_ns_mv=DocValuesFormat(name=Lucene70), number_p_d_ni_dv_ns_mv=DocValuesFormat(name=Asserting), number_p_i_ni_dv_sml=DocValuesFormat(name=Asserting), number_p_i_ni_dv_smf=DocValuesFormat(name=Direct), number_p_l_mv_dv_sml=DocValuesFormat(name=Lucene70), number_p_f_dv_sml=DocValuesFormat(name=Lucene70), number_p_d_dv_sml=DocValuesFormat(name=Lucene70), number_p_i_ni_ns_dv=DocValuesFormat(name=Lucene70), number_p_f_ni_dv_ns=DocValuesFormat(name=Direct), number_p_f_ni_dv=DocValuesFormat(name=Direct), foo_p_dt_ni_dv_ns=DocValuesFormat(name=Lucene70), number_p_l_ni_mv_dv_smf=DocValuesFormat(name=Lucene70), number_p_dt_dv=DocValuesFormat(name=Direct), number_p_dt_ni_mv_dv_smf=DocValuesFormat(name=Lucene70), number_p_l_ni_mv_dv_sml=DocValuesFormat(name=Lucene70), number_p_f_ni_dv_sml=DocValuesFormat(name=Lucene70), number_p_d_ni_mv_dv=DocValuesFormat(name=Direct), number_p_d_dv_ns_mv=DocValuesFormat(name=Asserting), number_p_d_mv_dv=DocValuesFormat(name=Direct), number_p_i_dv=DocValuesFormat(name=Lucene70), number_p_f_mv_dv_sml=DocValuesFormat(name=Lucene70), number_p_i_mv_dv_sml=DocValuesFormat(name=Direct), number_p_f_ni_dv_smf=DocValuesFormat(name=Lucene70), number_p_dt_ni_dv_ns=DocValuesFormat(name=Direct), number_p_f_mv_dv_smf=DocValuesFormat(name=Lucene70), number_p_i_ni_dv=DocValuesFormat(name=Lucene70), number_p_f_dv_ns=DocValuesFormat(name=Direct)}, maxPointsInLeafNode=466, maxMBSortInHeap=5.39632151410669, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@2d3bc5fd), locale=mk-MK, timezone=SystemV/AST4ADT\n   [junit4]   2> NOTE: Linux 4.15.0-32-generic amd64/Oracle Corporation 11 (64-bit)/cpus=8,threads=1,free=220465688,total=519569408",
    "attachments": {},
    "issue_links": {},
    "comments": []
}