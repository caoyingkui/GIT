{
    "id": "SOLR-11784",
    "title": "java.lang.OutOfMemoryError: Java heap space - CompressingTermVectorsReader.java:607",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [
            "Server"
        ],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "4.1",
        "resolution": "Invalid",
        "status": "Closed"
    },
    "description": "10:04:54.707; org.apache.solr.common.SolrException; null:java.lang.RuntimeException: java.lang.OutOfMemoryError: Java heap space\n\tat org.apache.solr.servlet.SolrDispatchFilter.sendError(SolrDispatchFilter.java:793)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:434)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:207)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(Unknown Source)\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(Unknown Source)\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Unknown Source)\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(Unknown Source)\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(Unknown Source)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.OutOfMemoryError: Java heap space\n\tat org.apache.lucene.codecs.compressing.CompressingTermVectorsReader.readPositions(CompressingTermVectorsReader.java:607)\n\tat org.apache.lucene.codecs.compressing.CompressingTermVectorsReader.get(CompressingTermVectorsReader.java:402)\n\tat org.apache.lucene.index.SegmentReader.getTermVectors(SegmentReader.java:371)\n\tat org.apache.lucene.index.BaseCompositeReader.getTermVectors(BaseCompositeReader.java:91)\n\tat org.apache.lucene.search.highlight.TokenSources.getTokenStreamWithOffsets(TokenSources.java:299)\n\tat org.apache.solr.highlight.DefaultSolrHighlighter.doHighlightingByHighlighter(DefaultSolrHighlighter.java:470)\n\tat org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighting(DefaultSolrHighlighter.java:414)\n\tat org.apache.solr.handler.component.HighlightComponent.process(HighlightComponent.java:144)\n\tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:218)\n\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)\n\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:1976)\n\tat org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:777)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:418)\n\t... 18 more\n\nERROR - 2017-12-17 11:10:16.180; org.apache.solr.common.SolrException; null:java.lang.OutOfMemoryError: Java heap space\n\tat org.apache.lucene.codecs.compressing.CompressingTermVectorsReader.readPositions(CompressingTermVectorsReader.java:607)\n\tat org.apache.lucene.codecs.compressing.CompressingTermVectorsReader.get(CompressingTermVectorsReader.java:402)\n\tat org.apache.lucene.index.SegmentReader.getTermVectors(SegmentReader.java:371)\n\tat org.apache.lucene.index.BaseCompositeReader.getTermVectors(BaseCompositeReader.java:91)\n\tat org.apache.lucene.search.highlight.TokenSources.getTokenStreamWithOffsets(TokenSources.java:299)\n\tat org.apache.solr.highlight.DefaultSolrHighlighter.doHighlightingByHighlighter(DefaultSolrHighlighter.java:470)\n\tat org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighting(DefaultSolrHighlighter.java:414)\n\tat org.apache.solr.handler.component.HighlightComponent.process(HighlightComponent.java:144)\n\tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:218)\n\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)\n\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:1976)\n\tat org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:777)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:418)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:207)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(Unknown Source)\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(Unknown Source)\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Unknown Source)\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(Unknown Source)\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(Unknown Source)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n\nERROR - 2017-12-17 21:58:37.907; org.apache.solr.cloud.OverseerCollectionProcessor; \norg.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /overseer_elect/leader\n\tat org.apache.zookeeper.KeeperException.create(KeeperException.java:99)\n\tat org.apache.zookeeper.KeeperException.create(KeeperException.java:51)\n\tat org.apache.zookeeper.ZooKeeper.getData(ZooKeeper.java:1155)\n\tat org.apache.solr.common.cloud.SolrZkClient$8.execute(SolrZkClient.java:307)\n\tat org.apache.solr.common.cloud.SolrZkClient$8.execute(SolrZkClient.java:304)\n\tat org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:74)\n\tat org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:304)\n\tat org.apache.solr.cloud.OverseerCollectionProcessor.amILeader(OverseerCollectionProcessor.java:514)\n\tat org.apache.solr.cloud.OverseerCollectionProcessor.run(OverseerCollectionProcessor.java:272)\n\tat java.lang.Thread.run(Thread.java:748)",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2017-12-20T13:58:33+0000",
            "content": "Could you please tell me what would be the cause and fix. I am using 4.1 version of solr. ",
            "author": "Prathap",
            "id": "comment-16298539"
        },
        {
            "date": "2017-12-20T15:44:25+0000",
            "content": "Please request help for this sort of thing on the solr-user list.  OOM is a generic issue pertaining to how you configure Solr in your environment.  If after that discussion it appears there is a specific way Lucene/Solr could/should reduce it's memory needs then at that point an issue could be filed. ",
            "author": "David Smiley",
            "id": "comment-16298654"
        }
    ]
}