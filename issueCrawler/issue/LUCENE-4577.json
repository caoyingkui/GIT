{
    "id": "LUCENE-4577",
    "title": "Nuke TFIDFSim's cache",
    "details": {
        "components": [],
        "fix_versions": [],
        "affect_versions": "None",
        "priority": "Major",
        "labels": "",
        "type": "Bug",
        "resolution": "Unresolved",
        "status": "Open"
    },
    "description": "This is the old termscorer cache. \n\nThis helps nothing, and maybe hurts: I removed it and here are the results:\n\nChart saved to out.png... (wd: /home/rmuir/workspace/lucene-trunk/lucene/benchmark)\n                    Task    QPS base      StdDev   QPS patch      StdDev                Pct diff\n             TermGroup1M       52.87      (2.2%)       52.62      (2.4%)   -0.5% (  -4% -    4%)\n              AndHighMed       34.82      (2.8%)       34.70      (3.6%)   -0.3% (  -6% -    6%)\n                SpanNear        6.28      (5.3%)        6.26      (3.9%)   -0.2% (  -8% -    9%)\n                  IntNRQ       13.24     (11.0%)       13.24      (9.9%)    0.0% ( -18% -   23%)\n                 Prefix3       42.19      (7.6%)       42.21      (7.0%)    0.1% ( -13% -   15%)\n                Wildcard       36.90      (6.8%)       37.02      (5.9%)    0.3% ( -11% -   13%)\n             AndHighHigh       25.68      (4.5%)       25.79      (3.2%)    0.5% (  -6% -    8%)\n                  Phrase        9.28      (4.7%)        9.35      (4.4%)    0.7% (  -8% -   10%)\n            TermBGroup1M       45.76      (6.3%)       46.10      (3.2%)    0.7% (  -8% -   10%)\n            SloppyPhrase       10.25      (3.9%)       10.33      (4.4%)    0.8% (  -7% -    9%)\n              OrHighHigh        8.87      (6.4%)        8.97      (6.7%)    1.1% ( -11% -   15%)\n                  Fuzzy1       70.28      (4.3%)       71.24      (7.1%)    1.4% (  -9% -   13%)\n               OrHighMed       10.70      (7.0%)       10.86      (6.4%)    1.5% ( -11% -   15%)\n                  Fuzzy2       27.79      (6.1%)       28.31      (5.1%)    1.9% (  -8% -   13%)\n                 Respell       71.72      (6.8%)       73.39      (3.7%)    2.3% (  -7% -   13%)\n                    Term      209.49      (4.4%)      214.58      (3.7%)    2.4% (  -5% -   11%)\n          TermBGroup1M1P        7.10      (5.1%)        7.48      (7.8%)    5.3% (  -7% -   19%)",
    "attachments": {
        "LUCENE-4577.patch": "https://issues.apache.org/jira/secure/attachment/12555179/LUCENE-4577.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "date": "2012-11-28T21:52:14+0000",
            "content": "+1\n\nI tested patch on 10M Wikipedia index:\n\n\n                    Task    QPS base      StdDev    QPS comp      StdDev                Pct diff\n                HighTerm       27.63     (18.2%)       25.45      (7.9%)   -7.9% ( -28% -   22%)\n                 MedTerm      226.33     (16.0%)      211.09      (7.8%)   -6.7% ( -26% -   20%)\n               MedPhrase        7.14      (5.4%)        6.94      (4.4%)   -2.8% ( -11% -    7%)\n              HighPhrase        4.79      (5.0%)        4.66      (5.5%)   -2.7% ( -12% -    8%)\n                 LowTerm      505.56      (7.8%)      492.74      (5.7%)   -2.5% ( -14% -   11%)\n               LowPhrase        9.60      (3.6%)        9.39      (3.4%)   -2.2% (  -8% -    4%)\n         MedSloppyPhrase       29.15      (3.3%)       28.72      (2.3%)   -1.5% (  -6% -    4%)\n        HighSloppyPhrase        4.05      (5.0%)        4.00      (3.4%)   -1.3% (  -9% -    7%)\n         LowSloppyPhrase        9.15      (4.1%)        9.07      (2.9%)   -0.9% (  -7% -    6%)\n              AndHighMed       86.43      (1.2%)       85.99      (1.6%)   -0.5% (  -3% -    2%)\n                PKLookup      197.83      (1.3%)      197.12      (1.1%)   -0.4% (  -2% -    2%)\n             AndHighHigh       25.58      (1.5%)       25.53      (2.2%)   -0.2% (  -3% -    3%)\n              AndHighLow      657.57      (1.0%)      658.40      (1.5%)    0.1% (  -2% -    2%)\n             LowSpanNear       11.99      (2.1%)       12.02      (2.2%)    0.2% (  -3% -    4%)\n                 Prefix3       17.52      (5.7%)       17.60      (5.3%)    0.4% ( -10% -   12%)\n            HighSpanNear        5.64      (2.4%)        5.66      (3.5%)    0.5% (  -5% -    6%)\n             MedSpanNear       12.44      (2.9%)       12.52      (2.7%)    0.6% (  -4% -    6%)\n                Wildcard       91.63      (3.8%)       92.33      (3.3%)    0.8% (  -6% -    8%)\n                 Respell       82.47      (2.9%)       83.58      (2.2%)    1.3% (  -3% -    6%)\n                  IntNRQ       10.65     (10.7%)       10.79     (10.8%)    1.3% ( -18% -   25%)\n                  Fuzzy2       67.84      (3.0%)       69.46      (2.7%)    2.4% (  -3% -    8%)\n                  Fuzzy1       76.30      (2.4%)       78.46      (2.2%)    2.8% (  -1% -    7%)\n              OrHighHigh        9.30      (6.7%)        9.96      (8.6%)    7.2% (  -7% -   24%)\n               OrHighMed       41.01      (7.3%)       44.63      (9.3%)    8.8% (  -7% -   27%)\n               OrHighLow       25.19      (7.8%)       27.45      (9.9%)    9.0% (  -8% -   28%)\n\n\n ",
            "author": "Michael McCandless",
            "id": "comment-13505938"
        }
    ]
}