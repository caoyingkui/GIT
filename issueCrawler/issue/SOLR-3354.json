{
    "id": "SOLR-3354",
    "title": "LeaderElectionIntegrationTest",
    "details": {
        "affect_versions": "None",
        "status": "Closed",
        "fix_versions": [
            "4.1"
        ],
        "components": [],
        "type": "Bug",
        "priority": "Minor",
        "labels": "",
        "resolution": "Cannot Reproduce"
    },
    "description": "From my build server.\n\n12-Apr-2012 02:29:21\t    [junit] Testcase: testSimpleSliceLeaderElection(org.apache.solr.cloud.LeaderElectionIntegrationTest):        FAILED\n12-Apr-2012 02:29:21\t    [junit] We didn't find a new leader! 7004 was shutdown, but it's still showing as the leader\n12-Apr-2012 02:29:21\t    [junit] junit.framework.AssertionFailedError: We didn't find a new leader! 7004 was shutdown, but it's still showing as the leader\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.Assert.fail(Assert.java:93)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.solr.cloud.LeaderElectionIntegrationTest.testSimpleSliceLeaderElection(LeaderElectionIntegrationTest.java:174)\n12-Apr-2012 02:29:21\t    [junit]         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n12-Apr-2012 02:29:21\t    [junit]         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n12-Apr-2012 02:29:21\t    [junit]         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n12-Apr-2012 02:29:21\t    [junit]         at java.lang.reflect.Method.invoke(Method.java:597)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:63)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:754)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:670)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:591)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.LuceneTestCase$SaveThreadAndTestNameRule$1.evaluate(LuceneTestCase.java:642)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.rules.RunRules.evaluate(RunRules.java:18)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:164)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:57)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:63)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:75)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:38)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:69)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.rules.RunRules.evaluate(RunRules.java:18)\n12-Apr-2012 02:29:21\t    [junit]         at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n12-Apr-2012 02:29:21\t    [junit]         at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)\n12-Apr-2012 02:29:21\t    [junit]         at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:879)\n12-Apr-2012 02:29:21\t    [junit] \n12-Apr-2012 02:29:21\t    [junit] \n12-Apr-2012 02:29:21\t    [junit] Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 103.344 sec\n12-Apr-2012 02:29:21\t    [junit] \n12-Apr-2012 02:29:21\t    [junit] ------------- Standard Error -----------------\n12-Apr-2012 02:29:21\t    [junit] 15674 T341 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] 15814 T344 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] 15949 T347 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] 16094 T350 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] 16622 T341 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] 17271 T344 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] 17423 T347 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] 18157 T350 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] 19288 T344 oasc.SyncStrategy.sync SEVERE No UpdateLog found - cannot sync\n12-Apr-2012 02:29:21\t    [junit] NOTE: reproduce with: ant test -Dtestcase=LeaderElectionIntegrationTest -Dtestmethod=testSimpleSliceLeaderElection -Dtests.seed=f9259363cc51aac:-3c1e4bd6b3493ae5:da5b01cc1f4013 -Dargs=\"-Dfile.encoding=UTF-8\"\n12-Apr-2012 02:29:21\t    [junit] NOTE: reproduce with: ant test -Dtestcase=LeaderElectionIntegrationTest -Dtestmethod=testSimpleSliceLeaderElection -Dtests.seed=f9259363cc51aac:-3c1e4bd6b3493ae5:da5b01cc1f4013 -Dargs=\"-Dfile.encoding=UTF-8\"\n12-Apr-2012 02:29:21\t    [junit] NOTE: test params are: codec=Lucene3x, sim=DefaultSimilarity, locale=be_BY, timezone=America/Guatemala\n12-Apr-2012 02:29:21\t    [junit] NOTE: all tests run in this JVM:\n12-Apr-2012 02:29:21\t    [junit] [BasicFunctionalityTest, ConvertedLegacyTest, EchoParamsTest, TestDistributedGrouping, TestPluginEnable, TestTrie, CommonGramsFilterFactoryTest, LengthFilterTest, TestBrazilianStemFilterFactory, TestDictionaryCompoundWordTokenFilterFactory, TestGermanLightStemFilterFactory, TestHunspellStemFilterFactory, TestKeywordMarkerFilterFactory, TestLatvianStemFilterFactory, TestNGramFilters, TestPatternReplaceCharFilterFactory, TestPersianNormalizationFilterFactory, TestPhoneticFilterFactory, TestPortugueseLightStemFilterFactory, TestRemoveDuplicatesTokenFilterFactory, TestRussianLightStemFilterFactory, TestShingleFilterFactory, TestSlowSynonymFilter, TestStandardFactories, TestStopFilterFactory, TestThaiWordFilterFactory, TestWikipediaTokenizerFactory, BasicDistributedZkTest, LeaderElectionIntegrationTest]\n12-Apr-2012 02:29:21\t    [junit] NOTE: Linux 2.6.32-38-server amd64/Sun Microsystems Inc. 1.6.0_20 (64-bit)/cpus=4,threads=1,free=183083864,total=273612800\n12-Apr-2012 02:29:21\t    [junit] ------------- ---------------- ---------------\n12-Apr-2012 02:29:21\t    [junit] TEST org.apache.solr.cloud.LeaderElectionIntegrationTest FAILED",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "author": "Hoss Man",
            "id": "comment-13412156",
            "date": "2012-07-11T22:26:11+0000",
            "content": "bulk fixing the version info for 4.0-ALPHA and 4.0 all affected issues have \"hoss20120711-bulk-40-change\" in comment "
        },
        {
            "author": "Robert Muir",
            "id": "comment-13429791",
            "date": "2012-08-07T03:43:05+0000",
            "content": "rmuir20120906-bulk-40-change "
        },
        {
            "author": "Robert Muir",
            "id": "comment-13452229",
            "date": "2012-09-10T17:41:59+0000",
            "content": "moving all 4.0 issues not touched in a month to 4.1 "
        },
        {
            "author": "Sami Siren",
            "id": "comment-13458491",
            "date": "2012-09-19T07:59:31+0000",
            "content": "Dawid are you still seeing this happen? There have been a number of bug fixes around the areas that might have caused this, the last failure I could find was from July 23th. "
        },
        {
            "author": "Dawid Weiss",
            "id": "comment-13458493",
            "date": "2012-09-19T08:04:23+0000",
            "content": "I don't think I've seen this one recently. I'll close. "
        }
    ]
}