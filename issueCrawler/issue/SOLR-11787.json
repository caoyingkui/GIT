{
    "id": "SOLR-11787",
    "title": "StackOverflowError in leader election",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [
            "SolrCloud"
        ],
        "type": "Bug",
        "fix_versions": [
            "master (8.0)"
        ],
        "affect_versions": "7.1",
        "resolution": "Unresolved",
        "status": "Open"
    },
    "description": "Just got this:\n\n\nException in thread \"coreZkRegister-1-thread-1\" Exception in thread \"coreZkRegister-1-thread-3\" java.lang.StackOverflowError\n        at java.text.DecimalFormat.subformat(DecimalFormat.java:1639)\n        at java.text.DecimalFormat.format(DecimalFormat.java:712)\n        at java.text.DecimalFormat.format(DecimalFormat.java:646)\n        at java.text.SimpleDateFormat.zeroPaddingNumber(SimpleDateFormat.java:1393)\n        at java.text.SimpleDateFormat.subFormat(SimpleDateFormat.java:1332)\n        at java.text.SimpleDateFormat.format(SimpleDateFormat.java:966)\n        at java.text.SimpleDateFormat.format(SimpleDateFormat.java:936)\n        at org.apache.log4j.pattern.DatePatternConverter$DefaultZoneDateFormat.format(DatePatternConverter.java:96)\n        at java.text.DateFormat.format(DateFormat.java:345)\n        at org.apache.log4j.pattern.CachedDateFormat.format(CachedDateFormat.java:283)\n        at org.apache.log4j.pattern.DatePatternConverter.format(DatePatternConverter.java:180)\n        at org.apache.log4j.pattern.BridgePatternConverter.format(BridgePatternConverter.java:119)\n        at org.apache.log4j.EnhancedPatternLayout.format(EnhancedPatternLayout.java:546)\n        at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:310)\n        at org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:276)\n        at org.apache.log4j.WriterAppender.append(WriterAppender.java:162)\n        at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)\n        at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)\n        at org.apache.log4j.Category.callAppenders(Category.java:206)\n        at org.apache.log4j.Category.forcedLog(Category.java:391)\n        at org.apache.log4j.Category.log(Category.java:856)\n        at org.slf4j.impl.Log4jLoggerAdapter.warn(Log4jLoggerAdapter.java:478)\n        at org.apache.solr.update.PeerSync.handleResponse(PeerSync.java:485)\n        at org.apache.solr.update.PeerSync.sync(PeerSync.java:348)\n        at org.apache.solr.cloud.SyncStrategy.syncWithReplicas(SyncStrategy.java:180)\n        at org.apache.solr.cloud.SyncStrategy.syncReplicas(SyncStrategy.java:129)\n        at org.apache.solr.cloud.SyncStrategy.sync(SyncStrategy.java:108)\n        at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:386)\n        at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:170)\n        at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:135)\n        at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:307)\n        at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:216)\n        at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:729)\n        at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:435)\n        at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:170)\n        at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:135)\n        at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:307)\n        at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:216)\n        at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:729)\n        at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:435)\n        at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:170)\n        at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:135)\n        at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:307)\n        at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:216)\n        at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:729)\n        at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:435)\n....\n\n\n\nNever saw it before, Solr is still running fine it seems.\n\nedit: restarted Solr, got it again after a little while.\n\nedit: it seems to be caused by:\n\n\n2017-12-21 15:22:22.226 ERROR (qtp1929600551-22) [   ] o.a.s.s.HttpSolrCall null:org.apache.solr.core.SolrCoreInitializationException: SolrCore 'logs_shard1_replica_n1' is not available due\n to init failure: null\n        at org.apache.solr.core.CoreContainer.getCore(CoreContainer.java:1472)\n        at org.apache.solr.servlet.HttpSolrCall.init(HttpSolrCall.java:267)\n        at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:480)\n        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:382)\n        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:326)",
    "attachments": {},
    "issue_links": {},
    "comments": []
}