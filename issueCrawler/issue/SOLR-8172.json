{
    "id": "SOLR-8172",
    "title": "MorphlineBasicMiniMRTest failure",
    "details": {
        "components": [
            "contrib - MapReduce"
        ],
        "type": "Bug",
        "labels": "",
        "fix_versions": [],
        "affect_versions": "None",
        "status": "Closed",
        "resolution": "Won't Fix",
        "priority": "Major"
    },
    "description": "My Jenkins found a seed that reproduces for me on branch_5x and trunk with Java8 on Linux:\n\n\n[junit4]   2> org.apache.hadoop.HadoopIllegalArgumentException: An XAttr name must be prefixed with user/trusted/security/system/raw, followed by a '.'\n   [junit4]   2> \tat org.apache.hadoop.hdfs.XAttrHelper.buildXAttr(XAttrHelper.java:72)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.server.namenode.FSDirectory.<init>(FSDirectory.java:137)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:894)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:755)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:934)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:294)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:162)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:969)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:807)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:738)\n   [junit4]   2> \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:608)\n   [junit4]   2> \tat org.apache.solr.hadoop.MorphlineBasicMiniMRTest.setupClass(MorphlineBasicMiniMRTest.java:166)\n   [junit4]   2> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   [junit4]   2> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n   [junit4]   2> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n   [junit4]   2> \tat java.lang.reflect.Method.invoke(Method.java:497)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1665)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:804)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:820)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)\n   [junit4]   2> \tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:46)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:42)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:54)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:65)\n   [junit4]   2> \tat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:55)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n   [junit4]   2> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:367)\n   [junit4]   2> \tat java.lang.Thread.run(Thread.java:745)\n   [junit4]   2> 4376 INFO  (SUITE-MorphlineBasicMiniMRTest-seed#[B9093A739281AEA9]-worker) [    ] o.a.h.h.s.n.FSNamesystem Stopping services started for active state\n   [junit4]   2> 4393 INFO  (SUITE-MorphlineBasicMiniMRTest-seed#[B9093A739281AEA9]-worker) [    ] o.a.h.h.s.n.FSNamesystem Stopping services started for standby state\n   [junit4]   2> 4394 INFO  (SUITE-MorphlineBasicMiniMRTest-seed#[B9093A739281AEA9]-worker) [    ] o.a.h.h.MiniDFSCluster Shutting down the Mini HDFS Cluster\n   [junit4]   2> 4395 INFO  (SUITE-MorphlineBasicMiniMRTest-seed#[B9093A739281AEA9]-worker) [    ] o.a.s.SolrTestCaseJ4 ###deleteCore\n   [junit4]   2> NOTE: test params are: codec=Asserting(Lucene53): {}, docValues:{}, sim=DefaultSimilarity, locale=tr_TR, timezone=SystemV/AST4\n   [junit4]   2> NOTE: Linux 4.1.0-custom2-amd64 amd64/Oracle Corporation 1.8.0_45 (64-bit)/cpus=16,threads=1,free=333261664,total=352321536\n   [junit4]   2> NOTE: All tests run in this JVM: [MorphlineBasicMiniMRTest]\n   [junit4]   2> NOTE: download the large Jenkins line-docs file by running 'ant get-jenkins-line-docs' in the lucene directory.\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=MorphlineBasicMiniMRTest -Dtests.seed=B9093A739281AEA9 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=tr_TR -Dtests.timezone=SystemV/AST4 -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\n   [junit4] ERROR   0.00s J1 | MorphlineBasicMiniMRTest (suite) <<<\n   [junit4]    > Throwable #1: org.apache.hadoop.HadoopIllegalArgumentException: An XAttr name must be prefixed with user/trusted/security/system/raw, followed by a '.'\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([B9093A739281AEA9]:0)\n   [junit4]    > \tat org.apache.hadoop.hdfs.XAttrHelper.buildXAttr(XAttrHelper.java:72)\n   [junit4]    > \tat org.apache.hadoop.hdfs.server.namenode.FSDirectory.<init>(FSDirectory.java:137)\n   [junit4]    > \tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:894)\n   [junit4]    > \tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:755)\n   [junit4]    > \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:934)\n   [junit4]    > \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:294)\n   [junit4]    > \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:162)\n   [junit4]    > \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:969)\n   [junit4]    > \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:807)\n   [junit4]    > \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:738)\n   [junit4]    > \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:608)\n   [junit4]    > \tat org.apache.solr.hadoop.MorphlineBasicMiniMRTest.setupClass(MorphlineBasicMiniMRTest.java:166)\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:745)\n   [junit4] Completed [2/7] on J1 in 7.92s, 0 tests, 1 error <<< FAILURES!",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2015-10-26T13:10:22+0000",
            "author": "Steve Rowe",
            "content": "My Jenkins has found three seeds on branch_5x/Java7: 9E7806C578A59479, 28253FC2D6E419A9, 1227EC8A9C80BCC5 ",
            "id": "comment-14974176"
        }
    ]
}