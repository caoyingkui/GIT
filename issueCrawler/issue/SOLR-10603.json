{
    "id": "SOLR-10603",
    "title": "No system property or default value specified for org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider",
    "details": {
        "labels": "",
        "priority": "Major",
        "components": [
            "SolrCloud"
        ],
        "type": "Bug",
        "fix_versions": [],
        "affect_versions": "6.5",
        "resolution": "Not A Bug",
        "status": "Resolved"
    },
    "description": "l have a startup command of:\n\n    bin/solr start -v -cloud -s ~/var/solr\n\nIn ~/var/solr I have zoo.cfg and solr.xml. In solr.xml I have inserted:\n\n    <str name=\"zkCredentialsProvider\">${org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider}</str>\n\nIn bin/solr.in.sh\" I have:\n\nSOLR_ZK_CREDS_AND_ACLS=\"-DzkACLProvider=org.apache.solr.common.cloud.VMParamsAllAndReadonlyDigestZkACLProvider \\\n  -DzkCredentialsProvider=org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider \\\n  -DzkDigestUsername=admin-user -DzkDigestPassword=secret \\\n  -DzkDigestReadonlyUsername=readonly-user -DzkDigestReadonlyPassword=CHANGEME-READONLY-PASSWORD\"\n\nThe error is: \n\n2017-05-03 16:46:44.839 ERROR (main) [   ] o.a.s.c.SolrCore null:org.apache.solr.common.SolrException: No system property or default value specified for org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider value:${org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider}\n\tat org.apache.solr.util.PropertiesUtil.substituteProperty(PropertiesUtil.java:65)\n\tat org.apache.solr.util.DOMUtil.substituteProperties(DOMUtil.java:303)\n\tat org.apache.solr.util.DOMUtil.substituteProperties(DOMUtil.java:311)\n\tat org.apache.solr.util.DOMUtil.substituteProperties(DOMUtil.java:311)\n\tat org.apache.solr.util.DOMUtil.substituteProperties(DOMUtil.java:311)\n\tat org.apache.solr.core.Config.substituteProperties(Config.java:231)\n\tat org.apache.solr.core.SolrXmlConfig.fromConfig(SolrXmlConfig.java:63)\n\tat org.apache.solr.core.SolrXmlConfig.fromInputStream(SolrXmlConfig.java:131)\n\tat org.apache.solr.core.SolrXmlConfig.fromFile(SolrXmlConfig.java:113)\n\tat org.apache.solr.core.SolrXmlConfig.fromSolrHome(SolrXmlConfig.java:141)\n\tat org.apache.solr.servlet.SolrDispatchFilter.loadNodeConfig(SolrDispatchFilter.java:267)\n\tat org.apache.solr.servlet.SolrDispatchFilter.createCoreContainer(SolrDispatchFilter.java:235)\n\tat org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:169)\n\tat org.eclipse.jetty.servlet.FilterHolder.initialize(FilterHolder.java:137)\n\tat org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:873)\n\tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:349)\n\tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1404)\n\tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1366)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:778)\n\tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:262)\n\tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:520)\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n\tat org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:41)\n\tat org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:188)\n\tat org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:499)\n\tat org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:147)\n\tat org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:529)\n              \tat org.eclipse.jetty.util.Scanner.scan(Scanner.java:392)\n              \tat org.eclipse.jetty.util.Scanner.doStart(Scanner.java:313)\n              \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n              \tat org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:150)\n              \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n              \tat org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:561)\n              \tat org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:236)\n              \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n              \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\n              \tat org.eclipse.jetty.server.Server.start(Server.java:422)\n              \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113)\n              \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:61)\n              \tat org.eclipse.jetty.server.Server.doStart(Server.java:389)\n              \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n              \tat org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1516)\n              \tat java.security.AccessController.doPrivileged(Native Method)\n              \tat org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1441)\n              \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n              \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n              \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n              \tat java.lang.reflect.Method.invoke(Method.java:498)\n              \tat org.eclipse.jetty.start.Main.invokeMain(Main.java:214)\n              \tat org.eclipse.jetty.start.Main.start(Main.java:457)\n              \tat org.eclipse.jetty.start.Main.main(Main.java:75)ipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:180)\n\tat org.eclipse.jetty.deploy.providers.WebAppProvider.fileAdded(WebAppProvider.java:458)\n\tat org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:64)\n\tat org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:610)\n\tat org.ecl",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2017-05-03T17:53:50+0000",
            "content": "\n<str name=\"zkCredentialsProvider\">$\n{org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider}</str>\n\n\n\nthat syntax tells solr that at runtime you will define a system property with the name \"org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider\" ... but you have not done that \u2013 you have defined a system property (via the SOLR_ZK_CREDS_AND_ACLS solr.in.sh option) that has a value of \"org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider\"\n\nI would strongly suggest you do not modify the solr.xml from it's original form...\n\n\n<str name=\"zkCredentialsProvider\">${zkCredentialsProvider:org.apache.solr.common.cloud.DefaultZkCredentialsProvider}</str>\n\n\n\nand instead only change solr.in.sh.\n\nIf you are going to change solr.xml then you must use the correct syntax.  If your goal is to force the solr.xml zkCredentialsProvider option to be \"org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider\" - regardless of any system properties \u2013 then you do not want a \"${...}\" variable...\n\n\n\n<str name=\"zkCredentialsProvider\">org.apache.solr.common.cloud.VMParamsSingleSetCredentialsDigestZkCredentialsProvider</str>\n\n\n\nIf you need further assistance, please ask on the solr-user mailing list \u2013 the jira issue tracker is not a user support forum it is for tracking concrete bugs/features once they have been confirmed.\n\nhttp://lucene.apache.org/solr/community.html ",
            "author": "Hoss Man",
            "id": "comment-15995326"
        },
        {
            "date": "2017-05-03T18:00:15+0000",
            "content": "Ok will do. \n\nThank you for your guidance.  ",
            "author": "baychae",
            "id": "comment-15995342"
        },
        {
            "date": "2017-05-03T18:56:03+0000",
            "content": "I have implemented as advised and fail to see the affect. ",
            "author": "baychae",
            "id": "comment-15995434"
        }
    ]
}