{
    "id": "SOLR-7526",
    "title": "When replacing index contents and reloading the core, index is deleted",
    "details": {
        "components": [],
        "type": "Bug",
        "labels": "",
        "fix_versions": [],
        "affect_versions": "5.1",
        "status": "Open",
        "resolution": "Unresolved",
        "priority": "Major"
    },
    "description": "I want to replace the index with another index, so I replace the files and do a RELOAD, and the index disappears.\n\nSteps to reproduce:\n1. Create an empty core (no index/tlog)\n2. Add it to Solr and let it autocreate the index-folders\n\n$ find data/\ndata/\ndata/index\ndata/index/write.lock\ndata/index/segments_1\ndata/tlog\n\n \n3. Replace the index with another\n\n$ find data/\ndata\ndata/index\ndata/index/write.lock\ndata/index/_tt_Lucene50_0.doc\ndata/index/segments_1\ndata/index/_tw.fdx\ndata/index/_ra.fdt\ndata/index/_tw.fnm\ndata/index/_ra.fdx\ndata/index/_tw.nvd\ndata/index/_ra.fnm\ndata/index/_tw.nvm\ndata/index/_ra.nvd\ndata/index/_tw.si\ndata/index/_ra.nvm\ndata/index/_tw.tvd\ndata/index/_ra.si\ndata/index/_tw.tvx\ndata/index/_ra.tvd\ndata/index/_tw_Lucene50_0.doc\ndata/index/_ra.tvx\ndata/index/_tt_Lucene50_0.tip\ndata/index/_ra_Lucene50_0.doc\ndata/index/_tt_Lucene50_0.tim\ndata/index/_ra_Lucene50_0.pos\ndata/index/_tu_Lucene50_0.tim\ndata/index/_ra_Lucene50_0.tim\ndata/index/_tu_Lucene50_0.pos\ndata/index/_ra_Lucene50_0.tip\ndata/index/_tw_Lucene50_0.pos\ndata/index/_tk.fdt\ndata/index/_tw_Lucene50_0.tim\ndata/index/_tk.fdx\ndata/index/_tw_Lucene50_0.tip\ndata/index/_tk.fnm\ndata/index/_tx.fdt\ndata/index/_tk.nvd\ndata/index/_tx.fdx\ndata/index/_tk.nvm\ndata/index/_tx.fnm\ndata/index/_tk.si\ndata/index/_tx.nvd\ndata/index/_tk.tvd\ndata/index/_tx.nvm\ndata/index/_tk.tvx\ndata/index/_tu_Lucene50_0.tip\ndata/index/_tk_Lucene50_0.doc\ndata/index/_tv.fdt\ndata/index/_tk_Lucene50_0.pos\ndata/index/_tv.fdx\ndata/index/_tk_Lucene50_0.tim\ndata/index/_tv.fnm\ndata/index/_tk_Lucene50_0.tip\ndata/index/_tx.si\ndata/index/_tr.fdt\ndata/index/_tx.tvd\ndata/index/_tr.fdx\ndata/index/_tx.tvx\ndata/index/_tr.fnm\ndata/index/_tx_Lucene50_0.doc\ndata/index/_tr.nvd\ndata/index/_tx_Lucene50_0.pos\ndata/index/_tr.nvm\ndata/index/_tx_Lucene50_0.tim\ndata/index/_tr.si\ndata/index/_tx_Lucene50_0.tip\ndata/index/_tr.tvd\ndata/index/_ty.fdt\ndata/index/_tr.tvx\ndata/index/_tv.nvd\ndata/index/_tr_Lucene50_0.doc\ndata/index/_tv.nvm\ndata/index/_tr_Lucene50_0.pos\ndata/index/_tv.si\ndata/index/_tr_Lucene50_0.tim\ndata/index/_tv.tvd\ndata/index/_tr_Lucene50_0.tip\ndata/index/_ty.fdx\ndata/index/_ts.fdt\ndata/index/_ty.fnm\ndata/index/_ts.fdx\ndata/index/_ty.nvd\ndata/index/_ts.fnm\ndata/index/_ty.nvm\ndata/index/_ts.nvd\ndata/index/_ty.si\ndata/index/_ts.nvm\ndata/index/_ty.tvd\ndata/index/_ts.si\ndata/index/_ty.tvx\ndata/index/_ts.tvd\ndata/index/_ty_Lucene50_0.doc\ndata/index/_ts.tvx\ndata/index/_tv.tvx\ndata/index/_ts_Lucene50_0.doc\ndata/index/_tv_Lucene50_0.doc\ndata/index/_ts_Lucene50_0.pos\ndata/index/_tv_Lucene50_0.pos\ndata/index/_ts_Lucene50_0.tim\ndata/index/_tv_Lucene50_0.tim\ndata/index/_ts_Lucene50_0.tip\ndata/index/_ty_Lucene50_0.pos\ndata/index/_tt.fdt\ndata/index/_ty_Lucene50_0.tim\ndata/index/_tt.fdx\ndata/index/_ty_Lucene50_0.tip\ndata/index/_tt.fnm\ndata/index/_tz.fdt\ndata/index/_tt.nvd\ndata/index/_tz.fdx\ndata/index/_tt.nvm\ndata/index/_tz.fnm\ndata/index/_tt.si\ndata/index/_tz.nvd\ndata/index/_tt.tvd\ndata/index/_tz.nvm\ndata/index/_tt.tvx\ndata/index/_tv_Lucene50_0.tip\ndata/index/_tw.fdt\ndata/index/_tt_Lucene50_0.pos\ndata/index/_tu.fdt\ndata/index/_tz.si\ndata/index/_tu.fdx\ndata/index/_tz.tvd\ndata/index/_tu.fnm\ndata/index/_tz.tvx\ndata/index/_tu.nvd\ndata/index/_tz_Lucene50_0.doc\ndata/index/_tu.nvm\ndata/index/_tz_Lucene50_0.pos\ndata/index/_tu.si\ndata/index/_tz_Lucene50_0.tim\ndata/index/_tu.tvd\ndata/index/_tz_Lucene50_0.tip\ndata/index/_tu.tvx\ndata/index/_tu_Lucene50_0.doc\ndata/index/_u0.fdt\ndata/index/_u0.fdx\ndata/index/_u0.fnm\ndata/index/_u0.nvd\ndata/index/_u0.nvm\ndata/index/_u0.si\ndata/index/_u0.tvd\ndata/index/_u0.tvx\ndata/index/_u0_Lucene50_0.doc\ndata/index/_u0_Lucene50_0.pos\ndata/index/_u0_Lucene50_0.tim\ndata/index/_u0_Lucene50_0.tip\ndata/index/_u1.fdt\ndata/index/_u1.fdx\ndata/index/_u1.fnm\ndata/index/_u1.nvd\ndata/index/_u1.nvm\ndata/index/_u1.si\ndata/index/_u1.tvd\ndata/index/_u1.tvx\ndata/index/_u1_Lucene50_0.doc\ndata/index/_u1_Lucene50_0.pos\ndata/index/_u1_Lucene50_0.tim\ndata/index/_u1_Lucene50_0.tip\ndata/index/_u2.fdt\ndata/index/_u2.fdx\ndata/index/_u2.fnm\ndata/index/_u2.nvd\ndata/index/_u2.nvm\ndata/index/_u2.si\ndata/index/_u2.tvd\ndata/index/_u2.tvx\ndata/index/_u2_Lucene50_0.doc\ndata/index/_u2_Lucene50_0.pos\ndata/index/_u2_Lucene50_0.tim\ndata/index/_u2_Lucene50_0.tip\ndata/index/_u3.fdt\ndata/index/_u3.fdx\ndata/index/_u3.fnm\ndata/index/_u3.nvd\ndata/index/_u3.nvm\ndata/index/_u3.si\ndata/index/_u3.tvd\ndata/index/_u3.tvx\ndata/index/_u3_Lucene50_0.doc\ndata/index/_u3_Lucene50_0.pos\ndata/index/_u3_Lucene50_0.tim\ndata/index/_u3_Lucene50_0.tip\ndata/index/_u4.fdt\ndata/index/_u4.fdx\ndata/index/_u4.fnm\ndata/index/_u4.nvd\ndata/index/_u4.nvm\ndata/index/_u4.si\ndata/index/_u4.tvd\ndata/index/_u4.tvx\ndata/index/_u4_Lucene50_0.doc\ndata/index/_u4_Lucene50_0.pos\ndata/index/_u4_Lucene50_0.tim\ndata/index/_u4_Lucene50_0.tip\ndata/index/segments_s0\ndata/tlog\ndata/tlog/tlog.0000000000000001016\n\n\n\n4. Reload the core\n\n$ curl \"http://solr.local:8983/solr/admin/cores?action=RELOAD&core=core0\"\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<response>\n<lst name=\"responseHeader\"><int name=\"status\">0</int><int name=\"QTime\">420</int></lst>\n</response>\n\n\n5. The new index is now gone\n\n# find data/\ndata/\ndata/index\ndata/index/write.lock\ndata/index/segments_1\ndata/tlog\ndata/tlog/tlog.0000000000000001016",
    "attachments": {},
    "issue_links": {},
    "comments": []
}