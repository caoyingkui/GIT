{
    "id": "SOLR-1764",
    "title": "While indexing a \"java.lang.IllegalStateException: Can't overwrite cause\" exception is thrown",
    "details": {
        "affect_versions": "1.4",
        "status": "Closed",
        "fix_versions": [],
        "components": [
            "clients - java"
        ],
        "type": "Bug",
        "priority": "Major",
        "labels": "",
        "resolution": "Cannot Reproduce"
    },
    "description": "I get an exception while indexing. It seems that I'm unable to see the root cause of the exception because it is masked by another \"java.lang.IllegalStateException: Can't overwrite cause\" exception.\n\nHere is the stacktrace :\n\n16:59:04,292 ERROR [STDERR] Feb 8, 2010 4:59:04 PM org.apache.solr.update.processor.LogUpdateProcessor finish\nINFO: {} 0 15\n16:59:04,292 ERROR [STDERR] Feb 8, 2010 4:59:04 PM org.apache.solr.common.SolrException log\nSEVERE: java.lang.IllegalStateException: Can't overwrite cause\n        at java.lang.Throwable.initCause(Throwable.java:320)\n        at com.ctc.wstx.compat.Jdk14Impl.setInitCause(Jdk14Impl.java:70)\n        at com.ctc.wstx.exc.WstxException.<init>(WstxException.java:46)\n        at com.ctc.wstx.exc.WstxIOException.<init>(WstxIOException.java:16)\n        at com.ctc.wstx.stax.WstxInputFactory.doCreateSR(WstxInputFactory.java:536)\n        at com.ctc.wstx.stax.WstxInputFactory.createSR(WstxInputFactory.java:592)\n        at com.ctc.wstx.stax.WstxInputFactory.createSR(WstxInputFactory.java:648)\n        at com.ctc.wstx.stax.WstxInputFactory.createXMLStreamReader(WstxInputFactory.java:319)\n        at org.apache.solr.handler.XMLLoader.load(XMLLoader.java:68)\n        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:54)\n        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)\n        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)\n        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:338)\n        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)\n        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)\n        at java.lang.Thread.run(Thread.java:619)\n16:59:04,292 ERROR [STDERR] Feb 8, 2010 4:59:04 PM org.apache.solr.core.SolrCore execute\nINFO: [] webapp=/solr path=/update params=\n{wt=xml&version=2.2} status=500 QTime=15\n16:59:04,292 ERROR [STDERR] Feb 8, 2010 4:59:04 PM org.apache.solr.common.SolrException log\nSEVERE: java.lang.IllegalStateException: Can't overwrite cause\n        at java.lang.Throwable.initCause(Throwable.java:320)\n        at com.ctc.wstx.compat.Jdk14Impl.setInitCause(Jdk14Impl.java:70)\n        at com.ctc.wstx.exc.WstxException.<init>(WstxException.java:46)\n        at com.ctc.wstx.exc.WstxIOException.<init>(WstxIOException.java:16)\n        at com.ctc.wstx.stax.WstxInputFactory.doCreateSR(WstxInputFactory.java:536)\n        at com.ctc.wstx.stax.WstxInputFactory.createSR(WstxInputFactory.java:592)\n        at com.ctc.wstx.stax.WstxInputFactory.createSR(WstxInputFactory.java:648)\n        at com.ctc.wstx.stax.WstxInputFactory.createXMLStreamReader(WstxInputFactory.java:319)\n        at org.apache.solr.handler.XMLLoader.load(XMLLoader.java:68)\n        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:54)\n        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)\n        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)\n        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:338)\n        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)\n        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)\n        at java.lang.Thread.run(Thread.java:619)\n16:59:10,058 ERROR [STDERR] Feb 8, 2010 4:59:10 PM org.apache.solr.update.processor.LogUpdateProcessor finish\nINFO: {add=[null, null, null, null, null, null, null, null, ... (8 added)]} 0 765\n16:59:10,058 ERROR [STDERR] Feb 8, 2010 4:59:10 PM org.apache.solr.core.SolrCore execute\nINFO: [] webapp=/solr path=/update params={wt=xml&version=2.2}\n status=0 QTime=765\n16:59:15,761 ERROR [STDERR] Feb 8, 2010 4:59:15 PM org.apache.solr.update.processor.LogUpdateProcessor finish\nINFO: \n{add=[null, null, null, null, null, null, null, null, ... (8 added)]}\n 0 625\n16:59:15,761 ERROR [STDERR] Feb 8, 2010 4:59:15 PM org.apache.solr.core.SolrCore execute\nINFO: [] webapp=/solr path=/update params=\n{wt=xml&version=2.2}\n status=0 QTime=625",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "author": "Fuad Efendi",
            "id": "comment-12831268",
            "date": "2010-02-09T02:41:14+0000",
            "content": "Michael,\n\nWhich version of Java are you using? I believe something wrong with XML (upload) file, and specific Java version classes conflict with WoodStox, although SOLR may need improvement too:\nhttp://forums.sun.com/thread.jspa?threadID=5150576\n\nIt says that text nodes such as \n<prim name=\"y\">[-A-Z0-9.,()/='+:?!\"%&amp;*; ]</prim>\ncan be split (for instance, to process entities), depending on implementation, and, to be safe, SOLR needs something like\n\n while (reader.isCharacters()) {\n\tsb.append(reader.getText());\n\treader.next();\n}\n\n "
        },
        {
            "author": "Michael McGowan",
            "id": "comment-12831294",
            "date": "2010-02-09T05:04:30+0000",
            "content": "Hi Fuad,\n\nThanks for the info. I have this Java version :\n   java version \"1.6.0_10\"\n   Java(TM) SE Runtime Environment (build 1.6.0_10-b33)\n\nLet me know if you'd like me to try anything.\n\nMichael\n "
        },
        {
            "author": "Fuad Efendi",
            "id": "comment-12831458",
            "date": "2010-02-09T13:59:29+0000",
            "content": "Funny, it might happen that this is not a problem with JDK 1.6.0_9; or may be with latest JDK. As a quick workaround... Also, you may try to use SolrJ with binary format...\nI'll try to check that <element>word&amp;word</element> doesn't cause a problem...\n "
        },
        {
            "author": "Alexandre Rafalovitch",
            "id": "comment-16530612",
            "date": "2018-07-03T00:22:21+0000",
            "content": "Looks like an ancient issue that was never reproduced. To be closed. "
        }
    ]
}