{
    "id": "SOLR-7433",
    "title": "Maven dependency on solr-core 5.1.0 brings in 4.10.3 artifacts",
    "details": {
        "components": [],
        "type": "Bug",
        "labels": "",
        "fix_versions": [],
        "affect_versions": "5.0,                                            5.1",
        "status": "Closed",
        "resolution": "Invalid",
        "priority": "Minor"
    },
    "description": "Adding a Maven dependency on solr-core 5.1.0 brings in some 4.10.3 artifacts.\n\n<dependency>\n            <groupId>org.apache.solr</groupId>\n            <artifactId>solr-core</artifactId>\n            <version>5.1.0</version>\n            <scope>test</scope>\n        </dependency>\n\nRunning mvn dependency:tree shows:\n\n+- org.apache.solr:solr-core:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-analyzers-common:jar:4.10.3:test\n[INFO] | +- org.apache.lucene:lucene-analyzers-kuromoji:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-analyzers-phonetic:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-backward-codecs:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-codecs:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-core:jar:4.10.3:test\n[INFO] | +- org.apache.lucene:lucene-expressions:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-grouping:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-highlighter:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-join:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-memory:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-misc:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-queries:jar:5.1.0:test\n[INFO] | +- org.apache.lucene:lucene-queryparser:jar:4.10.3:test\n\nVerifying that solr-core came from Maven central:\n\n#Thu Apr 16 20:46:02 EDT 2015\nsolr-core-5.1.0.jar>central=\nsolr-core-5.1.0.pom>central=",
    "attachments": {},
    "issue_links": {},
    "comments": [
        {
            "date": "2015-05-06T23:40:22+0000",
            "author": "Steve Rowe",
            "content": "I can't reproduce.  mvn -version says:\n\n\nApache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-14T12:29:23-05:00)\nMaven home: /usr/local/Cellar/maven/3.2.5/libexec\nJava version: 1.7.0_71, vendor: Oracle Corporation\nJava home: /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"mac os x\", version: \"10.10.3\", arch: \"x86_64\", family: \"mac\"\n\n\n\nHere's what I did:\n\n\nmvn archetype:generate -DinteractiveMode=false -DgroupId=org.example -DartifactId=myproject -Dpackage=org.example.myproject\ncd myproject\nperl -pi.bak -e 's~(<dependencies>)~$1<dependency><groupId>org.apache.solr</groupId><artifactId>solr-core</artifactId><version>5.1.0</version><scope>test</scope></dependency>~' pom.xml\nrm -rf ~/.m2/repository/org/apache/{lucene,solr}  # Remove all Lucene/Solr artifacts from local repo\nmvn dependency:tree|grep 'Downloaded\\|org\\.apache\\.\\(lucene\\|solr\\)'\n\n\n\nHere's the output:\n\n\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/solr/solr-core/5.1.0/solr-core-5.1.0.pom (12 KB at 20.9 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/solr/solr-parent/5.1.0/solr-parent-5.1.0.pom (7 KB at 54.5 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-solr-grandparent/5.1.0/lucene-solr-grandparent-5.1.0.pom (323 KB at 734.6 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-analyzers-common/5.1.0/lucene-analyzers-common-5.1.0.pom (3 KB at 23.1 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-parent/5.1.0/lucene-parent-5.1.0.pom (5 KB at 33.9 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-analyzers-kuromoji/5.1.0/lucene-analyzers-kuromoji-5.1.0.pom (4 KB at 25.2 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-analyzers-phonetic/5.1.0/lucene-analyzers-phonetic-5.1.0.pom (4 KB at 25.9 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-backward-codecs/5.1.0/lucene-backward-codecs-5.1.0.pom (5 KB at 31.5 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-codecs/5.1.0/lucene-codecs-5.1.0.pom (4 KB at 24.8 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-core/5.1.0/lucene-core-5.1.0.pom (5 KB at 39.0 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-expressions/5.1.0/lucene-expressions-5.1.0.pom (3 KB at 23.2 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-grouping/5.1.0/lucene-grouping-5.1.0.pom (3 KB at 23.5 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-highlighter/5.1.0/lucene-highlighter-5.1.0.pom (4 KB at 25.8 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-join/5.1.0/lucene-join-5.1.0.pom (3 KB at 23.2 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-memory/5.1.0/lucene-memory-5.1.0.pom (5 KB at 33.3 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-misc/5.1.0/lucene-misc-5.1.0.pom (5 KB at 38.9 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-queries/5.1.0/lucene-queries-5.1.0.pom (3 KB at 22.3 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-queryparser/5.1.0/lucene-queryparser-5.1.0.pom (6 KB at 39.6 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-spatial/5.1.0/lucene-spatial-5.1.0.pom (3 KB at 23.0 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-suggest/5.1.0/lucene-suggest-5.1.0.pom (4 KB at 24.9 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/solr/solr-solrj/5.1.0/solr-solrj-5.1.0.pom (6 KB at 41.5 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-analyzers-phonetic/5.1.0/lucene-analyzers-phonetic-5.1.0.jar (26 KB at 77.9 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-backward-codecs/5.1.0/lucene-backward-codecs-5.1.0.jar (361 KB at 558.2 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-codecs/5.1.0/lucene-codecs-5.1.0.jar (410 KB at 336.8 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/solr/solr-core/5.1.0/solr-core-5.1.0.jar (3244 KB at 2429.5 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-expressions/5.1.0/lucene-expressions-5.1.0.jar (74 KB at 51.5 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-grouping/5.1.0/lucene-grouping-5.1.0.jar (107 KB at 71.4 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-analyzers-common/5.1.0/lucene-analyzers-common-5.1.0.jar (1516 KB at 956.6 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-join/5.1.0/lucene-join-5.1.0.jar (64 KB at 39.1 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-highlighter/5.1.0/lucene-highlighter-5.1.0.jar (139 KB at 80.2 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-memory/5.1.0/lucene-memory-5.1.0.jar (33 KB at 19.0 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-core/5.1.0/lucene-core-5.1.0.jar (2265 KB at 1315.6 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-misc/5.1.0/lucene-misc-5.1.0.jar (168 KB at 93.7 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-queries/5.1.0/lucene-queries-5.1.0.jar (208 KB at 107.7 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-spatial/5.1.0/lucene-spatial-5.1.0.jar (170 KB at 87.9 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-queryparser/5.1.0/lucene-queryparser-5.1.0.jar (392 KB at 185.9 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/solr/solr-solrj/5.1.0/solr-solrj-5.1.0.jar (522 KB at 242.4 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-suggest/5.1.0/lucene-suggest-5.1.0.jar (217 KB at 100.3 KB/sec)\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/lucene/lucene-analyzers-kuromoji/5.1.0/lucene-analyzers-kuromoji-5.1.0.jar (4491 KB at 1243.5 KB/sec)\n[INFO] +- org.apache.solr:solr-core:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-analyzers-common:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-analyzers-kuromoji:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-analyzers-phonetic:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-backward-codecs:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-codecs:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-core:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-expressions:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-grouping:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-highlighter:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-join:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-memory:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-misc:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-queries:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-queryparser:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-spatial:jar:5.1.0:test\n[INFO] |  +- org.apache.lucene:lucene-suggest:jar:5.1.0:test\n[INFO] |  +- org.apache.solr:solr-solrj:jar:5.1.0:test\n\n\n\nNo 4.10.3 dependencies there.\n\nWould you mind running the same experiment? ",
            "id": "comment-14531697"
        },
        {
            "date": "2015-05-08T13:35:20+0000",
            "author": "Bryan Bende",
            "content": "Hi Steve, Just looked at this again and following your steps I can not reproduce this now. \n\nIt only appears to be an issue for me when I added solr-core 5.1.0 to a larger project, which after further investigation I believe already had lucene 4.10.3 on the classpath in another area of the project, and had a dependencyManagement block forcing the version of lucene to 4.10.3. \n\nSorry for having you look into this.  ",
            "id": "comment-14534551"
        },
        {
            "date": "2015-05-08T17:31:20+0000",
            "author": "Hoss Man",
            "content": "Thanks for confirming Bryan! ",
            "id": "comment-14535030"
        }
    ]
}