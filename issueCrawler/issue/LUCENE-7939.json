{
    "id": "LUCENE-7939",
    "title": "Speed up MinShouldMatchSumScorer in conjunctions",
    "details": {
        "labels": "",
        "priority": "Minor",
        "resolution": "Fixed",
        "affect_versions": "None",
        "status": "Closed",
        "type": "Improvement",
        "components": [],
        "fix_versions": [
            "7.1",
            "master (8.0)"
        ]
    },
    "description": "MinShouldMatchSumScorer has good iteration capabilities, but if it is not used as a lead for the iteration then the advance() call might make a lot of efforts in order to find the next match while we should instead let the lead iterator of the conjunction skip over non-matching documents. In this issue I'd like to explore changing MinShouldMatchSumScorer by giving it a two-phase iterator and making advance() return a candidate for the next match that is less good but much cheaper to compute.",
    "attachments": {
        "LUCENE-7939.patch": "https://issues.apache.org/jira/secure/attachment/12882914/LUCENE-7939.patch"
    },
    "issue_links": {},
    "comments": [
        {
            "id": "comment-16135454",
            "date": "2017-08-21T17:15:57+0000",
            "content": "Here is a proposal. I ran a benchmark with the following tasks (taken from LUCENE-4571):\n\n\nHighMinShouldMatch4: ref http from name title +minShouldMatch=4\nHighMinShouldMatch3: ref http from name title +minShouldMatch=3\nHighMinShouldMatch2: ref http from name title +minShouldMatch=2\nHighMinShouldMatch0: ref http from name title\nLow1MinShouldMatch4: ref http from name dublin +minShouldMatch=4\nLow1MinShouldMatch3: ref http from name dublin +minShouldMatch=3\nLow1MinShouldMatch2: ref http from name dublin +minShouldMatch=2\nLow1MinShouldMatch0: ref http from name dublin\nLow2MinShouldMatch4: ref http from wings dublin +minShouldMatch=4\nLow2MinShouldMatch3: ref http from wings dublin +minShouldMatch=3\nLow2MinShouldMatch2: ref http from wings dublin +minShouldMatch=2\nLow2MinShouldMatch0: ref http from wings dublin\nLow3MinShouldMatch4: ref http struck wings dublin +minShouldMatch=4\nLow3MinShouldMatch3: ref http struck wings dublin +minShouldMatch=3\nLow3MinShouldMatch2: ref http struck wings dublin +minShouldMatch=2\nLow3MinShouldMatch0: ref http struck wings dublin\nLow4MinShouldMatch4: ref restored struck wings dublin +minShouldMatch=4\nLow4MinShouldMatch3: ref restored struck wings dublin +minShouldMatch=3\nLow4MinShouldMatch2: ref restored struck wings dublin +minShouldMatch=2\nLow4MinShouldMatch0: ref restored struck wings dublin\nConjHighMinShouldMatch4: +only ref http from name title +minShouldMatch=4\nConjHighMinShouldMatch3: +only ref http from name title +minShouldMatch=3\nConjHighMinShouldMatch2: +only ref http from name title +minShouldMatch=2\nConjHighMinShouldMatch0: +only ref http from name title\nConjLow1MinShouldMatch4: +only ref http from name dublin +minShouldMatch=4\nConjLow1MinShouldMatch3: +only ref http from name dublin +minShouldMatch=3\nConjLow1MinShouldMatch2: +only ref http from name dublin +minShouldMatch=2\nConjLow1MinShouldMatch0: +only ref http from name dublin\nConjLow2MinShouldMatch4: +only ref http from wings dublin +minShouldMatch=4\nConjLow2MinShouldMatch3: +only ref http from wings dublin +minShouldMatch=3\nConjLow2MinShouldMatch2: +only ref http from wings dublin +minShouldMatch=2\nConjLow2MinShouldMatch0: +only ref http from wings dublin\nConjLow3MinShouldMatch4: +only ref http struck wings dublin +minShouldMatch=4\nConjLow3MinShouldMatch3: +only ref http struck wings dublin +minShouldMatch=3\nConjLow3MinShouldMatch2: +only ref http struck wings dublin +minShouldMatch=2\nConjLow3MinShouldMatch0: +only ref http struck wings dublin\nConjLow4MinShouldMatch4: +only ref restored struck wings dublin +minShouldMatch=4\nConjLow4MinShouldMatch3: +only ref restored struck wings dublin +minShouldMatch=3\nConjLow4MinShouldMatch2: +only ref restored struck wings dublin +minShouldMatch=2\nConjLow4MinShouldMatch0: +only ref restored struck wings dublin\n\n\n\nAs you can see, there are two versions for each task, the original one and one that starts with \n{Conj}\n because the query is intersected with +only.\n\nluceneutil gave me the following numbers on wikimedium10m:\n\n\n                    TaskQPS baseline      StdDev   QPS patch      StdDev                Pct diff\n ConjLow4MinShouldMatch3      230.51      (2.8%)      223.38      (2.0%)   -3.1% (  -7% -    1%)\n     Low2MinShouldMatch3        5.04      (2.6%)        4.92      (2.0%)   -2.3% (  -6% -    2%)\n     Low1MinShouldMatch3        3.80      (3.3%)        3.76      (4.8%)   -1.2% (  -8% -    7%)\n     HighMinShouldMatch3        3.27      (3.6%)        3.23      (4.9%)   -1.2% (  -9% -    7%)\n     Low1MinShouldMatch0        3.72      (4.7%)        3.68      (6.0%)   -1.1% ( -11% -   10%)\n     HighMinShouldMatch0        3.24      (4.5%)        3.21      (5.7%)   -1.0% ( -10% -    9%)\n     Low2MinShouldMatch2        4.44      (3.8%)        4.39      (4.9%)   -1.0% (  -9% -    7%)\n     Low1MinShouldMatch2        3.63      (3.9%)        3.60      (4.9%)   -1.0% (  -9% -    8%)\n     Low2MinShouldMatch0        4.55      (5.1%)        4.51      (5.9%)   -0.9% ( -11% -   10%)\n     HighMinShouldMatch2        3.17      (4.1%)        3.14      (5.0%)   -0.9% (  -9% -    8%)\n     Low1MinShouldMatch4        5.11      (2.2%)        5.06      (2.1%)   -0.8% (  -5% -    3%)\n     Low3MinShouldMatch2        6.23      (3.4%)        6.18      (4.3%)   -0.8% (  -8% -    7%)\n     HighMinShouldMatch4        3.42      (3.7%)        3.40      (5.0%)   -0.6% (  -8% -    8%)\n     Low4MinShouldMatch0       10.67      (6.1%)       10.61      (6.9%)   -0.6% ( -12% -   13%)\n     Low4MinShouldMatch2       42.49      (1.5%)       42.25      (1.4%)   -0.6% (  -3% -    2%)\n     Low3MinShouldMatch0        6.32      (5.2%)        6.29      (6.4%)   -0.5% ( -11% -   11%)\n     Low3MinShouldMatch3       38.64      (1.9%)       38.46      (1.4%)   -0.5% (  -3% -    2%)\n     Low4MinShouldMatch3      241.97      (3.9%)      240.87      (3.7%)   -0.5% (  -7% -    7%)\n     Low2MinShouldMatch4       45.66      (1.3%)       45.58      (1.5%)   -0.2% (  -2% -    2%)\n ConjHighMinShouldMatch0        5.29      (4.0%)        5.29      (4.7%)   -0.1% (  -8% -    9%)\n ConjLow1MinShouldMatch0        6.15      (3.8%)        6.16      (4.3%)    0.2% (  -7% -    8%)\n     Low4MinShouldMatch4      415.43      (2.2%)      416.29      (2.8%)    0.2% (  -4% -    5%)\n ConjLow4MinShouldMatch0       16.86      (1.1%)       16.91      (1.9%)    0.2% (  -2% -    3%)\n ConjLow3MinShouldMatch0       10.83      (2.4%)       10.86      (2.7%)    0.3% (  -4% -    5%)\n ConjLow2MinShouldMatch0        7.60      (3.5%)        7.64      (3.8%)    0.4% (  -6% -    8%)\n     Low3MinShouldMatch4      389.80      (3.4%)      392.00      (2.4%)    0.6% (  -5% -    6%)\n ConjLow3MinShouldMatch4      372.17      (4.2%)      374.75      (2.2%)    0.7% (  -5% -    7%)\n ConjLow4MinShouldMatch4      406.38      (5.0%)      415.00      (3.2%)    2.1% (  -5% -   10%)\n ConjHighMinShouldMatch2        4.78      (2.0%)        4.93      (2.0%)    3.3% (   0% -    7%)\n ConjLow1MinShouldMatch2        5.49      (2.0%)        5.74      (1.7%)    4.4% (   0% -    8%)\n ConjLow2MinShouldMatch2        7.08      (1.8%)        7.62      (2.0%)    7.7% (   3% -   11%)\n ConjLow3MinShouldMatch2       10.90      (1.9%)       12.60      (2.3%)   15.6% (  11% -   20%)\n ConjHighMinShouldMatch3        4.77      (2.7%)        5.63      (2.8%)   18.0% (  12% -   24%)\n ConjLow2MinShouldMatch4       43.82      (1.7%)       54.61      (2.3%)   24.6% (  20% -   29%)\n ConjLow1MinShouldMatch3        5.60      (3.3%)        7.13      (3.0%)   27.3% (  20% -   34%)\n ConjLow4MinShouldMatch2       40.49      (1.2%)       54.81      (2.6%)   35.4% (  31% -   39%)\n ConjLow3MinShouldMatch3       36.65      (1.6%)       50.97      (2.5%)   39.1% (  34% -   43%)\n ConjLow2MinShouldMatch3        7.79      (3.2%)       10.86      (3.2%)   39.5% (  32% -   47%)\n ConjHighMinShouldMatch4        4.98      (3.0%)        7.31      (3.4%)   46.7% (  39% -   54%)\n ConjLow1MinShouldMatch4        6.58      (3.3%)       11.20      (3.3%)   70.3% (  61% -   79%\n\n ",
            "author": "Adrien Grand"
        },
        {
            "id": "comment-16138499",
            "date": "2017-08-23T15:25:10+0000",
            "content": "Here is a more complete benchmark, with conjunctions with a low-frequency term as well in order to better show the impact of the patch.\n\n\n                    TaskQPS baseline      StdDev   QPS patch      StdDev                Pct diff\nHighConjLow4MinShouldMatch3      238.10      (3.2%)      232.20      (2.2%)   -2.5% (  -7% -    2%)\n     Low2MinShouldMatch3        5.06      (3.2%)        4.96      (1.9%)   -1.9% (  -6% -    3%)\n     Low1MinShouldMatch0        3.69      (4.1%)        3.64      (3.6%)   -1.2% (  -8% -    6%)\n     Low1MinShouldMatch3        3.82      (4.6%)        3.77      (4.5%)   -1.2% (  -9% -    8%)\n     HighMinShouldMatch3        3.28      (4.6%)        3.24      (4.3%)   -1.1% (  -9% -    8%)\n     HighMinShouldMatch4        3.46      (5.1%)        3.42      (5.0%)   -1.1% ( -10% -    9%)\n     HighMinShouldMatch2        3.17      (4.4%)        3.14      (3.8%)   -1.1% (  -8% -    7%)\n     Low2MinShouldMatch2        4.43      (4.1%)        4.39      (3.9%)   -1.1% (  -8% -    7%)\n     Low2MinShouldMatch0        4.50      (4.3%)        4.45      (3.7%)   -1.0% (  -8% -    7%)\n     HighMinShouldMatch0        3.23      (4.4%)        3.20      (3.8%)   -1.0% (  -8% -    7%)\n     Low3MinShouldMatch2        6.21      (4.1%)        6.15      (3.8%)   -1.0% (  -8% -    7%)\n     Low4MinShouldMatch2       43.17      (1.5%)       42.74      (1.5%)   -1.0% (  -3% -    2%)\n     Low1MinShouldMatch2        3.62      (4.0%)        3.59      (3.7%)   -1.0% (  -8% -    7%)\n     Low1MinShouldMatch4        5.15      (3.2%)        5.10      (1.8%)   -1.0% (  -5% -    4%)\n     Low3MinShouldMatch0        6.27      (4.3%)        6.22      (3.7%)   -0.8% (  -8% -    7%)\nHighConjLow3MinShouldMatch4      395.48      (2.8%)      392.50      (1.7%)   -0.8% (  -5% -    3%)\n     Low4MinShouldMatch0       10.49      (4.6%)       10.42      (4.0%)   -0.7% (  -8% -    8%)\n     Low3MinShouldMatch3       39.29      (1.6%)       39.14      (1.9%)   -0.4% (  -3% -    3%)\n     Low4MinShouldMatch4      439.43      (3.1%)      439.31      (2.0%)   -0.0% (  -4% -    5%)\n     Low2MinShouldMatch4       46.39      (1.9%)       46.42      (2.2%)    0.1% (  -3% -    4%)\n     Low4MinShouldMatch3      251.09      (3.0%)      251.28      (2.3%)    0.1% (  -5% -    5%)\n     Low3MinShouldMatch4      407.65      (2.6%)      408.19      (2.0%)    0.1% (  -4% -    4%)\nHighConjLow4MinShouldMatch4      431.30      (3.3%)      431.89      (1.8%)    0.1% (  -4% -    5%)\nLowConjLow2MinShouldMatch0       34.97      (2.0%)       35.05      (2.0%)    0.2% (  -3% -    4%)\nLowConjHighMinShouldMatch0       24.07      (2.2%)       24.14      (2.2%)    0.3% (  -4% -    4%)\nLowConjLow3MinShouldMatch0       47.30      (1.9%)       47.47      (2.0%)    0.4% (  -3% -    4%)\nLowConjLow1MinShouldMatch0       28.21      (2.1%)       28.31      (2.1%)    0.4% (  -3% -    4%)\nHighConjHighMinShouldMatch0        5.45      (1.5%)        5.48      (1.6%)    0.6% (  -2% -    3%)\nHighConjLow1MinShouldMatch0        6.34      (1.4%)        6.38      (1.7%)    0.6% (  -2% -    3%)\nLowConjLow4MinShouldMatch0       75.37      (1.4%)       75.83      (1.7%)    0.6% (  -2% -    3%)\nHighConjLow2MinShouldMatch0        7.82      (1.3%)        7.89      (1.8%)    1.0% (  -2% -    4%)\nHighConjLow3MinShouldMatch0       11.04      (1.3%)       11.19      (2.2%)    1.4% (  -2% -    4%)\nHighConjLow4MinShouldMatch0       17.11      (1.2%)       17.51      (2.7%)    2.3% (  -1% -    6%)\nHighConjHighMinShouldMatch2        4.82      (1.6%)        4.94      (2.3%)    2.5% (  -1% -    6%)\nLowConjHighMinShouldMatch2       23.41      (2.1%)       24.16      (2.2%)    3.2% (  -1% -    7%)\nHighConjLow1MinShouldMatch2        5.54      (1.4%)        5.75      (2.1%)    3.7% (   0% -    7%)\nLowConjLow1MinShouldMatch2       27.31      (2.0%)       28.54      (2.2%)    4.5% (   0% -    8%)\nHighConjLow2MinShouldMatch2        7.14      (1.6%)        7.64      (2.3%)    7.1% (   3% -   11%)\nLowConjLow2MinShouldMatch2       34.08      (2.1%)       36.95      (2.3%)    8.4% (   4% -   13%)\nHighConjLow3MinShouldMatch2       10.97      (2.0%)       12.56      (2.8%)   14.5% (   9% -   19%)\nHighConjHighMinShouldMatch3        4.79      (2.2%)        5.61      (2.7%)   17.0% (  11% -   22%)\nLowConjHighMinShouldMatch3       23.04      (2.0%)       27.15      (2.6%)   17.9% (  13% -   22%)\nLowConjLow3MinShouldMatch2       47.31      (2.0%)       59.02      (2.6%)   24.7% (  19% -   29%)\nHighConjLow1MinShouldMatch3        5.63      (2.7%)        7.09      (3.1%)   25.9% (  19% -   32%)\nHighConjLow2MinShouldMatch4       44.44      (2.1%)       56.15      (2.8%)   26.4% (  20% -   31%)\nLowConjLow4MinShouldMatch4      433.71      (3.7%)      554.58      (3.6%)   27.9% (  19% -   36%)\nLowConjLow1MinShouldMatch3       26.52      (1.9%)       34.26      (2.8%)   29.2% (  24% -   34%)\nHighConjLow4MinShouldMatch2       40.97      (1.6%)       55.81      (2.4%)   36.2% (  31% -   40%)\nHighConjLow2MinShouldMatch3        7.81      (2.9%)       10.80      (3.1%)   38.3% (  31% -   45%)\nHighConjLow3MinShouldMatch3       37.26      (1.9%)       52.29      (2.8%)   40.3% (  34% -   45%)\nLowConjLow3MinShouldMatch4      398.61      (3.3%)      560.67      (4.6%)   40.7% (  31% -   50%)\nHighConjHighMinShouldMatch4        5.01      (2.9%)        7.28      (2.9%)   45.4% (  38% -   52%)\nLowConjLow4MinShouldMatch3      247.43      (3.0%)      395.78      (4.7%)   60.0% (  50% -   69%)\nLowConjLow2MinShouldMatch3       32.48      (1.9%)       53.52      (3.9%)   64.8% (  57% -   71%)\nHighConjLow1MinShouldMatch4        6.67      (3.1%)       11.15      (3.5%)   67.2% (  58% -   76%)\nLowConjHighMinShouldMatch4       21.88      (1.8%)       36.60      (3.8%)   67.3% (  60% -   74%)\nLowConjLow1MinShouldMatch4       23.73      (1.8%)       56.91      (6.1%)  139.8% ( 129% -  150%)\nLowConjLow4MinShouldMatch2       78.45      (1.6%)      289.55     (10.0%)  269.1% ( 253% -  285%)\nLowConjLow3MinShouldMatch3       55.74      (1.9%)      367.43     (17.9%)  559.2% ( 529% -  590%)\nLowConjLow2MinShouldMatch4       53.12      (2.1%)      496.43     (29.6%)  834.5% ( 786% -  884%)\n\n\n\nI improved a bit the patch so that advance returns a better docID: the minShouldMatch-th lowest doc ID. This is how I had done it initially but for some reason it seemed slower at that time. That said this time I checked the previous patch (baseline) vs. the new patch and performance looks very similar.\n\n\n                    TaskQPS baseline      StdDev   QPS patch      StdDev                Pct diff\nLowConjLow4MinShouldMatch3      394.61      (3.3%)      390.19      (3.1%)   -1.1% (  -7% -    5%)\nLowConjLow4MinShouldMatch2      284.16      (2.6%)      281.31      (2.4%)   -1.0% (  -5% -    4%)\nLowConjLow3MinShouldMatch4      554.91      (2.4%)      549.88      (2.9%)   -0.9% (  -6% -    4%)\n     Low4MinShouldMatch4      431.80      (2.9%)      428.16      (3.4%)   -0.8% (  -6% -    5%)\n     Low4MinShouldMatch3      246.52      (3.1%)      244.78      (3.4%)   -0.7% (  -6% -    5%)\nLowConjLow3MinShouldMatch0       46.84      (1.4%)       46.58      (1.9%)   -0.6% (  -3% -    2%)\nLowConjLow2MinShouldMatch2       36.51      (1.7%)       36.31      (2.1%)   -0.6% (  -4% -    3%)\nHighConjLow2MinShouldMatch2        7.58      (2.2%)        7.54      (2.3%)   -0.6% (  -4% -    4%)\nLowConjLow1MinShouldMatch4       56.08      (2.5%)       55.80      (2.4%)   -0.5% (  -5% -    4%)\nLowConjLow1MinShouldMatch0       27.91      (1.8%)       27.77      (1.8%)   -0.5% (  -4% -    3%)\nLowConjLow4MinShouldMatch4      546.13      (3.8%)      543.52      (3.3%)   -0.5% (  -7% -    6%)\nLowConjLow3MinShouldMatch2       58.27      (2.0%)       58.01      (1.9%)   -0.5% (  -4% -    3%)\nHighConjLow2MinShouldMatch3       10.70      (2.3%)       10.66      (2.3%)   -0.4% (  -4% -    4%)\nHighConjLow1MinShouldMatch4       11.05      (2.3%)       11.00      (2.2%)   -0.4% (  -4% -    4%)\nHighConjLow3MinShouldMatch4      385.64      (3.1%)      384.08      (3.7%)   -0.4% (  -7% -    6%)\nLowConjHighMinShouldMatch3       26.84      (2.2%)       26.74      (1.8%)   -0.4% (  -4% -    3%)\n     Low2MinShouldMatch3        4.90      (2.4%)        4.89      (2.7%)   -0.4% (  -5% -    4%)\nHighConjLow3MinShouldMatch2       12.44      (2.4%)       12.40      (2.0%)   -0.3% (  -4% -    4%)\nHighConjLow2MinShouldMatch4       55.38      (2.3%)       55.20      (1.9%)   -0.3% (  -4% -    3%)\nHighConjLow3MinShouldMatch3       51.66      (2.0%)       51.49      (1.8%)   -0.3% (  -4% -    3%)\nLowConjLow3MinShouldMatch3      361.89      (3.1%)      360.91      (2.7%)   -0.3% (  -5% -    5%)\nLowConjLow2MinShouldMatch4      484.47      (2.8%)      483.24      (3.3%)   -0.3% (  -6% -    6%)\n     Low2MinShouldMatch4       45.70      (2.2%)       45.59      (1.6%)   -0.2% (  -3% -    3%)\n     Low1MinShouldMatch0        3.62      (4.5%)        3.61      (4.4%)   -0.2% (  -8% -    9%)\n     Low3MinShouldMatch3       38.62      (1.4%)       38.53      (1.4%)   -0.2% (  -2% -    2%)\nLowConjHighMinShouldMatch0       23.80      (1.8%)       23.75      (1.8%)   -0.2% (  -3% -    3%)\n     HighMinShouldMatch2        3.10      (4.8%)        3.10      (4.6%)   -0.2% (  -9% -    9%)\nHighConjLow1MinShouldMatch2        5.71      (2.3%)        5.69      (2.3%)   -0.2% (  -4% -    4%)\nLowConjLow2MinShouldMatch0       34.54      (2.1%)       34.48      (1.6%)   -0.2% (  -3% -    3%)\nHighConjHighMinShouldMatch4        7.24      (2.3%)        7.23      (2.2%)   -0.2% (  -4% -    4%)\n     Low1MinShouldMatch2        3.54      (4.5%)        3.54      (4.5%)   -0.1% (  -8% -    9%)\nHighConjHighMinShouldMatch2        4.90      (2.2%)        4.90      (2.1%)   -0.1% (  -4% -    4%)\nHighConjLow1MinShouldMatch3        7.04      (2.4%)        7.03      (2.3%)   -0.1% (  -4% -    4%)\nHighConjLow4MinShouldMatch2       55.15      (2.1%)       55.09      (1.7%)   -0.1% (  -3% -    3%)\nHighConjLow3MinShouldMatch0       11.00      (2.3%)       10.99      (2.3%)   -0.1% (  -4% -    4%)\n     Low3MinShouldMatch0        6.14      (4.6%)        6.14      (4.4%)   -0.1% (  -8% -    9%)\n     Low1MinShouldMatch4        5.03      (2.6%)        5.03      (2.8%)   -0.1% (  -5% -    5%)\nLowConjHighMinShouldMatch2       23.86      (2.2%)       23.84      (1.8%)   -0.1% (  -3% -    3%)\nHighConjLow1MinShouldMatch0        6.24      (2.5%)        6.24      (2.7%)   -0.0% (  -5% -    5%)\n     Low3MinShouldMatch4      398.82      (3.5%)      398.66      (2.9%)   -0.0% (  -6% -    6%)\nLowConjLow1MinShouldMatch2       28.20      (1.9%)       28.19      (1.8%)   -0.0% (  -3% -    3%)\n     HighMinShouldMatch0        3.16      (4.9%)        3.16      (4.8%)   -0.0% (  -9% -   10%)\n     HighMinShouldMatch3        3.20      (5.3%)        3.19      (5.2%)   -0.0% ( -10% -   11%)\nHighConjLow4MinShouldMatch4      426.74      (3.2%)      426.65      (3.4%)   -0.0% (  -6% -    6%)\n     HighMinShouldMatch4        3.36      (5.8%)        3.36      (5.6%)   -0.0% ( -10% -   11%)\nLowConjLow1MinShouldMatch3       33.74      (2.4%)       33.74      (1.8%)   -0.0% (  -4% -    4%)\n     Low4MinShouldMatch0       10.28      (4.9%)       10.28      (4.7%)    0.0% (  -9% -   10%)\nHighConjLow4MinShouldMatch3      229.78      (3.0%)      229.82      (2.4%)    0.0% (  -5% -    5%)\nLowConjHighMinShouldMatch4       36.04      (2.3%)       36.05      (2.1%)    0.0% (  -4% -    4%)\nLowConjLow4MinShouldMatch0       74.47      (1.9%)       74.48      (2.0%)    0.0% (  -3% -    3%)\n     Low4MinShouldMatch2       42.32      (1.4%)       42.33      (1.5%)    0.0% (  -2% -    2%)\nHighConjHighMinShouldMatch3        5.57      (2.6%)        5.57      (2.3%)    0.0% (  -4% -    5%)\nHighConjLow4MinShouldMatch0       17.19      (2.9%)       17.19      (2.9%)    0.0% (  -5% -    6%)\nLowConjLow2MinShouldMatch3       52.65      (2.4%)       52.68      (2.1%)    0.0% (  -4% -    4%)\nHighConjLow2MinShouldMatch0        7.75      (2.3%)        7.75      (2.2%)    0.1% (  -4% -    4%)\nHighConjHighMinShouldMatch0        5.37      (2.5%)        5.37      (2.6%)    0.1% (  -4% -    5%)\n     Low2MinShouldMatch2        4.33      (4.7%)        4.33      (4.7%)    0.1% (  -8% -    9%)\n     Low3MinShouldMatch2        6.06      (4.6%)        6.06      (4.7%)    0.1% (  -8% -    9%)\n     Low2MinShouldMatch0        4.40      (4.8%)        4.40      (4.5%)    0.1% (  -8% -    9%)\n     Low1MinShouldMatch3        3.71      (5.3%)        3.72      (4.9%)    0.2% (  -9% -   10%)\n\n\n\nGiven that returning a better next candidate is safer, I'd like to go with the new patch. ",
            "author": "Adrien Grand"
        },
        {
            "id": "comment-16138532",
            "date": "2017-08-23T15:54:26+0000",
            "content": "Very impressive results ! The impacts when there is no conjunction are not significant so big +1. ",
            "author": "Jim Ferenczi"
        },
        {
            "id": "comment-16138677",
            "date": "2017-08-23T17:20:27+0000",
            "content": "Commit 586270a76990f6462c688e79ab85cf16df28b8a8 in lucene-solr's branch refs/heads/branch_7x from Adrien Grand\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=586270a ]\n\nLUCENE-7939: Speed up MinShouldMatchSumScorer in conjunctions. ",
            "author": "ASF subversion and git services"
        },
        {
            "id": "comment-16138678",
            "date": "2017-08-23T17:20:29+0000",
            "content": "Commit 3be5808caf0235081aa47b3604e00d3b5f358d80 in lucene-solr's branch refs/heads/master from Adrien Grand\n[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3be5808 ]\n\nLUCENE-7939: Speed up MinShouldMatchSumScorer in conjunctions. ",
            "author": "ASF subversion and git services"
        },
        {
            "id": "comment-16138681",
            "date": "2017-08-23T17:21:06+0000",
            "content": "Thanks for having a look! ",
            "author": "Adrien Grand"
        },
        {
            "id": "comment-16207480",
            "date": "2017-10-17T11:04:29+0000",
            "content": "Bulk close after 7.1.0 release ",
            "author": "Shalin Shekhar Mangar"
        }
    ]
}