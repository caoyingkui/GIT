{
    "id": "SOLR-3220",
    "title": "RecoveryZkTest test failure",
    "details": {
        "affect_versions": "None",
        "status": "Open",
        "fix_versions": [],
        "components": [],
        "type": "Bug",
        "priority": "Major",
        "labels": "",
        "resolution": "Unresolved"
    },
    "description": "observed a failure in RecoveryZkTest.testDistribSearch using r1298661 that had some odd looking (to me) log info. \n\ncould not reproduce with identical seed",
    "attachments": {
        "TEST-org.apache.solr.cloud.RecoveryZkTest.xml": "https://issues.apache.org/jira/secure/attachment/12517649/TEST-org.apache.solr.cloud.RecoveryZkTest.xml"
    },
    "issue_links": {},
    "comments": [
        {
            "author": "Dawid Weiss",
            "id": "comment-13225943",
            "date": "2012-03-09T08:52:41+0000",
            "content": "I've had this a few times on my build server too. "
        },
        {
            "author": "Dawid Weiss",
            "id": "comment-13225944",
            "date": "2012-03-09T08:54:06+0000",
            "content": "\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> org.apache.solr.client.solrj.SolrServerException: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:278)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.impl.CloudSolrServer.request(CloudSolrServer.java:188)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:104)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:122)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:107)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.cloud.RecoveryZkTest.indexDoc(RecoveryZkTest.java:119)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.cloud.RecoveryZkTest.indexr(RecoveryZkTest.java:140)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.cloud.FullSolrCloudTest.access$200(FullSolrCloudTest.java:62)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.cloud.FullSolrCloudTest$StopableIndexingThread.run(FullSolrCloudTest.java:1271)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> Caused by: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.common.util.JavaBinCodec.unmarshal(JavaBinCodec.java:109)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.impl.BinaryResponseParser.processResponse(BinaryResponseParser.java:41)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:468)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:251)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \tat org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:251)\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> \t... 8 more\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> REQUEST FAILED:\nbuild\t09-Mar-2012 02:28:29\t   [junit4]   2> org.apache.solr.client.solrj.SolrServerException: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\n\n "
        },
        {
            "author": "Dawid Weiss",
            "id": "comment-13227353",
            "date": "2012-03-12T07:43:50+0000",
            "content": "Another one of these, from LUCENE-3808 branch, but it's the same error.\n\nbuild\t12-Mar-2012 01:08:44\t   [junit4] Running org.apache.solr.handler.component.DistributedSpellCheckComponentTest\nbuild\t12-Mar-2012 01:08:44\t   [junit4] ERROR   26.0s J1 | DistributedSpellCheckComponentTest.testDistribSearch\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > Throwable #1: org.apache.solr.common.SolrException: org.apache.solr.client.solrj.SolrServerException: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([F57E2420CEBDC955:7498AA38B9E2A969]:0)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:488)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:251)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:90)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:312)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase.queryServer(BaseDistributedSearchTestCase.java:370)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase.query(BaseDistributedSearchTestCase.java:389)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.solr.handler.component.DistributedSpellCheckComponentTest.doTest(DistributedSpellCheckComponentTest.java:137)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:679)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat java.lang.reflect.Method.invoke(Method.java:597)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1766)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$1000(RandomizedRunner.java:141)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:728)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:789)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:803)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:20)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.LuceneTestCase$SubclassSetupTeardownRule$1.evaluate(LuceneTestCase.java:729)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.LuceneTestCase$InternalSetupTeardownRule$1.evaluate(LuceneTestCase.java:651)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:22)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.LuceneTestCase$TestResultInterceptorRule$1.evaluate(LuceneTestCase.java:574)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:51)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.LuceneTestCase$RememberThreadRule$1.evaluate(LuceneTestCase.java:624)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:735)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:141)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3$1.run(RandomizedRunner.java:586)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:605)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:641)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:652)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:20)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:51)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:21)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:22)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:533)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$400(RandomizedRunner.java:141)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:479)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > \nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> ASYNC  NEW_CORE C0 name= org.apache.solr.core.SolrCore@47631bc9\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> 25777 T498 C0 oasc.SolrException.log SEVERE org.apache.solr.common.SolrException: org.apache.solr.client.solrj.SolrServerException: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:298)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:1540)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:433)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:256)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:412)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.Server.handle(Server.java:351)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.lang.Thread.run(Thread.java:619)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \tCaused by: org.apache.solr.client.solrj.SolrServerException: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:278)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.handler.component.HttpShardHandler$1.call(HttpShardHandler.java:158)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.handler.component.HttpShardHandler$1.call(HttpShardHandler.java:123)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\t... 1 more\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \tCaused by: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.common.util.JavaBinCodec.unmarshal(JavaBinCodec.java:109)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.BinaryResponseParser.processResponse(BinaryResponseParser.java:41)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:468)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:251)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:251)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\t... 10 more\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> 25780 T498 C0 oasc.SolrException.log SEVERE null:org.apache.solr.common.SolrException: org.apache.solr.client.solrj.SolrServerException: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:298)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:1540)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:433)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:256)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:412)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.Server.handle(Server.java:351)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.lang.Thread.run(Thread.java:619)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \tCaused by: org.apache.solr.client.solrj.SolrServerException: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:278)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.handler.component.HttpShardHandler$1.call(HttpShardHandler.java:158)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.handler.component.HttpShardHandler$1.call(HttpShardHandler.java:123)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\t... 1 more\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \tCaused by: java.lang.RuntimeException: Invalid version (expected 2, but 60) or the data in not in 'javabin' format\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.common.util.JavaBinCodec.unmarshal(JavaBinCodec.java:109)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.BinaryResponseParser.processResponse(BinaryResponseParser.java:41)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:468)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:251)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\tat org.apache.solr.client.solrj.impl.LBHttpSolrServer.request(LBHttpSolrServer.java:251)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\t... 10 more\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \t\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> NOTE: reproduce with: ant test -Dtests.filter=*.DistributedSpellCheckComponentTest -Dtests.filter.method=testDistribSearch -Drt.seed=F57E2420CEBDC955 -Dargs=\"-Dfile.encoding=UTF-8\"\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2>\nbuild\t12-Mar-2012 01:08:44\t   [junit4]    > (@AfterClass output)\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> NOTE: test params are: codec=Lucene40: {end4=PostingsFormat(name=NestedPulsing), end3=Pulsing40(freqCutoff=19 minBlockSize=45 maxBlockSize=113), end2=PostingsFormat(name=NestedPulsing), start1=Lucene40(minBlockSize=50 maxBlockSize=165), end1=Pulsing40(freqCutoff=19 minBlockSize=45 maxBlockSize=113), start4=PostingsFormat(name=Memory doPackFST= true), start2=PostingsFormat(name=Lucene40WithOrds), start3=MockVariableIntBlock(baseBlockSize=78), gram2=PostingsFormat(name=MockRandom), word=Pulsing40(freqCutoff=19 minBlockSize=45 maxBlockSize=113), gram1=Pulsing40(freqCutoff=19 minBlockSize=45 maxBlockSize=113), gram4=Lucene40(minBlockSize=50 maxBlockSize=165), gram3=MockFixedIntBlock(blockSize=1708)}, sim=DefaultSimilarity, locale=hr, timezone=Asia/Dili\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> NOTE: all tests run in this JVM:\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> [TestDefaultSimilarityFactory, TestDefaultSimilarityFactory, SpellCheckCollatorTest, SpellCheckCollatorTest, OutputWriterTest, OutputWriterTest, UUIDFieldTest, UUIDFieldTest, TestQueryUtils, TestQueryUtils, TestSwedishLightStemFilterFactory, TestSwedishLightStemFilterFactory, TestReplicationHandler, TestReplicationHandler, TestWordDelimiterFilterFactory, TestWordDelimiterFilterFactory, SOLR749Test, SOLR749Test, IndexSchemaRuntimeFieldTest, IndexSchemaRuntimeFieldTest, TestFinnishLightStemFilterFactory, TestFinnishLightStemFilterFactory, TestHyphenationCompoundWordTokenFilterFactory, TestHyphenationCompoundWordTokenFilterFactory, TestGermanStemFilterFactory, TestGermanStemFilterFactory, FieldMutatingUpdateProcessorTest, FieldMutatingUpdateProcessorTest, MinimalSchemaTest, MinimalSchemaTest, TestKeywordMarkerFilterFactory, TestKeywordMarkerFilterFactory, TestArbitraryIndexDir, TestArbitraryIndexDir, TestChineseTokenizerFactory, TestChineseTokenizerFactory, DistributedTermsComponentTest, DistributedTermsComponentTest, TestBadConfig, TestBadConfig, DistanceFunctionTest, DistanceFunctionTest, TestLMJelinekMercerSimilarityFactory, TestLMJelinekMercerSimilarityFactory, TestSynonymFilterFactory, TestSynonymFilterFactory, CommonGramsQueryFilterFactoryTest, CommonGramsQueryFilterFactoryTest, TestJoin, TestJoin, SpatialFilterTest, SpatialFilterTest, SortByFunctionTest, SortByFunctionTest, ShowFileRequestHandlerTest, ShowFileRequestHandlerTest, ResourceLoaderTest, ResourceLoaderTest, TestGroupingSearch, TestGroupingSearch, TestRussianLightStemFilterFactory, TestRussianLightStemFilterFactory, QueryElevationComponentTest, QueryElevationComponentTest, TestChineseFilterFactory, TestChineseFilterFactory, TestConfig, TestConfig, TestPatternReplaceCharFilterFactory, TestPatternReplaceCharFilterFactory, SolrPluginUtilsTest, SolrPluginUtilsTest, JSONWriterTest, JSONWriterTest, TestSolrDeletionPolicy2, TestSolrDeletionPolicy2, TestJmxIntegration, TestJmxIntegration, SuggesterFSTTest, SuggesterFSTTest, TestItalianLightStemFilterFactory, TestItalianLightStemFilterFactory, HighlighterConfigTest, HighlighterConfigTest, TestUtils, TestUtils, UpdateRequestProcessorFactoryTest, UpdateRequestProcessorFactoryTest, BasicFunctionalityTest, BasicFunctionalityTest, NotRequiredUniqueKeyTest, NotRequiredUniqueKeyTest, SolrInfoMBeanTest, SolrInfoMBeanTest, TestStandardFactories, TestStandardFactories, TestKuromojiBaseFormFilterFactory, TestKuromojiBaseFormFilterFactory, TestLFUCache, TestLFUCache, SnowballPorterFilterFactoryTest, SnowballPorterFilterFactoryTest, TestPatternTokenizerFactory, TestPatternTokenizerFactory, EchoParamsTest, EchoParamsTest, SolrRequestParserTest, SolrRequestParserTest, SuggesterWFSTTest, SuggesterWFSTTest, TestSearchPerf, TestSearchPerf, DateMathParserTest, DateMathParserTest, TestQuerySenderListener, TestQuerySenderListener, DistributedSpellCheckComponentTest, DistributedSpellCheckComponentTest]\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> NOTE: Linux 2.6.32-38-server amd64/Sun Microsystems Inc. 1.6.0_20 (64-bit)/cpus=4,threads=1,free=34266272,total=263847936\nbuild\t12-Mar-2012 01:08:44\t   [junit4]   2> \nbuild\t12-Mar-2012 01:08:44\t   [junit4] Tests run:   1, Failures:   0, Errors:   1, Skipped:   0, Time: 25.99s <<< FAILURES!\n\n "
        },
        {
            "author": "Dawid Weiss",
            "id": "comment-13233397",
            "date": "2012-03-20T13:24:34+0000",
            "content": "This is the same issue. "
        },
        {
            "author": "Markus Jelsma",
            "id": "comment-13233423",
            "date": "2012-03-20T14:10:44+0000",
            "content": "In SOLR-3258 i included a zkdump file while this issue was occurring. The problem vanished after removing the Zookeeper data directory and restarting. So i hope someone can find useful information in the dump file. "
        },
        {
            "author": "Mark Miller",
            "id": "comment-13233431",
            "date": "2012-03-20T14:21:39+0000",
            "content": "Sorry - missed these issues going by - been busy with other things for a bit.\n\nYeah, I've seen this before. It happens when an error is returned rather than a java bin response. I've seen it with 404's, sure it happens with other errors at the container level. The '60' is the start of the html (if I remember right) error response.\n\nIt makes debugging a bitch sometimes. \n\nSo for instance, for the ping handler, perhaps it wasn't found, or it errored. For this, it could be an issue during startup or shutdown when a 404 can be returned.\n\nWe should make a new issue for the problem - offhand I don't have a solution though. Adding structure error support to Solr might help.\n\nFor this issue I first need to see if that exception even relates to the failure - there is a good chance it does not. A server is stopped and started in this test, and a query or update at the wrong time can return a 404 or some other non success code. So you are likely to see this exception even if the test passes. "
        },
        {
            "author": "Mark Miller",
            "id": "comment-13233441",
            "date": "2012-03-20T14:29:52+0000",
            "content": "Also, as this and a couple other classes are expected to throw various nasty exceptions, I had them all ignored in the base class - but yonik unignored at some point when he was debugging. I think we should turn that ignore back on - the ant test output is a mess otherwise. "
        },
        {
            "author": "Markus Jelsma",
            "id": "comment-13233455",
            "date": "2012-03-20T14:44:41+0000",
            "content": "In my case i had a typo in a solr.xml file on one node: shard_a=\"shard1\" was specified for one of three cores. Fixing and removing ZK data directories solved the issue. "
        }
    ]
}